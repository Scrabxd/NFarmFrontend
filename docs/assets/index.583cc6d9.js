var wN=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Tme=wN((tn,rn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function cD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=Symbol.for("react.element"),SN=Symbol.for("react.portal"),_N=Symbol.for("react.fragment"),AN=Symbol.for("react.strict_mode"),MN=Symbol.for("react.profiler"),EN=Symbol.for("react.provider"),CN=Symbol.for("react.context"),TN=Symbol.for("react.forward_ref"),PN=Symbol.for("react.suspense"),DN=Symbol.for("react.memo"),LN=Symbol.for("react.lazy"),U2=Symbol.iterator;function $N(e){return e===null||typeof e!="object"?null:(e=U2&&e[U2]||e["@@iterator"],typeof e=="function"?e:null)}var uD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dD=Object.assign,hD={};function Yu(e,t,r){this.props=e,this.context=t,this.refs=hD,this.updater=r||uD}Yu.prototype.isReactComponent={};Yu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fD(){}fD.prototype=Yu.prototype;function Qw(e,t,r){this.props=e,this.context=t,this.refs=hD,this.updater=r||uD}var Zw=Qw.prototype=new fD;Zw.constructor=Qw;dD(Zw,Yu.prototype);Zw.isPureReactComponent=!0;var H2=Array.isArray,pD=Object.prototype.hasOwnProperty,Jw={current:null},mD={key:!0,ref:!0,__self:!0,__source:!0};function gD(e,t,r){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)pD.call(t,i)&&!mD.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:wf,type:e,key:s,ref:o,props:n,_owner:Jw.current}}function IN(e,t){return{$$typeof:wf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eS(e){return typeof e=="object"&&e!==null&&e.$$typeof===wf}function RN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var V2=/\/+/g;function _0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RN(""+e.key):t.toString(36)}function Pm(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wf:case SN:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+_0(o,0):i,H2(n)?(r="",e!=null&&(r=e.replace(V2,"$&/")+"/"),Pm(n,t,r,"",function(c){return c})):n!=null&&(eS(n)&&(n=IN(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(V2,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",H2(e))for(var a=0;a<e.length;a++){s=e[a];var l=i+_0(s,a);o+=Pm(s,t,r,l,n)}else if(l=$N(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=i+_0(s,a++),o+=Pm(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Kf(e,t,r){if(e==null)return e;var i=[],n=0;return Pm(e,i,"","",function(s){return t.call(r,s,n++)}),i}function kN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ii={current:null},Dm={transition:null},ON={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:Dm,ReactCurrentOwner:Jw};yt.Children={map:Kf,forEach:function(e,t,r){Kf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kf(e,function(){t++}),t},toArray:function(e){return Kf(e,function(t){return t})||[]},only:function(e){if(!eS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yt.Component=Yu;yt.Fragment=_N;yt.Profiler=MN;yt.PureComponent=Qw;yt.StrictMode=AN;yt.Suspense=PN;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ON;yt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=dD({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Jw.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)pD.call(t,l)&&!mD.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:wf,type:e.type,key:n,ref:s,props:i,_owner:o}};yt.createContext=function(e){return e={$$typeof:CN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:EN,_context:e},e.Consumer=e};yt.createElement=gD;yt.createFactory=function(e){var t=gD.bind(null,e);return t.type=e,t};yt.createRef=function(){return{current:null}};yt.forwardRef=function(e){return{$$typeof:TN,render:e}};yt.isValidElement=eS;yt.lazy=function(e){return{$$typeof:LN,_payload:{_status:-1,_result:e},_init:kN}};yt.memo=function(e,t){return{$$typeof:DN,type:e,compare:t===void 0?null:t}};yt.startTransition=function(e){var t=Dm.transition;Dm.transition={};try{e()}finally{Dm.transition=t}};yt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};yt.useCallback=function(e,t){return Ii.current.useCallback(e,t)};yt.useContext=function(e){return Ii.current.useContext(e)};yt.useDebugValue=function(){};yt.useDeferredValue=function(e){return Ii.current.useDeferredValue(e)};yt.useEffect=function(e,t){return Ii.current.useEffect(e,t)};yt.useId=function(){return Ii.current.useId()};yt.useImperativeHandle=function(e,t,r){return Ii.current.useImperativeHandle(e,t,r)};yt.useInsertionEffect=function(e,t){return Ii.current.useInsertionEffect(e,t)};yt.useLayoutEffect=function(e,t){return Ii.current.useLayoutEffect(e,t)};yt.useMemo=function(e,t){return Ii.current.useMemo(e,t)};yt.useReducer=function(e,t,r){return Ii.current.useReducer(e,t,r)};yt.useRef=function(e){return Ii.current.useRef(e)};yt.useState=function(e){return Ii.current.useState(e)};yt.useSyncExternalStore=function(e,t,r){return Ii.current.useSyncExternalStore(e,t,r)};yt.useTransition=function(){return Ii.current.useTransition()};yt.version="18.2.0";(function(e){e.exports=yt})(I);const me=cD(I.exports);var K1={},tS={exports:{}},an={},vD={exports:{}},yD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,O){var k=L.length;L.push(O);e:for(;0<k;){var j=k-1>>>1,F=L[j];if(0<n(F,O))L[j]=O,L[k]=F,k=j;else break e}}function r(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var O=L[0],k=L.pop();if(k!==O){L[0]=k;e:for(var j=0,F=L.length,Y=F>>>1;j<Y;){var X=2*(j+1)-1,Z=L[X],U=X+1,ne=L[U];if(0>n(Z,k))U<F&&0>n(ne,Z)?(L[j]=ne,L[U]=k,j=U):(L[j]=Z,L[X]=k,j=X);else if(U<F&&0>n(ne,k))L[j]=ne,L[U]=k,j=U;else break e}}return O}function n(L,O){var k=L.sortIndex-O.sortIndex;return k!==0?k:L.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var O=r(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=L)i(c),O.sortIndex=O.expirationTime,t(l,O);else break;O=r(c)}}function x(L){if(p=!1,b(L),!m)if(r(l)!==null)m=!0,V(A);else{var O=r(c);O!==null&&H(x,O.startTime-L)}}function A(L,O){m=!1,p&&(p=!1,v(w),w=-1),f=!0;var k=d;try{for(b(O),u=r(l);u!==null&&(!(u.expirationTime>O)||L&&!E());){var j=u.callback;if(typeof j=="function"){u.callback=null,d=u.priorityLevel;var F=j(u.expirationTime<=O);O=e.unstable_now(),typeof F=="function"?u.callback=F:u===r(l)&&i(l),b(O)}else i(l);u=r(l)}if(u!==null)var Y=!0;else{var X=r(c);X!==null&&H(x,X.startTime-O),Y=!1}return Y}finally{u=null,d=k,f=!1}}var S=!1,_=null,w=-1,M=5,C=-1;function E(){return!(e.unstable_now()-C<M)}function $(){if(_!==null){var L=e.unstable_now();C=L;var O=!0;try{O=_(!0,L)}finally{O?P():(S=!1,_=null)}}else S=!1}var P;if(typeof y=="function")P=function(){y($)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,W=D.port2;D.port1.onmessage=$,P=function(){W.postMessage(null)}}else P=function(){g($,0)};function V(L){_=L,S||(S=!0,P())}function H(L,O){w=g(function(){L(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,V(A))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(L){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var k=d;d=O;try{return L()}finally{d=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,O){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var k=d;d=L;try{return O()}finally{d=k}},e.unstable_scheduleCallback=function(L,O,k){var j=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?j+k:j):k=j,L){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=k+F,L={id:h++,callback:O,priorityLevel:L,startTime:k,expirationTime:F,sortIndex:-1},k>j?(L.sortIndex=k,t(c,L),r(l)===null&&L===r(c)&&(p?(v(w),w=-1):p=!0,H(x,k-j))):(L.sortIndex=F,t(l,L),m||f||(m=!0,V(A))),L},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(L){var O=d;return function(){var k=d;d=O;try{return L.apply(this,arguments)}finally{d=k}}}})(yD);(function(e){e.exports=yD})(vD);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xD=I.exports,sn=vD.exports;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bD=new Set,Dh={};function Gl(e,t){Iu(e,t),Iu(e+"Capture",t)}function Iu(e,t){for(Dh[e]=t,e=0;e<t.length;e++)bD.add(t[e])}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X1=Object.prototype.hasOwnProperty,BN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W2={},j2={};function zN(e){return X1.call(j2,e)?!0:X1.call(W2,e)?!1:BN.test(e)?j2[e]=!0:(W2[e]=!0,!1)}function NN(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function FN(e,t,r,i){if(t===null||typeof t>"u"||NN(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ri(e,t,r,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jr[e]=new Ri(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jr[t]=new Ri(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jr[e]=new Ri(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jr[e]=new Ri(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jr[e]=new Ri(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jr[e]=new Ri(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jr[e]=new Ri(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jr[e]=new Ri(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jr[e]=new Ri(e,5,!1,e.toLowerCase(),null,!1,!1)});var rS=/[\-:]([a-z])/g;function iS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rS,iS);Jr[t]=new Ri(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rS,iS);Jr[t]=new Ri(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rS,iS);Jr[t]=new Ri(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jr[e]=new Ri(e,1,!1,e.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new Ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jr[e]=new Ri(e,1,!1,e.toLowerCase(),null,!0,!0)});function nS(e,t,r,i){var n=Jr.hasOwnProperty(t)?Jr[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(FN(t,r,n,i)&&(r=null),i||n===null?zN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var To=xD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xf=Symbol.for("react.element"),jc=Symbol.for("react.portal"),Gc=Symbol.for("react.fragment"),sS=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),wD=Symbol.for("react.provider"),SD=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),Q1=Symbol.for("react.suspense"),Z1=Symbol.for("react.suspense_list"),aS=Symbol.for("react.memo"),qo=Symbol.for("react.lazy"),_D=Symbol.for("react.offscreen"),G2=Symbol.iterator;function yd(e){return e===null||typeof e!="object"?null:(e=G2&&e[G2]||e["@@iterator"],typeof e=="function"?e:null)}var sr=Object.assign,A0;function Yd(e){if(A0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);A0=t&&t[1]||""}return`
`+A0+e}var M0=!1;function E0(e,t){if(!e||M0)return"";M0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{M0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Yd(e):""}function UN(e){switch(e.tag){case 5:return Yd(e.type);case 16:return Yd("Lazy");case 13:return Yd("Suspense");case 19:return Yd("SuspenseList");case 0:case 2:case 15:return e=E0(e.type,!1),e;case 11:return e=E0(e.type.render,!1),e;case 1:return e=E0(e.type,!0),e;default:return""}}function J1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gc:return"Fragment";case jc:return"Portal";case q1:return"Profiler";case sS:return"StrictMode";case Q1:return"Suspense";case Z1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case SD:return(e.displayName||"Context")+".Consumer";case wD:return(e._context.displayName||"Context")+".Provider";case oS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case aS:return t=e.displayName||null,t!==null?t:J1(e.type)||"Memo";case qo:t=e._payload,e=e._init;try{return J1(e(t))}catch{}}return null}function HN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J1(t);case 8:return t===sS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ca(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function AD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VN(e){var t=AD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qf(e){e._valueTracker||(e._valueTracker=VN(e))}function MD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=AD(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function og(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ex(e,t){var r=t.checked;return sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Y2(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Ca(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ED(e,t){t=t.checked,t!=null&&nS(e,"checked",t,!1)}function tx(e,t){ED(e,t);var r=Ca(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rx(e,t.type,r):t.hasOwnProperty("defaultValue")&&rx(e,t.type,Ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function K2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function rx(e,t,r){(t!=="number"||og(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Kd=Array.isArray;function gu(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Ca(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function ix(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function X2(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ve(92));if(Kd(r)){if(1<r.length)throw Error(ve(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ca(r)}}function CD(e,t){var r=Ca(t.value),i=Ca(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function q2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function TD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?TD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qf,PD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qf=Qf||document.createElement("div"),Qf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var uh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WN=["Webkit","ms","Moz","O"];Object.keys(uh).forEach(function(e){WN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uh[t]=uh[e]})});function DD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||uh.hasOwnProperty(e)&&uh[e]?(""+t).trim():t+"px"}function LD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=DD(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var jN=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sx(e,t){if(t){if(jN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function ox(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ax=null;function lS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lx=null,vu=null,yu=null;function Q2(e){if(e=Af(e)){if(typeof lx!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=Sv(t),lx(e.stateNode,e.type,t))}}function $D(e){vu?yu?yu.push(e):yu=[e]:vu=e}function ID(){if(vu){var e=vu,t=yu;if(yu=vu=null,Q2(e),t)for(e=0;e<t.length;e++)Q2(t[e])}}function RD(e,t){return e(t)}function kD(){}var C0=!1;function OD(e,t,r){if(C0)return e(t,r);C0=!0;try{return RD(e,t,r)}finally{C0=!1,(vu!==null||yu!==null)&&(kD(),ID())}}function $h(e,t){var r=e.stateNode;if(r===null)return null;var i=Sv(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ve(231,t,typeof r));return r}var cx=!1;if(mo)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){cx=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{cx=!1}function GN(e,t,r,i,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var dh=!1,ag=null,lg=!1,ux=null,YN={onError:function(e){dh=!0,ag=e}};function KN(e,t,r,i,n,s,o,a,l){dh=!1,ag=null,GN.apply(YN,arguments)}function XN(e,t,r,i,n,s,o,a,l){if(KN.apply(this,arguments),dh){if(dh){var c=ag;dh=!1,ag=null}else throw Error(ve(198));lg||(lg=!0,ux=c)}}function Yl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function BD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Z2(e){if(Yl(e)!==e)throw Error(ve(188))}function qN(e){var t=e.alternate;if(!t){if(t=Yl(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return Z2(n),e;if(s===i)return Z2(n),t;s=s.sibling}throw Error(ve(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(ve(189))}}if(r.alternate!==i)throw Error(ve(190))}if(r.tag!==3)throw Error(ve(188));return r.stateNode.current===r?e:t}function zD(e){return e=qN(e),e!==null?ND(e):null}function ND(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ND(e);if(t!==null)return t;e=e.sibling}return null}var FD=sn.unstable_scheduleCallback,J2=sn.unstable_cancelCallback,QN=sn.unstable_shouldYield,ZN=sn.unstable_requestPaint,vr=sn.unstable_now,JN=sn.unstable_getCurrentPriorityLevel,cS=sn.unstable_ImmediatePriority,UD=sn.unstable_UserBlockingPriority,cg=sn.unstable_NormalPriority,e5=sn.unstable_LowPriority,HD=sn.unstable_IdlePriority,yv=null,Ps=null;function t5(e){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(yv,e,void 0,(e.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:n5,r5=Math.log,i5=Math.LN2;function n5(e){return e>>>=0,e===0?32:31-(r5(e)/i5|0)|0}var Zf=64,Jf=4194304;function Xd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ug(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=Xd(a):(s&=o,s!==0&&(i=Xd(s)))}else o=r&~n,o!==0?i=Xd(o):s!==0&&(i=Xd(s));if(i===0)return 0;if(t!==0&&t!==i&&(t&n)===0&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Qn(t),n=1<<r,i|=e[r],t&=~n;return i}function s5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o5(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Qn(s),a=1<<o,l=n[o];l===-1?((a&r)===0||(a&i)!==0)&&(n[o]=s5(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function dx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function VD(){var e=Zf;return Zf<<=1,(Zf&4194240)===0&&(Zf=64),e}function T0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qn(t),e[t]=r}function a5(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Qn(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function uS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Qn(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var It=0;function WD(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var jD,dS,GD,YD,KD,hx=!1,ep=[],ga=null,va=null,ya=null,Ih=new Map,Rh=new Map,ea=[],l5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eA(e,t){switch(e){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Ih.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function bd(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Af(t),t!==null&&dS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function c5(e,t,r,i,n){switch(t){case"focusin":return ga=bd(ga,e,t,r,i,n),!0;case"dragenter":return va=bd(va,e,t,r,i,n),!0;case"mouseover":return ya=bd(ya,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return Ih.set(s,bd(Ih.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Rh.set(s,bd(Rh.get(s)||null,e,t,r,i,n)),!0}return!1}function XD(e){var t=al(e.target);if(t!==null){var r=Yl(t);if(r!==null){if(t=r.tag,t===13){if(t=BD(r),t!==null){e.blockedOn=t,KD(e.priority,function(){GD(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);ax=i,r.target.dispatchEvent(i),ax=null}else return t=Af(r),t!==null&&dS(t),e.blockedOn=r,!1;t.shift()}return!0}function tA(e,t,r){Lm(e)&&r.delete(t)}function u5(){hx=!1,ga!==null&&Lm(ga)&&(ga=null),va!==null&&Lm(va)&&(va=null),ya!==null&&Lm(ya)&&(ya=null),Ih.forEach(tA),Rh.forEach(tA)}function wd(e,t){e.blockedOn===t&&(e.blockedOn=null,hx||(hx=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,u5)))}function kh(e){function t(n){return wd(n,e)}if(0<ep.length){wd(ep[0],e);for(var r=1;r<ep.length;r++){var i=ep[r];i.blockedOn===e&&(i.blockedOn=null)}}for(ga!==null&&wd(ga,e),va!==null&&wd(va,e),ya!==null&&wd(ya,e),Ih.forEach(t),Rh.forEach(t),r=0;r<ea.length;r++)i=ea[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<ea.length&&(r=ea[0],r.blockedOn===null);)XD(r),r.blockedOn===null&&ea.shift()}var xu=To.ReactCurrentBatchConfig,dg=!0;function d5(e,t,r,i){var n=It,s=xu.transition;xu.transition=null;try{It=1,hS(e,t,r,i)}finally{It=n,xu.transition=s}}function h5(e,t,r,i){var n=It,s=xu.transition;xu.transition=null;try{It=4,hS(e,t,r,i)}finally{It=n,xu.transition=s}}function hS(e,t,r,i){if(dg){var n=fx(e,t,r,i);if(n===null)z0(e,t,i,hg,r),eA(e,i);else if(c5(n,e,t,r,i))i.stopPropagation();else if(eA(e,i),t&4&&-1<l5.indexOf(e)){for(;n!==null;){var s=Af(n);if(s!==null&&jD(s),s=fx(e,t,r,i),s===null&&z0(e,t,i,hg,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else z0(e,t,i,null,r)}}var hg=null;function fx(e,t,r,i){if(hg=null,e=lS(i),e=al(e),e!==null)if(t=Yl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=BD(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hg=e,null}function qD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JN()){case cS:return 1;case UD:return 4;case cg:case e5:return 16;case HD:return 536870912;default:return 16}default:return 16}}var na=null,fS=null,$m=null;function QD(){if($m)return $m;var e,t=fS,r=t.length,i,n="value"in na?na.value:na.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===n[s-i];i++);return $m=n.slice(e,1<i?1-i:void 0)}function Im(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tp(){return!0}function rA(){return!1}function ln(e){function t(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tp:rA,this.isPropagationStopped=rA,this}return sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tp)},persist:function(){},isPersistent:tp}),t}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pS=ln(Ku),_f=sr({},Ku,{view:0,detail:0}),f5=ln(_f),P0,D0,Sd,xv=sr({},_f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sd&&(Sd&&e.type==="mousemove"?(P0=e.screenX-Sd.screenX,D0=e.screenY-Sd.screenY):D0=P0=0,Sd=e),P0)},movementY:function(e){return"movementY"in e?e.movementY:D0}}),iA=ln(xv),p5=sr({},xv,{dataTransfer:0}),m5=ln(p5),g5=sr({},_f,{relatedTarget:0}),L0=ln(g5),v5=sr({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),y5=ln(v5),x5=sr({},Ku,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),b5=ln(x5),w5=sr({},Ku,{data:0}),nA=ln(w5),S5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A5[e])?!!t[e]:!1}function mS(){return M5}var E5=sr({},_f,{key:function(e){if(e.key){var t=S5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Im(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mS,charCode:function(e){return e.type==="keypress"?Im(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Im(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),C5=ln(E5),T5=sr({},xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sA=ln(T5),P5=sr({},_f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mS}),D5=ln(P5),L5=sr({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),$5=ln(L5),I5=sr({},xv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),R5=ln(I5),k5=[9,13,27,32],gS=mo&&"CompositionEvent"in window,hh=null;mo&&"documentMode"in document&&(hh=document.documentMode);var O5=mo&&"TextEvent"in window&&!hh,ZD=mo&&(!gS||hh&&8<hh&&11>=hh),oA=String.fromCharCode(32),aA=!1;function JD(e,t){switch(e){case"keyup":return k5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yc=!1;function B5(e,t){switch(e){case"compositionend":return eL(t);case"keypress":return t.which!==32?null:(aA=!0,oA);case"textInput":return e=t.data,e===oA&&aA?null:e;default:return null}}function z5(e,t){if(Yc)return e==="compositionend"||!gS&&JD(e,t)?(e=QD(),$m=fS=na=null,Yc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ZD&&t.locale!=="ko"?null:t.data;default:return null}}var N5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!N5[e.type]:t==="textarea"}function tL(e,t,r,i){$D(i),t=fg(t,"onChange"),0<t.length&&(r=new pS("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var fh=null,Oh=null;function F5(e){hL(e,0)}function bv(e){var t=qc(e);if(MD(t))return e}function U5(e,t){if(e==="change")return t}var rL=!1;if(mo){var $0;if(mo){var I0="oninput"in document;if(!I0){var cA=document.createElement("div");cA.setAttribute("oninput","return;"),I0=typeof cA.oninput=="function"}$0=I0}else $0=!1;rL=$0&&(!document.documentMode||9<document.documentMode)}function uA(){fh&&(fh.detachEvent("onpropertychange",iL),Oh=fh=null)}function iL(e){if(e.propertyName==="value"&&bv(Oh)){var t=[];tL(t,Oh,e,lS(e)),OD(F5,t)}}function H5(e,t,r){e==="focusin"?(uA(),fh=t,Oh=r,fh.attachEvent("onpropertychange",iL)):e==="focusout"&&uA()}function V5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bv(Oh)}function W5(e,t){if(e==="click")return bv(t)}function j5(e,t){if(e==="input"||e==="change")return bv(t)}function G5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var es=typeof Object.is=="function"?Object.is:G5;function Bh(e,t){if(es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!X1.call(t,n)||!es(e[n],t[n]))return!1}return!0}function dA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hA(e,t){var r=dA(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dA(r)}}function nL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sL(){for(var e=window,t=og();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=og(e.document)}return t}function vS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Y5(e){var t=sL(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&nL(r.ownerDocument.documentElement,r)){if(i!==null&&vS(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=hA(r,s);var o=hA(r,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K5=mo&&"documentMode"in document&&11>=document.documentMode,Kc=null,px=null,ph=null,mx=!1;function fA(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mx||Kc==null||Kc!==og(i)||(i=Kc,"selectionStart"in i&&vS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ph&&Bh(ph,i)||(ph=i,i=fg(px,"onSelect"),0<i.length&&(t=new pS("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Kc)))}function rp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xc={animationend:rp("Animation","AnimationEnd"),animationiteration:rp("Animation","AnimationIteration"),animationstart:rp("Animation","AnimationStart"),transitionend:rp("Transition","TransitionEnd")},R0={},oL={};mo&&(oL=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function wv(e){if(R0[e])return R0[e];if(!Xc[e])return e;var t=Xc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in oL)return R0[e]=t[r];return e}var aL=wv("animationend"),lL=wv("animationiteration"),cL=wv("animationstart"),uL=wv("transitionend"),dL=new Map,pA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(e,t){dL.set(e,t),Gl(t,[e])}for(var k0=0;k0<pA.length;k0++){var O0=pA[k0],X5=O0.toLowerCase(),q5=O0[0].toUpperCase()+O0.slice(1);Ba(X5,"on"+q5)}Ba(aL,"onAnimationEnd");Ba(lL,"onAnimationIteration");Ba(cL,"onAnimationStart");Ba("dblclick","onDoubleClick");Ba("focusin","onFocus");Ba("focusout","onBlur");Ba(uL,"onTransitionEnd");Iu("onMouseEnter",["mouseout","mouseover"]);Iu("onMouseLeave",["mouseout","mouseover"]);Iu("onPointerEnter",["pointerout","pointerover"]);Iu("onPointerLeave",["pointerout","pointerover"]);Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q5=new Set("cancel close invalid load scroll toggle".split(" ").concat(qd));function mA(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,XN(i,t,void 0,e),e.currentTarget=null}function hL(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;mA(n,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;mA(n,a,c),s=l}}}if(lg)throw e=ux,lg=!1,ux=null,e}function Wt(e,t){var r=t[bx];r===void 0&&(r=t[bx]=new Set);var i=e+"__bubble";r.has(i)||(fL(t,e,2,!1),r.add(i))}function B0(e,t,r){var i=0;t&&(i|=4),fL(r,e,i,t)}var ip="_reactListening"+Math.random().toString(36).slice(2);function zh(e){if(!e[ip]){e[ip]=!0,bD.forEach(function(r){r!=="selectionchange"&&(Q5.has(r)||B0(r,!1,e),B0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ip]||(t[ip]=!0,B0("selectionchange",!1,t))}}function fL(e,t,r,i){switch(qD(t)){case 1:var n=d5;break;case 4:n=h5;break;default:n=hS}r=n.bind(null,t,r,e),n=void 0,!cx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function z0(e,t,r,i,n){var s=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=al(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}OD(function(){var c=s,h=lS(r),u=[];e:{var d=dL.get(e);if(d!==void 0){var f=pS,m=e;switch(e){case"keypress":if(Im(r)===0)break e;case"keydown":case"keyup":f=C5;break;case"focusin":m="focus",f=L0;break;case"focusout":m="blur",f=L0;break;case"beforeblur":case"afterblur":f=L0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=iA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=m5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=D5;break;case aL:case lL:case cL:f=y5;break;case uL:f=$5;break;case"scroll":f=f5;break;case"wheel":f=R5;break;case"copy":case"cut":case"paste":f=b5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=sA}var p=(t&4)!==0,g=!p&&e==="scroll",v=p?d!==null?d+"Capture":null:d;p=[];for(var y=c,b;y!==null;){b=y;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,v!==null&&(x=$h(y,v),x!=null&&p.push(Nh(y,x,b)))),g)break;y=y.return}0<p.length&&(d=new f(d,m,null,r,h),u.push({event:d,listeners:p}))}}if((t&7)===0){e:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&r!==ax&&(m=r.relatedTarget||r.fromElement)&&(al(m)||m[go]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=c,m=m?al(m):null,m!==null&&(g=Yl(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(p=iA,x="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=sA,x="onPointerLeave",v="onPointerEnter",y="pointer"),g=f==null?d:qc(f),b=m==null?d:qc(m),d=new p(x,y+"leave",f,r,h),d.target=g,d.relatedTarget=b,x=null,al(h)===c&&(p=new p(v,y+"enter",m,r,h),p.target=b,p.relatedTarget=g,x=p),g=x,f&&m)t:{for(p=f,v=m,y=0,b=p;b;b=ic(b))y++;for(b=0,x=v;x;x=ic(x))b++;for(;0<y-b;)p=ic(p),y--;for(;0<b-y;)v=ic(v),b--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=ic(p),v=ic(v)}p=null}else p=null;f!==null&&gA(u,d,f,p,!1),m!==null&&g!==null&&gA(u,g,m,p,!0)}}e:{if(d=c?qc(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var A=U5;else if(lA(d))if(rL)A=j5;else{A=V5;var S=H5}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=W5);if(A&&(A=A(e,c))){tL(u,A,r,h);break e}S&&S(e,d,c),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&rx(d,"number",d.value)}switch(S=c?qc(c):window,e){case"focusin":(lA(S)||S.contentEditable==="true")&&(Kc=S,px=c,ph=null);break;case"focusout":ph=px=Kc=null;break;case"mousedown":mx=!0;break;case"contextmenu":case"mouseup":case"dragend":mx=!1,fA(u,r,h);break;case"selectionchange":if(K5)break;case"keydown":case"keyup":fA(u,r,h)}var _;if(gS)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Yc?JD(e,r)&&(w="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(ZD&&r.locale!=="ko"&&(Yc||w!=="onCompositionStart"?w==="onCompositionEnd"&&Yc&&(_=QD()):(na=h,fS="value"in na?na.value:na.textContent,Yc=!0)),S=fg(c,w),0<S.length&&(w=new nA(w,e,null,r,h),u.push({event:w,listeners:S}),_?w.data=_:(_=eL(r),_!==null&&(w.data=_)))),(_=O5?B5(e,r):z5(e,r))&&(c=fg(c,"onBeforeInput"),0<c.length&&(h=new nA("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:c}),h.data=_))}hL(u,t)})}function Nh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function fg(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=$h(e,r),s!=null&&i.unshift(Nh(e,s,n)),s=$h(e,t),s!=null&&i.push(Nh(e,s,n))),e=e.return}return i}function ic(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gA(e,t,r,i,n){for(var s=t._reactName,o=[];r!==null&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,n?(l=$h(r,s),l!=null&&o.unshift(Nh(r,l,a))):n||(l=$h(r,s),l!=null&&o.push(Nh(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Z5=/\r\n?/g,J5=/\u0000|\uFFFD/g;function vA(e){return(typeof e=="string"?e:""+e).replace(Z5,`
`).replace(J5,"")}function np(e,t,r){if(t=vA(t),vA(e)!==t&&r)throw Error(ve(425))}function pg(){}var gx=null,vx=null;function yx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xx=typeof setTimeout=="function"?setTimeout:void 0,eF=typeof clearTimeout=="function"?clearTimeout:void 0,yA=typeof Promise=="function"?Promise:void 0,tF=typeof queueMicrotask=="function"?queueMicrotask:typeof yA<"u"?function(e){return yA.resolve(null).then(e).catch(rF)}:xx;function rF(e){setTimeout(function(){throw e})}function N0(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),kh(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);kh(t)}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),ys="__reactFiber$"+Xu,Fh="__reactProps$"+Xu,go="__reactContainer$"+Xu,bx="__reactEvents$"+Xu,iF="__reactListeners$"+Xu,nF="__reactHandles$"+Xu;function al(e){var t=e[ys];if(t)return t;for(var r=e.parentNode;r;){if(t=r[go]||r[ys]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xA(e);e!==null;){if(r=e[ys])return r;e=xA(e)}return t}e=r,r=e.parentNode}return null}function Af(e){return e=e[ys]||e[go],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function Sv(e){return e[Fh]||null}var wx=[],Qc=-1;function za(e){return{current:e}}function qt(e){0>Qc||(e.current=wx[Qc],wx[Qc]=null,Qc--)}function Vt(e,t){Qc++,wx[Qc]=e.current,e.current=t}var Ta={},mi=za(Ta),Vi=za(!1),Pl=Ta;function Ru(e,t){var r=e.type.contextTypes;if(!r)return Ta;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Wi(e){return e=e.childContextTypes,e!=null}function mg(){qt(Vi),qt(mi)}function bA(e,t,r){if(mi.current!==Ta)throw Error(ve(168));Vt(mi,t),Vt(Vi,r)}function pL(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(ve(108,HN(e)||"Unknown",n));return sr({},r,i)}function gg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Pl=mi.current,Vt(mi,e),Vt(Vi,Vi.current),!0}function wA(e,t,r){var i=e.stateNode;if(!i)throw Error(ve(169));r?(e=pL(e,t,Pl),i.__reactInternalMemoizedMergedChildContext=e,qt(Vi),qt(mi),Vt(mi,e)):qt(Vi),Vt(Vi,r)}var no=null,_v=!1,F0=!1;function mL(e){no===null?no=[e]:no.push(e)}function sF(e){_v=!0,mL(e)}function Na(){if(!F0&&no!==null){F0=!0;var e=0,t=It;try{var r=no;for(It=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}no=null,_v=!1}catch(n){throw no!==null&&(no=no.slice(e+1)),FD(cS,Na),n}finally{It=t,F0=!1}}return null}var Zc=[],Jc=0,vg=null,yg=0,xn=[],bn=0,Dl=null,ao=1,lo="";function Za(e,t){Zc[Jc++]=yg,Zc[Jc++]=vg,vg=e,yg=t}function gL(e,t,r){xn[bn++]=ao,xn[bn++]=lo,xn[bn++]=Dl,Dl=e;var i=ao;e=lo;var n=32-Qn(i)-1;i&=~(1<<n),r+=1;var s=32-Qn(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,ao=1<<32-Qn(t)+n|r<<n|i,lo=s+e}else ao=1<<s|r<<n|i,lo=e}function yS(e){e.return!==null&&(Za(e,1),gL(e,1,0))}function xS(e){for(;e===vg;)vg=Zc[--Jc],Zc[Jc]=null,yg=Zc[--Jc],Zc[Jc]=null;for(;e===Dl;)Dl=xn[--bn],xn[bn]=null,lo=xn[--bn],xn[bn]=null,ao=xn[--bn],xn[bn]=null}var nn=null,en=null,er=!1,Gn=null;function vL(e,t){var r=En(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function SA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,en=xa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,en=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Dl!==null?{id:ao,overflow:lo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=En(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,nn=e,en=null,!0):!1;default:return!1}}function Sx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _x(e){if(er){var t=en;if(t){var r=t;if(!SA(e,t)){if(Sx(e))throw Error(ve(418));t=xa(r.nextSibling);var i=nn;t&&SA(e,t)?vL(i,r):(e.flags=e.flags&-4097|2,er=!1,nn=e)}}else{if(Sx(e))throw Error(ve(418));e.flags=e.flags&-4097|2,er=!1,nn=e}}}function _A(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function sp(e){if(e!==nn)return!1;if(!er)return _A(e),er=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yx(e.type,e.memoizedProps)),t&&(t=en)){if(Sx(e))throw yL(),Error(ve(418));for(;t;)vL(e,t),t=xa(t.nextSibling)}if(_A(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){en=xa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}en=null}}else en=nn?xa(e.stateNode.nextSibling):null;return!0}function yL(){for(var e=en;e;)e=xa(e.nextSibling)}function ku(){en=nn=null,er=!1}function bS(e){Gn===null?Gn=[e]:Gn.push(e)}var oF=To.ReactCurrentBatchConfig;function Vn(e,t){if(e&&e.defaultProps){t=sr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var xg=za(null),bg=null,eu=null,wS=null;function SS(){wS=eu=bg=null}function _S(e){var t=xg.current;qt(xg),e._currentValue=t}function Ax(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function bu(e,t){bg=e,wS=eu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Fi=!0),e.firstContext=null)}function Dn(e){var t=e._currentValue;if(wS!==e)if(e={context:e,memoizedValue:t,next:null},eu===null){if(bg===null)throw Error(ve(308));eu=e,bg.dependencies={lanes:0,firstContext:e}}else eu=eu.next=e;return t}var ll=null;function AS(e){ll===null?ll=[e]:ll.push(e)}function xL(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,AS(t)):(r.next=n.next,n.next=r),t.interleaved=r,vo(e,i)}function vo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qo=!1;function MS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ba(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Mt&2)!==0){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,vo(e,r)}return n=i.interleaved,n===null?(t.next=t,AS(i)):(t.next=n.next,n.next=t),i.interleaved=t,vo(e,r)}function Rm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,uS(e,r)}}function AA(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wg(e,t,r,i){var n=e.updateQueue;Qo=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var u=n.baseState;o=0,h=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,p=a;switch(d=t,f=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){u=m.call(f,u,d);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,d=typeof m=="function"?m.call(f,u,d):m,d==null)break e;u=sr({},u,d);break e;case 2:Qo=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=f,l=u):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;d=a,a=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(h===null&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);$l|=o,e.lanes=o,e.memoizedState=u}}function MA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(ve(191,n));n.call(i)}}}var wL=new xD.Component().refs;function Mx(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:sr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Av={isMounted:function(e){return(e=e._reactInternals)?Yl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Mi(),n=Sa(e),s=uo(i,n);s.payload=t,r!=null&&(s.callback=r),t=ba(e,s,n),t!==null&&(Zn(t,e,n,i),Rm(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Mi(),n=Sa(e),s=uo(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=ba(e,s,n),t!==null&&(Zn(t,e,n,i),Rm(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mi(),i=Sa(e),n=uo(r,i);n.tag=2,t!=null&&(n.callback=t),t=ba(e,n,i),t!==null&&(Zn(t,e,i,r),Rm(t,e,i))}};function EA(e,t,r,i,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Bh(r,i)||!Bh(n,s):!0}function SL(e,t,r){var i=!1,n=Ta,s=t.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(n=Wi(t)?Pl:mi.current,i=t.contextTypes,s=(i=i!=null)?Ru(e,n):Ta),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Av,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function CA(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Av.enqueueReplaceState(t,t.state,null)}function Ex(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=wL,MS(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Dn(s):(s=Wi(t)?Pl:mi.current,n.context=Ru(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Mx(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Av.enqueueReplaceState(n,n.state,null),wg(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function _d(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ve(309));var i=r.stateNode}if(!i)throw Error(ve(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;a===wL&&(a=n.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ve(284));if(!r._owner)throw Error(ve(290,e))}return e}function op(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function TA(e){var t=e._init;return t(e._payload)}function _L(e){function t(v,y){if(e){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function n(v,y){return v=_a(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,y,b,x){return y===null||y.tag!==6?(y=Y0(b,v.mode,x),y.return=v,y):(y=n(y,b),y.return=v,y)}function l(v,y,b,x){var A=b.type;return A===Gc?h(v,y,b.props.children,x,b.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===qo&&TA(A)===y.type)?(x=n(y,b.props),x.ref=_d(v,y,b),x.return=v,x):(x=Fm(b.type,b.key,b.props,null,v.mode,x),x.ref=_d(v,y,b),x.return=v,x)}function c(v,y,b,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=K0(b,v.mode,x),y.return=v,y):(y=n(y,b.children||[]),y.return=v,y)}function h(v,y,b,x,A){return y===null||y.tag!==7?(y=gl(b,v.mode,x,A),y.return=v,y):(y=n(y,b),y.return=v,y)}function u(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Y0(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xf:return b=Fm(y.type,y.key,y.props,null,v.mode,b),b.ref=_d(v,null,y),b.return=v,b;case jc:return y=K0(y,v.mode,b),y.return=v,y;case qo:var x=y._init;return u(v,x(y._payload),b)}if(Kd(y)||yd(y))return y=gl(y,v.mode,b,null),y.return=v,y;op(v,y)}return null}function d(v,y,b,x){var A=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:a(v,y,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xf:return b.key===A?l(v,y,b,x):null;case jc:return b.key===A?c(v,y,b,x):null;case qo:return A=b._init,d(v,y,A(b._payload),x)}if(Kd(b)||yd(b))return A!==null?null:h(v,y,b,x,null);op(v,b)}return null}function f(v,y,b,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(b)||null,a(y,v,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xf:return v=v.get(x.key===null?b:x.key)||null,l(y,v,x,A);case jc:return v=v.get(x.key===null?b:x.key)||null,c(y,v,x,A);case qo:var S=x._init;return f(v,y,b,S(x._payload),A)}if(Kd(x)||yd(x))return v=v.get(b)||null,h(y,v,x,A,null);op(y,x)}return null}function m(v,y,b,x){for(var A=null,S=null,_=y,w=y=0,M=null;_!==null&&w<b.length;w++){_.index>w?(M=_,_=null):M=_.sibling;var C=d(v,_,b[w],x);if(C===null){_===null&&(_=M);break}e&&_&&C.alternate===null&&t(v,_),y=s(C,y,w),S===null?A=C:S.sibling=C,S=C,_=M}if(w===b.length)return r(v,_),er&&Za(v,w),A;if(_===null){for(;w<b.length;w++)_=u(v,b[w],x),_!==null&&(y=s(_,y,w),S===null?A=_:S.sibling=_,S=_);return er&&Za(v,w),A}for(_=i(v,_);w<b.length;w++)M=f(_,v,w,b[w],x),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?w:M.key),y=s(M,y,w),S===null?A=M:S.sibling=M,S=M);return e&&_.forEach(function(E){return t(v,E)}),er&&Za(v,w),A}function p(v,y,b,x){var A=yd(b);if(typeof A!="function")throw Error(ve(150));if(b=A.call(b),b==null)throw Error(ve(151));for(var S=A=null,_=y,w=y=0,M=null,C=b.next();_!==null&&!C.done;w++,C=b.next()){_.index>w?(M=_,_=null):M=_.sibling;var E=d(v,_,C.value,x);if(E===null){_===null&&(_=M);break}e&&_&&E.alternate===null&&t(v,_),y=s(E,y,w),S===null?A=E:S.sibling=E,S=E,_=M}if(C.done)return r(v,_),er&&Za(v,w),A;if(_===null){for(;!C.done;w++,C=b.next())C=u(v,C.value,x),C!==null&&(y=s(C,y,w),S===null?A=C:S.sibling=C,S=C);return er&&Za(v,w),A}for(_=i(v,_);!C.done;w++,C=b.next())C=f(_,v,w,C.value,x),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?w:C.key),y=s(C,y,w),S===null?A=C:S.sibling=C,S=C);return e&&_.forEach(function($){return t(v,$)}),er&&Za(v,w),A}function g(v,y,b,x){if(typeof b=="object"&&b!==null&&b.type===Gc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Xf:e:{for(var A=b.key,S=y;S!==null;){if(S.key===A){if(A=b.type,A===Gc){if(S.tag===7){r(v,S.sibling),y=n(S,b.props.children),y.return=v,v=y;break e}}else if(S.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===qo&&TA(A)===S.type){r(v,S.sibling),y=n(S,b.props),y.ref=_d(v,S,b),y.return=v,v=y;break e}r(v,S);break}else t(v,S);S=S.sibling}b.type===Gc?(y=gl(b.props.children,v.mode,x,b.key),y.return=v,v=y):(x=Fm(b.type,b.key,b.props,null,v.mode,x),x.ref=_d(v,y,b),x.return=v,v=x)}return o(v);case jc:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=n(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=K0(b,v.mode,x),y.return=v,v=y}return o(v);case qo:return S=b._init,g(v,y,S(b._payload),x)}if(Kd(b))return m(v,y,b,x);if(yd(b))return p(v,y,b,x);op(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=n(y,b),y.return=v,v=y):(r(v,y),y=Y0(b,v.mode,x),y.return=v,v=y),o(v)):r(v,y)}return g}var Ou=_L(!0),AL=_L(!1),Mf={},Ds=za(Mf),Uh=za(Mf),Hh=za(Mf);function cl(e){if(e===Mf)throw Error(ve(174));return e}function ES(e,t){switch(Vt(Hh,t),Vt(Uh,e),Vt(Ds,Mf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nx(t,e)}qt(Ds),Vt(Ds,t)}function Bu(){qt(Ds),qt(Uh),qt(Hh)}function ML(e){cl(Hh.current);var t=cl(Ds.current),r=nx(t,e.type);t!==r&&(Vt(Uh,e),Vt(Ds,r))}function CS(e){Uh.current===e&&(qt(Ds),qt(Uh))}var rr=za(0);function Sg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var U0=[];function TS(){for(var e=0;e<U0.length;e++)U0[e]._workInProgressVersionPrimary=null;U0.length=0}var km=To.ReactCurrentDispatcher,H0=To.ReactCurrentBatchConfig,Ll=0,nr=null,Dr=null,Vr=null,_g=!1,mh=!1,Vh=0,aF=0;function ti(){throw Error(ve(321))}function PS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!es(e[r],t[r]))return!1;return!0}function DS(e,t,r,i,n,s){if(Ll=s,nr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,km.current=e===null||e.memoizedState===null?dF:hF,e=r(i,n),mh){s=0;do{if(mh=!1,Vh=0,25<=s)throw Error(ve(301));s+=1,Vr=Dr=null,t.updateQueue=null,km.current=fF,e=r(i,n)}while(mh)}if(km.current=Ag,t=Dr!==null&&Dr.next!==null,Ll=0,Vr=Dr=nr=null,_g=!1,t)throw Error(ve(300));return e}function LS(){var e=Vh!==0;return Vh=0,e}function fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?nr.memoizedState=Vr=e:Vr=Vr.next=e,Vr}function Ln(){if(Dr===null){var e=nr.alternate;e=e!==null?e.memoizedState:null}else e=Dr.next;var t=Vr===null?nr.memoizedState:Vr.next;if(t!==null)Vr=t,Dr=e;else{if(e===null)throw Error(ve(310));Dr=e,e={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Vr===null?nr.memoizedState=Vr=e:Vr=Vr.next=e}return Vr}function Wh(e,t){return typeof t=="function"?t(e):t}function V0(e){var t=Ln(),r=t.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=e;var i=Dr,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Ll&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=i):l=l.next=u,nr.lanes|=h,$l|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,es(i,t.memoizedState)||(Fi=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,nr.lanes|=s,$l|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function W0(e){var t=Ln(),r=t.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);es(s,t.memoizedState)||(Fi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function EL(){}function CL(e,t){var r=nr,i=Ln(),n=t(),s=!es(i.memoizedState,n);if(s&&(i.memoizedState=n,Fi=!0),i=i.queue,$S(DL.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Vr!==null&&Vr.memoizedState.tag&1){if(r.flags|=2048,jh(9,PL.bind(null,r,i,n,t),void 0,null),jr===null)throw Error(ve(349));(Ll&30)!==0||TL(r,t,n)}return n}function TL(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=nr.updateQueue,t===null?(t={lastEffect:null,stores:null},nr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function PL(e,t,r,i){t.value=r,t.getSnapshot=i,LL(t)&&$L(e)}function DL(e,t,r){return r(function(){LL(t)&&$L(e)})}function LL(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!es(e,r)}catch{return!0}}function $L(e){var t=vo(e,1);t!==null&&Zn(t,e,1,-1)}function PA(e){var t=fs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wh,lastRenderedState:e},t.queue=e,e=e.dispatch=uF.bind(null,nr,e),[t.memoizedState,e]}function jh(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=nr.updateQueue,t===null?(t={lastEffect:null,stores:null},nr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function IL(){return Ln().memoizedState}function Om(e,t,r,i){var n=fs();nr.flags|=e,n.memoizedState=jh(1|t,r,void 0,i===void 0?null:i)}function Mv(e,t,r,i){var n=Ln();i=i===void 0?null:i;var s=void 0;if(Dr!==null){var o=Dr.memoizedState;if(s=o.destroy,i!==null&&PS(i,o.deps)){n.memoizedState=jh(t,r,s,i);return}}nr.flags|=e,n.memoizedState=jh(1|t,r,s,i)}function DA(e,t){return Om(8390656,8,e,t)}function $S(e,t){return Mv(2048,8,e,t)}function RL(e,t){return Mv(4,2,e,t)}function kL(e,t){return Mv(4,4,e,t)}function OL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BL(e,t,r){return r=r!=null?r.concat([e]):null,Mv(4,4,OL.bind(null,t,e),r)}function IS(){}function zL(e,t){var r=Ln();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&PS(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function NL(e,t){var r=Ln();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&PS(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function FL(e,t,r){return(Ll&21)===0?(e.baseState&&(e.baseState=!1,Fi=!0),e.memoizedState=r):(es(r,t)||(r=VD(),nr.lanes|=r,$l|=r,e.baseState=!0),t)}function lF(e,t){var r=It;It=r!==0&&4>r?r:4,e(!0);var i=H0.transition;H0.transition={};try{e(!1),t()}finally{It=r,H0.transition=i}}function UL(){return Ln().memoizedState}function cF(e,t,r){var i=Sa(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},HL(e))VL(t,r);else if(r=xL(e,t,r,i),r!==null){var n=Mi();Zn(r,e,i,n),WL(r,t,i)}}function uF(e,t,r){var i=Sa(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(HL(e))VL(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,es(a,o)){var l=t.interleaved;l===null?(n.next=n,AS(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=xL(e,t,n,i),r!==null&&(n=Mi(),Zn(r,e,i,n),WL(r,t,i))}}function HL(e){var t=e.alternate;return e===nr||t!==null&&t===nr}function VL(e,t){mh=_g=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function WL(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,uS(e,r)}}var Ag={readContext:Dn,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},dF={readContext:Dn,useCallback:function(e,t){return fs().memoizedState=[e,t===void 0?null:t],e},useContext:Dn,useEffect:DA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Om(4194308,4,OL.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Om(4194308,4,e,t)},useInsertionEffect:function(e,t){return Om(4,2,e,t)},useMemo:function(e,t){var r=fs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=fs();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=cF.bind(null,nr,e),[i.memoizedState,e]},useRef:function(e){var t=fs();return e={current:e},t.memoizedState=e},useState:PA,useDebugValue:IS,useDeferredValue:function(e){return fs().memoizedState=e},useTransition:function(){var e=PA(!1),t=e[0];return e=lF.bind(null,e[1]),fs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=nr,n=fs();if(er){if(r===void 0)throw Error(ve(407));r=r()}else{if(r=t(),jr===null)throw Error(ve(349));(Ll&30)!==0||TL(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,DA(DL.bind(null,i,s,e),[e]),i.flags|=2048,jh(9,PL.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=fs(),t=jr.identifierPrefix;if(er){var r=lo,i=ao;r=(i&~(1<<32-Qn(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Vh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=aF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hF={readContext:Dn,useCallback:zL,useContext:Dn,useEffect:$S,useImperativeHandle:BL,useInsertionEffect:RL,useLayoutEffect:kL,useMemo:NL,useReducer:V0,useRef:IL,useState:function(){return V0(Wh)},useDebugValue:IS,useDeferredValue:function(e){var t=Ln();return FL(t,Dr.memoizedState,e)},useTransition:function(){var e=V0(Wh)[0],t=Ln().memoizedState;return[e,t]},useMutableSource:EL,useSyncExternalStore:CL,useId:UL,unstable_isNewReconciler:!1},fF={readContext:Dn,useCallback:zL,useContext:Dn,useEffect:$S,useImperativeHandle:BL,useInsertionEffect:RL,useLayoutEffect:kL,useMemo:NL,useReducer:W0,useRef:IL,useState:function(){return W0(Wh)},useDebugValue:IS,useDeferredValue:function(e){var t=Ln();return Dr===null?t.memoizedState=e:FL(t,Dr.memoizedState,e)},useTransition:function(){var e=W0(Wh)[0],t=Ln().memoizedState;return[e,t]},useMutableSource:EL,useSyncExternalStore:CL,useId:UL,unstable_isNewReconciler:!1};function zu(e,t){try{var r="",i=t;do r+=UN(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function j0(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function Cx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pF=typeof WeakMap=="function"?WeakMap:Map;function jL(e,t,r){r=uo(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Eg||(Eg=!0,Bx=i),Cx(e,t)},r}function GL(e,t,r){r=uo(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){Cx(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Cx(e,t),typeof i!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function LA(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new pF;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=TF.bind(null,e,t,r),t.then(e,e))}function $A(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function IA(e,t,r,i,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=uo(-1,1),t.tag=2,ba(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var mF=To.ReactCurrentOwner,Fi=!1;function Si(e,t,r,i){t.child=e===null?AL(t,null,r,i):Ou(t,e.child,r,i)}function RA(e,t,r,i,n){r=r.render;var s=t.ref;return bu(t,n),i=DS(e,t,r,i,s,n),r=LS(),e!==null&&!Fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,yo(e,t,n)):(er&&r&&yS(t),t.flags|=1,Si(e,t,i,n),t.child)}function kA(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!US(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,YL(e,t,s,i,n)):(e=Fm(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Bh,r(o,i)&&e.ref===t.ref)return yo(e,t,n)}return t.flags|=1,e=_a(s,i),e.ref=t.ref,e.return=t,t.child=e}function YL(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(Bh(s,i)&&e.ref===t.ref)if(Fi=!1,t.pendingProps=i=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(Fi=!0);else return t.lanes=e.lanes,yo(e,t,n)}return Tx(e,t,r,i,n)}function KL(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(ru,qi),qi|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(ru,qi),qi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,Vt(ru,qi),qi|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,Vt(ru,qi),qi|=i;return Si(e,t,n,r),t.child}function XL(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Tx(e,t,r,i,n){var s=Wi(r)?Pl:mi.current;return s=Ru(t,s),bu(t,n),r=DS(e,t,r,i,s,n),i=LS(),e!==null&&!Fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,yo(e,t,n)):(er&&i&&yS(t),t.flags|=1,Si(e,t,r,n),t.child)}function OA(e,t,r,i,n){if(Wi(r)){var s=!0;gg(t)}else s=!1;if(bu(t,n),t.stateNode===null)Bm(e,t),SL(t,r,i),Ex(t,r,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=Wi(r)?Pl:mi.current,c=Ru(t,c));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&CA(t,o,i,c),Qo=!1;var d=t.memoizedState;o.state=d,wg(t,i,o,n),l=t.memoizedState,a!==i||d!==l||Vi.current||Qo?(typeof h=="function"&&(Mx(t,r,h,i),l=t.memoizedState),(a=Qo||EA(t,r,a,i,d,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,bL(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Vn(t.type,a),o.props=c,u=t.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=Wi(r)?Pl:mi.current,l=Ru(t,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||d!==l)&&CA(t,o,i,l),Qo=!1,d=t.memoizedState,o.state=d,wg(t,i,o,n);var m=t.memoizedState;a!==u||d!==m||Vi.current||Qo?(typeof f=="function"&&(Mx(t,r,f,i),m=t.memoizedState),(c=Qo||EA(t,r,c,i,d,m,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Px(e,t,r,i,s,n)}function Px(e,t,r,i,n,s){XL(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&wA(t,r,!1),yo(e,t,s);i=t.stateNode,mF.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Ou(t,e.child,null,s),t.child=Ou(t,null,a,s)):Si(e,t,a,s),t.memoizedState=i.state,n&&wA(t,r,!0),t.child}function qL(e){var t=e.stateNode;t.pendingContext?bA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bA(e,t.context,!1),ES(e,t.containerInfo)}function BA(e,t,r,i,n){return ku(),bS(n),t.flags|=256,Si(e,t,r,i),t.child}var Dx={dehydrated:null,treeContext:null,retryLane:0};function Lx(e){return{baseLanes:e,cachePool:null,transitions:null}}function QL(e,t,r){var i=t.pendingProps,n=rr.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Vt(rr,n&1),e===null)return _x(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tv(o,i,0,null),e=gl(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Lx(r),t.memoizedState=Dx,e):RS(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return gF(e,t,o,i,a,n,r);if(s){s=i.fallback,o=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:i.children};return(o&1)===0&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=_a(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=_a(a,s):(s=gl(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?Lx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Dx,i}return s=e.child,e=s.sibling,i=_a(s,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function RS(e,t){return t=Tv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ap(e,t,r,i){return i!==null&&bS(i),Ou(t,e.child,null,r),e=RS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gF(e,t,r,i,n,s,o){if(r)return t.flags&256?(t.flags&=-257,i=j0(Error(ve(422))),ap(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=Tv({mode:"visible",children:i.children},n,0,null),s=gl(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,(t.mode&1)!==0&&Ou(t,e.child,null,o),t.child.memoizedState=Lx(o),t.memoizedState=Dx,s);if((t.mode&1)===0)return ap(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ve(419)),i=j0(s,i,void 0),ap(e,t,o,i)}if(a=(o&e.childLanes)!==0,Fi||a){if(i=jr,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(i.suspendedLanes|o))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,vo(e,n),Zn(i,e,n,-1))}return FS(),i=j0(Error(ve(421))),ap(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=PF.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,en=xa(n.nextSibling),nn=t,er=!0,Gn=null,e!==null&&(xn[bn++]=ao,xn[bn++]=lo,xn[bn++]=Dl,ao=e.id,lo=e.overflow,Dl=t),t=RS(t,i.children),t.flags|=4096,t)}function zA(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Ax(e.return,t,r)}function G0(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function ZL(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(Si(e,t,i.children,r),i=rr.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zA(e,r,t);else if(e.tag===19)zA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Vt(rr,i),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Sg(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),G0(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Sg(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}G0(t,!0,r,null,s);break;case"together":G0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bm(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),$l|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,r=_a(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_a(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vF(e,t,r){switch(t.tag){case 3:qL(t),ku();break;case 5:ML(t);break;case 1:Wi(t.type)&&gg(t);break;case 4:ES(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;Vt(xg,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Vt(rr,rr.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?QL(e,t,r):(Vt(rr,rr.current&1),e=yo(e,t,r),e!==null?e.sibling:null);Vt(rr,rr.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return ZL(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Vt(rr,rr.current),i)break;return null;case 22:case 23:return t.lanes=0,KL(e,t,r)}return yo(e,t,r)}var JL,$x,e$,t$;JL=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};$x=function(){};e$=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,cl(Ds.current);var s=null;switch(r){case"input":n=ex(e,n),i=ex(e,i),s=[];break;case"select":n=sr({},n,{value:void 0}),i=sr({},i,{value:void 0}),s=[];break;case"textarea":n=ix(e,n),i=ix(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=pg)}sx(r,i);var o;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Wt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};t$=function(e,t,r,i){r!==i&&(t.flags|=4)};function Ad(e,t){if(!er)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ri(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function yF(e,t,r){var i=t.pendingProps;switch(xS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(t),null;case 1:return Wi(t.type)&&mg(),ri(t),null;case 3:return i=t.stateNode,Bu(),qt(Vi),qt(mi),TS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(sp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Gn!==null&&(Fx(Gn),Gn=null))),$x(e,t),ri(t),null;case 5:CS(t);var n=cl(Hh.current);if(r=t.type,e!==null&&t.stateNode!=null)e$(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ve(166));return ri(t),null}if(e=cl(Ds.current),sp(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[ys]=t,i[Fh]=s,e=(t.mode&1)!==0,r){case"dialog":Wt("cancel",i),Wt("close",i);break;case"iframe":case"object":case"embed":Wt("load",i);break;case"video":case"audio":for(n=0;n<qd.length;n++)Wt(qd[n],i);break;case"source":Wt("error",i);break;case"img":case"image":case"link":Wt("error",i),Wt("load",i);break;case"details":Wt("toggle",i);break;case"input":Y2(i,s),Wt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Wt("invalid",i);break;case"textarea":X2(i,s),Wt("invalid",i)}sx(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&np(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&np(i.textContent,a,e),n=["children",""+a]):Dh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wt("scroll",i)}switch(r){case"input":qf(i),K2(i,s,!0);break;case"textarea":qf(i),q2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=pg)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=TD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[ys]=t,e[Fh]=i,JL(e,t,!1,!1),t.stateNode=e;e:{switch(o=ox(r,i),r){case"dialog":Wt("cancel",e),Wt("close",e),n=i;break;case"iframe":case"object":case"embed":Wt("load",e),n=i;break;case"video":case"audio":for(n=0;n<qd.length;n++)Wt(qd[n],e);n=i;break;case"source":Wt("error",e),n=i;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),n=i;break;case"details":Wt("toggle",e),n=i;break;case"input":Y2(e,i),n=ex(e,i),Wt("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=sr({},i,{value:void 0}),Wt("invalid",e);break;case"textarea":X2(e,i),n=ix(e,i),Wt("invalid",e);break;default:n=i}sx(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LD(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&PD(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Lh(e,l):typeof l=="number"&&Lh(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Wt("scroll",e):l!=null&&nS(e,s,l,o))}switch(r){case"input":qf(e),K2(e,i,!1);break;case"textarea":qf(e),q2(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ca(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?gu(e,!!i.multiple,s,!1):i.defaultValue!=null&&gu(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=pg)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ri(t),null;case 6:if(e&&t.stateNode!=null)t$(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ve(166));if(r=cl(Hh.current),cl(Ds.current),sp(t)){if(i=t.stateNode,r=t.memoizedProps,i[ys]=t,(s=i.nodeValue!==r)&&(e=nn,e!==null))switch(e.tag){case 3:np(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&np(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[ys]=t,t.stateNode=i}return ri(t),null;case 13:if(qt(rr),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(er&&en!==null&&(t.mode&1)!==0&&(t.flags&128)===0)yL(),ku(),t.flags|=98560,s=!1;else if(s=sp(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(ve(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ve(317));s[ys]=t}else ku(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ri(t),s=!1}else Gn!==null&&(Fx(Gn),Gn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(rr.current&1)!==0?$r===0&&($r=3):FS())),t.updateQueue!==null&&(t.flags|=4),ri(t),null);case 4:return Bu(),$x(e,t),e===null&&zh(t.stateNode.containerInfo),ri(t),null;case 10:return _S(t.type._context),ri(t),null;case 17:return Wi(t.type)&&mg(),ri(t),null;case 19:if(qt(rr),s=t.memoizedState,s===null)return ri(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Ad(s,!1);else{if($r!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Sg(e),o!==null){for(t.flags|=128,Ad(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Vt(rr,rr.current&1|2),t.child}e=e.sibling}s.tail!==null&&vr()>Nu&&(t.flags|=128,i=!0,Ad(s,!1),t.lanes=4194304)}else{if(!i)if(e=Sg(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ad(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!er)return ri(t),null}else 2*vr()-s.renderingStartTime>Nu&&r!==1073741824&&(t.flags|=128,i=!0,Ad(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=vr(),t.sibling=null,r=rr.current,Vt(rr,i?r&1|2:r&1),t):(ri(t),null);case 22:case 23:return NS(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(qi&1073741824)!==0&&(ri(t),t.subtreeFlags&6&&(t.flags|=8192)):ri(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function xF(e,t){switch(xS(t),t.tag){case 1:return Wi(t.type)&&mg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bu(),qt(Vi),qt(mi),TS(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return CS(t),null;case 13:if(qt(rr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));ku()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(rr),null;case 4:return Bu(),null;case 10:return _S(t.type._context),null;case 22:case 23:return NS(),null;case 24:return null;default:return null}}var lp=!1,ci=!1,bF=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function tu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){lr(e,t,i)}else r.current=null}function Ix(e,t,r){try{r()}catch(i){lr(e,t,i)}}var NA=!1;function wF(e,t){if(gx=dg,e=sL(),vS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,u=e,d=null;t:for(;;){for(var f;u!==r||n!==0&&u.nodeType!==3||(a=o+n),u!==s||i!==0&&u.nodeType!==3||(l=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)d=u,u=f;for(;;){if(u===e)break t;if(d===r&&++c===n&&(a=o),d===s&&++h===i&&(l=o),(f=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(vx={focusedElem:e,selectionRange:r},dg=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var m=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Vn(t.type,p),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(x){lr(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return m=NA,NA=!1,m}function gh(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&Ix(t,r,s)}n=n.next}while(n!==i)}}function Ev(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Rx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function r$(e){var t=e.alternate;t!==null&&(e.alternate=null,r$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ys],delete t[Fh],delete t[bx],delete t[iF],delete t[nF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i$(e){return e.tag===5||e.tag===3||e.tag===4}function FA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kx(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pg));else if(i!==4&&(e=e.child,e!==null))for(kx(e,t,r),e=e.sibling;e!==null;)kx(e,t,r),e=e.sibling}function Ox(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ox(e,t,r),e=e.sibling;e!==null;)Ox(e,t,r),e=e.sibling}var Yr=null,Wn=!1;function ko(e,t,r){for(r=r.child;r!==null;)n$(e,t,r),r=r.sibling}function n$(e,t,r){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(yv,r)}catch{}switch(r.tag){case 5:ci||tu(r,t);case 6:var i=Yr,n=Wn;Yr=null,ko(e,t,r),Yr=i,Wn=n,Yr!==null&&(Wn?(e=Yr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Yr.removeChild(r.stateNode));break;case 18:Yr!==null&&(Wn?(e=Yr,r=r.stateNode,e.nodeType===8?N0(e.parentNode,r):e.nodeType===1&&N0(e,r),kh(e)):N0(Yr,r.stateNode));break;case 4:i=Yr,n=Wn,Yr=r.stateNode.containerInfo,Wn=!0,ko(e,t,r),Yr=i,Wn=n;break;case 0:case 11:case 14:case 15:if(!ci&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Ix(r,t,o),n=n.next}while(n!==i)}ko(e,t,r);break;case 1:if(!ci&&(tu(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){lr(r,t,a)}ko(e,t,r);break;case 21:ko(e,t,r);break;case 22:r.mode&1?(ci=(i=ci)||r.memoizedState!==null,ko(e,t,r),ci=i):ko(e,t,r);break;default:ko(e,t,r)}}function UA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bF),t.forEach(function(i){var n=DF.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function Rn(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yr=a.stateNode,Wn=!1;break e;case 3:Yr=a.stateNode.containerInfo,Wn=!0;break e;case 4:Yr=a.stateNode.containerInfo,Wn=!0;break e}a=a.return}if(Yr===null)throw Error(ve(160));n$(s,o,n),Yr=null,Wn=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){lr(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)s$(t,e),t=t.sibling}function s$(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rn(t,e),os(e),i&4){try{gh(3,e,e.return),Ev(3,e)}catch(p){lr(e,e.return,p)}try{gh(5,e,e.return)}catch(p){lr(e,e.return,p)}}break;case 1:Rn(t,e),os(e),i&512&&r!==null&&tu(r,r.return);break;case 5:if(Rn(t,e),os(e),i&512&&r!==null&&tu(r,r.return),e.flags&32){var n=e.stateNode;try{Lh(n,"")}catch(p){lr(e,e.return,p)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ED(n,s),ox(a,o);var c=ox(a,s);for(o=0;o<l.length;o+=2){var h=l[o],u=l[o+1];h==="style"?LD(n,u):h==="dangerouslySetInnerHTML"?PD(n,u):h==="children"?Lh(n,u):nS(n,h,u,c)}switch(a){case"input":tx(n,s);break;case"textarea":CD(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?gu(n,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?gu(n,!!s.multiple,s.defaultValue,!0):gu(n,!!s.multiple,s.multiple?[]:"",!1))}n[Fh]=s}catch(p){lr(e,e.return,p)}}break;case 6:if(Rn(t,e),os(e),i&4){if(e.stateNode===null)throw Error(ve(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(p){lr(e,e.return,p)}}break;case 3:if(Rn(t,e),os(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{kh(t.containerInfo)}catch(p){lr(e,e.return,p)}break;case 4:Rn(t,e),os(e);break;case 13:Rn(t,e),os(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(BS=vr())),i&4&&UA(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(ci=(c=ci)||h,Rn(t,e),ci=c):Rn(t,e),os(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&(e.mode&1)!==0)for(Oe=e,h=e.child;h!==null;){for(u=Oe=h;Oe!==null;){switch(d=Oe,f=d.child,d.tag){case 0:case 11:case 14:case 15:gh(4,d,d.return);break;case 1:tu(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){i=d,r=d.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){lr(i,r,p)}}break;case 5:tu(d,d.return);break;case 22:if(d.memoizedState!==null){VA(u);continue}}f!==null?(f.return=d,Oe=f):VA(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{n=u.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=DD("display",o))}catch(p){lr(e,e.return,p)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(p){lr(e,e.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Rn(t,e),os(e),i&4&&UA(e);break;case 21:break;default:Rn(t,e),os(e)}}function os(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(i$(r)){var i=r;break e}r=r.return}throw Error(ve(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Lh(n,""),i.flags&=-33);var s=FA(e);Ox(e,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=FA(e);kx(e,a,o);break;default:throw Error(ve(161))}}catch(l){lr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SF(e,t,r){Oe=e,o$(e)}function o$(e,t,r){for(var i=(e.mode&1)!==0;Oe!==null;){var n=Oe,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||lp;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||ci;a=lp;var c=ci;if(lp=o,(ci=l)&&!c)for(Oe=n;Oe!==null;)o=Oe,l=o.child,o.tag===22&&o.memoizedState!==null?WA(n):l!==null?(l.return=o,Oe=l):WA(n);for(;s!==null;)Oe=s,o$(s),s=s.sibling;Oe=n,lp=a,ci=c}HA(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,Oe=s):HA(e)}}function HA(e){for(;Oe!==null;){var t=Oe;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ci||Ev(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ci)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Vn(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&MA(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}MA(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&kh(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}ci||t.flags&512&&Rx(t)}catch(d){lr(t,t.return,d)}}if(t===e){Oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Oe=r;break}Oe=t.return}}function VA(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Oe=r;break}Oe=t.return}}function WA(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ev(4,t)}catch(l){lr(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){lr(t,n,l)}}var s=t.return;try{Rx(t)}catch(l){lr(t,s,l)}break;case 5:var o=t.return;try{Rx(t)}catch(l){lr(t,o,l)}}}catch(l){lr(t,t.return,l)}if(t===e){Oe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Oe=a;break}Oe=t.return}}var _F=Math.ceil,Mg=To.ReactCurrentDispatcher,kS=To.ReactCurrentOwner,Tn=To.ReactCurrentBatchConfig,Mt=0,jr=null,Ar=null,qr=0,qi=0,ru=za(0),$r=0,Gh=null,$l=0,Cv=0,OS=0,vh=null,Oi=null,BS=0,Nu=1/0,ro=null,Eg=!1,Bx=null,wa=null,cp=!1,sa=null,Cg=0,yh=0,zx=null,zm=-1,Nm=0;function Mi(){return(Mt&6)!==0?vr():zm!==-1?zm:zm=vr()}function Sa(e){return(e.mode&1)===0?1:(Mt&2)!==0&&qr!==0?qr&-qr:oF.transition!==null?(Nm===0&&(Nm=VD()),Nm):(e=It,e!==0||(e=window.event,e=e===void 0?16:qD(e.type)),e)}function Zn(e,t,r,i){if(50<yh)throw yh=0,zx=null,Error(ve(185));Sf(e,r,i),((Mt&2)===0||e!==jr)&&(e===jr&&((Mt&2)===0&&(Cv|=r),$r===4&&ta(e,qr)),ji(e,i),r===1&&Mt===0&&(t.mode&1)===0&&(Nu=vr()+500,_v&&Na()))}function ji(e,t){var r=e.callbackNode;o5(e,t);var i=ug(e,e===jr?qr:0);if(i===0)r!==null&&J2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&J2(r),t===1)e.tag===0?sF(jA.bind(null,e)):mL(jA.bind(null,e)),tF(function(){(Mt&6)===0&&Na()}),r=null;else{switch(WD(i)){case 1:r=cS;break;case 4:r=UD;break;case 16:r=cg;break;case 536870912:r=HD;break;default:r=cg}r=p$(r,a$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function a$(e,t){if(zm=-1,Nm=0,(Mt&6)!==0)throw Error(ve(327));var r=e.callbackNode;if(wu()&&e.callbackNode!==r)return null;var i=ug(e,e===jr?qr:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Tg(e,i);else{t=i;var n=Mt;Mt|=2;var s=c$();(jr!==e||qr!==t)&&(ro=null,Nu=vr()+500,ml(e,t));do try{EF();break}catch(a){l$(e,a)}while(1);SS(),Mg.current=s,Mt=n,Ar!==null?t=0:(jr=null,qr=0,t=$r)}if(t!==0){if(t===2&&(n=dx(e),n!==0&&(i=n,t=Nx(e,n))),t===1)throw r=Gh,ml(e,0),ta(e,i),ji(e,vr()),r;if(t===6)ta(e,i);else{if(n=e.current.alternate,(i&30)===0&&!AF(n)&&(t=Tg(e,i),t===2&&(s=dx(e),s!==0&&(i=s,t=Nx(e,s))),t===1))throw r=Gh,ml(e,0),ta(e,i),ji(e,vr()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(ve(345));case 2:Ja(e,Oi,ro);break;case 3:if(ta(e,i),(i&130023424)===i&&(t=BS+500-vr(),10<t)){if(ug(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Mi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=xx(Ja.bind(null,e,Oi,ro),t);break}Ja(e,Oi,ro);break;case 4:if(ta(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-Qn(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=vr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_F(i/1960))-i,10<i){e.timeoutHandle=xx(Ja.bind(null,e,Oi,ro),i);break}Ja(e,Oi,ro);break;case 5:Ja(e,Oi,ro);break;default:throw Error(ve(329))}}}return ji(e,vr()),e.callbackNode===r?a$.bind(null,e):null}function Nx(e,t){var r=vh;return e.current.memoizedState.isDehydrated&&(ml(e,t).flags|=256),e=Tg(e,t),e!==2&&(t=Oi,Oi=r,t!==null&&Fx(t)),e}function Fx(e){Oi===null?Oi=e:Oi.push.apply(Oi,e)}function AF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!es(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ta(e,t){for(t&=~OS,t&=~Cv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qn(t),i=1<<r;e[r]=-1,t&=~i}}function jA(e){if((Mt&6)!==0)throw Error(ve(327));wu();var t=ug(e,0);if((t&1)===0)return ji(e,vr()),null;var r=Tg(e,t);if(e.tag!==0&&r===2){var i=dx(e);i!==0&&(t=i,r=Nx(e,i))}if(r===1)throw r=Gh,ml(e,0),ta(e,t),ji(e,vr()),r;if(r===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ja(e,Oi,ro),ji(e,vr()),null}function zS(e,t){var r=Mt;Mt|=1;try{return e(t)}finally{Mt=r,Mt===0&&(Nu=vr()+500,_v&&Na())}}function Il(e){sa!==null&&sa.tag===0&&(Mt&6)===0&&wu();var t=Mt;Mt|=1;var r=Tn.transition,i=It;try{if(Tn.transition=null,It=1,e)return e()}finally{It=i,Tn.transition=r,Mt=t,(Mt&6)===0&&Na()}}function NS(){qi=ru.current,qt(ru)}function ml(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,eF(r)),Ar!==null)for(r=Ar.return;r!==null;){var i=r;switch(xS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&mg();break;case 3:Bu(),qt(Vi),qt(mi),TS();break;case 5:CS(i);break;case 4:Bu();break;case 13:qt(rr);break;case 19:qt(rr);break;case 10:_S(i.type._context);break;case 22:case 23:NS()}r=r.return}if(jr=e,Ar=e=_a(e.current,null),qr=qi=t,$r=0,Gh=null,OS=Cv=$l=0,Oi=vh=null,ll!==null){for(t=0;t<ll.length;t++)if(r=ll[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}ll=null}return e}function l$(e,t){do{var r=Ar;try{if(SS(),km.current=Ag,_g){for(var i=nr.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}_g=!1}if(Ll=0,Vr=Dr=nr=null,mh=!1,Vh=0,kS.current=null,r===null||r.return===null){$r=1,Gh=t,Ar=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=qr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,u=h.tag;if((h.mode&1)===0&&(u===0||u===11||u===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=$A(o);if(f!==null){f.flags&=-257,IA(f,o,a,s,t),f.mode&1&&LA(s,c,t),t=f,l=c;var m=t.updateQueue;if(m===null){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}else{if((t&1)===0){LA(s,c,t),FS();break e}l=Error(ve(426))}}else if(er&&a.mode&1){var g=$A(o);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),IA(g,o,a,s,t),bS(zu(l,a));break e}}s=l=zu(l,a),$r!==4&&($r=2),vh===null?vh=[s]:vh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=jL(s,l,t);AA(s,v);break e;case 1:a=l;var y=s.type,b=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(wa===null||!wa.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=GL(s,a,t);AA(s,x);break e}}s=s.return}while(s!==null)}d$(r)}catch(A){t=A,Ar===r&&r!==null&&(Ar=r=r.return);continue}break}while(1)}function c$(){var e=Mg.current;return Mg.current=Ag,e===null?Ag:e}function FS(){($r===0||$r===3||$r===2)&&($r=4),jr===null||($l&268435455)===0&&(Cv&268435455)===0||ta(jr,qr)}function Tg(e,t){var r=Mt;Mt|=2;var i=c$();(jr!==e||qr!==t)&&(ro=null,ml(e,t));do try{MF();break}catch(n){l$(e,n)}while(1);if(SS(),Mt=r,Mg.current=i,Ar!==null)throw Error(ve(261));return jr=null,qr=0,$r}function MF(){for(;Ar!==null;)u$(Ar)}function EF(){for(;Ar!==null&&!QN();)u$(Ar)}function u$(e){var t=f$(e.alternate,e,qi);e.memoizedProps=e.pendingProps,t===null?d$(e):Ar=t,kS.current=null}function d$(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=yF(r,t,qi),r!==null){Ar=r;return}}else{if(r=xF(r,t),r!==null){r.flags&=32767,Ar=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$r=6,Ar=null;return}}if(t=t.sibling,t!==null){Ar=t;return}Ar=t=e}while(t!==null);$r===0&&($r=5)}function Ja(e,t,r){var i=It,n=Tn.transition;try{Tn.transition=null,It=1,CF(e,t,r,i)}finally{Tn.transition=n,It=i}return null}function CF(e,t,r,i){do wu();while(sa!==null);if((Mt&6)!==0)throw Error(ve(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(a5(e,s),e===jr&&(Ar=jr=null,qr=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||cp||(cp=!0,p$(cg,function(){return wu(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=Tn.transition,Tn.transition=null;var o=It;It=1;var a=Mt;Mt|=4,kS.current=null,wF(e,r),s$(r,e),Y5(vx),dg=!!gx,vx=gx=null,e.current=r,SF(r),ZN(),Mt=a,It=o,Tn.transition=s}else e.current=r;if(cp&&(cp=!1,sa=e,Cg=n),s=e.pendingLanes,s===0&&(wa=null),t5(r.stateNode),ji(e,vr()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Eg)throw Eg=!1,e=Bx,Bx=null,e;return(Cg&1)!==0&&e.tag!==0&&wu(),s=e.pendingLanes,(s&1)!==0?e===zx?yh++:(yh=0,zx=e):yh=0,Na(),null}function wu(){if(sa!==null){var e=WD(Cg),t=Tn.transition,r=It;try{if(Tn.transition=null,It=16>e?16:e,sa===null)var i=!1;else{if(e=sa,sa=null,Cg=0,(Mt&6)!==0)throw Error(ve(331));var n=Mt;for(Mt|=4,Oe=e.current;Oe!==null;){var s=Oe,o=s.child;if((Oe.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Oe=c;Oe!==null;){var h=Oe;switch(h.tag){case 0:case 11:case 15:gh(8,h,s)}var u=h.child;if(u!==null)u.return=h,Oe=u;else for(;Oe!==null;){h=Oe;var d=h.sibling,f=h.return;if(r$(h),h===c){Oe=null;break}if(d!==null){d.return=f,Oe=d;break}Oe=f}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Oe=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Oe=o;else e:for(;Oe!==null;){if(s=Oe,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:gh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Oe=v;break e}Oe=s.return}}var y=e.current;for(Oe=y;Oe!==null;){o=Oe;var b=o.child;if((o.subtreeFlags&2064)!==0&&b!==null)b.return=o,Oe=b;else e:for(o=y;Oe!==null;){if(a=Oe,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Ev(9,a)}}catch(A){lr(a,a.return,A)}if(a===o){Oe=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Oe=x;break e}Oe=a.return}}if(Mt=n,Na(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(yv,e)}catch{}i=!0}return i}finally{It=r,Tn.transition=t}}return!1}function GA(e,t,r){t=zu(r,t),t=jL(e,t,1),e=ba(e,t,1),t=Mi(),e!==null&&(Sf(e,1,t),ji(e,t))}function lr(e,t,r){if(e.tag===3)GA(e,e,r);else for(;t!==null;){if(t.tag===3){GA(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wa===null||!wa.has(i))){e=zu(r,e),e=GL(t,e,1),t=ba(t,e,1),e=Mi(),t!==null&&(Sf(t,1,e),ji(t,e));break}}t=t.return}}function TF(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&r,jr===e&&(qr&r)===r&&($r===4||$r===3&&(qr&130023424)===qr&&500>vr()-BS?ml(e,0):OS|=r),ji(e,t)}function h$(e,t){t===0&&((e.mode&1)===0?t=1:(t=Jf,Jf<<=1,(Jf&130023424)===0&&(Jf=4194304)));var r=Mi();e=vo(e,t),e!==null&&(Sf(e,t,r),ji(e,r))}function PF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),h$(e,r)}function DF(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ve(314))}i!==null&&i.delete(t),h$(e,r)}var f$;f$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vi.current)Fi=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Fi=!1,vF(e,t,r);Fi=(e.flags&131072)!==0}else Fi=!1,er&&(t.flags&1048576)!==0&&gL(t,yg,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Bm(e,t),e=t.pendingProps;var n=Ru(t,mi.current);bu(t,r),n=DS(null,t,i,e,n,r);var s=LS();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wi(i)?(s=!0,gg(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,MS(t),n.updater=Av,t.stateNode=n,n._reactInternals=t,Ex(t,i,e,r),t=Px(null,t,i,!0,s,r)):(t.tag=0,er&&s&&yS(t),Si(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Bm(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=$F(i),e=Vn(i,e),n){case 0:t=Tx(null,t,i,e,r);break e;case 1:t=OA(null,t,i,e,r);break e;case 11:t=RA(null,t,i,e,r);break e;case 14:t=kA(null,t,i,Vn(i.type,e),r);break e}throw Error(ve(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Vn(i,n),Tx(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Vn(i,n),OA(e,t,i,n,r);case 3:e:{if(qL(t),e===null)throw Error(ve(387));i=t.pendingProps,s=t.memoizedState,n=s.element,bL(e,t),wg(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=zu(Error(ve(423)),t),t=BA(e,t,i,r,n);break e}else if(i!==n){n=zu(Error(ve(424)),t),t=BA(e,t,i,r,n);break e}else for(en=xa(t.stateNode.containerInfo.firstChild),nn=t,er=!0,Gn=null,r=AL(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ku(),i===n){t=yo(e,t,r);break e}Si(e,t,i,r)}t=t.child}return t;case 5:return ML(t),e===null&&_x(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,yx(i,n)?o=null:s!==null&&yx(i,s)&&(t.flags|=32),XL(e,t),Si(e,t,o,r),t.child;case 6:return e===null&&_x(t),null;case 13:return QL(e,t,r);case 4:return ES(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ou(t,null,i,r):Si(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Vn(i,n),RA(e,t,i,n,r);case 7:return Si(e,t,t.pendingProps,r),t.child;case 8:return Si(e,t,t.pendingProps.children,r),t.child;case 12:return Si(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Vt(xg,i._currentValue),i._currentValue=o,s!==null)if(es(s.value,o)){if(s.children===n.children&&!Vi.current){t=yo(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=uo(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Ax(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ve(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Ax(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Si(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,bu(t,r),n=Dn(n),i=i(n),t.flags|=1,Si(e,t,i,r),t.child;case 14:return i=t.type,n=Vn(i,t.pendingProps),n=Vn(i.type,n),kA(e,t,i,n,r);case 15:return YL(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Vn(i,n),Bm(e,t),t.tag=1,Wi(i)?(e=!0,gg(t)):e=!1,bu(t,r),SL(t,i,n),Ex(t,i,n,r),Px(null,t,i,!0,e,r);case 19:return ZL(e,t,r);case 22:return KL(e,t,r)}throw Error(ve(156,t.tag))};function p$(e,t){return FD(e,t)}function LF(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,r,i){return new LF(e,t,r,i)}function US(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $F(e){if(typeof e=="function")return US(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oS)return 11;if(e===aS)return 14}return 2}function _a(e,t){var r=e.alternate;return r===null?(r=En(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Fm(e,t,r,i,n,s){var o=2;if(i=e,typeof e=="function")US(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gc:return gl(r.children,n,s,t);case sS:o=8,n|=8;break;case q1:return e=En(12,r,t,n|2),e.elementType=q1,e.lanes=s,e;case Q1:return e=En(13,r,t,n),e.elementType=Q1,e.lanes=s,e;case Z1:return e=En(19,r,t,n),e.elementType=Z1,e.lanes=s,e;case _D:return Tv(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wD:o=10;break e;case SD:o=9;break e;case oS:o=11;break e;case aS:o=14;break e;case qo:o=16,i=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=En(o,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function gl(e,t,r,i){return e=En(7,e,i,t),e.lanes=r,e}function Tv(e,t,r,i){return e=En(22,e,i,t),e.elementType=_D,e.lanes=r,e.stateNode={isHidden:!1},e}function Y0(e,t,r){return e=En(6,e,null,t),e.lanes=r,e}function K0(e,t,r){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IF(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T0(0),this.expirationTimes=T0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T0(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function HS(e,t,r,i,n,s,o,a,l){return e=new IF(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=En(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},MS(s),e}function RF(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jc,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function m$(e){if(!e)return Ta;e=e._reactInternals;e:{if(Yl(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var r=e.type;if(Wi(r))return pL(e,r,t)}return t}function g$(e,t,r,i,n,s,o,a,l){return e=HS(r,i,!0,e,n,s,o,a,l),e.context=m$(null),r=e.current,i=Mi(),n=Sa(r),s=uo(i,n),s.callback=t!=null?t:null,ba(r,s,n),e.current.lanes=n,Sf(e,n,i),ji(e,i),e}function Pv(e,t,r,i){var n=t.current,s=Mi(),o=Sa(n);return r=m$(r),t.context===null?t.context=r:t.pendingContext=r,t=uo(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ba(n,t,o),e!==null&&(Zn(e,n,o,s),Rm(e,n,o)),o}function Pg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function YA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function VS(e,t){YA(e,t),(e=e.alternate)&&YA(e,t)}function kF(){return null}var v$=typeof reportError=="function"?reportError:function(e){console.error(e)};function WS(e){this._internalRoot=e}Dv.prototype.render=WS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));Pv(e,t,null,null)};Dv.prototype.unmount=WS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Il(function(){Pv(null,e,null,null)}),t[go]=null}};function Dv(e){this._internalRoot=e}Dv.prototype.unstable_scheduleHydration=function(e){if(e){var t=YD();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ea.length&&t!==0&&t<ea[r].priority;r++);ea.splice(r,0,e),r===0&&XD(e)}};function jS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function KA(){}function OF(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var c=Pg(o);s.call(c)}}var o=g$(t,i,e,0,null,!1,!1,"",KA);return e._reactRootContainer=o,e[go]=o.current,zh(e.nodeType===8?e.parentNode:e),Il(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var c=Pg(l);a.call(c)}}var l=HS(e,0,!1,null,null,!1,!1,"",KA);return e._reactRootContainer=l,e[go]=l.current,zh(e.nodeType===8?e.parentNode:e),Il(function(){Pv(t,l,r,i)}),l}function $v(e,t,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=Pg(o);a.call(l)}}Pv(t,o,e,n)}else o=OF(r,t,e,n,i);return Pg(o)}jD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xd(t.pendingLanes);r!==0&&(uS(t,r|1),ji(t,vr()),(Mt&6)===0&&(Nu=vr()+500,Na()))}break;case 13:Il(function(){var i=vo(e,1);if(i!==null){var n=Mi();Zn(i,e,1,n)}}),VS(e,1)}};dS=function(e){if(e.tag===13){var t=vo(e,134217728);if(t!==null){var r=Mi();Zn(t,e,134217728,r)}VS(e,134217728)}};GD=function(e){if(e.tag===13){var t=Sa(e),r=vo(e,t);if(r!==null){var i=Mi();Zn(r,e,t,i)}VS(e,t)}};YD=function(){return It};KD=function(e,t){var r=It;try{return It=e,t()}finally{It=r}};lx=function(e,t,r){switch(t){case"input":if(tx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=Sv(i);if(!n)throw Error(ve(90));MD(i),tx(i,n)}}}break;case"textarea":CD(e,r);break;case"select":t=r.value,t!=null&&gu(e,!!r.multiple,t,!1)}};RD=zS;kD=Il;var BF={usingClientEntryPoint:!1,Events:[Af,qc,Sv,$D,ID,zS]},Md={findFiberByHostInstance:al,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zF={bundleType:Md.bundleType,version:Md.version,rendererPackageName:Md.rendererPackageName,rendererConfig:Md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zD(e),e===null?null:e.stateNode},findFiberByHostInstance:Md.findFiberByHostInstance||kF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!up.isDisabled&&up.supportsFiber)try{yv=up.inject(zF),Ps=up}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BF;an.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jS(t))throw Error(ve(200));return RF(e,t,null,r)};an.createRoot=function(e,t){if(!jS(e))throw Error(ve(299));var r=!1,i="",n=v$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=HS(e,1,!1,null,null,r,!1,i,n),e[go]=t.current,zh(e.nodeType===8?e.parentNode:e),new WS(t)};an.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=zD(t),e=e===null?null:e.stateNode,e};an.flushSync=function(e){return Il(e)};an.hydrate=function(e,t,r){if(!Lv(t))throw Error(ve(200));return $v(null,e,t,!0,r)};an.hydrateRoot=function(e,t,r){if(!jS(e))throw Error(ve(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=v$;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=g$(t,null,e,1,r!=null?r:null,n,!1,s,o),e[go]=t.current,zh(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Dv(t)};an.render=function(e,t,r){if(!Lv(t))throw Error(ve(200));return $v(null,e,t,!1,r)};an.unmountComponentAtNode=function(e){if(!Lv(e))throw Error(ve(40));return e._reactRootContainer?(Il(function(){$v(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0):!1};an.unstable_batchedUpdates=zS;an.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Lv(r))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return $v(e,t,r,!1,i)};an.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=an})(tS);const NF=cD(tS.exports);var XA=tS.exports;K1.createRoot=XA.createRoot,K1.hydrateRoot=XA.hydrateRoot;const y$=(...e)=>e,FF=y$("default","primary","secondary","success","warning","error","gradient"),UF=y$("clearable","as","rounded","labelLeft","labelRight","contentLeft","contentRight","contentClickable","contentLeftStyling","contentRightStyling","onContentClick","onClearClick","css"),GS=e=>{const[t,r]=I.exports.useState(()=>typeof e=="function"?e():e),i=I.exports.useRef(e);return I.exports.useEffect(()=>{i.current=t},[t]),[t,n=>{const s=typeof n=="function"?n(i.current):n;i.current=s,r(s)},i]},qA=(e,t)=>{if(!e)return 0;const r=e.includes("px")?+e.split("px")[0]:e.includes("%")?+e.split("%")[0]*t*.01:e;return Number.isNaN(+r)?0:+r},HF=e=>{if(!e||typeof window>"u")return{width:0,height:0};const t=e.getBoundingClientRect(),{width:r,height:i}=window.getComputedStyle(e);return{width:qA(`${r}`,t.width),height:qA(`${i}`,t.height)}},x$=e=>{const[t,r]=I.exports.useState({width:0,height:0}),i=()=>{const{width:n,height:s}=HF(e.current);r({width:n,height:s})};return I.exports.useEffect(()=>i(),[e.current]),[t,i]},b$=(e,t=!0)=>{I.exports.useEffect(()=>{const r=()=>e();return t&&r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[])};var kt="colors",xi="sizes",Be="space",w$={gap:Be,gridGap:Be,columnGap:Be,gridColumnGap:Be,rowGap:Be,gridRowGap:Be,inset:Be,insetBlock:Be,insetBlockEnd:Be,insetBlockStart:Be,insetInline:Be,insetInlineEnd:Be,insetInlineStart:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,marginBlock:Be,marginBlockEnd:Be,marginBlockStart:Be,marginInline:Be,marginInlineEnd:Be,marginInlineStart:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,paddingBlock:Be,paddingBlockEnd:Be,paddingBlockStart:Be,paddingInline:Be,paddingInlineEnd:Be,paddingInlineStart:Be,top:Be,right:Be,bottom:Be,left:Be,scrollMargin:Be,scrollMarginTop:Be,scrollMarginRight:Be,scrollMarginBottom:Be,scrollMarginLeft:Be,scrollMarginX:Be,scrollMarginY:Be,scrollMarginBlock:Be,scrollMarginBlockEnd:Be,scrollMarginBlockStart:Be,scrollMarginInline:Be,scrollMarginInlineEnd:Be,scrollMarginInlineStart:Be,scrollPadding:Be,scrollPaddingTop:Be,scrollPaddingRight:Be,scrollPaddingBottom:Be,scrollPaddingLeft:Be,scrollPaddingX:Be,scrollPaddingY:Be,scrollPaddingBlock:Be,scrollPaddingBlockEnd:Be,scrollPaddingBlockStart:Be,scrollPaddingInline:Be,scrollPaddingInlineEnd:Be,scrollPaddingInlineStart:Be,fontSize:"fontSizes",background:kt,backgroundColor:kt,backgroundImage:kt,borderImage:kt,border:kt,borderBlock:kt,borderBlockEnd:kt,borderBlockStart:kt,borderBottom:kt,borderBottomColor:kt,borderColor:kt,borderInline:kt,borderInlineEnd:kt,borderInlineStart:kt,borderLeft:kt,borderLeftColor:kt,borderRight:kt,borderRightColor:kt,borderTop:kt,borderTopColor:kt,caretColor:kt,color:kt,columnRuleColor:kt,fill:kt,outline:kt,outlineColor:kt,stroke:kt,textDecorationColor:kt,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:xi,minBlockSize:xi,maxBlockSize:xi,inlineSize:xi,minInlineSize:xi,maxInlineSize:xi,width:xi,minWidth:xi,maxWidth:xi,height:xi,minHeight:xi,maxHeight:xi,flexBasis:xi,gridTemplateColumns:xi,gridTemplateRows:xi,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},VF=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,qu=()=>{const e=Object.create(null);return(t,r,...i)=>{const n=(s=>JSON.stringify(s,VF))(t);return n in e?e[n]:e[n]=r(t,...i)}},vl=Symbol.for("sxs.internal"),YS=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),QA=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:WF}=Object.prototype,Ux=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),jF=/\s+(?![^()]*\))/,nc=e=>t=>e(...typeof t=="string"?String(t).split(jF):[t]),ZA={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:nc((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:nc((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:nc((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:nc((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:nc((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:nc((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},X0=/([\d.]+)([^]*)/,GF=(e,t)=>e.length?e.reduce((r,i)=>(r.push(...t.map(n=>n.includes("&")?n.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(n)?`:is(${i})`:i):i+" "+n)),r),[]):t,YF=(e,t)=>e in KF&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(r,i,n,s)=>i+(n==="stretch"?`-moz-available${s};${Ux(e)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${Ux(e)}:${i}fit-content`)+s):String(t),KF={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},xo=e=>e?e+"-":"",S$=(e,t,r)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,n,s,o,a)=>o=="$"==!!s?i:(n||o=="--"?"calc(":"")+"var(--"+(o==="$"?xo(t)+(a.includes("$")?"":xo(r))+a.replace(/\$/g,"-"):a)+")"+(n||o=="--"?"*"+(n||"")+(s||"1")+")":"")),XF=/\s*,\s*(?![^()]*\))/,qF=Object.prototype.toString,iu=(e,t,r,i,n)=>{let s,o,a;const l=(c,h,u)=>{let d,f;const m=p=>{for(d in p){const y=d.charCodeAt(0)===64,b=y&&Array.isArray(p[d])?p[d]:[p[d]];for(f of b){const x=/[A-Z]/.test(v=d)?v:v.replace(/-[^]/g,S=>S[1].toUpperCase()),A=typeof f=="object"&&f&&f.toString===qF&&(!i.utils[x]||!h.length);if(x in i.utils&&!A){const S=i.utils[x];if(S!==o){o=S,m(S(f)),o=null;continue}}else if(x in ZA){const S=ZA[x];if(S!==a){a=S,m(S(f)),a=null;continue}}if(y&&(g=d.slice(1)in i.media?"@media "+i.media[d.slice(1)]:d,d=g.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(S,_,w,M,C,E)=>{const $=X0.test(_),P=.0625*($?-1:1),[D,W]=$?[M,_]:[_,M];return"("+(w[0]==="="?"":w[0]===">"===$?"max-":"min-")+D+":"+(w[0]!=="="&&w.length===1?W.replace(X0,(V,H,L)=>Number(H)+P*(w===">"?1:-1)+L):W)+(C?") and ("+(C[0]===">"?"min-":"max-")+D+":"+(C.length===1?E.replace(X0,(V,H,L)=>Number(H)+P*(C===">"?-1:1)+L):E):"")+")"})),A){const S=y?u.concat(d):[...u],_=y?[...h]:GF(h,d.split(XF));s!==void 0&&n(JA(...s)),s=void 0,l(f,_,S)}else s===void 0&&(s=[[],h,u]),d=y||d.charCodeAt(0)!==36?d:`--${xo(i.prefix)}${d.slice(1).replace(/\$/g,"-")}`,f=A?f:typeof f=="number"?f&&x in QF?String(f)+"px":String(f):S$(YF(x,f==null?"":f),i.prefix,i.themeMap[x]),s[0].push(`${y?`${d} `:`${Ux(d)}:`}${f}`)}}var g,v};m(c),s!==void 0&&n(JA(...s)),s=void 0};l(e,t,r)},JA=(e,t,r)=>`${r.map(i=>`${i}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(r.length?r.length+1:0).join("}")}`,QF={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},eM=e=>String.fromCharCode(e+(e>25?39:97)),yl=e=>(t=>{let r,i="";for(r=Math.abs(t);r>52;r=r/52|0)i=eM(r%52)+i;return eM(r%52)+i})(((t,r)=>{let i=r.length;for(;i;)t=33*t^r.charCodeAt(--i);return t})(5381,JSON.stringify(e))>>>0),Qd=["themed","global","styled","onevar","resonevar","allvar","inline"],ZF=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},JF=e=>{let t;const r=()=>{const{cssRules:n}=t.sheet;return[].map.call(n,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(n[o-1]&&(l=n[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in t.rules)if(t.rules[c].group===s)return`--sxs{--sxs:${[...t.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},i=()=>{if(t){const{rules:a,sheet:l}=t;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const n=Object(e).styleSheets||[];for(const a of n)if(ZF(a)){for(let l=0,c=a.cssRules;c[l];++l){const h=Object(c[l]);if(h.type!==1)continue;const u=Object(c[l+1]);if(u.type!==4)continue;++l;const{cssText:d}=h;if(!d.startsWith("--sxs"))continue;const f=d.slice(14,-3).trim().split(/\s+/),m=Qd[f[0]];m&&(t||(t={sheet:a,reset:i,rules:{},toString:r}),t.rules[m]={group:u,index:l,cache:new Set(f)})}if(t)break}if(!t){const a=(l,c)=>({type:c,cssRules:[],insertRule(h,u){this.cssRules.splice(u,0,a(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,h=>h.cssText).join("")}}`:l}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:r}}const{sheet:s,rules:o}=t;for(let a=Qd.length-1;a>=0;--a){const l=Qd[a];if(!o[l]){const c=Qd[a+1],h=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",h),s.insertRule(`--sxs{--sxs:${a}}`,h),o[l]={group:s.cssRules[h+1],index:h,cache:new Set([a])}}e6(o[l])}};return i(),t},e6=e=>{const t=e.group;let r=t.cssRules.length;e.apply=i=>{try{t.insertRule(i,r),++r}catch{}}},Ed=Symbol(),t6=qu(),tM=(e,t)=>t6(e,()=>(...r)=>{let i={type:null,composers:new Set};for(const n of r)if(n!=null)if(n[vl]){i.type==null&&(i.type=n[vl].type);for(const s of n[vl].composers)i.composers.add(s)}else n.constructor!==Object||n.$$typeof?i.type==null&&(i.type=n):i.composers.add(r6(n,e));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),i6(e,i,t)}),r6=({variants:e,compoundVariants:t,defaultVariants:r,...i},n)=>{const s=`${xo(n.prefix)}c-${yl(i)}`,o=[],a=[],l=Object.create(null),c=[];for(const d in r)l[d]=String(r[d]);if(typeof e=="object"&&e)for(const d in e){h=l,u=d,WF.call(h,u)||(l[d]="undefined");const f=e[d];for(const m in f){const p={[d]:String(m)};String(m)==="undefined"&&c.push(d);const g=f[m],v=[p,g,!QA(g)];o.push(v)}}var h,u;if(typeof t=="object"&&t)for(const d of t){let{css:f,...m}=d;f=typeof f=="object"&&f||{};for(const g in m)m[g]=String(m[g]);const p=[m,f,!QA(f)];a.push(p)}return[s,i,o,a,l,c]},i6=(e,t,r)=>{const[i,n,s,o]=n6(t.composers),a=typeof t.type=="function"||t.type.$$typeof?(u=>{function d(){for(let f=0;f<d[Ed].length;f++){const[m,p]=d[Ed][f];u.rules[m].apply(p)}return d[Ed]=[],null}return d[Ed]=[],d.rules={},Qd.forEach(f=>d.rules[f]={apply:m=>d[Ed].push([f,m])}),d})(r):null,l=(a||r).rules,c=`.${i}${n.length>1?`:where(.${n.slice(1).join(".")})`:""}`,h=u=>{u=typeof u=="object"&&u||s6;const{css:d,...f}=u,m={};for(const v in s)if(delete f[v],v in u){let y=u[v];typeof y=="object"&&y?m[v]={"@initial":s[v],...y}:(y=String(y),m[v]=y!=="undefined"||o.has(v)?y:s[v])}else m[v]=s[v];const p=new Set([...n]);for(const[v,y,b,x]of t.composers){r.rules.styled.cache.has(v)||(r.rules.styled.cache.add(v),iu(y,[`.${v}`],[],e,_=>{l.styled.apply(_)}));const A=rM(b,m,e.media),S=rM(x,m,e.media,!0);for(const _ of A)if(_!==void 0)for(const[w,M,C]of _){const E=`${v}-${yl(M)}-${w}`;p.add(E);const $=(C?r.rules.resonevar:r.rules.onevar).cache,P=C?l.resonevar:l.onevar;$.has(E)||($.add(E),iu(M,[`.${E}`],[],e,D=>{P.apply(D)}))}for(const _ of S)if(_!==void 0)for(const[w,M]of _){const C=`${v}-${yl(M)}-${w}`;p.add(C),r.rules.allvar.cache.has(C)||(r.rules.allvar.cache.add(C),iu(M,[`.${C}`],[],e,E=>{l.allvar.apply(E)}))}}if(typeof d=="object"&&d){const v=`${i}-i${yl(d)}-css`;p.add(v),r.rules.inline.cache.has(v)||(r.rules.inline.cache.add(v),iu(d,[`.${v}`],[],e,y=>{l.inline.apply(y)}))}for(const v of String(u.className||"").trim().split(/\s+/))v&&p.add(v);const g=f.className=[...p].join(" ");return{type:t.type,className:g,selector:c,props:f,toString:()=>g,deferredInjector:a}};return YS(h,{className:i,selector:c,[vl]:t,toString:()=>(r.rules.styled.cache.has(i)||h(),i)})},n6=e=>{let t="";const r=[],i={},n=[];for(const[s,,,,o,a]of e){t===""&&(t=s),r.push(s),n.push(...a);for(const l in o){const c=o[l];(i[l]===void 0||c!=="undefined"||a.includes(c))&&(i[l]=c)}}return[t,r,i,new Set(n)]},rM=(e,t,r,i)=>{const n=[];e:for(let[s,o,a]of e){if(a)continue;let l,c=0,h=!1;for(l in s){const u=s[l];let d=t[l];if(d!==u){if(typeof d!="object"||!d)continue e;{let f,m,p=0;for(const g in d){if(u===String(d[g])){if(g!=="@initial"){const v=g.slice(1);(m=m||[]).push(v in r?r[v]:g.replace(/^@media ?/,"")),h=!0}c+=p,f=!0}++p}if(m&&m.length&&(o={["@media "+m.join(", ")]:o}),!f)continue e}}}(n[c]=n[c]||[]).push([i?"cv":`${l}-${s[l]}`,o,h])}return n},s6={},o6=qu(),a6=(e,t)=>o6(e,()=>(...r)=>{const i=()=>{for(let n of r){n=typeof n=="object"&&n||{};let s=yl(n);if(!t.rules.global.cache.has(s)){if(t.rules.global.cache.add(s),"@import"in n){let o=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let a of[].concat(n["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,t.sheet.insertRule(`@import ${a};`,o++);delete n["@import"]}iu(n,[],[],e,o=>{t.rules.global.apply(o)})}}return""};return YS(i,{toString:i})}),l6=qu(),c6=(e,t)=>l6(e,()=>r=>{const i=`${xo(e.prefix)}k-${yl(r)}`,n=()=>{if(!t.rules.global.cache.has(i)){t.rules.global.cache.add(i);const s=[];iu(r,[],[],e,a=>s.push(a));const o=`@keyframes ${i}{${s.join("")}}`;t.rules.global.apply(o)}return i};return YS(n,{get name(){return n()},toString:n})}),u6=class{constructor(e,t,r,i){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=r==null?"":String(r),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+xo(this.prefix)+xo(this.scale)+this.token}toString(){return this.computedValue}},d6=qu(),h6=(e,t)=>d6(e,()=>(r,i)=>{i=typeof r=="object"&&r||Object(i);const n=`.${r=(r=typeof r=="string"?r:"")||`${xo(e.prefix)}t-${yl(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const c in i[l]){const h=`--${xo(e.prefix)}${l}-${c}`,u=S$(String(i[l][c]),e.prefix,l);s[l][c]=new u6(c,u,l,e.prefix),o.push(`${h}:${u}`)}}const a=()=>{if(o.length&&!t.rules.themed.cache.has(r)){t.rules.themed.cache.add(r);const l=`${i===e.theme?":root,":""}.${r}{${o.join(";")}}`;t.rules.themed.apply(l)}return r};return{...s,get className(){return a()},selector:n,toString:a}}),f6=qu(),p6=qu(),m6=e=>{const t=(r=>{let i=!1;const n=f6(r,s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},h={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...w$},utils:typeof s.utils=="object"&&s.utils||{}},u=JF(l),d={css:tM(h,u),globalCss:a6(h,u),keyframes:c6(h,u),createTheme:h6(h,u),reset(){u.reset(),d.theme.toString()},theme:{},sheet:u,config:h,prefix:o,getCssText:u.toString,toString:u.toString};return String(d.theme=d.createTheme(c)),d});return i||n.reset(),n})(e);return t.styled=(({config:r,sheet:i})=>p6(r,()=>{const n=tM(r,i);return(...s)=>{const o=n(...s),a=o[vl].type,l=me.forwardRef((c,h)=>{const u=c&&c.as||a,{props:d,deferredInjector:f}=o(c);return delete d.as,d.ref=h,f?me.createElement(me.Fragment,null,me.createElement(u,d),me.createElement(f,null)):me.createElement(u,d)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[vl]=o[vl],l}}))(t),t};function KS(e){for(var t,r,i=Array.prototype.slice.call(arguments,1);i.length;)for(r in t=i.shift())t.hasOwnProperty(r)&&(typeof e[r]=="object"&&e[r]&&Object.prototype.toString.call(e[r])!=="[object Array]"&&typeof t[r]=="object"&&t[r]!==null?e[r]=KS({},e[r],t[r]):e[r]=t[r]);return e}const si={fonts:{sans:"-apple-system, BlinkMacSystemFont, 'Segoe UI','Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans','Helvetica Neue', sans-serif;",mono:"Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono','Courier New', monospace;"},fontSizes:{xs:"0.75rem",sm:"0.875rem",base:"1rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},lineHeights:{xs:1,sm:1.25,base:1.5,md:1.5,lg:1.75,xl:1.75,"2xl":2,"3xl":2.25,"4xl":2.5,"5xl":1,"6xl":1,"7xl":1,"8xl":1,"9xl":1},letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},space:{0:"0rem",xs:"0.5rem",sm:"0.75rem",md:"1rem",lg:"1.25rem",xl:"2.25rem","2xl":"3rem","3xl":"5rem","4xl":"10rem","5xl":"14rem","6xl":"18rem","7xl":"24rem","8xl":"32rem","9xl":"40rem",min:"min-content",max:"max-content",fit:"fit-content",screen:"100vw",full:"100%",px:"1px",1:"0.125rem",2:"0.25rem",3:"0.375rem",4:"0.5rem",5:"0.625rem",6:"0.75rem",7:"0.875rem",8:"1rem",9:"1.25rem",10:"1.5rem",11:"1.75rem",12:"2rem",13:"2.25rem",14:"2.5rem",15:"2.75rem",16:"3rem",17:"3.5rem",18:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},radii:{xs:"7px",sm:"9px",md:"12px",base:"14px",lg:"14px",xl:"18px","2xl":"24px","3xl":"32px",squared:"33%",rounded:"50%",pill:"9999px"},zIndices:{1:"100",2:"200",3:"300",4:"400",5:"500",10:"1000",max:"9999"},borderWeights:{light:"1px",normal:"2px",bold:"3px",extrabold:"4px",black:"5px"},transitions:{default:"all 250ms ease",button:"background 0.25s ease 0s, color 0.25s ease 0s, border-color 0.25s ease 0s, box-shadow 0.25s ease 0s, transform 0.25s ease 0s, opacity 0.25s ease 0s",avatar:"box-shadow 0.25s ease 0s, opacity 0.25s ease 0s",card:"transform 0.25s ease 0s, filter 0.25s ease 0s, box-shadow 0.25s ease 0s",dropdownItem:"background 0.12s ease, transform 0.12s ease, color 0.12s ease, box-shadow 0.12s ease 0s"},breakpoints:{xs:"650px",sm:"960px",md:"1280px",lg:"1400px",xl:"1920px"}},g6={white:"#ffffff",black:"#000000",primaryLight:"$blue200",primaryLightHover:"$blue300",primaryLightActive:"$blue400",primaryLightContrast:"$blue600",primary:"$blue600",primaryBorder:"$blue500",primaryBorderHover:"$blue600",primarySolidHover:"$blue700",primarySolidContrast:"$white",primaryShadow:"$blue500",secondaryLight:"$purple200",secondaryLightHover:"$purple300",secondaryLightActive:"$purple400",secondaryLightContrast:"$purple600",secondary:"$purple600",secondaryBorder:"$purple500",secondaryBorderHover:"$purple600",secondarySolidHover:"$purple700",secondarySolidContrast:"$white",secondaryShadow:"$purple500",successLight:"$green200",successLightHover:"$green300",successLightActive:"$green400",successLightContrast:"$green700",success:"$green600",successBorder:"$green500",successBorderHover:"$green600",successSolidHover:"$green700",successSolidContrast:"$white",successShadow:"$green500",warningLight:"$yellow200",warningLightHover:"$yellow300",warningLightActive:"$yellow400",warningLightContrast:"$yellow700",warning:"$yellow600",warningBorder:"$yellow500",warningBorderHover:"$yellow600",warningSolidHover:"$yellow700",warningSolidContrast:"$white",warningShadow:"$yellow500",errorLight:"$red200",errorLightHover:"$red300",errorLightActive:"$red400",errorLightContrast:"$red600",error:"$red600",errorBorder:"$red500",errorBorderHover:"$red600",errorSolidHover:"$red700",errorSolidContrast:"$white",errorShadow:"$red500",neutralLight:"$gray100",neutralLightHover:"$gray200",neutralLightActive:"$gray300",neutralLightContrast:"$gray800",neutral:"$gray600",neutralBorder:"$gray400",neutralBorderHover:"$gray500",neutralSolidHover:"$gray600",neutralSolidContrast:"$white",neutralShadow:"$gray400",gradient:"linear-gradient(112deg, $cyan600 -63.59%, $pink600 -20.3%, $blue600 70.46%)",accents0:"$gray50",accents1:"$gray100",accents2:"$gray200",accents3:"$gray300",accents4:"$gray400",accents5:"$gray500",accents6:"$gray600",accents7:"$gray700",accents8:"$gray800",accents9:"$gray900"},v6={xs:`(min-width: ${si.breakpoints.xs})`,sm:`(min-width: ${si.breakpoints.sm})`,md:`(min-width: ${si.breakpoints.md})`,lg:`(min-width: ${si.breakpoints.lg})`,xl:`(min-width: ${si.breakpoints.xl})`,xsMin:`(min-width: ${si.breakpoints.xs})`,smMin:`(min-width: ${si.breakpoints.sm})`,mdMin:`(min-width: ${si.breakpoints.md})`,lgMin:`(min-width: ${si.breakpoints.lg})`,xlMin:`(min-width: ${si.breakpoints.xl})`,xsMax:`(max-width: ${si.breakpoints.xs})`,smMax:`(max-width: ${si.breakpoints.sm})`,mdMax:`(max-width: ${si.breakpoints.md})`,lgMax:`(max-width: ${si.breakpoints.lg})`,xlMax:`(max-width: ${si.breakpoints.xl})`,motion:"(prefers-reduced-motion: reduce)",safari:"not all and (min-resolution:.001dpcm)",hover:"(any-hover: hover)",dark:"(prefers-color-scheme: dark)",light:"(prefers-color-scheme: light)"},y6={p:e=>({padding:e}),pt:e=>({paddingTop:e}),pr:e=>({paddingRight:e}),pb:e=>({paddingBottom:e}),pl:e=>({paddingLeft:e}),px:e=>({paddingLeft:e,paddingRight:e}),py:e=>({paddingTop:e,paddingBottom:e}),m:e=>({margin:e}),mt:e=>({marginTop:e}),mr:e=>({marginRight:e}),mb:e=>({marginBottom:e}),ml:e=>({marginLeft:e}),mx:e=>({marginLeft:e,marginRight:e}),my:e=>({marginTop:e,marginBottom:e}),ta:e=>({textAlign:e}),tt:e=>({textTransform:e}),to:e=>({textOverflow:e}),d:e=>({display:e}),dflex:e=>({display:"flex",alignItems:e,justifyContent:e}),fd:e=>({flexDirection:e}),fw:e=>({flexWrap:e}),ai:e=>({alignItems:e}),ac:e=>({alignContent:e}),jc:e=>({justifyContent:e}),as:e=>({alignSelf:e}),fg:e=>({flexGrow:e}),fs:e=>({fontSize:e}),fb:e=>({flexBasis:e}),bc:e=>({backgroundColor:e}),bf:e=>({backdropFilter:e}),bg:e=>({background:e}),bgBlur:e=>({bf:"saturate(180%) blur(10px)",bg:e}),bgColor:e=>({backgroundColor:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),bgClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),br:e=>({borderRadius:e}),bw:e=>({borderWidth:e}),btrr:e=>({borderTopRightRadius:e}),bbrr:e=>({borderBottomRightRadius:e}),bblr:e=>({borderBottomLeftRadius:e}),btlr:e=>({borderTopLeftRadius:e}),bs:e=>({boxShadow:e}),ds:e=>({dropShadow:e}),shadow:e=>({boxShadow:e}),dshadow:e=>({dropShadow:e}),dropShadow:e=>({filter:`$dropShadows${e}`}),normalShadow:e=>({boxShadow:`0 4px 14px 0 $colors${e}`}),normalShadowVar:e=>({boxShadow:`0 4px 14px 0 ${e}`}),lh:e=>({lineHeight:e}),ov:e=>({overflow:e}),ox:e=>({overflowX:e}),oy:e=>({overflowY:e}),pe:e=>({pointerEvents:e}),events:e=>({pointerEvents:e}),us:e=>({WebkitUserSelect:e,userSelect:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),w:e=>({width:e}),h:e=>({height:e}),mw:e=>({maxWidth:e}),maxW:e=>({maxWidth:e}),mh:e=>({maxHeight:e}),maxH:e=>({maxHeight:e}),size:e=>({width:e,height:e}),minSize:e=>({minWidth:e,minHeight:e,width:e,height:e}),sizeMin:e=>({minWidth:e,minHeight:e,width:e,height:e}),maxSize:e=>({maxWidth:e,maxHeight:e}),sizeMax:e=>({maxWidth:e,maxHeight:e}),appearance:e=>({WebkitAppearance:e,appearance:e}),scale:e=>({transform:`scale(${e})`}),linearGradient:e=>({backgroundImage:`linear-gradient(${e})`}),tdl:e=>({textDecorationLine:e}),truncateText:e=>({maxWidth:e,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),textGradient:e=>({backgroundImage:`linear-gradient(${e})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent","&::selection":{WebkitTextFillColor:"$colors$text"}})},x6={...w$,width:"space",height:"space",minWidth:"space",maxWidth:"space",minHeight:"space",maxHeight:"space",flexBasis:"space",gridTemplateColumns:"space",gridTemplateRows:"space",blockSize:"space",minBlockSize:"space",maxBlockSize:"space",inlineSize:"space",minInlineSize:"space",maxInlineSize:"space",borderWidth:"borderWeights"},xl={prefix:"nextui",theme:{...si,colors:g6,shadows:{},dropShadows:{}},media:v6,utils:y6,themeMap:x6},b6={blue50:"#EDF5FF",blue100:"#E1EFFF",blue200:"#CEE4FE",blue300:"#B7D5F8",blue400:"#96C1F2",blue500:"#5EA2EF",blue600:"#0072F5",blue700:"#005FCC",blue800:"#004799",blue900:"#00254D"},w6={blue50:"#10253E",blue100:"#102C4C",blue200:"#0F3158",blue300:"#0D3868",blue400:"#0A4281",blue500:"#0952A5",blue600:"#0072F5",blue700:"#3694FF",blue800:"#3694FF",blue900:"#EAF4FF"},S6={purple50:"#F7F2FD",purple100:"#F1E8FB",purple200:"#EADCF8",purple300:"#E0CBF5",purple400:"#D1B1F0",purple500:"#BC8EE9",purple600:"#7828C8",purple700:"#6622AA",purple800:"#4D1980",purple900:"#290E44"},_6={purple50:"#1F0A33",purple100:"#240C3C",purple200:"#2E0F4D",purple300:"#3B1362",purple400:"#451773",purple500:"#571D91",purple600:"#7828C8",purple700:"#9750DD",purple800:"#B583E7",purple900:"#F7ECFC"},A6={green50:"#F1FDF7",green100:"#E8FCF1",green200:"#DAFBE8",green300:"#C8F9DD",green400:"#ADF5CC",green500:"#88F1B6",green600:"#17C964",green700:"#13A452",green800:"#108944",green900:"#06371B"},M6={green50:"#042F14",green100:"#06381B",green200:"#074A24",green300:"#0A6130",green400:"#0B7439",green500:"#0F9549",green600:"#17C964",green700:"#41EC8B",green800:"#78F2AD",green900:"#ECFDF4"},E6={yellow50:"#FEF9F0",yellow100:"#FEF5E7",yellow200:"#FDEFD8",yellow300:"#FCE7C5",yellow400:"#FBDBA7",yellow500:"#F9CB80",yellow600:"#F5A524",yellow700:"#B97509",yellow800:"#925D07",yellow900:"#4E3104"},C6={yellow50:"#3A2503",yellow100:"#442B03",yellow200:"#583804",yellow300:"#704705",yellow400:"#845306",yellow500:"#A66908",yellow600:"#F5A524",yellow700:"#F6AD37",yellow800:"#F8C572",yellow900:"#FEF7EC"},T6={red50:"#FEF0F5",red100:"#FEE7EF",red200:"#FDD8E5",red300:"#FCC5D8",red400:"#FAA8C5",red500:"#F881AB",red600:"#F31260",red700:"#B80A47",red800:"#910838",red900:"#4E041E"},P6={red50:"#300313",red100:"#300313",red200:"#44041A",red300:"#5C0523",red400:"#6F062B",red500:"#910838",red600:"#F31260",red700:"#F4256D",red800:"#F75F94",red900:"#FDD8E5"},D6={cyan50:"#F0FCFF",cyan100:"#E6FAFE",cyan200:"#D7F8FE",cyan300:"#C3F4FD",cyan400:"#A5EEFD",cyan500:"#7EE7FC",cyan600:"#06B7DB",cyan700:"#09AACD",cyan800:"#0E8AAA",cyan900:"#053B48"},L6={cyan50:"#012A32",cyan100:"#023A46",cyan200:"#024B5A",cyan300:"#036072",cyan400:"#037086",cyan500:"#048EA9",cyan600:"#06B7DB",cyan700:"#33D9FA",cyan800:"#6FE4FB",cyan900:"#EBFBFE"},$6={pink50:"#FFF0FB",pink100:"#FFE5F8",pink200:"#FFD6F3",pink300:"#FFC2EE",pink400:"#FFA3E5",pink500:"#FF7AD9",pink600:"#FF4ECD",pink700:"#D6009A",pink800:"#B80084",pink900:"#4D0037"},I6={pink50:"#330025",pink100:"#470033",pink200:"#5C0042",pink300:"#750054",pink400:"#8A0063",pink500:"#AD007C",pink600:"#FF4ECD",pink700:"#FF2EC4",pink800:"#FF6BD5",pink900:"#FFEBF9"},R6={gray50:"#F1F3F5",gray100:"#ECEEF0",gray200:"#E6E8EB",gray300:"#DFE3E6",gray400:"#D7DBDF",gray500:"#C1C8CD",gray600:"#889096",gray700:"#7E868C",gray800:"#687076",gray900:"#11181C"},k6={gray50:"#16181A",gray100:"#26292B",gray200:"#2B2F31",gray300:"#313538",gray400:"#3A3F42",gray500:"#4C5155",gray600:"#697177",gray700:"#787F85",gray800:"#9BA1A6",gray900:"#ECEDEE"},Su={colors:{background:"$white",backgroundAlpha:"rgba(255, 255, 255, 0.8)",foreground:"$black",backgroundContrast:"$white",...b6,...S6,...A6,...E6,...T6,...D6,...$6,...R6,text:"$gray900",link:"$blue600",codeLight:"$pink100",code:"$pink600",selection:"$blue200",border:"rgba(0, 0, 0, 0.15)"},shadows:{xs:"0 2px 8px 1px rgb(104 112 118 / 0.07), 0 1px 1px -1px rgb(104 112 118 / 0.04)",sm:"0 2px 8px 2px rgb(104 112 118 / 0.07), 0 2px 4px -1px rgb(104 112 118 / 0.04)",md:"0 12px 20px 6px rgb(104 112 118 / 0.08)",lg:"0 12px 34px 6px rgb(104 112 118 / 0.18)",xl:"0 25px 65px 0px rgb(104 112 118 / 0.35)"},dropShadows:{xs:"drop-shadow(0 2px 4px rgb(104 112 118 / 0.07)) drop-shadow(0 1px 1px rgb(104 112 118 / 0.04))",sm:"drop-shadow(0 2px 8px rgb(104 112 118 / 0.07)) drop-shadow(0 2px 4px rgb(104 112 118 / 0.04))",md:"drop-shadow(0 4px 12px rgb(104 112 118 / 0.08)) drop-shadow(0 20px 8px rgb(104 112 118 / 0.04))",lg:"drop-shadow(0 12px 24px rgb(104 112 118 / 0.15)) drop-shadow(0 12px 14px rgb(104 112 118 / 0.1))",xl:"drop-shadow(0 25px 34px rgb(104 112 118 / 0.35))"}},O6={colors:{background:"$black",backgroundAlpha:"rgba(0, 0, 0, 0.6)",foreground:"$white",backgroundContrast:"$accents0",...w6,..._6,...M6,...C6,...P6,...L6,...I6,...k6,primaryLight:"$blue50",primaryLightHover:"$blue100",primaryLightActive:"$blue200",primaryLightContrast:"$blue600",secondaryLight:"$purple50",secondaryLightHover:"$purple100",secondaryLightActive:"$purple200",secondaryLightContrast:"$purple800",secondary:"$purple700",secondaryBorder:"$purple500",secondaryBorderHover:"$purple600",secondarySolidHover:"$purple700",secondaryShadow:"$purple500",successLight:"$green50",successLightHover:"$green100",successLightActive:"$green200",warningLight:"$yellow50",warningLightHover:"$yellow100",warningLightActive:"$yellow200",errorLight:"$red50",errorLightHover:"$red100",errorLightActive:"$red200",errorLightContrast:"$red700",neutralLight:"$gray200",neutralLightHover:"$gray300",neutralLightActive:"$gray400",neutralSolidContrast:"$white",text:"$gray900",link:"$blue700",codeLight:"$cyan50",code:"$cyan600",selection:"$pink800",border:"rgba(255, 255, 255, 0.15)"},shadows:{xs:"0 2px 8px 1px rgb(0 0 0 / 0.07), 0 1px 1px -1px rgb(0 0 0 / 0.04)",sm:"0 2px 8px 2px rgb(0 0 0 / 0.07), 0 2px 4px -1px rgb(0 0 0 / 0.04)",md:"0 12px 20px 6px rgb(0 0 0 / 0.08)",lg:"0 12px 34px 6px rgb(0 0 0 / 0.18)",xl:"0 25px 65px 0px rgb(0 0 0 / 0.35)"},dropShadows:{xs:"drop-shadow(0 2px 4px rgb(0 0 0 / 0.07)) drop-shadow(0 1px 1px rgb(0 0 0 / 0.04))",sm:"drop-shadow(0 2px 8px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 4px rgb(0 0 0 / 0.04))",md:"drop-shadow(0 4px 12px rgb(0 0 0 / 0.08)) drop-shadow(0 20px 8px rgb(0 0 0 / 0.04))",lg:"drop-shadow(0 12px 24px rgb(0 0 0 / 0.15)) drop-shadow(0 12px 14px rgb(0 0 0 / 0.1))",xl:"drop-shadow(0 25px 34px rgb(0 0 0 / 0.35))"}},Fa=m6({...xl,theme:{...xl.theme,shadows:{...Su.shadows},dropShadows:{...Su.dropShadows},colors:{...xl.theme.colors,...Su.colors}}}),B6=Fa.createTheme,Le=Fa.styled,Kl=Fa.css,_$=Fa.globalCss,Ef=Fa.keyframes,z6=Fa.getCssText,N6=Fa.theme;Fa.config;const F6=({type:e,theme:t,className:r})=>{if(!e)throw new Error("Theme type is required");return B6(r||`${e}-theme`,KS(e==="dark"?O6:Su,t))},Hx={isDark:!1,theme:N6,type:"light"},U6=me.createContext(Hx),A$=U6,XS=()=>me.useContext(A$),H6=()=>{const[e,t]=I.exports.useState(!1);return I.exports.useEffect(()=>{t(Boolean(typeof window<"u"&&window.document&&window.document.createElement))},[]),{isBrowser:e,isServer:!e}},V6=(e,t)=>e.reduce((r,i)=>(r[i]=t[i],r),{}),qS=(e,t)=>{let r=[];return[me.Children.map(e,i=>me.isValidElement(i)&&i.type===t?(r.push(i),null):i),r.length>=0?r:void 0]},iM=()=>!!Boolean(typeof window<"u"&&window.document&&window.document.createElement)&&navigator.platform.toUpperCase().indexOf("MAC")>=0,W6=(e,t=[])=>{if(me.Children.count(e)===0)return[];const r=t.length===0,i=(s,o={})=>me.cloneElement(s,o);let n=0;return me.Children.map(e,s=>me.isValidElement(s)?(n+=1,r?i(s,{index:n}):t.find(o=>o===s.type)?i(s,{index:n}):(n-=1,s)):s)},j6={scrollLayer:!1},Cd=new Map,nM=e=>!!(e.touches&&e.touches.length>1)||(e.preventDefault(),!1),M$=(e,t)=>{if(typeof document>"u")return[!1,a=>a];const r=e||I.exports.useRef(document.body),[i,n]=I.exports.useState(!1),s={...j6,...t||{}},o=()=>!s.scrollLayer&&!(typeof window>"u"||!window.navigator)&&/iP(ad|hone|od)/.test(window.navigator.platform);return I.exports.useEffect(()=>{if(!r||!r.current)return;const a=r.current.style.overflow;if(i)return Cd.has(r.current)?void 0:(o()?document.addEventListener("touchmove",nM,{passive:!1}):r.current.style.overflow="hidden",void Cd.set(r.current,{last:a}));if(Cd.has(r.current)){if(o())document.removeEventListener("touchmove",nM);else{const l=Cd.get(r.current);r.current.style.overflow=l.last}Cd.delete(r.current)}},[i,r]),[i,n]},sM={},Vx=(e,t)=>{const r=`[Next UI]${t?` [${t}]`:" "}: ${e}`;typeof console<"u"&&!sM[r]&&(sM[r]=!0,console.warn(r))},E$=!1;function G6(e){return typeof e=="function"}const C$=e=>e&&typeof e=="object",Y6=e=>C$(e)?e instanceof Array?[...e]:{...e}:e,Wx=(e,t)=>C$(e)?e instanceof Array?[...e]:e[t]:e,QS=e=>e.length&&Array.isArray(e)?e.reduce((t,r)=>({...t,...r}),{}):{},oM={Unknown:0,Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,PauseBreak:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,Meta:91,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,Equal:187,Minus:189,Backquote:192,Backslash:220},jx={CtrlCmd:2048,Shift:1024,Alt:512,WinCtrl:256},K6=()=>({CtrlCmd:iM()?"metaKey":"ctrlKey",WinCtrl:iM()?"ctrlKey":"metaKey"}),X6=e=>{const t=e.filter(i=>!!Wx(jx,i)),r={CtrlCmd:!1,Shift:!1,Alt:!1,WinCtrl:!1};return t.forEach(i=>{const n=Wx(jx,i);r[n]=!0}),r},q6=(e,t,r={})=>{const i=Array.isArray(t)?t:[t],{disableGlobalEvent:n=!1,capture:s=!1,stopPropagation:o=!1,preventDefault:a=!1,event:l="keydown"}=r,c=X6(i),h=i.filter(p=>!Wx(jx,p)),{CtrlCmd:u,WinCtrl:d}=K6(),f=p=>{c.Shift&&!p.shiftKey||c.Alt&&!p.altKey||c.CtrlCmd&&!p[u]||c.WinCtrl&&!p[d]||h.length>0&&!h.includes(p.keyCode)||(o&&p.stopPropagation(),a&&p.preventDefault(),e&&e(p))};I.exports.useEffect(()=>(n||document.addEventListener(l,f),()=>{document.removeEventListener(l,f)}),[n]);const m=(p,g=!1)=>p!==l||g!==s?()=>{}:v=>f(v);return{bindings:{onKeyDown:m("keydown"),onKeyDownCapture:m("keydown",!0),onKeyPress:m("keypress"),onKeyPressCapture:m("keypress",!0),onKeyUp:m("keyup"),onKeyUpCapture:m("keyup",!0)}}},Q6=typeof window<"u";function aM(e){return Q6?e?{x:e.scrollLeft,y:e.scrollTop}:{x:window.scrollX,y:window.scrollY}:{x:0,y:0}}const Z6=e=>{const{elementRef:t,wait:r=30,callback:i,enabled:n}=e,s=I.exports.useRef(n?aM(t==null?void 0:t.current):{x:0,y:0});let o=null;const a=()=>{const l=aM(t==null?void 0:t.current);typeof i=="function"&&i({prevPos:s.current,currPos:l}),s.current=l,o=null};return I.exports.useEffect(()=>{if(!n)return;const l=()=>{r?o===null&&(o=setTimeout(a,r)):a()},c=(t==null?void 0:t.current)||window;return c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)},[t==null?void 0:t.current,r,n]),s.current};function J6(e,{threshold:t=0,root:r=null,rootMargin:i="0%",freezeOnceVisible:n=!1}={}){const[s,o]=I.exports.useState(),a=(s==null?void 0:s.isIntersecting)&&n,l=!(s==null||!s.isIntersecting),c=([h])=>{o(h)};return I.exports.useEffect(()=>{if(typeof window>"u")return;const h=e==null?void 0:e.current;if(!window.IntersectionObserver||a||!h)return;const u=new IntersectionObserver(c,{threshold:t,root:r,rootMargin:i});return u.observe(h),()=>u.disconnect()},[e,t,r,i,a]),{entry:s,setEntry:o,isVisible:l,isFrozen:a}}const T$=(e=!1,t)=>{const[r,i]=I.exports.useState(e),[n,s]=I.exports.useState(0),[o,a]=I.exports.useState(0);return{visible:r,x:n,y:o,onClick:l=>{if(!t.current)return;const c=t.current.getBoundingClientRect();i(!0),s(l.clientX-c.left),a(l.clientY-c.top)},onCompleted:()=>{i(!1),s(0),a(0)}}},ei=(e,t)=>(e.defaultProps=t,e);function P$(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=P$(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function gt(...e){for(var t,r,i=0,n="";i<e.length;)(t=e[i++])&&(r=P$(t))&&(n&&(n+=" "),n+=r);return n}var Iv={exports:{}},Rv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eU=I.exports,tU=Symbol.for("react.element"),rU=Symbol.for("react.fragment"),iU=Object.prototype.hasOwnProperty,nU=eU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sU={key:!0,ref:!0,__self:!0,__source:!0};function D$(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)iU.call(t,i)&&!sU.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:tU,type:e,key:s,ref:o,props:n,_owner:nU.current}}Rv.Fragment=rU;Rv.jsx=D$;Rv.jsxs=D$;(function(e){e.exports=Rv})(Iv);const $n=Iv.exports.Fragment,z=Iv.exports.jsx,Ne=Iv.exports.jsxs,oU=Ef({"0%":{opacity:0,transform:"scale(0.25)"},"30%":{opacity:1},"80%":{opacity:.5},"100%":{transform:"scale(28)",opacity:0}}),tr=Le("div",{position:"absolute",left:0,right:0,top:0,bottom:0,"& svg":{position:"absolute",animation:`350ms linear ${oU}`,animationFillMode:"forwards",width:"$md",height:"$md"}}),aU=({visible:e,x:t,y:r,color:i,onCompleted:n,className:s,...o})=>{const a=I.exports.useRef(null),l=Number.isNaN(+r)?0:r-10,c=Number.isNaN(+t)?0:t-10;return I.exports.useEffect(()=>{let h=a.current;if(h)return h.addEventListener("animationend",n),()=>{h&&h.removeEventListener("animationend",n)}}),e?z(tr,{ref:a,className:gt("nextui-drip",s),...o,children:z("svg",{height:"20",style:{top:l,left:c},viewBox:"0 0 20 20",width:"20",children:z("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:z("g",{className:"nextui-drip-filler",fill:i,children:z("rect",{height:"100%",rx:"10",width:"100%"})})})})}):null},lU=me.memo(aU),L$=ei(lU,{visible:!1,x:0,y:0,className:""}),cU=_$({"*, *:before, *:after":{boxSizing:"border-box",textRendering:"geometricPrecision",WebkitTapHighlightColor:"transparent"},html:{fontSize:"$base"},body:{margin:0,padding:0,minHeight:"100%",position:"relative",overflowX:"hidden",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",fontSize:"$base",lineHeight:"$md",fontFamily:"$sans"},"html, body":{backgroundColor:"$background",color:"$text"},"p, small":{color:"inherit",letterSpacing:"$tighter",fontWeight:"$normal",fontFamily:"$sans"},p:{fontSize:"$base",lineHeight:"$lg"},small:{margin:0,lineHeight:"$xs",fontSize:"$xs"},b:{fontWeight:"$semibold"},span:{fontSize:"inherit",color:"inherit",fontWeight:"inherit"},img:{maxWidth:"100%"},a:{cursor:"pointer",fontSize:"inherit",WebkitTouchCallout:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitBoxAlign:"center",alignItems:"center",color:"$link",textDecoration:"none"},"a:hover":{textDecoration:"none"},"ul,ol":{padding:0,listStyleType:"none",margin:"$sm $sm $sm $lg",color:"$foreground"},ol:{listStyleType:"decimal"},li:{marginBottom:"$5",fontSize:"$base",lineHeight:"$lg"},"h1,h2,h3,h4,h5,h6":{color:"inherit",margin:"0 0 $5 0"},h1:{letterSpacing:"$tighter",fontSize:"$5xl",lineHeight:"$md",fontWeight:"$bold"},h2:{letterSpacing:"$tighter",fontSize:"$4xl",fontWeight:"$semibold"},h3:{letterSpacing:"$tighter",fontSize:"$2xl",fontWeight:"$semibold"},h4:{letterSpacing:"$tighter",fontSize:"$xl",fontWeight:"$semibold"},h5:{letterSpacing:"$tight",fontSize:"$md",fontWeight:"$semibold"},h6:{letterSpacing:"$tight",fontSize:"$sm",fontWeight:"$semibold"},"button, input, select,textarea":{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",color:"inherit",margin:0},"button:focus, input:focus, select:focus, textarea:focus":{outline:"none"},code:{color:"$code",padding:"$1 $2",borderRadius:"$xs",bg:"$codeLight",fontFamily:"$mono",fontSize:"$sm",whiteSpace:"pre-wrap",transition:"opacity 0.25s ease 0s"},"code:hover":{opacity:.8},pre:{overflow:"auto",whiteSpace:"pre",textAlign:"left",fontSize:"$sm",borderRadius:"$lg",padding:"$md $lg",margin:"$lg 0",fontFamily:"$mono",lineHeight:"$md",webkitOverflowScrolling:"touch"},"pre code":{color:"$foreground",fontSize:"$sm",lineHeight:"$sm",whiteSpace:"pre"},"pre code:before,pre code:after":{display:"none"},"pre p":{margin:0},"pre::-webkit-scrollbar":{display:"none",width:0,height:0,background:"transparent"},hr:{background:"$border",borderColor:"transparent",borderWidth:"0px",borderStyle:"none",height:"1px"},details:{backgroundColor:"$accents1",border:"none"},"details:focus, details:hover, details:active":{outline:"none"},summary:{cursor:"pointer",userSelect:"none",listStyle:"none",outline:"none"},"summary::-webkit-details-marker, summary::before":{display:"none"},"summary::-moz-list-bullet":{fontSize:0},"summary:focus, summary:hover, summary:active":{outline:"none",listStyle:"none"},"::selection":{backgroundColor:"$selection"},blockquote:{padding:"$md $lg",color:"$accents7",backgroundColor:"$accents0",borderRadius:"$lg",margin:"$10 0"},"blockquote *:first-child":{marginTop:0},"blockquote *:last-child":{marginBottom:0},kbd:{width:"fit-content",textAlign:"center",display:"inline-block",color:"$accents8",bg:"$accents0",border:"1px solid $border",boxShadow:"0 0 1px 0 rgb(0 0 0 / 14%)",fontFamily:"$sans",borderRadius:"5px",padding:"$1 $3",mx:"$1",lineHeight:"$sm",fontSize:"$sm"},"kbd + kbd":{ml:"$2"},"dl, dd, hr, figure, p":{margin:0}}),uU=({children:e})=>(cU(),z(me.Fragment,{children:e})),$$=me.memo(uU);$$.flush=()=>z("style",{dangerouslySetInnerHTML:{__html:z6()},id:"stitches"});const dU=$$,kv={prefix:String(Math.round(Math.random()*1e10)),current:0},Dg=me.createContext(kv);function hU(e){let t=I.exports.useContext(Dg),r=I.exports.useMemo(()=>({prefix:t===kv?"":`${t.prefix}-${++t.current}`,current:0}),[t]);return me.createElement(Dg.Provider,{value:r},e.children)}let fU=Boolean(typeof window<"u"&&window.document&&window.document.createElement);function ZS(e){let t=I.exports.useContext(Dg);return t===kv&&!fU&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),I.exports.useMemo(()=>e||`react-aria${t.prefix}-${++t.current}`,[e])}function I$(){let t=I.exports.useContext(Dg)!==kv,[r,i]=I.exports.useState(t);return typeof window<"u"&&t&&I.exports.useLayoutEffect(()=>{i(!1)},[]),r}class pU{getStringForLocale(t,r){let i=this.strings[r];i||(i=mU(r,this.strings,this.defaultLocale),this.strings[r]=i);let n=i[t];if(!n)throw new Error(`Could not find intl message ${t} in ${r} locale`);return n}constructor(t,r="en-US"){this.strings={...t},this.defaultLocale=r}}function mU(e,t,r="en-US"){if(t[e])return t[e];let i=gU(e);if(t[i])return t[i];for(let n in t)if(n.startsWith(i+"-"))return t[n];return t[r]}function gU(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const lM=new Map,cM=new Map;class vU{format(t,r){let i=this.strings.getStringForLocale(t,this.locale);return typeof i=="function"?i(r,this):i}plural(t,r,i="cardinal"){let n=r["="+t];if(n)return typeof n=="function"?n():n;let s=this.locale+":"+i,o=lM.get(s);o||(o=new Intl.PluralRules(this.locale,{type:i}),lM.set(s,o));let a=o.select(t);return n=r[a]||r.other,typeof n=="function"?n():n}number(t){let r=cM.get(this.locale);return r||(r=new Intl.NumberFormat(this.locale),cM.set(this.locale,r)),r.format(t)}select(t,r){let i=t[r]||t.other;return typeof i=="function"?i():i}constructor(t,r){this.locale=t,this.strings=r}}function Cf(e,t,r){let[i,n]=I.exports.useState(e||t),s=I.exports.useRef(e!==void 0),o=s.current,a=e!==void 0,l=I.exports.useRef(i);o!==a&&console.warn(`WARN: A component changed from ${o?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}.`),s.current=a;let c=I.exports.useCallback((h,...u)=>{let d=(f,...m)=>{r&&(Object.is(l.current,f)||r(f,...m)),a||(l.current=f)};typeof h=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),n((m,...p)=>{let g=h(a?l.current:m,...p);return d(g,...u),a?m:g})):(a||n(h),d(h,...u))},[a,r]);return a?l.current=e:e=i,[e,c]}function R$(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=R$(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function JS(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=R$(e))&&(i&&(i+=" "),i+=t);return i}const bo=typeof window<"u"?me.useLayoutEffect:()=>{};let Lg=new Map;function Qu(e){let[t,r]=I.exports.useState(e),i=I.exports.useRef(null),n=ZS(t),s=I.exports.useCallback(o=>{i.current=o},[]);return Lg.set(n,s),bo(()=>{let o=n;return()=>{Lg.delete(o)}},[n]),I.exports.useEffect(()=>{let o=i.current;o&&(i.current=null,r(o))}),n}function yU(e,t){if(e===t)return e;let r=Lg.get(e);if(r)return r(t),t;let i=Lg.get(t);return i?(i(e),e):t}function Um(e=[]){let t=Qu(),[r,i]=$U(t),n=I.exports.useCallback(()=>{i(function*(){yield t,yield document.getElementById(t)?t:null})},[t,i]);return bo(n,[t,n,...e]),r}function k$(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function Ci(...e){let t={...e[0]};for(let r=1;r<e.length;r++){let i=e[r];for(let n in i){let s=t[n],o=i[n];typeof s=="function"&&typeof o=="function"&&n[0]==="o"&&n[1]==="n"&&n.charCodeAt(2)>=65&&n.charCodeAt(2)<=90?t[n]=k$(s,o):(n==="className"||n==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?t[n]=JS(s,o):n==="id"&&s&&o?t.id=yU(s,o):t[n]=o!==void 0?o:s}}return t}const xU=new Set(["id"]),bU=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),wU=/^(data-.*)$/;function Ov(e,t={}){let{labelable:r,propNames:i}=t,n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(xU.has(s)||r&&bU.has(s)||(i==null?void 0:i.has(s))||wU.test(s))&&(n[s]=e[s]);return n}function oa(e){if(SU())e.focus({preventScroll:!0});else{let t=_U(e);e.focus(),AU(t)}}let dp=null;function SU(){if(dp==null){dp=!1;try{var e=document.createElement("div");e.focus({get preventScroll(){return dp=!0,!0}})}catch{}}return dp}function _U(e){for(var t=e.parentNode,r=[],i=document.scrollingElement||document.documentElement;t instanceof HTMLElement&&t!==i;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return i instanceof HTMLElement&&r.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),r}function AU(e){for(let{element:t,scrollTop:r,scrollLeft:i}of e)t.scrollTop=r,t.scrollLeft=i}let Ic=new Map,Gx=new Set;function uM(){if(typeof window>"u")return;let e=r=>{let i=Ic.get(r.target);i||(i=new Set,Ic.set(r.target,i),r.target.addEventListener("transitioncancel",t)),i.add(r.propertyName)},t=r=>{let i=Ic.get(r.target);if(!!i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",t),Ic.delete(r.target)),Ic.size===0)){for(let n of Gx)n();Gx.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?uM():document.addEventListener("DOMContentLoaded",uM));function O$(e){requestAnimationFrame(()=>{Ic.size===0?e():Gx.add(e)})}function B$(){let e=I.exports.useRef(new Map),t=I.exports.useCallback((n,s,o,a)=>{let l=a!=null&&a.once?(...c)=>{e.current.delete(o),o(...c)}:o;e.current.set(o,{type:s,eventTarget:n,fn:l,options:a}),n.addEventListener(s,o,a)},[]),r=I.exports.useCallback((n,s,o,a)=>{var l;let c=((l=e.current.get(o))===null||l===void 0?void 0:l.fn)||o;n.removeEventListener(s,c,a),e.current.delete(o)},[]),i=I.exports.useCallback(()=>{e.current.forEach((n,s)=>{r(n.eventTarget,n.type,s,n.options)})},[r]);return I.exports.useEffect(()=>i,[i]),{addGlobalListener:t,removeGlobalListener:r,removeAllGlobalListeners:i}}function MU(e,t){let{id:r,"aria-label":i,"aria-labelledby":n}=e;return r=Qu(r),n&&i?n=[...new Set([...n.trim().split(/\s+/),r])].join(" "):n&&(n=n.trim().split(/\s+/).join(" ")),!i&&!n&&t&&(i=t),{id:r,"aria-label":i,"aria-labelledby":n}}function z$(e,t){bo(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref.current=null}},[e,t])}let EU=0;const q0=new Map;function CU(e){let[t,r]=I.exports.useState(null);return bo(()=>{if(!e)return;let i=q0.get(e);if(i)r(i.element.id);else{let n=`react-aria-description-${EU++}`;r(n);let s=document.createElement("div");s.id=n,s.style.display="none",s.textContent=e,document.body.appendChild(s),i={refCount:0,element:s},q0.set(e,i)}return i.refCount++,()=>{--i.refCount===0&&(i.element.remove(),q0.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}function e_(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Bv(){return e_(/^Mac/i)}function TU(){return e_(/^iPhone/i)}function PU(){return e_(/^iPad/i)||Bv()&&navigator.maxTouchPoints>1}function t_(){return TU()||PU()}function DU(){return Bv()||t_()}function LU(e,t,r,i){let n=I.exports.useRef(r);n.current=r;let s=r==null;I.exports.useEffect(()=>{if(s)return;let o=e.current,a=l=>n.current.call(this,l);return o.addEventListener(t,a,i),()=>{o.removeEventListener(t,a,i)}},[e,t,i,s])}function $U(e){let[t,r]=I.exports.useState(e),i=I.exports.useRef(t),n=I.exports.useRef(null);i.current=t;let s=I.exports.useRef(null);s.current=()=>{let a=n.current.next();if(a.done){n.current=null;return}t===a.value?s.current():r(a.value)},bo(()=>{n.current&&s.current()});let o=I.exports.useCallback(a=>{n.current=a(i.current),s.current()},[n,s]);return[t,o]}function dM(e,t){let r=hM(e,t,"left"),i=hM(e,t,"top"),n=t.offsetWidth,s=t.offsetHeight,o=e.scrollLeft,a=e.scrollTop,l=o+e.offsetWidth,c=a+e.offsetHeight;r<=o?o=r:r+n>l&&(o+=r+n-l),i<=a?a=i:i+s>c&&(a+=i+s-c),e.scrollLeft=o,e.scrollTop=a}function hM(e,t,r){const i=r==="left"?"offsetLeft":"offsetTop";let n=0;for(;t.offsetParent&&(n+=t[i],t.offsetParent!==e);){if(t.offsetParent.contains(e)){n-=e[i];break}t=t.offsetParent}return n}const IU=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),RU=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function kU(e){if(Intl.Locale){let r=new Intl.Locale(e).maximize().script;return IU.has(r)}let t=e.split("-")[0];return RU.has(t)}function N$(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:kU(e)?"rtl":"ltr"}}let Yx=N$(),Zd=new Set;function fM(){Yx=N$();for(let e of Zd)e(Yx)}function OU(){let e=I$(),[t,r]=I.exports.useState(Yx);return I.exports.useEffect(()=>(Zd.size===0&&window.addEventListener("languagechange",fM),Zd.add(r),()=>{Zd.delete(r),Zd.size===0&&window.removeEventListener("languagechange",fM)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const BU=me.createContext(null);function zv(){let e=OU();return I.exports.useContext(BU)||e}const pM=new WeakMap;function zU(e){let t=pM.get(e);return t||(t=new pU(e),pM.set(e,t)),t}function F$(e){let{locale:t}=zv(),r=I.exports.useMemo(()=>zU(e),[e]);return I.exports.useMemo(()=>new vU(t,r),[t,r])}let Q0=new Map;function NU(e){let{locale:t}=zv(),r=t+(e?Object.entries(e).sort((n,s)=>n[0]<s[0]?-1:1).join():"");if(Q0.has(r))return Q0.get(r);let i=new Intl.Collator(t,e);return Q0.set(r,i),i}let nu="default",Kx="",Hm=new WeakMap;function mM(e){t_()?(nu==="default"&&(Kx=document.documentElement.style.webkitUserSelect,document.documentElement.style.webkitUserSelect="none"),nu="disabled"):(e instanceof HTMLElement||e instanceof SVGElement)&&(Hm.set(e,e.style.userSelect),e.style.userSelect="none")}function hp(e){if(t_()){if(nu!=="disabled")return;nu="restoring",setTimeout(()=>{O$(()=>{nu==="restoring"&&(document.documentElement.style.webkitUserSelect==="none"&&(document.documentElement.style.webkitUserSelect=Kx||""),Kx="",nu="default")})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&Hm.has(e)){let t=Hm.get(e);e.style.userSelect==="none"&&(e.style.userSelect=t),e.getAttribute("style")===""&&e.removeAttribute("style"),Hm.delete(e)}}function Xx(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}class FU{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,r){this.nativeEvent=r,this.target=r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget,this.bubbles=r.bubbles,this.cancelable=r.cancelable,this.defaultPrevented=r.defaultPrevented,this.eventPhase=r.eventPhase,this.isTrusted=r.isTrusted,this.timeStamp=r.timeStamp,this.type=t}}function U$(e){let t=I.exports.useRef({isFocused:!1,onBlur:e,observer:null});return t.current.onBlur=e,bo(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]),I.exports.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,n=s=>{var o,a;t.current.isFocused=!1,i.disabled&&((a=(o=t.current).onBlur)===null||a===void 0||a.call(o,new FU("blur",s))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",n,{once:!0}),t.current.observer=new MutationObserver(()=>{t.current.isFocused&&i.disabled&&(t.current.observer.disconnect(),i.dispatchEvent(new FocusEvent("blur")),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0})))}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[])}const H$=me.createContext(null);H$.displayName="PressResponderContext";function UU(e){let t=I.exports.useContext(H$);if(t){let{register:r,...i}=t;e=Ci(i,e),r()}return z$(t,e.ref),e}function Tf(e){let{onPress:t,onPressChange:r,onPressStart:i,onPressEnd:n,onPressUp:s,isDisabled:o,isPressed:a,preventFocusOnPress:l,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:h,ref:u,...d}=UU(e),f=I.exports.useRef(null);f.current={onPress:t,onPressChange:r,onPressStart:i,onPressEnd:n,onPressUp:s,isDisabled:o,shouldCancelOnPointerExit:c};let[m,p]=I.exports.useState(!1),g=I.exports.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:v,removeAllGlobalListeners:y}=B$(),b=I.exports.useMemo(()=>{let x=g.current,A=(E,$)=>{let{onPressStart:P,onPressChange:D,isDisabled:W}=f.current;W||x.didFirePressStart||(P&&P({type:"pressstart",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey}),D&&D(!0),x.didFirePressStart=!0,p(!0))},S=(E,$,P=!0)=>{let{onPressEnd:D,onPressChange:W,onPress:V,isDisabled:H}=f.current;!x.didFirePressStart||(x.ignoreClickAfterPress=!0,x.didFirePressStart=!1,D&&D({type:"pressend",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey}),W&&W(!1),p(!1),V&&P&&!H&&V({type:"press",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey}))},_=(E,$)=>{let{onPressUp:P,isDisabled:D}=f.current;D||P&&P({type:"pressup",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey})},w=E=>{x.isPressed&&(x.isOverTarget&&S(Ws(x.target,E),x.pointerType,!1),x.isPressed=!1,x.isOverTarget=!1,x.activePointerId=null,x.pointerType=null,y(),h||hp(x.target))},M={onKeyDown(E){Z0(E.nativeEvent,E.currentTarget)&&E.currentTarget.contains(E.target)?(vM(E.target,E.key)&&E.preventDefault(),E.stopPropagation(),!x.isPressed&&!E.repeat&&(x.target=E.currentTarget,x.isPressed=!0,A(E,"keyboard"),v(document,"keyup",C,!1))):E.key==="Enter"&&qx(E.currentTarget)&&E.stopPropagation()},onKeyUp(E){Z0(E.nativeEvent,E.currentTarget)&&!E.repeat&&E.currentTarget.contains(E.target)&&_(Ws(x.target,E),"keyboard")},onClick(E){E&&!E.currentTarget.contains(E.target)||E&&E.button===0&&(E.stopPropagation(),o&&E.preventDefault(),!x.ignoreClickAfterPress&&!x.ignoreEmulatedMouseEvents&&(x.pointerType==="virtual"||Xx(E.nativeEvent))&&(!o&&!l&&oa(E.currentTarget),A(E,"virtual"),_(E,"virtual"),S(E,"virtual")),x.ignoreEmulatedMouseEvents=!1,x.ignoreClickAfterPress=!1)}},C=E=>{if(x.isPressed&&Z0(E,x.target)){vM(E.target,E.key)&&E.preventDefault(),E.stopPropagation(),x.isPressed=!1;let $=E.target;S(Ws(x.target,E),"keyboard",x.target.contains($)),y(),x.target instanceof HTMLElement&&x.target.contains($)&&(qx(x.target)||x.target.getAttribute("role")==="link")&&x.target.click()}};if(typeof PointerEvent<"u"){M.onPointerDown=D=>{if(!(D.button!==0||!D.currentTarget.contains(D.target))){if(GU(D.nativeEvent)){x.pointerType="virtual";return}J0(D.currentTarget)&&D.preventDefault(),x.pointerType=D.pointerType,D.stopPropagation(),x.isPressed||(x.isPressed=!0,x.isOverTarget=!0,x.activePointerId=D.pointerId,x.target=D.currentTarget,!o&&!l&&oa(D.currentTarget),h||mM(x.target),A(D,x.pointerType),v(document,"pointermove",E,!1),v(document,"pointerup",$,!1),v(document,"pointercancel",P,!1))}},M.onMouseDown=D=>{!D.currentTarget.contains(D.target)||D.button===0&&(J0(D.currentTarget)&&D.preventDefault(),D.stopPropagation())},M.onPointerUp=D=>{!D.currentTarget.contains(D.target)||x.pointerType==="virtual"||D.button===0&&sc(D,D.currentTarget)&&_(D,x.pointerType||D.pointerType)};let E=D=>{D.pointerId===x.activePointerId&&(sc(D,x.target)?x.isOverTarget||(x.isOverTarget=!0,A(Ws(x.target,D),x.pointerType)):x.isOverTarget&&(x.isOverTarget=!1,S(Ws(x.target,D),x.pointerType,!1),f.current.shouldCancelOnPointerExit&&w(D)))},$=D=>{D.pointerId===x.activePointerId&&x.isPressed&&D.button===0&&(sc(D,x.target)?S(Ws(x.target,D),x.pointerType):x.isOverTarget&&S(Ws(x.target,D),x.pointerType,!1),x.isPressed=!1,x.isOverTarget=!1,x.activePointerId=null,x.pointerType=null,y(),h||hp(x.target))},P=D=>{w(D)};M.onDragStart=D=>{!D.currentTarget.contains(D.target)||w(D)}}else{M.onMouseDown=P=>{P.button!==0||!P.currentTarget.contains(P.target)||(J0(P.currentTarget)&&P.preventDefault(),P.stopPropagation(),!x.ignoreEmulatedMouseEvents&&(x.isPressed=!0,x.isOverTarget=!0,x.target=P.currentTarget,x.pointerType=Xx(P.nativeEvent)?"virtual":"mouse",!o&&!l&&oa(P.currentTarget),A(P,x.pointerType),v(document,"mouseup",E,!1)))},M.onMouseEnter=P=>{!P.currentTarget.contains(P.target)||(P.stopPropagation(),x.isPressed&&!x.ignoreEmulatedMouseEvents&&(x.isOverTarget=!0,A(P,x.pointerType)))},M.onMouseLeave=P=>{!P.currentTarget.contains(P.target)||(P.stopPropagation(),x.isPressed&&!x.ignoreEmulatedMouseEvents&&(x.isOverTarget=!1,S(P,x.pointerType,!1),f.current.shouldCancelOnPointerExit&&w(P)))},M.onMouseUp=P=>{!P.currentTarget.contains(P.target)||!x.ignoreEmulatedMouseEvents&&P.button===0&&_(P,x.pointerType)};let E=P=>{if(P.button===0){if(x.isPressed=!1,y(),x.ignoreEmulatedMouseEvents){x.ignoreEmulatedMouseEvents=!1;return}sc(P,x.target)?S(Ws(x.target,P),x.pointerType):x.isOverTarget&&S(Ws(x.target,P),x.pointerType,!1),x.isOverTarget=!1}};M.onTouchStart=P=>{if(!P.currentTarget.contains(P.target))return;P.stopPropagation();let D=HU(P.nativeEvent);!D||(x.activePointerId=D.identifier,x.ignoreEmulatedMouseEvents=!0,x.isOverTarget=!0,x.isPressed=!0,x.target=P.currentTarget,x.pointerType="touch",!o&&!l&&oa(P.currentTarget),h||mM(x.target),A(P,x.pointerType),v(window,"scroll",$,!0))},M.onTouchMove=P=>{if(!P.currentTarget.contains(P.target)||(P.stopPropagation(),!x.isPressed))return;let D=gM(P.nativeEvent,x.activePointerId);D&&sc(D,P.currentTarget)?x.isOverTarget||(x.isOverTarget=!0,A(P,x.pointerType)):x.isOverTarget&&(x.isOverTarget=!1,S(P,x.pointerType,!1),f.current.shouldCancelOnPointerExit&&w(P))},M.onTouchEnd=P=>{if(!P.currentTarget.contains(P.target)||(P.stopPropagation(),!x.isPressed))return;let D=gM(P.nativeEvent,x.activePointerId);D&&sc(D,P.currentTarget)?(_(P,x.pointerType),S(P,x.pointerType)):x.isOverTarget&&S(P,x.pointerType,!1),x.isPressed=!1,x.activePointerId=null,x.isOverTarget=!1,x.ignoreEmulatedMouseEvents=!0,h||hp(x.target),y()},M.onTouchCancel=P=>{!P.currentTarget.contains(P.target)||(P.stopPropagation(),x.isPressed&&w(P))};let $=P=>{x.isPressed&&P.target.contains(x.target)&&w({currentTarget:x.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};M.onDragStart=P=>{!P.currentTarget.contains(P.target)||w(P)}}return M},[v,o,l,y,h]);return I.exports.useEffect(()=>()=>{h||hp(g.current.target)},[h]),{isPressed:a||m,pressProps:Ci(d,b)}}function qx(e){return e.tagName==="A"&&e.hasAttribute("href")}function Z0(e,t){const{key:r,code:i}=e,n=t,s=n.getAttribute("role");return(r==="Enter"||r===" "||r==="Spacebar"||i==="Space")&&!(n instanceof HTMLInputElement&&!V$(n,r)||n instanceof HTMLTextAreaElement||n.isContentEditable)&&(!qx(n)||s==="button"&&r!=="Enter")&&!(s==="link"&&r!=="Enter")}function HU(e){const{targetTouches:t}=e;return t.length>0?t[0]:null}function gM(e,t){const r=e.changedTouches;for(let i=0;i<r.length;i++){const n=r[i];if(n.identifier===t)return n}return null}function Ws(e,t){return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey}}function VU(e){let t=e.width/2||e.radiusX||0,r=e.height/2||e.radiusY||0;return{top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}}function WU(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function sc(e,t){let r=t.getBoundingClientRect(),i=VU(e);return WU(r,i)}function J0(e){return!(e instanceof HTMLElement)||!e.draggable}function vM(e,t){return e instanceof HTMLInputElement?!V$(e,t):e instanceof HTMLButtonElement?e.type!=="submit":!0}const jU=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function V$(e,t){return e.type==="checkbox"||e.type==="radio"?t===" ":jU.has(e.type)}function GU(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function W$(e){let{isDisabled:t,onFocus:r,onBlur:i,onFocusChange:n}=e;const s=I.exports.useCallback(l=>{if(l.target===l.currentTarget)return i&&i(l),n&&n(!1),!0},[i,n]),o=U$(s),a=I.exports.useCallback(l=>{l.target===l.currentTarget&&(r&&r(l),n&&n(!0),o(l))},[n,r,o]);return{focusProps:{onFocus:!t&&(r||n||i)?a:void 0,onBlur:!t&&(i||n)?s:null}}}let Zu=null,YU=new Set,yM=!1,Rl=!1,Qx=!1;function r_(e,t){for(let r of YU)r(e,t)}function KU(e){return!(e.metaKey||!Bv()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function xM(e){Rl=!0,KU(e)&&(Zu="keyboard",r_("keyboard",e))}function oc(e){Zu="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(Rl=!0,r_("pointer",e))}function XU(e){Xx(e)&&(Rl=!0,Zu="virtual")}function qU(e){e.target===window||e.target===document||(!Rl&&!Qx&&(Zu="virtual",r_("virtual",e)),Rl=!1,Qx=!1)}function QU(){Rl=!1,Qx=!0}function bM(){if(typeof window>"u"||yM)return;let e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){Rl=!0,e.apply(this,arguments)},document.addEventListener("keydown",xM,!0),document.addEventListener("keyup",xM,!0),document.addEventListener("click",XU,!0),window.addEventListener("focus",qU,!0),window.addEventListener("blur",QU,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",oc,!0),document.addEventListener("pointermove",oc,!0),document.addEventListener("pointerup",oc,!0)):(document.addEventListener("mousedown",oc,!0),document.addEventListener("mousemove",oc,!0),document.addEventListener("mouseup",oc,!0)),yM=!0}typeof document<"u"&&(document.readyState!=="loading"?bM():document.addEventListener("DOMContentLoaded",bM));function ZU(){return Zu!=="pointer"}function JU(){return Zu}function eH(e){let{isDisabled:t,onBlurWithin:r,onFocusWithin:i,onFocusWithinChange:n}=e,s=I.exports.useRef({isFocusWithin:!1}),o=I.exports.useCallback(c=>{s.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(s.current.isFocusWithin=!1,r&&r(c),n&&n(!1))},[r,n,s]),a=U$(o),l=I.exports.useCallback(c=>{s.current.isFocusWithin||(i&&i(c),n&&n(!0),s.current.isFocusWithin=!0,a(c))},[i,n,a]);return t?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let $g=!1,ey=0;function Zx(){$g=!0,setTimeout(()=>{$g=!1},50)}function wM(e){e.pointerType==="touch"&&Zx()}function tH(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",wM):document.addEventListener("touchend",Zx),ey++,()=>{ey--,!(ey>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",wM):document.removeEventListener("touchend",Zx))}}function rH(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:i,isDisabled:n}=e,[s,o]=I.exports.useState(!1),a=I.exports.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;I.exports.useEffect(tH,[]);let{hoverProps:l,triggerHoverEnd:c}=I.exports.useMemo(()=>{let h=(f,m)=>{if(a.pointerType=m,n||m==="touch"||a.isHovered||!f.currentTarget.contains(f.target))return;a.isHovered=!0;let p=f.currentTarget;a.target=p,t&&t({type:"hoverstart",target:p,pointerType:m}),r&&r(!0),o(!0)},u=(f,m)=>{if(a.pointerType="",a.target=null,m==="touch"||!a.isHovered)return;a.isHovered=!1;let p=f.currentTarget;i&&i({type:"hoverend",target:p,pointerType:m}),r&&r(!1),o(!1)},d={};return typeof PointerEvent<"u"?(d.onPointerEnter=f=>{$g&&f.pointerType==="mouse"||h(f,f.pointerType)},d.onPointerLeave=f=>{!n&&f.currentTarget.contains(f.target)&&u(f,f.pointerType)}):(d.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},d.onMouseEnter=f=>{!a.ignoreEmulatedMouseEvents&&!$g&&h(f,"mouse"),a.ignoreEmulatedMouseEvents=!1},d.onMouseLeave=f=>{!n&&f.currentTarget.contains(f.target)&&u(f,"mouse")}),{hoverProps:d,triggerHoverEnd:u}},[t,r,i,n,a]);return I.exports.useEffect(()=>{n&&c({currentTarget:a.target},a.pointerType)},[n]),{hoverProps:l,isHovered:s}}function iH(e){let{ref:t,onInteractOutside:r,isDisabled:i,onInteractOutsideStart:n}=e,o=I.exports.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1,onInteractOutside:r,onInteractOutsideStart:n}).current;o.onInteractOutside=r,o.onInteractOutsideStart=n,I.exports.useEffect(()=>{if(i)return;let a=l=>{fp(l,t)&&o.onInteractOutside&&(o.onInteractOutsideStart&&o.onInteractOutsideStart(l),o.isPointerDown=!0)};if(typeof PointerEvent<"u"){let l=c=>{o.isPointerDown&&o.onInteractOutside&&fp(c,t)&&(o.isPointerDown=!1,o.onInteractOutside(c))};return document.addEventListener("pointerdown",a,!0),document.addEventListener("pointerup",l,!0),()=>{document.removeEventListener("pointerdown",a,!0),document.removeEventListener("pointerup",l,!0)}}else{let l=h=>{o.ignoreEmulatedMouseEvents?o.ignoreEmulatedMouseEvents=!1:o.isPointerDown&&o.onInteractOutside&&fp(h,t)&&(o.isPointerDown=!1,o.onInteractOutside(h))},c=h=>{o.ignoreEmulatedMouseEvents=!0,o.onInteractOutside&&o.isPointerDown&&fp(h,t)&&(o.isPointerDown=!1,o.onInteractOutside(h))};return document.addEventListener("mousedown",a,!0),document.addEventListener("mouseup",l,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",c,!0),()=>{document.removeEventListener("mousedown",a,!0),document.removeEventListener("mouseup",l,!0),document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",c,!0)}}},[t,o,i])}function fp(e,t){if(e.button>0)return!1;if(e.target){const r=e.target.ownerDocument;if(!r||!r.documentElement.contains(e.target))return!1}return t.current&&!t.current.contains(e.target)}function SM(e){if(!e)return;let t=!0;return r=>{let i={...r,preventDefault(){r.preventDefault()},isDefaultPrevented(){return r.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){t=!1}};e(i),t&&r.stopPropagation()}}function nH(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:SM(e.onKeyDown),onKeyUp:SM(e.onKeyUp)}}}const sH=500;function j$(e){let{isDisabled:t,onLongPressStart:r,onLongPressEnd:i,onLongPress:n,threshold:s=sH,accessibilityDescription:o}=e;const a=I.exports.useRef(null);let{addGlobalListener:l,removeGlobalListener:c}=B$(),{pressProps:h}=Tf({isDisabled:t,onPressStart(d){if((d.pointerType==="mouse"||d.pointerType==="touch")&&(r&&r({...d,type:"longpressstart"}),a.current=setTimeout(()=>{d.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),n&&n({...d,type:"longpress"}),a.current=null},s),d.pointerType==="touch")){let f=m=>{m.preventDefault()};l(d.target,"contextmenu",f,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{c(d.target,"contextmenu",f)},30)},{once:!0})}},onPressEnd(d){a.current&&clearTimeout(a.current),i&&(d.pointerType==="mouse"||d.pointerType==="touch")&&i({...d,type:"longpressend"})}}),u=CU(n&&!t?o:null);return{longPressProps:Ci(h,u)}}const _M={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:1,whiteSpace:"nowrap"};function oH(e={}){let{style:t,isFocusable:r}=e,[i,n]=I.exports.useState(!1),{focusProps:s}=W$({isDisabled:!r,onFocusChange:n}),o=I.exports.useMemo(()=>i?t:t?{..._M,...t}:_M,[i]);return{visuallyHiddenProps:{...s,style:o}}}function aH(e){let{children:t,elementType:r="div",isFocusable:i,style:n,...s}=e,{visuallyHiddenProps:o}=oH(e);return me.createElement(r,Ci(s,o),t)}function lH(e){return e&&e.__esModule?e.default:e}const AM={top:"top",bottom:"top",left:"left",right:"left"},Ig={top:"bottom",bottom:"top",left:"right",right:"left"},cH={top:"left",left:"top"},Jx={top:"height",left:"width"},pp={};let ac=typeof window<"u"&&window.visualViewport;function uH(e){let t=0,r=0,i=0,n=0,s={};if(e.tagName==="BODY"){let l=document.documentElement;var o;t=(o=ac==null?void 0:ac.width)!==null&&o!==void 0?o:l.clientWidth;var a;r=(a=ac==null?void 0:ac.height)!==null&&a!==void 0?a:l.clientHeight,s.top=l.scrollTop||e.scrollTop,s.left=l.scrollLeft||e.scrollLeft}else({width:t,height:r,top:i,left:n}=_u(e)),s.top=e.scrollTop,s.left=e.scrollLeft;return{width:t,height:r,scroll:s,top:i,left:n}}function dH(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function MM(e,t,r,i,n){let s=i.scroll[e],o=i[Jx[e]],a=t-n-s,l=t+n-s+r;return a<0?-a:l>o?Math.max(o-l,-a):0}function hH(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function EM(e){if(pp[e])return pp[e];let[t,r]=e.split(" "),i=AM[t]||"right",n=cH[i];AM[r]||(r="center");let s=Jx[i],o=Jx[n];return pp[e]={placement:t,crossPlacement:r,axis:i,crossAxis:n,size:s,crossSize:o},pp[e]}function ty(e,t,r,i,n,s,o,a){let{placement:l,crossPlacement:c,axis:h,crossAxis:u,size:d,crossSize:f}=i,m={};m[u]=e[u],c==="center"?m[u]+=(e[f]-r[f])/2:c!==u&&(m[u]+=e[f]-r[f]),m[u]+=s;let p=e[u]+e[f]/2-r[f],g=e[u]+e[f]/2;if(m[u]=Math.min(Math.max(p,m[u]),g),l===h){const v=a?o[d]:t[d];m[Ig[h]]=Math.floor(v-e[h]+n)}else m[h]=Math.floor(e[h]+e[d]+n);return m}function fH(e,t,r,i,n,s){return e.top!=null?Math.max(0,t.height+t.top+t.scroll.top-(r.top+e.top)-(n.top+n.bottom+s)):Math.max(0,i.top+r.top-(t.top+t.scroll.top)-(n.top+n.bottom+s))}function CM(e,t,r,i,n,s){let{placement:o,axis:a,size:l}=s;return o===a?Math.max(0,r[a]-e[a]-e.scroll[a]+t[a]-i[a]-i[Ig[a]]-n):Math.max(0,e[l]+e[a]+e.scroll[a]-t[a]-r[a]-r[l]-i[a]-i[Ig[a]]-n)}function pH(e,t,r,i,n,s,o,a,l,c,h,u,d){let f=EM(e),{size:m,crossAxis:p,crossSize:g,placement:v,crossPlacement:y}=f,b=ty(t,a,r,f,c,h,l,u),x=c,A=CM(a,l,t,n,s+c,f);if(o&&i[m]>A){let M=EM(`${Ig[v]} ${y}`),C=ty(t,a,r,M,c,h,l,u);CM(a,l,t,n,s+c,M)>A&&(f=M,b=C,x=c)}let S=MM(p,b[p],r[g],a,s);b[p]+=S;let _=fH(b,a,l,t,n,s);d&&d<_&&(_=d),r.height=Math.min(r.height,_),b=ty(t,a,r,f,x,h,l,u),S=MM(p,b[p],r[g],a,s),b[p]+=S;let w={};return w[p]=t[p]-b[p]+t[g]/2,{position:b,maxHeight:_,arrowOffsetLeft:w.left,arrowOffsetTop:w.top,placement:f.placement}}function mH(e){let{placement:t,targetNode:r,overlayNode:i,scrollNode:n,padding:s,shouldFlip:o,boundaryElement:a,offset:l,crossOffset:c,maxHeight:h}=e,u=i instanceof HTMLElement&&i.offsetParent||document.body,d=u.tagName==="BODY";const f=window.getComputedStyle(u).position;let m=!!f&&f!=="static",p=d?_u(r):TM(r,u);if(!d){let{marginTop:A,marginLeft:S}=window.getComputedStyle(r);p.top+=parseInt(A,10)||0,p.left+=parseInt(S,10)||0}let g=_u(i),v=hH(i);g.width+=v.left+v.right,g.height+=v.top+v.bottom;let y=dH(n),b=uH(a),x=a.tagName==="BODY"?_u(u):TM(u,a);return pH(t,p,g,y,v,s,o,b,x,l,c,m,h)}function _u(e){let{top:t,left:r,width:i,height:n}=e.getBoundingClientRect(),{scrollTop:s,scrollLeft:o,clientTop:a,clientLeft:l}=document.documentElement;return{top:t+s-a,left:r+o-l,width:i,height:n}}function TM(e,t){let r=window.getComputedStyle(e),i;if(r.position==="fixed"){let{top:n,left:s,width:o,height:a}=e.getBoundingClientRect();i={top:n,left:s,width:o,height:a}}else{i=_u(e);let n=_u(t),s=window.getComputedStyle(t);n.top+=(parseInt(s.borderTopWidth,10)||0)-t.scrollTop,n.left+=(parseInt(s.borderLeftWidth,10)||0)-t.scrollLeft,i.top-=n.top,i.left-=n.left}return i.top-=parseInt(r.marginTop,10)||0,i.left-=parseInt(r.marginLeft,10)||0,i}const G$=new WeakMap;function gH(e){let{triggerRef:t,isOpen:r,onClose:i}=e;I.exports.useEffect(()=>{if(!r)return;let n=s=>{let o=s.target;if(!t.current||o instanceof Node&&!o.contains(t.current))return;let a=i||G$.get(t.current);a&&a()};return window.addEventListener("scroll",n,!0),()=>{window.removeEventListener("scroll",n,!0)}},[r,i,t])}let lc=typeof window<"u"&&window.visualViewport;function vH(e){let{direction:t}=zv(),{targetRef:r,overlayRef:i,scrollRef:n=i,placement:s="bottom",containerPadding:o=12,shouldFlip:a=!0,boundaryElement:l=typeof document<"u"?document.body:null,offset:c=0,crossOffset:h=0,shouldUpdatePosition:u=!0,isOpen:d=!0,onClose:f,maxHeight:m}=e,[p,g]=I.exports.useState({position:{},arrowOffsetLeft:void 0,arrowOffsetTop:void 0,maxHeight:void 0,placement:void 0}),v=[u,s,i.current,r.current,n.current,o,a,l,c,h,d,t,m],y=I.exports.useCallback(()=>{u===!1||!d||!i.current||!r.current||!n.current||!l||g(mH({placement:xH(s,t),overlayNode:i.current,targetNode:r.current,scrollNode:n.current,padding:o,shouldFlip:a,boundaryElement:l,offset:c,crossOffset:h,maxHeight:m}))},v);bo(y,v),yH(y);let b=I.exports.useRef(!1);bo(()=>{let A,S=()=>{b.current=!0,clearTimeout(A),A=setTimeout(()=>{b.current=!1},500),y()};return lc==null||lc.addEventListener("resize",S),()=>{lc==null||lc.removeEventListener("resize",S)}},[y]);let x=I.exports.useCallback(()=>{b.current||f()},[f,b]);return gH({triggerRef:r,isOpen:d,onClose:f?x:void 0}),{overlayProps:{style:{position:"absolute",zIndex:1e5,...p.position,maxHeight:p.maxHeight}},placement:p.placement,arrowProps:{style:{left:p.arrowOffsetLeft,top:p.arrowOffsetTop}},updatePosition:y}}function yH(e){bo(()=>(window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}),[e])}function xH(e,t){return t==="rtl"?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}const js=[];function bH(e,t){let{onClose:r,shouldCloseOnBlur:i,isOpen:n,isDismissable:s=!1,isKeyboardDismissDisabled:o=!1,shouldCloseOnInteractOutside:a}=e;I.exports.useEffect(()=>(n&&js.push(t),()=>{let m=js.indexOf(t);m>=0&&js.splice(m,1)}),[n,t]);let l=()=>{js[js.length-1]===t&&r&&r()},c=m=>{(!a||a(m.target))&&js[js.length-1]===t&&(m.stopPropagation(),m.preventDefault())},h=m=>{(!a||a(m.target))&&(js[js.length-1]===t&&(m.stopPropagation(),m.preventDefault()),l())},u=m=>{m.key==="Escape"&&!o&&(m.stopPropagation(),m.preventDefault(),l())};iH({ref:t,onInteractOutside:s?h:null,onInteractOutsideStart:c});let{focusWithinProps:d}=eH({isDisabled:!i,onBlurWithin:m=>{(!a||a(m.relatedTarget))&&r()}}),f=m=>{m.target===m.currentTarget&&m.preventDefault()};return{overlayProps:{onKeyDown:u,...d},underlayProps:{onPointerDown:f}}}function wH(e,t,r){let{type:i}=e,{isOpen:n}=t;I.exports.useEffect(()=>{r&&r.current&&G$.set(r.current,t.close)});let s;i==="menu"?s=!0:i==="listbox"&&(s="listbox");let o=Qu();return{triggerProps:{"aria-haspopup":s,"aria-expanded":n,"aria-controls":n?o:null,onPress:t.toggle},overlayProps:{id:o}}}const Rg=me.createContext(null);function SH(e){let{children:t}=e,r=I.exports.useContext(Rg),[i,n]=I.exports.useState(0),s=I.exports.useMemo(()=>({parent:r,modalCount:i,addModal(){n(o=>o+1),r&&r.addModal()},removeModal(){n(o=>o-1),r&&r.removeModal()}}),[r,i]);return me.createElement(Rg.Provider,{value:s},t)}function _H(){let e=I.exports.useContext(Rg);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:null}}}function AH(e){let{modalProviderProps:t}=_H();return me.createElement("div",{"data-overlay-container":!0,...e,...t})}function Y$(e){return me.createElement(SH,null,me.createElement(AH,e))}function MH(e){let t=I$(),{portalContainer:r=t?null:document.body,...i}=e;if(me.useEffect(()=>{if(r!=null&&r.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[r]),!r)return null;let n=me.createElement(Y$,i);return NF.createPortal(n,r)}function EH(e){let t=I.exports.useContext(Rg);if(!t)throw new Error("Modal is not contained within a provider");return I.exports.useEffect(()=>{if(!((e==null?void 0:e.isDisabled)||!t||!t.parent))return t.parent.addModal(),()=>{t&&t.parent&&t.parent.removeModal()}},[t,t.parent,e==null?void 0:e.isDisabled]),{modalProps:{"data-ismodal":!(e!=null&&e.isDisabled)}}}var K$={},X$={};X$={dismiss:"\u062A\u062C\u0627\u0647\u0644"};var q$={};q$={dismiss:"\u041E\u0442\u0445\u0432\u044A\u0440\u043B\u044F\u043D\u0435"};var Q$={};Q$={dismiss:"Odstranit"};var Z$={};Z$={dismiss:"Luk"};var J$={};J$={dismiss:"Schlie\xDFen"};var eI={};eI={dismiss:"\u0391\u03C0\u03CC\u03C1\u03C1\u03B9\u03C8\u03B7"};var tI={};tI={dismiss:"Dismiss"};var rI={};rI={dismiss:"Descartar"};var iI={};iI={dismiss:"L\xF5peta"};var nI={};nI={dismiss:"Hylk\xE4\xE4"};var sI={};sI={dismiss:"Rejeter"};var oI={};oI={dismiss:"\u05D4\u05EA\u05E2\u05DC\u05DD"};var aI={};aI={dismiss:"Odbaci"};var lI={};lI={dismiss:"Elutas\xEDt\xE1s"};var cI={};cI={dismiss:"Ignora"};var uI={};uI={dismiss:"\u9589\u3058\u308B"};var dI={};dI={dismiss:"\uBB34\uC2DC"};var hI={};hI={dismiss:"Atmesti"};var fI={};fI={dismiss:"Ner\u0101d\u012Bt"};var pI={};pI={dismiss:"Lukk"};var mI={};mI={dismiss:"Negeren"};var gI={};gI={dismiss:"Zignoruj"};var vI={};vI={dismiss:"Descartar"};var yI={};yI={dismiss:"Dispensar"};var xI={};xI={dismiss:"Revocare"};var bI={};bI={dismiss:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C"};var wI={};wI={dismiss:"Zru\u0161i\u0165"};var SI={};SI={dismiss:"Opusti"};var _I={};_I={dismiss:"Odbaci"};var AI={};AI={dismiss:"Avvisa"};var MI={};MI={dismiss:"Kapat"};var EI={};EI={dismiss:"\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438"};var CI={};CI={dismiss:"\u53D6\u6D88"};var TI={};TI={dismiss:"\u95DC\u9589"};K$={"ar-AE":X$,"bg-BG":q$,"cs-CZ":Q$,"da-DK":Z$,"de-DE":J$,"el-GR":eI,"en-US":tI,"es-ES":rI,"et-EE":iI,"fi-FI":nI,"fr-FR":sI,"he-IL":oI,"hr-HR":aI,"hu-HU":lI,"it-IT":cI,"ja-JP":uI,"ko-KR":dI,"lt-LT":hI,"lv-LV":fI,"nb-NO":pI,"nl-NL":mI,"pl-PL":gI,"pt-BR":vI,"pt-PT":yI,"ro-RO":xI,"ru-RU":bI,"sk-SK":wI,"sl-SI":SI,"sr-SP":_I,"sv-SE":AI,"tr-TR":MI,"uk-UA":EI,"zh-CN":CI,"zh-TW":TI};function PM(e){let{onDismiss:t,...r}=e,i=F$(lH(K$)),n=MU(r,i.format("dismiss")),s=()=>{t&&t()};return me.createElement(aH,null,me.createElement("button",{...n,tabIndex:-1,onClick:s}))}const PI=(e,t=null)=>{if(typeof document>"u"||!e)return"";const r=t||document.documentElement,i=i_(e)?e.replace("var(","").replace(")",""):e.includes("--")?e:`--${e}`;return getComputedStyle(r).getPropertyValue(i)},i_=e=>!(!e||(e==null?void 0:e.indexOf("var("))!==0),DI=(e,t=1)=>{let r=0,i=0,n=0;return e.length==4?(r="0x"+e[1]+e[1],i="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):e.length==7&&(r="0x"+e[1]+e[2],i="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),`rgba(${+r},${+i},${+n},${t})`},CH=e=>FF.find(r=>r===e)!=null,TH=e=>{const t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(i,n,s,o)=>`${n}${n}${s}${s}${o}${o}`),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!r)throw new Error(`Next UI: Unsupported ${e} color.`);return[Number.parseInt(r[1],16),Number.parseInt(r[2],16),Number.parseInt(r[3],16)]},PH=e=>{const t=i_(e)?PI(e):e;if(t.charAt(0)==="#")return TH(t);const r=t.replace(/ /g,""),i=t.substr(0,4),n=r.match(/\((.+)\)/);return i.startsWith("rgb")&&n?n[1].split(",").map(s=>Number.parseFloat(s)):(console.warn('NextUI: Only supports ["RGB", "RGBA", "HEX"] color.'),[0,0,0])},ry=(e,t=1)=>{if(!e)return"";const r=i_(e)?PI(e):e;if(/#[a-fA-F0-9]{3,6}/g.test(r))return DI(r,t);if(!/^#|rgb|RGB/.test(r))return r;const[i,n,s]=PH(r);return`rgba(${i}, ${n}, ${s}, ${t>1?1:t<0?0:t})`},DH=(e,t=1)=>{const[r,i,n]=e.split(",").map(s=>Number.parseFloat(s));return`rgba(${r}, ${i}, ${n}, ${t>1?1:t<0?0:t})`},Yh=(e,t,r=1)=>{if(typeof document>"u"||!e)return"";let i=getComputedStyle(document.documentElement);const n=`--${xl.prefix}-${e}-${t}`,s=i.getPropertyValue(n);if(s&&s.includes("var")&&Yh(e,s),s&&r!==1){if(s.includes("rgb"))return DH(s,r);if(s.includes("#"))return DI(s,r)}return s},LH=()=>{const e=[...Object.keys(xl.theme.colors),...Object.keys(Su.colors)],t=Object.keys(Su.shadows);return{colors:e.reduce((r,i)=>{const n=Yh("colors",i);return n&&(r[i]={prefix:xl.prefix,scale:"colors",token:i,value:n}),r},{}),shadows:t.reduce((r,i)=>{const n=Yh("shadows",i);return n&&(r[i]={prefix:xl.prefix,scale:"shadows",token:i,value:n}),r},{})}},$H=e=>{var t;const r=(e==null||(t=e.getAttribute("style"))==null?void 0:t.split(";").map(n=>n.trim()).filter(n=>n.includes("color-scheme")))||[],i=r.length>0?r[0].replace("color-scheme: ","").replace(";",""):"";return(e==null?void 0:e.getAttribute("data-theme"))||i},eb=e=>typeof e=="string"&&e!=null&&e.includes("-theme")?e==null?void 0:e.replace("-theme",""):e,IH=e=>{var t,r;if(!document)return;const i=document.documentElement,n=(i==null||(t=i.getAttribute("class"))==null?void 0:t.split(" ").filter(o=>!o.includes("theme")&&!o.includes("light")&&!o.includes("dark")))||[],s=(i==null||(r=i.getAttribute("style"))==null?void 0:r.split(";").filter(o=>!o.includes("color-scheme")&&o.length).map(o=>`${o};`))||[];i==null||i.setAttribute("class",gt(n,`${eb(e)}-theme`)),i==null||i.setAttribute("style",gt(s,`color-scheme: ${e};`))},RH=ei(({theme:e,disableBaseline:t,children:r})=>{const{isBrowser:i}=H6(),[n,s]=I.exports.useState(Hx.type),o=c=>{s(h=>h!==c?c:h)},a=c=>{const h=$H(c);h&&o(h)},l=I.exports.useMemo(()=>{const c=i?LH():{},h=KS(Y6(Hx.theme),c),u=eb(n);return{theme:h,type:u,isDark:u==="dark"}},[n,i]);return I.exports.useEffect(()=>{var c,h,u;a((c=document)==null?void 0:c.documentElement);const d=new MutationObserver(f=>{var m;if(f&&f.length>0&&((m=f[0])==null?void 0:m.target.nodeName)==="BODY"){var p,g,v;const b=(p=document)==null||(g=p.body)==null||(v=g.dataset)==null?void 0:v.theme;b&&o(b)}else{var y;a((y=document)==null?void 0:y.documentElement)}});return d.observe((h=document)==null?void 0:h.documentElement,{attributes:!0,attributeFilter:["data-theme","style"]}),d.observe((u=document)==null?void 0:u.body,{attributes:!0,attributeFilter:["data-theme","style"]}),()=>d.disconnect()},[]),I.exports.useEffect(()=>{i&&e&&e!=null&&e.className&&(IH(e.className),o(eb(e.className)))},[i,e]),z(hU,{children:z(Y$,{children:Ne(A$.Provider,{value:l,children:[!t&&z(dU,{}),r]})})})},{disableBaseline:!1}),kH=Kl({WebkitTapHighlightColor:"transparent","&:focus:not(&:focus-visible)":{boxShadow:"none"},"&:focus":{outline:"none",boxShadow:"0 0 0 2px $colors$background, 0 0 0 4px $colors$primary"},"@safari":{WebkitTapHighlightColor:"transparent",outline:"none"}}),Po=Kl({variants:{isFocusVisible:{true:{outline:"transparent solid 2px",outlineOffset:"2px",boxShadow:"0 0 0 2px $colors$background, 0 0 0 4px $colors$primary"},false:{outline:"none"}}}}),OH=Kl({transform:"translateZ(0)",backfaceVisibility:"hidden"}),BH=Kl({border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"}),zH=Kl({variants:{hideIn:{xs:{"@xsMax":{display:"none"}},sm:{"@smMax":{display:"none"}},md:{"@mdMax":{display:"none"}},lg:{"@lgMax":{display:"none"}},xl:{"@xlMax":{display:"none"}}}}}),NH=Kl({variants:{showIn:{xs:{"@xs":{display:"none"}},sm:{"@sm":{display:"none"}},md:{"@md":{display:"none"}},lg:{"@lg":{display:"none"}},xl:{"@xl":{display:"none"}}}}}),Ju=Kl(zH,NH),Kh=typeof window<"u"?me.useLayoutEffect:()=>{};function DM(e){if(FH())e.focus({preventScroll:!0});else{let t=UH(e);e.focus(),HH(t)}}let mp=null;function FH(){if(mp==null){mp=!1;try{var e=document.createElement("div");e.focus({get preventScroll(){return mp=!0,!0}})}catch{}}return mp}function UH(e){for(var t=e.parentNode,r=[],i=document.scrollingElement||document.documentElement;t instanceof HTMLElement&&t!==i;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return i instanceof HTMLElement&&r.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),r}function HH(e){for(let{element:t,scrollTop:r,scrollLeft:i}of e)t.scrollTop=r,t.scrollLeft=i}let Rc=new Map,tb=new Set;function LM(){if(typeof window>"u")return;let e=r=>{let i=Rc.get(r.target);i||(i=new Set,Rc.set(r.target,i),r.target.addEventListener("transitioncancel",t)),i.add(r.propertyName)},t=r=>{let i=Rc.get(r.target);if(!!i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",t),Rc.delete(r.target)),Rc.size===0)){for(let n of tb)n();tb.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?LM():document.addEventListener("DOMContentLoaded",LM));function VH(e){requestAnimationFrame(()=>{Rc.size===0?e():tb.add(e)})}function WH(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function jH(){return WH(/^Mac/i)}function GH(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}class YH{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,r){this.nativeEvent=r,this.target=r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget,this.bubbles=r.bubbles,this.cancelable=r.cancelable,this.defaultPrevented=r.defaultPrevented,this.eventPhase=r.eventPhase,this.isTrusted=r.isTrusted,this.timeStamp=r.timeStamp,this.type=t}}function LI(e){let t=I.exports.useRef({isFocused:!1,onBlur:e,observer:null});return t.current.onBlur=e,Kh(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]),I.exports.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,n=s=>{var o,a;t.current.isFocused=!1,i.disabled&&((a=(o=t.current).onBlur)===null||a===void 0||a.call(o,new YH("blur",s))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",n,{once:!0}),t.current.observer=new MutationObserver(()=>{t.current.isFocused&&i.disabled&&(t.current.observer.disconnect(),i.dispatchEvent(new FocusEvent("blur")),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0})))}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[])}const KH=me.createContext(null);KH.displayName="PressResponderContext";function XH(e){let{isDisabled:t,onFocus:r,onBlur:i,onFocusChange:n}=e;const s=I.exports.useCallback(l=>{if(l.target===l.currentTarget)return i&&i(l),n&&n(!1),!0},[i,n]),o=LI(s),a=I.exports.useCallback(l=>{l.target===l.currentTarget&&(r&&r(l),n&&n(!0),o(l))},[n,r,o]);return{focusProps:{onFocus:!t&&(r||n||i)?a:void 0,onBlur:!t&&(i||n)?s:null}}}let ed=null,rb=new Set,$M=!1,kl=!1,ib=!1;const qH={Tab:!0,Escape:!0};function n_(e,t){for(let r of rb)r(e,t)}function QH(e){return!(e.metaKey||!jH()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function IM(e){kl=!0,QH(e)&&(ed="keyboard",n_("keyboard",e))}function cc(e){ed="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(kl=!0,n_("pointer",e))}function ZH(e){GH(e)&&(kl=!0,ed="virtual")}function JH(e){e.target===window||e.target===document||(!kl&&!ib&&(ed="virtual",n_("virtual",e)),kl=!1,ib=!1)}function e8(){kl=!1,ib=!0}function nb(){if(typeof window>"u"||$M)return;let e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){kl=!0,e.apply(this,arguments)},document.addEventListener("keydown",IM,!0),document.addEventListener("keyup",IM,!0),document.addEventListener("click",ZH,!0),window.addEventListener("focus",JH,!0),window.addEventListener("blur",e8,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",cc,!0),document.addEventListener("pointermove",cc,!0),document.addEventListener("pointerup",cc,!0)):(document.addEventListener("mousedown",cc,!0),document.addEventListener("mousemove",cc,!0),document.addEventListener("mouseup",cc,!0)),$M=!0}typeof document<"u"&&(document.readyState!=="loading"?nb():document.addEventListener("DOMContentLoaded",nb));function $I(){return ed!=="pointer"}function t8(){return ed}function r8(e,t,r){return!(e&&t==="keyboard"&&r instanceof KeyboardEvent&&!qH[r.key])}function i8(e,t,r){nb(),I.exports.useEffect(()=>{let i=(n,s)=>{!r8(r==null?void 0:r.isTextInput,n,s)||e($I())};return rb.add(i),()=>{rb.delete(i)}},t)}function n8(e){let{isDisabled:t,onBlurWithin:r,onFocusWithin:i,onFocusWithinChange:n}=e,s=I.exports.useRef({isFocusWithin:!1}),o=I.exports.useCallback(c=>{s.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(s.current.isFocusWithin=!1,r&&r(c),n&&n(!1))},[r,n,s]),a=LI(o),l=I.exports.useCallback(c=>{s.current.isFocusWithin||(i&&i(c),n&&n(!0),s.current.isFocusWithin=!0,a(c))},[i,n,a]);return t?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:l,onBlur:o}}}function s8(e){if(t8()==="virtual"){let t=document.activeElement;VH(()=>{document.activeElement===t&&document.contains(e)&&DM(e)})}else DM(e)}function o8(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;let{display:t,visibility:r}=e.style,i=t!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:n}=e.ownerDocument.defaultView;let{display:s,visibility:o}=n(e);i=s!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function a8(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function II(e,t){return e.nodeName!=="#comment"&&o8(e)&&a8(e,t)&&(!e.parentElement||II(e.parentElement,e))}const RM=me.createContext(null);let wi=null,Au=new Map;function kM(e){let{children:t,contain:r,restoreFocus:i,autoFocus:n}=e,s=I.exports.useRef(),o=I.exports.useRef(),a=I.exports.useRef([]),l=I.exports.useContext(RM),c=l==null?void 0:l.scopeRef;Kh(()=>{let u=s.current.nextSibling,d=[];for(;u&&u!==o.current;)d.push(u),u=u.nextSibling;a.current=d},[t,c]),Kh(()=>(Au.set(a,c),()=>{(a===wi||Nv(a,wi))&&(!c||Au.has(c))&&(wi=c),Au.delete(a)}),[a,c]),d8(a,r),p8(a,i,r),f8(a,n);let h=l8(a);return me.createElement(RM.Provider,{value:{scopeRef:a,focusManager:h}},me.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),t,me.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:o}))}function l8(e){return{focusNext(t={}){let r=e.current,{from:i,tabbable:n,wrap:s,accept:o}=t,a=i||document.activeElement,l=r[0].previousElementSibling,c=ul(su(r),{tabbable:n,accept:o},r);c.currentNode=Kn(a,r)?a:l;let h=c.nextNode();return!h&&s&&(c.currentNode=l,h=c.nextNode()),h&&co(h,!0),h},focusPrevious(t={}){let r=e.current,{from:i,tabbable:n,wrap:s,accept:o}=t,a=i||document.activeElement,l=r[r.length-1].nextElementSibling,c=ul(su(r),{tabbable:n,accept:o},r);c.currentNode=Kn(a,r)?a:l;let h=c.previousNode();return!h&&s&&(c.currentNode=l,h=c.previousNode()),h&&co(h,!0),h},focusFirst(t={}){let r=e.current,{tabbable:i,accept:n}=t,s=ul(su(r),{tabbable:i,accept:n},r);s.currentNode=r[0].previousElementSibling;let o=s.nextNode();return o&&co(o,!0),o},focusLast(t={}){let r=e.current,{tabbable:i,accept:n}=t,s=ul(su(r),{tabbable:i,accept:n},r);s.currentNode=r[r.length-1].nextElementSibling;let o=s.previousNode();return o&&co(o,!0),o}}}const s_=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],c8=s_.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";s_.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const u8=s_.join(':not([hidden]):not([tabindex="-1"]),');function su(e){return e[0].parentElement}function d8(e,t){let r=I.exports.useRef(),i=I.exports.useRef(null);Kh(()=>{let n=e.current;if(!t){i.current&&(cancelAnimationFrame(i.current),i.current=null);return}let s=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||e!==wi)return;let c=document.activeElement,h=e.current;if(!Kn(c,h))return;let u=ul(su(h),{tabbable:!0},h);u.currentNode=c;let d=l.shiftKey?u.previousNode():u.nextNode();d||(u.currentNode=l.shiftKey?h[h.length-1].nextElementSibling:h[0].previousElementSibling,d=l.shiftKey?u.previousNode():u.nextNode()),l.preventDefault(),d&&co(d,!0)},o=l=>{!wi||Nv(wi,e)?(wi=e,r.current=l.target):e===wi&&!OM(l.target,e)?r.current?r.current.focus():wi&&RI(wi.current):e===wi&&(r.current=l.target)},a=l=>{i.current=requestAnimationFrame(()=>{e===wi&&!OM(document.activeElement,e)&&(wi=e,r.current=l.target,r.current.focus())})};return document.addEventListener("keydown",s,!1),document.addEventListener("focusin",o,!1),n.forEach(l=>l.addEventListener("focusin",o,!1)),n.forEach(l=>l.addEventListener("focusout",a,!1)),()=>{document.removeEventListener("keydown",s,!1),document.removeEventListener("focusin",o,!1),n.forEach(l=>l.removeEventListener("focusin",o,!1)),n.forEach(l=>l.removeEventListener("focusout",a,!1))}},[e,t]),I.exports.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[i])}function h8(e){for(let t of Au.keys())if(Kn(e,t.current))return!0;return!1}function Kn(e,t){return t.some(r=>r.contains(e))}function OM(e,t){for(let r of Au.keys())if((r===t||Nv(t,r))&&Kn(e,r.current))return!0;return!1}function Nv(e,t){let r=Au.get(t);return r?r===e?!0:Nv(e,r):!1}function co(e,t=!1){if(e!=null&&!t)try{s8(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function RI(e){let t=e[0].previousElementSibling,r=ul(su(e),{tabbable:!0},e);r.currentNode=t,co(r.nextNode())}function f8(e,t){const r=me.useRef(t);I.exports.useEffect(()=>{r.current&&(wi=e,Kn(document.activeElement,wi.current)||RI(e.current)),r.current=!1},[])}function p8(e,t,r){const i=I.exports.useRef(typeof document<"u"?document.activeElement:null);Kh(()=>{let n=i.current;if(!t)return;let s=o=>{if(o.key!=="Tab"||o.altKey||o.ctrlKey||o.metaKey)return;let a=document.activeElement;if(!Kn(a,e.current))return;let l=ul(document.body,{tabbable:!0});l.currentNode=a;let c=o.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(n)||n===document.body)&&(n=null),(!c||!Kn(c,e.current))&&n){l.currentNode=n;do c=o.shiftKey?l.previousNode():l.nextNode();while(Kn(c,e.current));o.preventDefault(),o.stopPropagation(),c?co(c,!0):h8(n)?co(n,!0):a.blur()}};return r||document.addEventListener("keydown",s,!0),()=>{r||document.removeEventListener("keydown",s,!0),t&&n&&Kn(document.activeElement,e.current)&&requestAnimationFrame(()=>{document.body.contains(n)&&document.activeElement===document.body&&co(n)})}},[e,t,r])}function ul(e,t,r){let i=t!=null&&t.tabbable?u8:c8,n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var o;return!(t==null||(o=t.from)===null||o===void 0)&&o.contains(s)?NodeFilter.FILTER_REJECT:s.matches(i)&&II(s)&&(!r||Kn(s,r))&&(!(t!=null&&t.accept)||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(n.currentNode=t.from),n}function Do(e={}){let{autoFocus:t=!1,isTextInput:r,within:i}=e,n=I.exports.useRef({isFocused:!1,isFocusVisible:t||$I()}),[s,o]=I.exports.useState(!1),[a,l]=I.exports.useState(()=>n.current.isFocused&&n.current.isFocusVisible),c=I.exports.useCallback(()=>l(n.current.isFocused&&n.current.isFocusVisible),[]),h=I.exports.useCallback(f=>{n.current.isFocused=f,o(f),c()},[c]);i8(f=>{n.current.isFocusVisible=f,c()},[],{isTextInput:r});let{focusProps:u}=XH({isDisabled:i,onFocusChange:h}),{focusWithinProps:d}=n8({isDisabled:!i,onFocusWithinChange:h});return{isFocused:s,isFocusVisible:n.current.isFocused&&a,focusProps:i?d:u}}const m8=typeof window<"u"?me.useLayoutEffect:()=>{};let kg=new Map;function sb(e){let[t,r]=I.exports.useState(e),i=I.exports.useRef(null),n=ZS(t),s=I.exports.useCallback(o=>{i.current=o},[]);return kg.set(n,s),m8(()=>{let o=n;return()=>{kg.delete(o)}},[n]),I.exports.useEffect(()=>{let o=i.current;o&&(i.current=null,r(o))}),n}function g8(e,t){if(e===t)return e;let r=kg.get(e);if(r)return r(t),t;let i=kg.get(t);return i?(i(e),e):t}function v8(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function Mr(...e){let t={...e[0]};for(let r=1;r<e.length;r++){let i=e[r];for(let n in i){let s=t[n],o=i[n];typeof s=="function"&&typeof o=="function"&&n[0]==="o"&&n[1]==="n"&&n.charCodeAt(2)>=65&&n.charCodeAt(2)<=90?t[n]=v8(s,o):(n==="className"||n==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?t[n]=JS(s,o):n==="id"&&s&&o?t.id=g8(s,o):t[n]=o!==void 0?o:s}}return t}let Td=new Map,BM=new Set;function zM(){if(typeof window>"u")return;let e=r=>{let i=Td.get(r.target);i||(i=new Set,Td.set(r.target,i),r.target.addEventListener("transitioncancel",t)),i.add(r.propertyName)},t=r=>{let i=Td.get(r.target);if(!!i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",t),Td.delete(r.target)),Td.size===0)){for(let n of BM)n();BM.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?zM():document.addEventListener("DOMContentLoaded",zM));function Br(e){const t=I.exports.useRef(null);return I.exports.useImperativeHandle(e,()=>t.current),t}function y8(e,t){I.exports.useLayoutEffect(()=>{if(e&&e.ref&&t&&t.current)return e.ref.current=t.current,()=>{var r;(r=e.ref)!=null&&r.current&&(e.ref.current=null)}},[e,t])}const x8=Le("span",{dflex:"center",position:"relative",zIndex:"$1",boxSizing:"border-box",overflow:"hidden",verticalAlign:"top",cursor:"auto",transition:"transform 250ms ease 0ms, box-shadow 0.25s ease 0s",".nextui-avatar-bg":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:"$2",transition:"$avatar",size:"100%"},".nextui-avatar-img":{opacity:0,zIndex:"$3",display:"flex",bg:"$background",transition:"transform 250ms ease 0ms, opacity 200ms ease-in 0ms",width:"100%",height:"100%",objectFit:"cover"},'&[data-state="ready"] .nextui-avatar-img':{opacity:1},".nextui-avatar-icon":{display:"flex",position:"absolute",left:"50%",top:"50%",ta:"center",zIndex:"$2",transform:"translate(-50%, -50%)",whiteSpace:"nowrap",us:"none"},".nextui-avatar-text":{position:"absolute",zIndex:"$2",left:"50%",top:"50%",ta:"center",color:"$text",fontWeight:"$medium",transform:"translate(-50%, -50%) scale(0.65)",whiteSpace:"nowrap",us:"none"},"@motion":{transition:"none",".nextui-avatar-bg, .nextui-avatar-img":{transition:"none"}},variants:{color:{default:{".nextui-avatar-bg":{bg:"$accents2"}},primary:{".nextui-avatar-bg":{bg:"$primary"}},secondary:{".nextui-avatar-bg":{bg:"$secondary"}},success:{".nextui-avatar-bg":{bg:"$success"}},warning:{".nextui-avatar-bg":{bg:"$warning"}},error:{".nextui-avatar-bg":{bg:"$error"}},gradient:{".nextui-avatar-bg":{bg:"$gradient"}}},textColor:{default:{".nextui-avatar-text":{color:"$text"}},white:{".nextui-avatar-text":{color:"$white"}},primary:{".nextui-avatar-text":{color:"$primary"}},secondary:{".nextui-avatar-text":{color:"$secondary"}},success:{".nextui-avatar-text":{color:"$success"}},warning:{".nextui-avatar-text":{color:"$warning"}},error:{".nextui-avatar-text":{color:"$error"}}},size:{xs:{$$avatarXs:"$space$9",sizeMin:"$$avatarXs",".nextui-avatar-text":{fontSize:"$sm"}},sm:{$$avatarSm:"$space$11",sizeMin:"$$avatarSm",".nextui-avatar-text":{fontSize:"$md"}},md:{$$avatarMd:"$space$14",sizeMin:"$$avatarMd",".nextui-avatar-text":{fontSize:"$lg"}},lg:{$$avatarLg:"$space$16",sizeMin:"$$avatarLg",".nextui-avatar-text":{fontSize:"$xl"}},xl:{$$avatarXl:"$space$18",sizeMin:"$$avatarXl",".nextui-avatar-text":{fontSize:"$2xl"}}},borderWeight:{light:{".nextui-avatar-img":{borderWidth:"$light"}},normal:{".nextui-avatar-img":{borderWidth:"$normal"}},bold:{".nextui-avatar-img":{borderWidth:"$normal"}},extrabold:{".nextui-avatar-img":{borderWidth:"$normal"}},black:{".nextui-avatar-img":{borderWidth:"$normal"}}},bordered:{true:{".nextui-avatar-img":{borderStyle:"solid",borderColor:"$background"}}},stacked:{true:{ml:"-$5"}},pointer:{true:{cursor:"pointer","&:hover .nextui-avatar-bg":{boxShadow:"inset 0 0 40px 0 rgb(0 0 0 / 14%)"}}},rounded:{true:{borderRadius:"$rounded",".nextui-avatar-img":{borderRadius:"$rounded"}}},squared:{true:{borderRadius:"$squared",".nextui-avatar-img":{borderRadius:"$squared"}}},zoomed:{true:{"&:hover .nextui-avatar-img":{transform:"scale(1.125)"}}}},compoundVariants:[{bordered:!0,borderWeight:"light",css:{padding:"calc($1/2)"}},{bordered:!0,borderWeight:"normal",css:{padding:"$1"}},{bordered:!0,borderWeight:"bold",css:{padding:"calc($2/1.5)"}},{bordered:!0,borderWeight:"extrabold",css:{padding:"$2"}},{bordered:!0,borderWeight:"black",css:{padding:"calc($3/1.5)"}},{rounded:!0,squared:!0,css:{borderRadius:"$squared",".nextui-avatar-img":{borderRadius:"$squared"}}},{bordered:!0,pointer:!0,css:{"&:hover:not(.only-text-avatar) .nextui-avatar-bg":{opacity:"0.7"}}}],defaultVariants:{size:"md",rounded:!0,color:"default",textColor:"default",borderWeight:"normal"}},Po),ob=x8,b8=e=>(e==null?void 0:e.length)<=4?e:e==null?void 0:e.slice(0,3),kI=me.forwardRef((e,t)=>{const{as:r,src:i,css:n,text:s,icon:o,alt:a,className:l,...c}=e,h=Br(t),u=!i,[d,f]=I.exports.useState(!1),m=I.exports.useRef(null),{isFocusVisible:p,focusProps:g}=Do();I.exports.useEffect(()=>{var y;!(m==null||(y=m.current)==null)&&y.complete&&f(!0)},[]);const v=I.exports.useMemo(()=>!d&&i?"loading":"ready",[i,d]);return Ne(ob,{ref:h,as:r,...Mr(c,g),className:gt({"only-text-avatar":u},l),css:r==="button"?{appearance:"none",outline:"none",border:"none",cursor:"pointer",...n}:n,"data-state":v,isFocusVisible:p,children:[z("span",{className:"nextui-avatar-bg"}),!u&&z("img",{ref:m,alt:a,className:gt("nextui-avatar-img",`nextui-avatar--${v}`,{"nextui-avatar-ready":d}),"data-state":v,src:i,onLoad:()=>f(!0)}),u&&!o&&s&&z("span",{className:"nextui-avatar-text",children:b8(s)}),o&&z("span",{className:"nextui-avatar-icon",children:o})]})});kI.toString=()=>".nextui-avatar";const o_=kI,w8=Le("span",{fontSize:"$xs",display:"inline-flex",alignItems:"center",marginLeft:"$3",color:"$text"}),S8=Le("div",{dflex:"center",height:"auto",width:"max-content","@motion":{transition:"none"},[`& ${ob}`]:{marginLeft:"-$space$5",transition:"$default",".only-text-avatar":{boxShadow:"$xs"}},".only-text-avatar":{boxShadow:"$xs"},variants:{animated:{true:{[`& ${ob}:hover`]:{transform:"translate(-$space$5)"}}}},defaultVariants:{animated:!0}}),_8=S8,OI=me.forwardRef((e,t)=>{const{count:r,children:i,...n}=e,s=Br(t);return Ne(_8,{ref:s,...n,children:[i,r&&Ne(w8,{className:"nextui-avatar-group-count",children:["+",r]})]})});OI.toString=()=>".nextui-avatar-group";const A8=OI;o_.Group=A8;function Xh(e){if(JU()==="virtual"){let t=document.activeElement;O$(()=>{document.activeElement===t&&document.contains(e)&&oa(e)})}else oa(e)}function M8(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;let{display:t,visibility:r}=e.style,i=t!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:n}=e.ownerDocument.defaultView;let{display:s,visibility:o}=n(e);i=s!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function E8(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function BI(e,t){return e.nodeName!=="#comment"&&M8(e)&&E8(e,t)&&(!e.parentElement||BI(e.parentElement,e))}const a_=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],C8=a_.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";a_.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const T8=a_.join(':not([hidden]):not([tabindex="-1"]),');function zI(e,t){return t.some(r=>r.contains(e))}function P8(e,t,r){let i=t!=null&&t.tabbable?T8:C8,n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var o;return!(t==null||(o=t.from)===null||o===void 0)&&o.contains(s)?NodeFilter.FILTER_REJECT:s.matches(i)&&BI(s)&&(!r||zI(s,r))&&(!(t!=null&&t.accept)||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(n.currentNode=t.from),n}class l_{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,r,i){let n=this.fastMap.get(r!=null?r:null),s=new NM({scopeRef:t});n.addChild(s),s.parent=n,this.fastMap.set(t,s),i&&(s.nodeToRestore=i)}removeTreeNode(t){if(t===null)return;let r=this.fastMap.get(t),i=r.parent;for(let s of this.traverse())s!==r&&r.nodeToRestore&&s.nodeToRestore&&r.scopeRef.current&&zI(s.nodeToRestore,r.scopeRef.current)&&(s.nodeToRestore=r.nodeToRestore);let n=r.children;i.removeChild(r),n.length>0&&n.forEach(s=>i.addChild(s)),this.fastMap.delete(r.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.length>0)for(let r of t.children)yield*this.traverse(r)}clone(){let t=new l_;for(let r of this.traverse())t.addTreeNode(r.scopeRef,r.parent.scopeRef,r.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new NM({scopeRef:null}),this.fastMap.set(null,this.root)}}class NM{addChild(t){this.children.push(t),t.parent=this}removeChild(t){this.children.splice(this.children.indexOf(t),1),t.parent=void 0}constructor(t){this.children=[],this.contain=!1,this.scopeRef=t.scopeRef}}new l_;let D8=me.createContext(null);function L8(e){let t=I.exports.useContext(D8)||{};z$(t,e);let{ref:r,...i}=t;return i}function NI(e,t){let{focusProps:r}=W$(e),{keyboardProps:i}=nH(e),n=Ci(r,i),s=L8(t),o=e.isDisabled?{}:s,a=I.exports.useRef(e.autoFocus);return I.exports.useEffect(()=>{a.current&&t.current&&Xh(t.current),a.current=!1},[t]),{focusableProps:Ci({...n,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},o)}}function c_(e,t){let{elementType:r="button",isDisabled:i,onPress:n,onPressStart:s,onPressEnd:o,onPressChange:a,preventFocusOnPress:l,allowFocusWhenDisabled:c,onClick:h,href:u,target:d,rel:f,type:m="button"}=e,p;r==="button"?p={type:m,disabled:i}:p={role:"button",tabIndex:i?void 0:0,href:r==="a"&&i?void 0:u,target:r==="a"?d:void 0,type:r==="input"?m:void 0,disabled:r==="input"?i:void 0,"aria-disabled":!i||r==="input"?void 0:i,rel:r==="a"?f:void 0};let{pressProps:g,isPressed:v}=Tf({onPressStart:s,onPressEnd:o,onPressChange:a,onPress:n,isDisabled:i,preventFocusOnPress:l,ref:t}),{focusableProps:y}=NI(e,t);c&&(y.tabIndex=i?-1:y.tabIndex);let b=Ci(y,g,Ov(e,{labelable:!0}));return{isPressed:v,buttonProps:Ci(p,b,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],onClick:x=>{h&&(h(x),console.warn("onClick is deprecated, please use onPress"))}})}}function $8(e,t,r){const{isSelected:i}=t,{isPressed:n,buttonProps:s}=c_({...e,onPress:k$(t.toggle,e.onPress)},r);return{isPressed:n,buttonProps:Ci(s,{"aria-pressed":i})}}const I8=typeof window<"u"?me.useLayoutEffect:()=>{};let FM=new Map;function R8(e,t){if(e===t)return e;let r=FM.get(e);if(r)return r(t),t;let i=FM.get(t);return i?(i(e),e):t}function k8(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function FI(...e){let t={...e[0]};for(let r=1;r<e.length;r++){let i=e[r];for(let n in i){let s=t[n],o=i[n];typeof s=="function"&&typeof o=="function"&&n[0]==="o"&&n[1]==="n"&&n.charCodeAt(2)>=65&&n.charCodeAt(2)<=90?t[n]=k8(s,o):(n==="className"||n==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?t[n]=JS(s,o):n==="id"&&s&&o?t.id=R8(s,o):t[n]=o!==void 0?o:s}}return t}function gp(e){if(O8())e.focus({preventScroll:!0});else{let t=B8(e);e.focus(),z8(t)}}let vp=null;function O8(){if(vp==null){vp=!1;try{var e=document.createElement("div");e.focus({get preventScroll(){return vp=!0,!0}})}catch{}}return vp}function B8(e){for(var t=e.parentNode,r=[],i=document.scrollingElement||document.documentElement;t instanceof HTMLElement&&t!==i;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return i instanceof HTMLElement&&r.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),r}function z8(e){for(let{element:t,scrollTop:r,scrollLeft:i}of e)t.scrollTop=r,t.scrollLeft=i}let kc=new Map,ab=new Set;function UM(){if(typeof window>"u")return;let e=r=>{let i=kc.get(r.target);i||(i=new Set,kc.set(r.target,i),r.target.addEventListener("transitioncancel",t)),i.add(r.propertyName)},t=r=>{let i=kc.get(r.target);if(!!i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",t),kc.delete(r.target)),kc.size===0)){for(let n of ab)n();ab.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?UM():document.addEventListener("DOMContentLoaded",UM));function N8(e){requestAnimationFrame(()=>{kc.size===0?e():ab.add(e)})}function F8(){let e=I.exports.useRef(new Map),t=I.exports.useCallback((n,s,o,a)=>{let l=a!=null&&a.once?(...c)=>{e.current.delete(o),o(...c)}:o;e.current.set(o,{type:s,eventTarget:n,fn:l,options:a}),n.addEventListener(s,o,a)},[]),r=I.exports.useCallback((n,s,o,a)=>{var l;let c=((l=e.current.get(o))===null||l===void 0?void 0:l.fn)||o;n.removeEventListener(s,c,a),e.current.delete(o)},[]),i=I.exports.useCallback(()=>{e.current.forEach((n,s)=>{r(n.eventTarget,n.type,s,n.options)})},[r]);return I.exports.useEffect(()=>i,[i]),{addGlobalListener:t,removeGlobalListener:r,removeAllGlobalListeners:i}}function U8(e,t){I8(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref.current=null}},[e,t])}function u_(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function UI(){return u_(/^Mac/i)}function H8(){return u_(/^iPhone/i)}function V8(){return u_(/^iPad/i)||UI()&&navigator.maxTouchPoints>1}function HI(){return H8()||V8()}let ou="default",lb="",Vm=new WeakMap;function HM(e){HI()?(ou==="default"&&(lb=document.documentElement.style.webkitUserSelect,document.documentElement.style.webkitUserSelect="none"),ou="disabled"):(e instanceof HTMLElement||e instanceof SVGElement)&&(Vm.set(e,e.style.userSelect),e.style.userSelect="none")}function yp(e){if(HI()){if(ou!=="disabled")return;ou="restoring",setTimeout(()=>{N8(()=>{ou==="restoring"&&(document.documentElement.style.webkitUserSelect==="none"&&(document.documentElement.style.webkitUserSelect=lb||""),lb="",ou="default")})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&Vm.has(e)){let t=Vm.get(e);e.style.userSelect==="none"&&(e.style.userSelect=t),e.getAttribute("style")===""&&e.removeAttribute("style"),Vm.delete(e)}}function cb(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}const VI=me.createContext(null);VI.displayName="PressResponderContext";function W8(e){let t=I.exports.useContext(VI);if(t){let{register:r,...i}=t;e=FI(i,e),r()}return U8(t,e.ref),e}function WI(e){let{onPress:t,onPressChange:r,onPressStart:i,onPressEnd:n,onPressUp:s,isDisabled:o,isPressed:a,preventFocusOnPress:l,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:h,ref:u,...d}=W8(e),f=I.exports.useRef(null);f.current={onPress:t,onPressChange:r,onPressStart:i,onPressEnd:n,onPressUp:s,isDisabled:o,shouldCancelOnPointerExit:c};let[m,p]=I.exports.useState(!1),g=I.exports.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:v,removeAllGlobalListeners:y}=F8(),b=I.exports.useMemo(()=>{let x=g.current,A=(E,$)=>{let{onPressStart:P,onPressChange:D,isDisabled:W}=f.current;W||x.didFirePressStart||(P&&P({type:"pressstart",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey}),D&&D(!0),x.didFirePressStart=!0,p(!0))},S=(E,$,P=!0)=>{let{onPressEnd:D,onPressChange:W,onPress:V,isDisabled:H}=f.current;!x.didFirePressStart||(x.ignoreClickAfterPress=!0,x.didFirePressStart=!1,D&&D({type:"pressend",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey}),W&&W(!1),p(!1),V&&P&&!H&&V({type:"press",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey}))},_=(E,$)=>{let{onPressUp:P,isDisabled:D}=f.current;D||P&&P({type:"pressup",pointerType:$,target:E.currentTarget,shiftKey:E.shiftKey,metaKey:E.metaKey,ctrlKey:E.ctrlKey,altKey:E.altKey})},w=E=>{x.isPressed&&(x.isOverTarget&&S(Gs(x.target,E),x.pointerType,!1),x.isPressed=!1,x.isOverTarget=!1,x.activePointerId=null,x.pointerType=null,y(),h||yp(x.target))},M={onKeyDown(E){iy(E.nativeEvent)&&E.currentTarget.contains(E.target)&&(WM(E.target)&&E.preventDefault(),E.stopPropagation(),!x.isPressed&&!E.repeat&&(x.target=E.currentTarget,x.isPressed=!0,A(E,"keyboard"),v(document,"keyup",C,!1)))},onKeyUp(E){iy(E.nativeEvent)&&!E.repeat&&E.currentTarget.contains(E.target)&&_(Gs(x.target,E),"keyboard")},onClick(E){E&&!E.currentTarget.contains(E.target)||E&&E.button===0&&(E.stopPropagation(),o&&E.preventDefault(),!x.ignoreClickAfterPress&&!x.ignoreEmulatedMouseEvents&&(x.pointerType==="virtual"||cb(E.nativeEvent))&&(!o&&!l&&gp(E.currentTarget),A(E,"virtual"),_(E,"virtual"),S(E,"virtual")),x.ignoreEmulatedMouseEvents=!1,x.ignoreClickAfterPress=!1)}},C=E=>{if(x.isPressed&&iy(E)){WM(E.target)&&E.preventDefault(),E.stopPropagation(),x.isPressed=!1;let $=E.target;S(Gs(x.target,E),"keyboard",x.target.contains($)),y(),x.target instanceof HTMLElement&&(x.target.contains($)&&jI(x.target)||x.target.getAttribute("role")==="link")&&x.target.click()}};if(typeof PointerEvent<"u"){M.onPointerDown=D=>{if(!(D.button!==0||!D.currentTarget.contains(D.target))){if(K8(D.nativeEvent)){x.pointerType="virtual";return}ny(D.currentTarget)&&D.preventDefault(),x.pointerType=D.pointerType,D.stopPropagation(),x.isPressed||(x.isPressed=!0,x.isOverTarget=!0,x.activePointerId=D.pointerId,x.target=D.currentTarget,!o&&!l&&gp(D.currentTarget),h||HM(x.target),A(D,x.pointerType),v(document,"pointermove",E,!1),v(document,"pointerup",$,!1),v(document,"pointercancel",P,!1))}},M.onMouseDown=D=>{!D.currentTarget.contains(D.target)||D.button===0&&(ny(D.currentTarget)&&D.preventDefault(),D.stopPropagation())},M.onPointerUp=D=>{!D.currentTarget.contains(D.target)||x.pointerType==="virtual"||D.button===0&&uc(D,D.currentTarget)&&_(D,x.pointerType||D.pointerType)};let E=D=>{D.pointerId===x.activePointerId&&(uc(D,x.target)?x.isOverTarget||(x.isOverTarget=!0,A(Gs(x.target,D),x.pointerType)):x.isOverTarget&&(x.isOverTarget=!1,S(Gs(x.target,D),x.pointerType,!1),f.current.shouldCancelOnPointerExit&&w(D)))},$=D=>{D.pointerId===x.activePointerId&&x.isPressed&&D.button===0&&(uc(D,x.target)?S(Gs(x.target,D),x.pointerType):x.isOverTarget&&S(Gs(x.target,D),x.pointerType,!1),x.isPressed=!1,x.isOverTarget=!1,x.activePointerId=null,x.pointerType=null,y(),h||yp(x.target))},P=D=>{w(D)};M.onDragStart=D=>{!D.currentTarget.contains(D.target)||w(D)}}else{M.onMouseDown=P=>{P.button!==0||!P.currentTarget.contains(P.target)||(ny(P.currentTarget)&&P.preventDefault(),P.stopPropagation(),!x.ignoreEmulatedMouseEvents&&(x.isPressed=!0,x.isOverTarget=!0,x.target=P.currentTarget,x.pointerType=cb(P.nativeEvent)?"virtual":"mouse",!o&&!l&&gp(P.currentTarget),A(P,x.pointerType),v(document,"mouseup",E,!1)))},M.onMouseEnter=P=>{!P.currentTarget.contains(P.target)||(P.stopPropagation(),x.isPressed&&!x.ignoreEmulatedMouseEvents&&(x.isOverTarget=!0,A(P,x.pointerType)))},M.onMouseLeave=P=>{!P.currentTarget.contains(P.target)||(P.stopPropagation(),x.isPressed&&!x.ignoreEmulatedMouseEvents&&(x.isOverTarget=!1,S(P,x.pointerType,!1),f.current.shouldCancelOnPointerExit&&w(P)))},M.onMouseUp=P=>{!P.currentTarget.contains(P.target)||!x.ignoreEmulatedMouseEvents&&P.button===0&&_(P,x.pointerType)};let E=P=>{if(P.button===0){if(x.isPressed=!1,y(),x.ignoreEmulatedMouseEvents){x.ignoreEmulatedMouseEvents=!1;return}uc(P,x.target)?S(Gs(x.target,P),x.pointerType):x.isOverTarget&&S(Gs(x.target,P),x.pointerType,!1),x.isOverTarget=!1}};M.onTouchStart=P=>{if(!P.currentTarget.contains(P.target))return;P.stopPropagation();let D=j8(P.nativeEvent);!D||(x.activePointerId=D.identifier,x.ignoreEmulatedMouseEvents=!0,x.isOverTarget=!0,x.isPressed=!0,x.target=P.currentTarget,x.pointerType="touch",!o&&!l&&gp(P.currentTarget),h||HM(x.target),A(P,x.pointerType),v(window,"scroll",$,!0))},M.onTouchMove=P=>{if(!P.currentTarget.contains(P.target)||(P.stopPropagation(),!x.isPressed))return;let D=VM(P.nativeEvent,x.activePointerId);D&&uc(D,P.currentTarget)?x.isOverTarget||(x.isOverTarget=!0,A(P,x.pointerType)):x.isOverTarget&&(x.isOverTarget=!1,S(P,x.pointerType,!1),f.current.shouldCancelOnPointerExit&&w(P))},M.onTouchEnd=P=>{if(!P.currentTarget.contains(P.target)||(P.stopPropagation(),!x.isPressed))return;let D=VM(P.nativeEvent,x.activePointerId);D&&uc(D,P.currentTarget)?(_(P,x.pointerType),S(P,x.pointerType)):x.isOverTarget&&S(P,x.pointerType,!1),x.isPressed=!1,x.activePointerId=null,x.isOverTarget=!1,x.ignoreEmulatedMouseEvents=!0,h||yp(x.target),y()},M.onTouchCancel=P=>{!P.currentTarget.contains(P.target)||(P.stopPropagation(),x.isPressed&&w(P))};let $=P=>{x.isPressed&&P.target.contains(x.target)&&w({currentTarget:x.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};M.onDragStart=P=>{!P.currentTarget.contains(P.target)||w(P)}}return M},[v,o,l,y,h]);return I.exports.useEffect(()=>()=>{h||yp(g.current.target)},[h]),{isPressed:a||m,pressProps:FI(d,b)}}function jI(e){return e.tagName==="A"&&e.hasAttribute("href")}function iy(e){const{key:t,code:r,target:i}=e,n=i,{tagName:s,isContentEditable:o}=n,a=n.getAttribute("role");return(t==="Enter"||t===" "||t==="Spacebar"||r==="Space")&&s!=="INPUT"&&s!=="TEXTAREA"&&o!==!0&&(!jI(n)||a==="button"&&t!=="Enter")&&!(a==="link"&&t!=="Enter")}function j8(e){const{targetTouches:t}=e;return t.length>0?t[0]:null}function VM(e,t){const r=e.changedTouches;for(let i=0;i<r.length;i++){const n=r[i];if(n.identifier===t)return n}return null}function Gs(e,t){return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey}}function G8(e){let t=e.width/2||e.radiusX||0,r=e.height/2||e.radiusY||0;return{top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}}function Y8(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function uc(e,t){let r=t.getBoundingClientRect(),i=G8(e);return Y8(r,i)}function ny(e){return!(e instanceof HTMLElement)||!e.draggable}function WM(e){return!((e.tagName==="INPUT"||e.tagName==="BUTTON")&&e.type==="submit")}function K8(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}let X8=new Set,jM=!1,Ol=!1,ub=!1;function d_(e,t){for(let r of X8)r(e,t)}function q8(e){return!(e.metaKey||!UI()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function GM(e){Ol=!0,q8(e)&&d_("keyboard",e)}function dc(e){(e.type==="mousedown"||e.type==="pointerdown")&&(Ol=!0,d_("pointer",e))}function Q8(e){cb(e)&&(Ol=!0)}function Z8(e){e.target===window||e.target===document||(!Ol&&!ub&&d_("virtual",e),Ol=!1,ub=!1)}function J8(){Ol=!1,ub=!0}function YM(){if(typeof window>"u"||jM)return;let e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){Ol=!0,e.apply(this,arguments)},document.addEventListener("keydown",GM,!0),document.addEventListener("keyup",GM,!0),document.addEventListener("click",Q8,!0),window.addEventListener("focus",Z8,!0),window.addEventListener("blur",J8,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",dc,!0),document.addEventListener("pointermove",dc,!0),document.addEventListener("pointerup",dc,!0)):(document.addEventListener("mousedown",dc,!0),document.addEventListener("mousemove",dc,!0),document.addEventListener("mouseup",dc,!0)),jM=!0}typeof document<"u"&&(document.readyState!=="loading"?YM():document.addEventListener("DOMContentLoaded",YM));let Og=!1,sy=0;function db(){Og=!0,setTimeout(()=>{Og=!1},50)}function KM(e){e.pointerType==="touch"&&db()}function e7(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",KM):document.addEventListener("touchend",db),sy++,()=>{sy--,!(sy>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",KM):document.removeEventListener("touchend",db))}}function Fv(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:i,isDisabled:n}=e,[s,o]=I.exports.useState(!1),a=I.exports.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;I.exports.useEffect(e7,[]);let{hoverProps:l,triggerHoverEnd:c}=I.exports.useMemo(()=>{let h=(f,m)=>{if(a.pointerType=m,n||m==="touch"||a.isHovered||!f.currentTarget.contains(f.target))return;a.isHovered=!0;let p=f.currentTarget;a.target=p,t&&t({type:"hoverstart",target:p,pointerType:m}),r&&r(!0),o(!0)},u=(f,m)=>{if(a.pointerType="",a.target=null,m==="touch"||!a.isHovered)return;a.isHovered=!1;let p=f.currentTarget;i&&i({type:"hoverend",target:p,pointerType:m}),r&&r(!1),o(!1)},d={};return typeof PointerEvent<"u"?(d.onPointerEnter=f=>{Og&&f.pointerType==="mouse"||h(f,f.pointerType)},d.onPointerLeave=f=>{!n&&f.currentTarget.contains(f.target)&&u(f,f.pointerType)}):(d.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},d.onMouseEnter=f=>{!a.ignoreEmulatedMouseEvents&&!Og&&h(f,"mouse"),a.ignoreEmulatedMouseEvents=!1},d.onMouseLeave=f=>{!n&&f.currentTarget.contains(f.target)&&u(f,"mouse")}),{hoverProps:d,triggerHoverEnd:u}},[t,r,i,n,a]);return I.exports.useEffect(()=>{n&&c({currentTarget:a.target},a.pointerType)},[n]),{hoverProps:l,isHovered:s}}function Fs(e){return I.exports.forwardRef(e)}const t7=(e,t)=>{var r,i,n,s,o,a,l,c,h,u,d;return t.isButtonGroup?{...e,auto:!0,shadow:!1,bordered:(r=t.bordered)!=null?r:e.bordered,borderWeight:(i=t.borderWeight)!=null?i:e.borderWeight,ghost:(n=t.ghost)!=null?n:e.ghost,ripple:(s=t.ripple)!=null?s:e.ripple,flat:(o=t.flat)!=null?o:e.flat,animated:(a=t.animated)!=null?a:e.animated,rounded:(l=t.rounded)!=null?l:e.rounded,light:(c=t.light)!=null?c:e.light,size:(h=t.size)!=null?h:e.size,color:(u=t.color)!=null?u:e.color,disabled:(d=t.disabled)!=null?d:e.disabled}:e},r7=e=>{if(!e.disabled)return e.auto&&e.color==="gradient"&&(e.bordered||e.ghost)?{px:"$$buttonBorderWeight",py:"$$buttonBorderWeight"}:{};const t={bg:"$accents1",color:"$accents7",transform:"none",boxShadow:"none",pe:"none"};return e.bordered||e.flat||e.ghost||e.light?e.color==="gradient"&&(e.bordered||e.ghost)?{color:"$accents4",backgroundImage:"linear-gradient($background, $background), linear-gradient($accents2, $accents2)",transform:"none",boxShadow:"none",pe:"none",pl:"$$buttonBorderWeight",pr:"$$buttonBorderWeight"}:e.bordered||e.ghost||e.light?{...t,bg:"transparent",borderColor:"$accents4"}:e.flat?{...t,bg:"$accents1"}:{}:t},i7={isButtonGroup:!1,disabled:!1},GI=me.createContext(i7),n7=()=>me.useContext(GI),s7=Le("span",{dflex:"center",position:"absolute",left:"$$buttonPadding",right:"auto",top:"50%",transform:"translateY(-50%)",color:"inherit",zIndex:"$1","& svg":{background:"transparent"},variants:{isAuto:{true:{position:"relative",transform:"none",top:"0%"}},isRight:{true:{right:"$$buttonPadding",left:"auto"}},isSingle:{true:{position:"static",transform:"none"}},isGradientButtonBorder:{true:{}}},compoundVariants:[{isAuto:!0,isRight:!0,isSingle:!1,css:{order:2,ml:"calc($$buttonPadding / 2)",right:"0%",left:"0%"}},{isAuto:!0,isRight:!1,isSingle:!1,css:{order:0,mr:"calc($$buttonPadding / 2)",right:"0%",left:"0%"}},{isSingle:!0,isRight:!1,css:{ml:0}},{isSingle:!0,isRight:!0,css:{mr:0}},{isSingle:!0,isRight:!1,isGradientButtonBorder:!0,css:{mr:"calc($$buttonPadding / 2)"}}]}),YI=({children:e,className:t,css:r,...i})=>z(s7,{className:gt("nextui-button-icon",{"nextui-button-icon-right":i.isRight,"nextui-button-icon-single":i.isSingle},t),css:{...r},...i,children:e});YI.toString=()=>".nextui-button-icon";const o7=me.memo(YI),XM=ei(o7,{className:""}),a7=Le("button",{$$buttonBorderRadius:"$radii$md",$$buttonPressedScale:.97,dflex:"center",appearance:"none",boxSizing:"border-box",fontWeight:"$medium",us:"none",lineHeight:"$sm",ta:"center",whiteSpace:"nowrap",transition:"$button",position:"relative",overflow:"hidden",border:"none",cursor:"pointer",pe:"auto",p:0,br:"$$buttonBorderRadius","@motion":{transition:"none"},".nextui-button-text":{dflex:"center",zIndex:"$2","p, pre, div":{margin:0}},[`& ${tr}`]:{zIndex:"$1",".nextui-drip-filler":{opacity:.25,fill:"$accents2"}},variants:{bordered:{true:{bg:"transparent",borderStyle:"solid",color:"$text"}},ghost:{true:{}},color:{default:{bg:"$primary",color:"$primarySolidContrast"},primary:{bg:"$primary",color:"$primarySolidContrast"},secondary:{bg:"$secondary",color:"$secondarySolidContrast"},success:{bg:"$success",color:"$successSolidContrast"},warning:{bg:"$warning",color:"$warningSolidContrast"},error:{bg:"$error",color:"$errorSolidContrast"},gradient:{bg:"$gradient",color:"$primarySolidContrast"}},size:{xs:{$$buttonPadding:"$space$3",$$buttonBorderRadius:"$radii$xs",$$buttonHeight:"$space$10",px:"$3",height:"$$buttonHeight",lh:"$space$10",width:"auto",minWidth:"$20",fontSize:"$xs"},sm:{$$buttonPadding:"$space$5",$$buttonBorderRadius:"$radii$sm",$$buttonHeight:"$space$12",px:"$5",height:"$$buttonHeight",lh:"$space$14",width:"auto",minWidth:"$36",fontSize:"$sm"},md:{$$buttonPadding:"$space$7",$$buttonBorderRadius:"$radii$md",$$buttonHeight:"$space$14",px:"$7",height:"$$buttonHeight",lh:"$space$14",width:"auto",minWidth:"$48",fontSize:"$sm"},lg:{$$buttonPadding:"$space$9",$$buttonBorderRadius:"$radii$base",$$buttonHeight:"$space$16",px:"$9",height:"$$buttonHeight",lh:"$space$15",width:"auto",minWidth:"$60",fontSize:"$md"},xl:{$$buttonPadding:"$space$10",$$buttonBorderRadius:"$radii$xl",$$buttonHeight:"$space$18",px:"$10",height:"$$buttonHeight",lh:"$space$17",width:"auto",minWidth:"$72",fontSize:"$lg"}},borderWeight:{light:{bw:"$light",$$buttonBorderWeight:"$borderWeights$light"},normal:{bw:"$normal",$$buttonBorderWeight:"$borderWeights$normal"},bold:{bw:"$bold",$$buttonBorderWeight:"$borderWeights$bold"},extrabold:{bw:"$extrabold",$$buttonBorderWeight:"$borderWeights$extrabold"},black:{bw:"$black",$$buttonBorderWeight:"$borderWeights$black"}},flat:{true:{color:"$text"}},light:{true:{bg:"transparent",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$accents2"}}}},shadow:{true:{bs:"$sm"}},animated:{false:{transition:"none"}},auto:{true:{width:"auto",minWidth:"min-content"}},rounded:{true:{$$buttonBorderRadius:"$radii$pill"}},isPressed:{true:{}},isHovered:{true:{}},isChildLess:{true:{p:0,width:"$$buttonHeight",height:"$$buttonHeight"}}},compoundVariants:[{isPressed:!0,animated:!0,css:{transform:"scale($$buttonPressedScale)"}},{auto:!0,isChildLess:!1,size:"xs",css:{px:"$5",minWidth:"min-content"}},{auto:!0,isChildLess:!1,size:"sm",css:{px:"$8",minWidth:"min-content"}},{auto:!0,isChildLess:!1,size:"md",css:{px:"$9",minWidth:"min-content"}},{auto:!0,isChildLess:!1,size:"lg",css:{px:"$10",minWidth:"min-content"}},{auto:!0,isChildLess:!1,size:"xl",css:{px:"$11",minWidth:"min-content"}},{shadow:!0,color:"default",css:{normalShadow:"$primaryShadow"}},{shadow:!0,color:"primary",css:{normalShadow:"$primaryShadow"}},{shadow:!0,color:"secondary",css:{normalShadow:"$secondaryShadow"}},{shadow:!0,color:"warning",css:{normalShadow:"$warningShadow"}},{shadow:!0,color:"success",css:{normalShadow:"$successShadow"}},{shadow:!0,color:"error",css:{normalShadow:"$errorShadow"}},{shadow:!0,color:"gradient",css:{normalShadow:"$primaryShadow"}},{light:!0,color:"default",css:{bg:"transparent",color:"$text",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$primaryLightActive"}}}},{light:!0,color:"primary",css:{bg:"transparent",color:"$primary",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$primaryLightActive"}}}},{light:!0,color:"secondary",css:{bg:"transparent",color:"$secondary",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$secondaryLightActive"}}}},{light:!0,color:"warning",css:{bg:"transparent",color:"$warning",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$warningLightActive"}}}},{light:!0,color:"success",css:{bg:"transparent",color:"$success",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$successLightActive"}}}},{light:!0,color:"error",css:{bg:"transparent",color:"$error",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.8,fill:"$errorLightActive"}}}},{bordered:!0,color:"default",css:{bg:"transparent",borderColor:"$primary",color:"$primary",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$primary"}}}},{bordered:!0,color:"primary",css:{bg:"transparent",borderColor:"$primary",color:"$primary",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$primary"}}}},{bordered:!0,color:"secondary",css:{bg:"transparent",borderColor:"$secondary",color:"$secondary",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$secondary"}}}},{bordered:!0,color:"success",css:{bg:"transparent",borderColor:"$success",color:"$success",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$success"}}}},{bordered:!0,color:"warning",css:{bg:"transparent",borderColor:"$warning",color:"$warning",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$warning"}}}},{bordered:!0,color:"error",css:{bg:"transparent",borderColor:"$error",color:"$error",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$error"}}}},{bordered:!0,color:"gradient",css:{bg:"transparent",color:"$text",padding:"$$buttonBorderWeight",bgClip:"content-box, border-box",borderColor:"$primary",backgroundImage:"linear-gradient($background, $background), $gradient",border:"none",[`& ${tr}`]:{".nextui-drip-filler":{fill:"$secondary"}}}},{ghost:!0,isHovered:!0,color:"default",css:{bg:"$primary",color:"$primarySolidContrast"}},{ghost:!0,isHovered:!0,color:"primary",css:{bg:"$primary",color:"$primarySolidContrast"}},{ghost:!0,isHovered:!0,color:"secondary",css:{bg:"$secondary",color:"$secondarySolidContrast"}},{ghost:!0,isHovered:!0,color:"success",css:{bg:"$success",color:"$successSolidContrast"}},{ghost:!0,isHovered:!0,color:"warning",css:{bg:"$warning",color:"$warningSolidContrast"}},{ghost:!0,isHovered:!0,color:"error",css:{bg:"$error",color:"$errorSolidContrast"}},{ghost:!0,color:"gradient",isHovered:!0,css:{bg:"$gradient",color:"$white"}},{flat:!0,color:"default",css:{bg:"$primaryLight",color:"$primaryLightContrast",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.4,fill:"$primary"}}}},{flat:!0,color:"primary",css:{bg:"$primaryLight",color:"$primaryLightContrast",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.4,fill:"$primary"}}}},{flat:!0,color:"secondary",css:{bg:"$secondaryLight",color:"$secondaryLightContrast",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.4,fill:"$secondary"}}}},{flat:!0,color:"success",css:{bg:"$successLight",color:"$successLightContrast",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.4,fill:"$success"}}}},{flat:!0,color:"warning",css:{bg:"$warningLight",color:"$warningLightContrast",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.4,fill:"$warning"}}}},{flat:!0,color:"error",css:{bg:"$errorLight",color:"$errorLightContrast",[`& ${tr}`]:{".nextui-drip-filler":{opacity:.4,fill:"$error"}}}},{flat:!0,isHovered:!0,color:"default",css:{bg:"$primaryLightHover"}},{flat:!0,isHovered:!0,color:"primary",css:{bg:"$primaryLightHover"}},{flat:!0,isHovered:!0,color:"secondary",css:{bg:"$secondaryLightHover"}},{flat:!0,isHovered:!0,color:"success",css:{bg:"$successLightHover"}},{flat:!0,isHovered:!0,color:"warning",css:{bg:"$warningLightHover"}},{flat:!0,isHovered:!0,color:"error",css:{bg:"$errorLightHover"}},{flat:!0,isPressed:!0,color:"default",css:{bg:"$primaryLightActive"}},{flat:!0,isPressed:!0,color:"primary",css:{bg:"$primaryLightActive"}},{flat:!0,isPressed:!0,color:"secondary",css:{bg:"$secondaryLightActive"}},{flat:!0,isPressed:!0,color:"success",css:{bg:"$successLightActive"}},{flat:!0,isPressed:!0,color:"warning",css:{bg:"$warningLightActive"}},{flat:!0,isPressed:!0,color:"error",css:{bg:"$errorLightActive"}},{auto:!0,color:"gradient",bordered:!0,css:{".nextui-button-text":{px:"$$buttonPadding"},".nextui-button-icon":{ml:"$$buttonPadding"},".nextui-button-icon-right":{mr:"$$buttonPadding"},".nextui-button-text-left":{pl:0},".nextui-button-text-right":{pr:0}}},{rounded:!0,size:"xs",css:{br:"$pill"}},{rounded:!0,size:"sm",css:{br:"$pill"}},{rounded:!0,size:"md",css:{br:"$pill"}},{rounded:!0,size:"lg",css:{br:"$pill"}},{rounded:!0,size:"xl",css:{br:"$pill"}}],defaultVariants:{color:"default",borderWeight:"normal",animated:!0,size:"md"}},Po),el=a7,KI=Fs((e,t)=>{const{as:r,css:i,iconLeftCss:n,iconRightCss:s,onClick:o,onPress:a,onPressStart:l,onPressEnd:c,onPressChange:h,onPressUp:u,...d}=e,f=n7(),m=t7(d,f),p=r7(m),{flat:g,children:v,disabled:y,animated:b,light:x,ripple:A,bordered:S,auto:_,borderWeight:w,icon:M,iconRight:C,ghost:E,autoFocus:$,className:P,...D}=m,W=de=>{b&&A&&V.current&&X(de)},V=Br(t),{buttonProps:H,isPressed:L}=c_({...d,isDisabled:y,elementType:r,onPress:de=>{de.pointerType==="keyboard"||de.pointerType==="virtual"?W(de):typeof window<"u"&&window.event&&W(window.event),o&&(o(de),console.warn("onClick is deprecated, please use onPress")),a==null||a(de)},onPressStart:l,onPressEnd:c,onPressChange:h,onPressUp:u},V),{hoverProps:O,isHovered:k}=Fv({isDisabled:y}),{isFocused:j,isFocusVisible:F,focusProps:Y}=Do({autoFocus:$}),{onClick:X,...Z}=T$(!1,V),U=M||C,ne=me.Children.count(v)===0,ee=Boolean(C),te=I.exports.useMemo(()=>L?"pressed":k?"hovered":y?"disabled":"ready",[y,k,L]),Q=I.exports.useMemo(()=>ee?s:n,[ee,s,n]);return Ne(el,{ref:V,animated:b,as:r,auto:_,borderWeight:w,bordered:S||E,className:gt("nextui-button",`nextui-button--${te}`,P),css:{...i,...p},"data-state":te,flat:g,ghost:E,isChildLess:ne,isFocusVisible:F&&!y,isHovered:k||E&&j,isPressed:L,light:x,...Mr(H,Y,O,D),children:[me.Children.count(v)===0?z(XM,{isSingle:!0,css:Q,isAuto:_,isGradientButtonBorder:e.color==="gradient"&&(S||E),isRight:ee,children:U}):U?Ne($n,{children:[z(XM,{css:Q,isAuto:_,isGradientButtonBorder:e.color==="gradient"&&(S||E),isRight:ee,isSingle:!1,children:U}),z("div",{className:gt("nextui-button-text",{"nextui-button-text-right":ee,"nextui-button-text-left":!ee}),children:v})]}):z("span",{className:"nextui-button-text",children:v}),z(L$,{className:"nextui-button-drip",color:"white",...Z})]})});KI.toString=()=>".nextui-button";const Ua=ei(KI,{ghost:!1,bordered:!1,ripple:!0,animated:!0,disabled:!1,autoFocus:!1,auto:!1,className:"",type:"button"}),l7=Le("div",{display:"inline-flex",margin:"$3",backgroundColor:"transparent",height:"min-content",[`& ${el}`]:{".nextui-button-text":{top:0}},variants:{vertical:{true:{fd:"column",[`& ${el}`]:{"&:not(:first-child)":{btlr:0,btrr:0},"&:not(:last-child)":{bblr:0,bbrr:0}}},false:{fd:"row",[`& ${el}`]:{"&:not(:first-child)":{btlr:0,bblr:0},"&:not(:last-child)":{btrr:0,bbrr:0}}}},size:{xs:{br:"$xs"},sm:{br:"$sm"},md:{br:"$md"},lg:{br:"$base"},xl:{br:"$xl"}},rounded:{true:{br:"$pill"}},bordered:{true:{bg:"transparent"}},gradient:{true:{pl:0}}},defaultVariants:{vertical:!1},compoundVariants:[{bordered:!0,vertical:!0,css:{[`& ${el}`]:{"&:not(:last-child)":{borderBottom:"none",paddingBottom:"0"}}}},{bordered:!0,vertical:!1,css:{[`& ${el}`]:{"&:not(:first-child)":{borderLeft:"none"}}}},{bordered:!0,vertical:!1,gradient:!0,css:{[`& ${el}`]:{"&:not(:last-child)&:not(:first-child)":{pl:0},"&:last-child":{pl:0}}}}]}),c7=l7,XI=e=>{const{disabled:t,size:r,color:i,bordered:n,ghost:s,light:o,flat:a,shadow:l,auto:c,animated:h,rounded:u,ripple:d,borderWeight:f,children:m,...p}=e,g=I.exports.useMemo(()=>({disabled:t,size:r,color:i,bordered:n,light:o,ghost:s,flat:a,shadow:l,auto:c,borderWeight:f,animated:h,rounded:u,ripple:d,isButtonGroup:!0}),[t,h,r,d,i,n,o,s,a,f]);return z(GI.Provider,{value:g,children:z(c7,{bordered:n||s,gradient:e.color==="gradient",size:r,...p,children:m})})};XI.toString=()=>".nextui-button-group";const u7=me.memo(XI),d7=ei(u7,{borderWeight:"normal",size:"md",color:"default"});Ua.Group=d7;const h7=Ef({"0%":{backgroundPosition:"200% 0"},to:{backgroundPosition:"-200% 0"}}),f7=Le("div",{opacity:0,margin:"0 auto",position:"relative",overflow:"hidden",maxWidth:"100%",transition:"transform 250ms ease 0ms, opacity 200ms ease-in 0ms","@motion":{transition:"none"},variants:{ready:{true:{opacity:1},false:{opacity:0}}}}),p7=Le("img",{size:"100%",display:"block"}),m7=Le("div",{position:"absolute",top:0,left:0,right:0,bottom:0,size:"100%",borderRadius:"inherit",backgroundImage:"linear-gradient(270deg, $colors$accents1, $colors$accents2, $colors$accents2, $colors$accents1)",backgroundSize:"400% 100%",animation:`${h7} 5s ease-in-out infinite`,transition:"opacity 300ms ease-out"}),qI=me.memo(({opacity:e,css:t,className:r,...i})=>z(m7,{className:gt("nextui-image-skeleton",r),css:{opacity:e,...t},...i}));qI.toString=()=>".nextui-image-skeleton";const g7=ei(qI,{opacity:.5,className:""}),QI=me.forwardRef((e,t)=>{const{src:r,width:i,height:n,showSkeleton:s=!0,className:o,maxDelay:a=3e3,autoResize:l=!1,objectFit:c="scale-down",containerCss:h,css:u,...d}=e,f=Br(t),[m,p]=I.exports.useState(!0),[g,v]=I.exports.useState(s),{w:y,h:b}=I.exports.useMemo(()=>({w:i?typeof i=="number"?`${i}px`:i:"auto",h:n?typeof n=="number"?`${n}px`:n:"auto"}),[i,n]),[x,A,S]=GS(b),[_,w]=x$(f),M=s&&!!i&&!!n;I.exports.useEffect(()=>{f.current&&f.current.complete&&(p(!1),v(!1))}),I.exports.useEffect(()=>{const E=setTimeout(()=>{M&&v(!1),clearTimeout(E)},a);return()=>clearTimeout(E)},[m]),I.exports.useEffect(()=>{if(!l)return;const E=_.width===0,$=S.current==="auto";!E&&i&&n&&(_.width<i?!$&&A("auto"):$&&A(b))},[_,i]),b$(()=>{l&&w()});const C=I.exports.useMemo(()=>m?"loading":"ready",[m]);return Ne(f7,{className:gt("nextui-image-container",`nextui-image--${C}`,o),css:{width:y,height:x,...h},"data-state":C,ready:!m||g,children:[g&&z(g7,{opacity:1}),z(p7,{ref:f,alt:e.alt||"",className:"nextui-image",css:{objectFit:c,...u},"data-state":C,height:n,src:r,width:i,onLoad:()=>{p(!1)},...d})]})});QI.toString=()=>".nextui-image";const v7=me.memo(QI),Bg=e=>`calc(${15.25*e}pt + 1px * ${e-1})`,y7=Le("div",{width:"100%",maxWidth:"100%",position:"relative",variants:{color:{default:{bg:"$border"},primary:{bg:"$primary"},secondary:{bg:"$secondary"},success:{bg:"$success"},warning:{bg:"$warning"},error:{bg:"$error"}}},defaultVariants:{color:"default"}}),x7=Le("span",{position:"absolute",left:"50%",top:"50%",minHeight:"100%",display:"inline-flex",jc:"center",ai:"center",transform:"translate(-50%, -50%)",padding:"0 $lg",fontSize:"$base",fontWeight:"bold",textTransform:"capitalize",backgroundColor:"$background",zIndex:"$1",variants:{color:{default:{color:"$text"},primary:{color:"$primary"},secondary:{color:"$secondary"},success:{color:"$success"},warning:{color:"$warning"},error:{color:"$error"}}}}),ZI=({height:e,x:t,y:r,align:i,children:n,textColor:s,css:o,...a})=>{const l=I.exports.useMemo(()=>i&&i!=="center"?i==="left"||i==="start"?{transform:"translateY(-50%)",left:"7%"}:{transform:"translateY(-50%)",left:"auto",right:"7%"}:"",[i]),c=r?Bg(r/2):0,h=t?Bg(t/2):0;return z(y7,{css:{margin:`${c} ${h}`,height:`calc(${e} * 1px)`,...o},role:"separator",...a,children:n&&z(x7,{className:"nextui-divider-text",color:s,css:{...l},children:n})})};ZI.toString=()=>".nextui-divider";const b7=me.memo(ZI),JI=ei(b7,{x:0,y:0,height:1,align:"center"}),w7=e=>{const{ref:t,disableAnimation:r=!1,disableRipple:i=!1,variant:n="shadow",isHoverable:s=!1,borderWeight:o="light",isPressable:a=!1,onClick:l,onPress:c,autoFocus:h,allowTextSelectionOnPress:u=!0,...d}=e,f=Br(t),{onClick:m,...p}=T$(!1,f),g=w=>{r||i||!f.current||m(w)},{isPressed:v,pressProps:y}=WI({isDisabled:!a,onPress:w=>{w.pointerType!=="keyboard"&&w.pointerType!=="virtual"||(g(w),l==null||l(w)),c==null||c(w)},allowTextSelectionOnPress:u,...d}),{hoverProps:b,isHovered:x}=Fv({isDisabled:!s,...d}),{isFocusVisible:A,focusProps:S}=Do({autoFocus:h});y.onClick=w=>{a&&(g(w),l==null||l(w))};const _=I.exports.useCallback((w={})=>({...Mr(a?{...y,...S}:{},s?b:{},d,w)}),[a,s,y,S,b,d]);return{cardRef:f,variant:n,borderWeight:o,isPressable:a,isHovered:x,isPressed:v,disableAnimation:r,disableRipple:i,dripBindings:p,onDripClickHandler:m,isFocusVisible:A,getCardProps:_}},S7=Le("div",{d:"flex",w:"100%",h:"auto",flex:"1 1 auto",fd:"column",jc:"inherit",ai:"inherit",ac:"inherit",py:"$lg",px:"$sm",oy:"auto",position:"relative",ta:"left"}),_7=Le("div",{$$cardColor:"$colors$backgroundContrast",$$cardTextColor:"$colors$text",m:0,p:0,br:"$lg",bg:"$$cardColor",color:"$$cardTextColor",position:"relative",display:"flex",overflow:"hidden",fd:"column",width:"100%",height:"auto",boxSizing:"border-box","@motion":{transition:"none"},".nextui-image":{width:"100%"},[`& ${tr}`]:{zIndex:"$1",".nextui-drip-filler":{opacity:.25,fill:"$accents6"}},variants:{variant:{flat:{bg:"$accents0"},shadow:{dropShadow:"$lg","@safari":{boxShadow:"$lg",dropShadow:"none"}},bordered:{borderStyle:"solid",borderColor:"$border"}},borderWeight:{light:{bw:"$light"},normal:{bw:"$normal"},bold:{bw:"$bold"},extrabold:{bw:"$extrabold"},black:{bw:"$black"}},disableAnimation:{true:{transition:"none"},false:{transition:"$card"}},isPressable:{true:{cursor:"pointer",us:"none",WebkitTapHighlightColor:"transparent"}},isPressed:{true:{}},isHovered:{true:{dropShadow:"$lg","@safari":{boxShadow:"$lg",dropShadow:"none"}}}},compoundVariants:[{isPressed:!0,disableAnimation:!1,css:{transform:"scale(0.97)"}},{isHovered:!0,disableAnimation:!1,css:{transform:"translateY(-2px)"}},{isHovered:!0,variant:"shadow",css:{dropShadow:"$xl","@safari":{boxShadow:"$xl",dropShadow:"none"}}}]},OH,Po),A7=Le("div",{w:"100%",display:"flex",flexShrink:0,zIndex:"$1",jc:"flex-start",ai:"center",overflow:"hidden",color:"inherit",p:"$sm"}),M7=Le("div",{w:"100%",h:"auto",p:"$sm",d:"flex",ai:"center",overflow:"hidden",color:"inherit",bblr:"$lg",bbrr:"$lg",variants:{isBlurred:{true:{bf:"saturate(180%) blur(10px)",bg:"$$cardColor"}}}}),eR=me.forwardRef(({...e},t)=>{const{as:r,css:i,children:n,...s}=e,{cardRef:o,variant:a,isFocusVisible:l,isPressable:c,isPressed:h,disableAnimation:u,disableRipple:d,borderWeight:f,isHovered:m,getCardProps:p,dripBindings:g}=w7({...s,ref:t});return Ne(_7,{ref:o,as:r,borderWeight:f,css:i,disableAnimation:u,isFocusVisible:l,isHovered:m,isPressable:c,isPressed:h,role:c?"button":"section",tabIndex:c?0:-1,variant:a,...p(),children:[c&&!u&&!d&&z(L$,{...g}),n]})});eR.toString=()=>".nextui-card";const yr=eR;yr.Header=A7,yr.Body=S7,yr.Footer=M7,yr.Image=v7,yr.Divider=JI;function E7(e={}){let{isReadOnly:t}=e,[r,i]=Cf(e.isSelected,e.defaultSelected||!1,e.onChange);function n(o){t||i(o)}function s(){t||i(!r)}return{isSelected:r,setSelected:n,toggle:s}}function Pf(e={}){const{strict:t=!0,errorMessage:r="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=e,n=I.exports.createContext(void 0);return n.displayName=i,[n.Provider,function s(){const o=I.exports.useContext(n);if(!o&&t){const a=new Error(r);throw a.name="ContextError",Error.captureStackTrace==null||Error.captureStackTrace(a,s),a}return o},n]}const C7=Le("div",{float:"left",boxSizing:"border-box",pl:"calc($$rowGap / 2)",pr:"calc($$rowGap / 2)"}),T7=C7,tR=({children:e,span:t,offset:r,css:i,...n})=>z(T7,{css:{width:100/12*t+"%",marginLeft:100/12*r+"%",...i},...n,children:e});tR.toString=()=>".nextui-column";const P7=me.memo(tR),oy=ei(P7,{span:12,offset:0}),D7=Le("div",{p:0,m:0,h:0,opacity:0,overflow:"hidden",variants:{expanded:{true:{opacity:1}}}}),L7=ei(({isExpanded:e,delay:t,animated:r,css:i,children:n})=>{const[s,o]=I.exports.useState(e?"auto":"0"),[a,l]=I.exports.useState(e),c=I.exports.useRef(null),h=I.exports.useRef(),u=I.exports.useRef(),d=I.exports.useRef(),[f,m]=x$(c);return I.exports.useEffect(()=>o(`${f.height}px`),[f.height]),I.exports.useEffect(()=>{if(e!==a)return e||(m(),o(`${f.height}px`)),h.current=window.setTimeout(()=>{l(e),clearTimeout(h.current)},30),e?d.current=window.setTimeout(()=>{o("auto"),clearTimeout(d.current)},t):u.current=window.setTimeout(()=>{clearTimeout(u.current)},t/2),()=>{clearTimeout(h.current),clearTimeout(u.current),clearTimeout(d.current)}},[e]),z(D7,{css:{height:a?s:"0",transition:r?`height ${t}ms ease 0ms,
    opacity ${1.5*t}ms ease 0ms;`:"none",...i},expanded:a,children:z("div",{ref:c,className:"nextui-expand-content",children:n})})},{isExpanded:!1,animated:!0,delay:200}),$7={values:[]},rR=me.createContext($7),I7=()=>me.useContext(rR),Wm=Le("div",{transition:"$default",".nextui-collapse-title-content":{w:"100%","h1,h2,h3,h4,h5,h6,p,span,b":{margin:0}},".nextui-collapse-title-container":{d:"flex",jc:"space-between",ai:"center"},".nextui-collapse-title":{color:"$foreground"},".nextui-collapse-subtitle":{color:"$accents7",margin:0,"*":{margin:0}},".nextui-collapse-title-content-left":{mr:"$sm"},".nextui-collapse-title-content-left, .nextui-collapse-title-content-right":{d:"flex",ai:"center"},"@motion":{transition:"none",".nextui-collapse-title-content-right ":{svg:{transition:"none"}}},variants:{shadow:{true:{border:"none",boxShadow:"$md",br:"$lg",p:"0 $lg",bg:"$backgroundContrast"}},borderWeight:{light:{$$collapseBorderWidth:"$borderWeights$light"},normal:{$$collapseBorderWidth:"$borderWeights$normal"},bold:{$$collapseBorderWidth:"$borderWeights$bold"},extrabold:{$$collapseBorderWidth:"$borderWeights$extrabold"},black:{$$collapseBorderWidth:"$borderWeights$black"}},divider:{true:{borderTop:"$$collapseBorderWidth solid $border",borderBottom:"$$collapseBorderWidth solid $border"}},bordered:{true:{br:"$lg",p:"0 $lg",border:"$$collapseBorderWidth solid $border"}},animated:{true:{".nextui-collapse-title-content-right ":{svg:{transition:"transform 200ms ease"}}},false:{transition:"none"}},visible:{true:{".nextui-collapse-title-content-right ":{svg:{transform:"rotateZ(-90deg)"}}},false:{".nextui-collapse-title-content-right":{svg:{transform:"rotateZ(0deg)"}}}}},defaultVariants:{borderWeight:"light"}},kH),R7=Le("div",{w:"100%",d:"block",ta:"left",bg:"transparent",border:"none",cursor:"pointer",outline:"none",padding:"$lg 0",variants:{disabled:{true:{cursor:"not-allowed",".nextui-collapse-title, .nextui-collapse-subtitle":{opacity:.5}}}}},Po),k7=Le("div",{fontSize:"$base",lineHeight:"$lg",pb:"$lg","*:first-child":{mt:0},"*:last-child":{mb:0}}),O7=Le("svg",{path:{stroke:"$accents7"}}),B7=Le("div",{width:"auto",padding:"0 $sm","div + div":{borderTop:"none"},[`& ${Wm}:first-child`]:{borderTop:"none"},[`& ${Wm}:last-child`]:{borderBottom:"none"},variants:{borderWeight:{light:{$$collapseGroupBorderWidth:"$borderWeights$light"},normal:{$$collapseGroupBorderWidth:"$borderWeights$normal"},bold:{$$collapseGroupBorderWidth:"$borderWeights$bold"},extrabold:{$$collapseGroupBorderWidth:"$borderWeights$extrabold"},black:{$$collapseGroupBorderWidth:"$borderWeights$black"}},shadow:{true:{br:"$lg",border:"none",boxShadow:"$md",p:"0 $lg",bg:"$backgroundContrast"}},bordered:{true:{br:"$lg",p:"0 $lg",border:"$$collapseGroupBorderWidth solid $border"}},splitted:{true:{[`& ${Wm}`]:{br:"$lg",border:"none",bg:"$backgroundContrast",boxShadow:"$md",p:"0 $lg",margin:"$md 0"}}}},defaultVariants:{borderWeight:"light",shadow:!1,bordered:!1,splitted:!1}}),iR=({...e})=>z(O7,{className:"nextui-collapse-icon",fill:"none",focusable:"false",height:"20",role:"presentation",viewBox:"0 0 24 24",width:"20",xmlns:"http://www.w3.org/2000/svg",...e,children:z("path",{d:"M15.5 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5})});iR.toString=()=>".nextui-collapse-icon";const z7=me.memo(iR),N7=z7,as="nextui-collapse",nR=({children:e,title:t,subtitle:r,expanded:i,shadow:n,className:s,divider:o,arrowIcon:a,showArrow:l,disabled:c,onChange:h,bordered:u,contentLeft:d,preventDefault:f,animated:m,borderWeight:p,index:g,...v})=>{const[y,b,x]=GS(i),{values:A,divider:S,animated:_,updateValues:w}=I7(),{isFocusVisible:M,focusProps:C}=Do();t||Vx('"title" is required.',"Collapse"),I.exports.useEffect(()=>{y!==i&&b(i)},[i]),I.exports.useEffect(()=>{if(!A.length)return;const O=!!A.find(k=>k===g);b(O)},[A.join(",")]);const E=sb(),$=sb(),P=I.exports.useMemo(()=>l?a||z(N7,{}):null,[a,l]),D=S===void 0?o:S,W=I.exports.useMemo(()=>_===void 0?m:_,[_,m]),V=O=>{if(c)return;const k=!x.current;b(k),w&&w(g,k),h&&h(O,g,k)},{bindings:H}=q6(O=>{V(O)},[oM.Enter,oM.Space],{disableGlobalEvent:!0,preventDefault:f}),L=I.exports.useMemo(()=>y?"open":"closed",[y]);return Ne(Wm,{animated:W,borderWeight:p,bordered:u,className:gt(s,as,`${as}--${L}`),"data-state":L,divider:D,shadow:n,tabIndex:-1,visible:y,...v,children:[z(R7,{"aria-controls":$,"aria-disabled":c,"aria-expanded":y,className:`${as}-view`,"data-state":L,disabled:c,id:E,isFocusVisible:M,role:"button",tabIndex:c?-1:0,onClick:V,...C,...H,children:Ne("div",{className:gt(`${as}-title-container`),children:[d&&z("div",{className:`${as}-title-content-left`,children:d}),Ne("div",{className:`${as}-title-content`,children:[me.isValidElement(t)?t:z("h3",{className:`${as}-title`,children:t}),r&&z("div",{className:`${as}-subtitle`,children:r})]}),z("div",{className:`${as}-title-content-right`,children:P})]})}),z(L7,{animated:W,isExpanded:y,children:z(k7,{"aria-labelledby":E,className:`${as}-content`,id:$,role:"region",tabIndex:-1,children:e})})]})};nR.toString=()=>".nextui-collapse";const zg=ei(nR,{shadow:!1,divider:!0,bordered:!1,showArrow:!0,animated:!0,disabled:!1,preventDefault:!0,expanded:!1}),sR=({children:e,accordion:t,animated:r,divider:i,onChange:n,...s})=>{const[o,a,l]=GS([]),c=(d,f)=>{const m=l.current.find(p=>p===d);if(n&&n(d,f),t)return a(f?[d]:[]);if(f)return m?void 0:a([...l.current,d]);a(l.current.filter(p=>p!==d))},h=I.exports.useMemo(()=>({values:o,updateValues:c,divider:i,animated:r}),[o.join(",")]),u=I.exports.useMemo(()=>W6(e,[zg]),[e]);return z(rR.Provider,{value:h,children:z(B7,{...s,children:u})})};sR.toString=()=>".nextui-collapse-group";const F7=ei(sR,{accordion:!0});zg.Group=F7;const U7=Le("span",{size:"1px",variants:{inline:{true:{display:"inline-block"},false:{display:"block"}}},defaultVariants:{inline:!1}}),oR=({x:e,y:t,inline:r,css:i,...n})=>{const s=Bg(e),o=Bg(t);return z(U7,{"aria-hidden":"true",css:{marginLeft:`${s} !important`,marginTop:`${o} !important`,...i},...n})};oR.toString=()=>".nextui-spacer";const H7=me.memo(oR),Sn=ei(H7,{x:1,y:1}),V7=ei(({children:e,childrenRef:t,className:r,visible:i,enterTime:n,leaveTime:s,clearTime:o,name:a,onExited:l,onEntered:c,...h})=>{const[u,d]=I.exports.useState(""),[f,m]=I.exports.useState(i);return I.exports.useEffect(()=>{const p=i?"enter":"leave",g=i?n:s;i&&!f&&m(!0),d(`${a}-${p}`);const v=setTimeout(()=>{d(`${a}-${p} ${a}-${p}-active`),p==="leave"?l==null||l():c==null||c(),clearTimeout(v)},g),y=setTimeout(()=>{i||(d(""),m(!1)),clearTimeout(y)},g+o);return()=>{clearTimeout(v),clearTimeout(y)}},[i,f]),I.exports.useEffect(()=>{if(t==null||!t.current)return;const p=u.split(" "),g=t.current.className.split(" ").filter(v=>!v.includes(a));t.current.className=gt(g,p)},[t,u]),me.isValidElement(e)&&f?me.cloneElement(e,{...h,className:gt(e.props.className,r,t!=null&&t.current?"":u)}):null},{visible:!1,enterTime:60,leaveTime:60,clearTime:60,className:"",name:"transition"}),W7=Le("div",{display:"flex",position:"relative",boxSizing:"border-box",variants:{fluid:{true:{width:"100%"}}},defaultVariants:{fluid:!0}}),j7=W7,aR=({children:e,gap:t,justify:r,align:i,wrap:n,css:s,...o})=>z(j7,{css:{flexWrap:n,$$rowGap:`calc(${t} * $space$lg)`,marginLeft:`calc(${t} * $space$lg / 2)`,marginRight:`calc(${t} * $space$lg / 2)`,justifyContent:r,alignItems:i,...s},...o,children:e});aR.toString=()=>".nextui-row";const G7=me.memo(aR),bl=ei(G7,{gap:0,wrap:"nowrap",justify:"flex-start",align:"flex-start"});function Y7(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var K7={};Y7(K7,"useLink",()=>lR);function lR(e,t){let{elementType:r="a",onPress:i,onPressStart:n,onPressEnd:s,onClick:o,isDisabled:a,...l}=e,c;r!=="a"&&(c={role:"link",tabIndex:a?void 0:0});let{focusableProps:h}=NI(e,t),{pressProps:u,isPressed:d}=Tf({onPress:i,onPressStart:n,onPressEnd:s,isDisabled:a,ref:t}),f=Ov(l,{labelable:!0}),m=Ci(h,u);return{isPressed:d,linkProps:Ci(f,{...m,...c,"aria-disabled":a||void 0,onClick:p=>{u.onClick(p),o&&(o(p),console.warn("onClick is deprecated, please use onPress"))}})}}const X7=Le("svg",{ml:"$1",as:"center",display:"flex",color:"currentColor"}),q7=Le("a",{$$linkColor:"$colors$link",display:"flex",alignItems:"center",lineHeight:"inherit",textDecoration:"none",width:"fitContent",backgroundColor:"transparent",backgroundImage:"inherit",backgroundClip:"inherit",WebkitTextFillColor:"inherit",color:"$$linkColor",outline:"none",maxW:"max-content","&:hover":{opacity:.8},"@motion":{transition:"none"},variants:{color:{inherit:{$$linkColor:"inherit"},default:{$$linkColor:"$colors$link"},text:{$$linkColor:"$colors$text"},primary:{$$linkColor:"$colors$primary"},secondary:{$$linkColor:"$colors$secondary"},success:{$$linkColor:"$colors$success"},warning:{$$linkColor:"$colors$warning"},error:{$$linkColor:"$colors$error"}},underline:{true:{"&:hover, &:active, &:focus":{textDecoration:"underline"}}},block:{true:{padding:"$2 $4",borderRadius:"$base","&:hover":{backgroundColor:"$$linkBackgroundColor"}}},animated:{true:{transition:"opacity 0.25s ease 0s, box-shadow 0.25s ease 0s"}}},compoundVariants:[{block:!0,animated:!0,css:{transition:"opacity 0.25s ease 0s, box-shadow 0.25s ease 0s, background 0.25s ease 0s","@motion":{transition:"none"}}}],defaultVariants:{color:"default",animated:!0}},Po),Q7=q7,cR=()=>Ne(X7,{className:"nextui-link-icon",fill:"none",height:"1em",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"1em",children:[z("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),z("path",{d:"M15 3h6v6"}),z("path",{d:"M10 14L21 3"})]});cR.toString=()=>".nextui-link-icon";const Z7=me.memo(cR),uR=Fs((e,t)=>{const{children:r,isExternal:i=!1,as:n,css:s,color:o="default",autoFocus:a,className:l,...c}=e,{isDark:h}=XS(),u=Br(t),{linkProps:d}=lR({...c,elementType:n},u),{isFocusVisible:f,focusProps:m}=Do({autoFocus:a}),p=I.exports.useMemo(()=>{let g=`$colors$${o}Light`;switch(o){case"inherit":case"text":g=Yh("colors","text",.2);break;case"default":g=Yh("colors","link",.2)}return{...s,$$linkBackgroundColor:g}},[s,o,h]);return z(Q7,{ref:u,as:n,className:gt("nextui-link",l),color:o,css:p,isFocusVisible:f,...Mr(d,m,c),children:Ne($n,{children:[r,i&&z(Z7,{})]})})});uR.toString=()=>".nextui-link";const Df=uR,J7=Le("p",{variants:{weight:{hairline:{fontWeight:"$hairline"},thin:{fontWeight:"$thin"},light:{fontWeight:"$light"},normal:{fontWeight:"$normal"},medium:{fontWeight:"$medium"},semibold:{fontWeight:"$semibold"},bold:{fontWeight:"$bold"},extrabold:{fontWeight:"$extrabold"},black:{fontWeight:"$black"}}}},Ju),dR=me.forwardRef((e,t)=>{const{children:r,tag:i,color:n="default",transform:s,size:o,css:a,...l}=e,c=Br(t),h=I.exports.useMemo(()=>CH(n)?n==="default"?"$text":`$${n}`:n,[n]);return z(J7,{ref:c,as:i,css:{color:h,fontSize:o,tt:s,...a},...l,children:r})});dR.toString=()=>".nextui-text-child";const hR=me.memo(dR),fR=(e,t,r,i)=>{if(!e.length)return t;const n=e.slice(1,e.length);return z(hR,{size:r,tag:e[0],transform:i,children:fR(n,t,r)})},pR=me.forwardRef((e,t)=>{const{h1:r=!1,h2:i=!1,h3:n=!1,h4:s=!1,h5:o=!1,h6:a=!1,b:l=!1,small:c=!1,i:h=!1,span:u=!1,del:d=!1,em:f=!1,blockquote:m=!1,transform:p="none",size:g,children:v,...y}=e,b=Br(t),x={h1:r,h2:i,h3:n,h4:s,h5:o,h6:a,blockquote:m},A={span:u,small:c,b:l,em:f,i:h,del:d},S=Object.keys(x).filter(E=>x[E]),_=Object.keys(A).filter(E=>A[E]),w=I.exports.useMemo(()=>S[0]?S[0]:_[0]?_[0]:"p",[S,_]),M=_.filter(E=>E!==w),C=I.exports.useMemo(()=>M.length?fR(M,v,g,p):v,[M,v,g,p]);return z(hR,{ref:b,size:g,tag:w,transform:p,...y,children:C})});pR.toString=()=>".nextui-text";const Kt=me.memo(pR),eV=Le("div",{d:"inline-flex",p:"0 $sm",jc:"center",ai:"center",w:"max-content",maxWidth:"100%",transition:"transform 250ms ease 0ms, box-shadow 0.25s ease 0s","@motion":{transition:"none"}},Po),tV=Le("div",{ml:"$sm",d:"inline-flex",fd:"column",alignItems:"flex-start",whiteSpace:"nowrap"}),rV=Le("span",{fontSize:"$sm",color:"$text",lh:"$sm",tt:"capitalize",fontWeight:"$medium",maxW:"$60",to:"ellipsis",ov:"hidden"}),iV=Le("span",{fontSize:"$xs",color:"$accents7","*:first-child":{mt:0},"*:last-child":{mb:0}}),mR=me.forwardRef((e,t)=>{const{as:r,css:i,src:n,text:s,name:o,children:a,altText:l,color:c,squared:h,bordered:u,size:d,description:f,zoomed:m,pointer:p,...g}=e,v=Br(t),{isFocusVisible:y,focusProps:b}=Do();return Ne(eV,{ref:v,as:r,...Mr(g,b),css:Mr(r==="button"?{borderRadius:"$xs",background:"none",appearance:"none",p:0,m:0,outline:"none",border:"none",cursor:"pointer"}:{},i),isFocusVisible:y,children:[z(o_,{alt:l,bordered:u,className:"nextui-user-avatar",color:c,pointer:p,size:d,squared:h,src:n,text:s,zoomed:m}),Ne(tV,{className:"nextui-user-info",children:[z(rV,{className:"nextui-user-name",children:o}),z(iV,{className:"nextui-user-desc",children:f||a})]})]})});mR.toString=()=>".nextui-user";const gR=mR,vR=me.forwardRef((e,t)=>{const{rel:r="noopener",color:i="primary",target:n="_blank",className:s,children:o,...a}=e;return z(Df,{ref:t,className:gt("nextui-user-link",s),color:i,rel:r,target:n,...a,children:o})});vR.toString=()=>".nextui-user-link";const nV=me.memo(vR),sV=nV;gR.Link=sV;const oV=({size:e,fill:t,plain:r,width:i,height:n,className:s,...o})=>z("svg",r?{className:s,fill:"none",height:e||n,stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e||i,...o,children:z("path",{d:"M18 6L6 18M6 6l12 12"})}:{className:s,height:e||n,viewBox:"0 0 24 24",width:e||i,...o,children:z("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:t})}),aV=I.exports.memo(oV),lV=ei(aV,{width:24,height:24,plain:!1,className:""}),cV=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],qM={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},uV=typeof document<"u"&&!!document.documentElement.currentStyle,QM=e=>{Object.keys(qM).forEach(t=>{e.style.setProperty(t,qM[t],"important")})},dV=e=>{const t=window.getComputedStyle(e);if(t===null)return null;const r=V6(cV,t),{boxSizing:i}=r;return i===""?null:(uV&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})};let Yi=null;const hV=(e,t,r=1,i=1/0)=>{Yi||(Yi=document.createElement("textarea"),Yi.setAttribute("tabindex","-1"),Yi.setAttribute("aria-hidden","true"),QM(Yi)),Yi.parentNode===null&&document.body.appendChild(Yi);const{paddingSize:n,borderSize:s,sizingStyle:o}=e,{boxSizing:a}=o;Object.keys(o).forEach(d=>{const f=d;Yi.style[f]=o[f]}),QM(Yi),Yi.value=t;let l=((d,f)=>{const m=d.scrollHeight;return f.sizingStyle.boxSizing==="border-box"?m+f.borderSize:m-f.paddingSize})(Yi,e);Yi.value="x";const c=Yi.scrollHeight-n;let h=c*r;a==="border-box"&&(h=h+n+s),l=Math.max(h,l);let u=c*i;return a==="border-box"&&(u=u+n+s),l=Math.min(u,l),[l,c]},yR=me.forwardRef((e,t)=>{const r=I.exports.useRef(null),i=me.useRef(0),n=me.useRef(),{cacheMeasurements:s,rows:o,maxRows:a,minRows:l,onChange:c,onHeightChange:h,css:u,...d}=e;Object.keys(d).forEach(p=>{UF.indexOf(p)>-1&&delete d[p]});const f=d.value!==void 0;I.exports.useImperativeHandle(t,()=>r.current);const m=()=>{const p=r.current,g=s&&n.current?n.current:dV(p);if(!g)return;n.current=g;const[v,y]=hV(g,p.value||p.placeholder||"x",o||l,o||a);i.current!==v&&(i.current=v,p.style.setProperty("height",`${v}px`,"important"),h&&h(v,{rowHeight:y}))};return typeof document<"u"&&(I.exports.useLayoutEffect(m),b$(m)),z(qh,{ref:r,as:"textarea",css:{...u},onChange:p=>{f||m(),c&&c(p)},...d})});yR.toString=()=>".nextui-textarea";const fV=ei(yR,{minRows:3,maxRows:6,cacheMeasurements:!0,initialValue:""}),pV=typeof window<"u"?me.useLayoutEffect:()=>{};let ZM=new Map;function hb(e){let[t,r]=I.exports.useState(e),i=I.exports.useRef(null),n=ZS(t),s=I.exports.useCallback(o=>{i.current=o},[]);return ZM.set(n,s),pV(()=>{let o=n;return()=>{ZM.delete(o)}},[n]),I.exports.useEffect(()=>{let o=i.current;o&&(i.current=null,r(o))}),n}let Pd=new Map,JM=new Set;function eE(){if(typeof window>"u")return;let e=r=>{let i=Pd.get(r.target);i||(i=new Set,Pd.set(r.target,i),r.target.addEventListener("transitioncancel",t)),i.add(r.propertyName)},t=r=>{let i=Pd.get(r.target);if(!!i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",t),Pd.delete(r.target)),Pd.size===0)){for(let n of JM)n();JM.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?eE():document.addEventListener("DOMContentLoaded",eE));function mV(e,t){let{id:r,"aria-label":i,"aria-labelledby":n}=e;return r=hb(r),n&&i?n=[...new Set([...n.trim().split(/\s+/),r])].join(" "):n&&(n=n.trim().split(/\s+/).join(" ")),!i&&!n&&t&&(i=t),{id:r,"aria-label":i,"aria-labelledby":n}}function gV(e){let{id:t,label:r,"aria-labelledby":i,"aria-label":n,labelElementType:s="label"}=e;t=hb(t);let o=hb(),a={};r?(i=i?`${i} ${o}`:o,a={id:o,htmlFor:s==="label"?t:void 0}):!i&&!n&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let l=mV({id:t,"aria-label":n,"aria-labelledby":i});return{labelProps:a,fieldProps:l}}const vV=Le("div",{$$inputColor:"$colors$accents0",$$inputTextColor:"$colors$text",$$inputPlaceholderColor:"$colors$accents6",$$inputShadow:"$shadows$sm",$$inputBorderColor:"$colors$border",$$inputHoverBorderColor:"$colors$foreground",$$inputLabelColor:"$$inputHoverBorderColor",display:"inline-flex",flexDirection:"column",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitBoxAlign:"center",variants:{color:{default:{},primary:{$$inputHoverBorderColor:"$colors$primary",$$inputLabelColor:"$colors$primary"},secondary:{$$inputHoverBorderColor:"$colors$secondary",$$inputLabelColor:"$colors$secondary"},success:{$$inputHoverBorderColor:"$colors$success",$$inputLabelColor:"$colors$success"},warning:{$$inputHoverBorderColor:"$colors$warning",$$inputLabelColor:"$colors$warning"},error:{$$inputHoverBorderColor:"$colors$error",$$inputLabelColor:"$colors$error"}},status:{default:{},primary:{$$inputColor:"$colors$primaryLight",$$inputPlaceholderColor:"$colors$primaryLightContrast",$$inputTextColor:"$colors$primaryLightContrast",$$inputLabelColor:"$$inputTextColor",$$inputHoverBorderColor:"$colors$primary"},secondary:{$$inputColor:"$colors$secondaryLight",$$inputPlaceholderColor:"$colors$secondaryLightContrast",$$inputTextColor:"$colors$secondaryLightContrast",$$inputLabelColor:"$$inputTextColor",$$inputHoverBorderColor:"$colors$secondary"},success:{$$inputColor:"$colors$successLight",$$inputPlaceholderColor:"$colors$successLightContrast",$$inputTextColor:"$colors$successLightContrast",$$inputLabelColor:"$$inputTextColor",$$inputHoverBorderColor:"$colors$success"},warning:{$$inputColor:"$colors$warningLight",$$inputPlaceholderColor:"$colors$warningLightContrast",$$inputTextColor:"$colors$warningLightContrast",$$inputLabelColor:"$$inputTextColor",$$inputHoverBorderColor:"$colors$warning"},error:{$$inputColor:"$colors$errorLight",$$inputPlaceholderColor:"$colors$errorLightContrast",$$inputTextColor:"$colors$errorLightContrast",$$inputLabelColor:"$$inputTextColor",$$inputHoverBorderColor:"$colors$error"}},helperColor:{default:{$$inputHelperColor:"$colors$text"},primary:{$$inputHelperColor:"$colors$primary"},secondary:{$$inputHelperColor:"$colors$secondary"},success:{$$inputHelperColor:"$colors$success"},warning:{$$inputHelperColor:"$colors$warning"},error:{$$inputHelperColor:"$colors$error"}},borderWeight:{light:{$$inputBorderWeight:"$borderWeights$light"},normal:{$$inputBorderWeight:"$borderWeights$normal"},bold:{$$inputBorderWeight:"$borderWeights$bold"},extrabold:{$$inputBorderWeight:"$borderWeights$extrabold"},black:{$$inputBorderWeight:"$borderWeights$black"}},size:{xs:{$$inputBorderRadius:"$space$3",$$inputFontSize:"$fontSizes$xs",$$inputHeightRatio:"1.2",br:"$$inputBorderRadius"},sm:{$$inputBorderRadius:"$space$4",$$inputFontSize:"$fontSizes$xs",$$inputHeightRatio:"1.6",br:"$$inputBorderRadius"},md:{$$inputBorderRadius:"$space$6",$$inputFontSize:"$fontSizes$sm",$$inputHeightRatio:"2",br:"$$inputBorderRadius"},lg:{$$inputBorderRadius:"$space$7",$$inputFontSize:"$fontSizes$md",$$inputHeightRatio:"2.2",br:"$$inputBorderRadius"},xl:{$$inputBorderRadius:"$space$8",$$inputFontSize:"$fontSizes$lg",$$inputHeightRatio:"2.6",br:"$$inputBorderRadius"}},rounded:{true:{$$inputBorderRadius:"$radii$pill"}},disabled:{true:{$$inputColor:"$colors$accents1",$$inputTextColor:"$colors$accents7",$$inputPlaceholderColor:"$colors$accents7",$$inputShadow:"$shadows$sm"}}}}),yV=Le("div",{width:"100%",br:"$$inputBorderRadius","@motion":{transition:"none"},variants:{isTextarea:{false:{display:"inline-flex",alignItems:"center",height:"calc($$inputHeightRatio * $9)"}},focused:{true:{}},isReadOnly:{false:{}},underlined:{true:{}},animated:{true:{transition:"$default"},false:{transition:"none"}}},compoundVariants:[{isReadOnly:!1,underlined:!0,css:{transform:"none"}},{focused:!0,animated:!0,isReadOnly:!1,underlined:!1,css:{transform:"translateY(-$space$1)"}}]}),jm=Le("input",{padding:0,fontSize:"$$inputFontSize",bg:"transparent",border:"none",color:"$$inputTextColor",br:0,outline:"none",size:"100%",minWidth:0,WebkitAppearance:"none","::placeholder":{color:"$$inputPlaceholderColor",transition:"opacity 0.25s ease 0s",MozTransition:"opacity 0.25s ease 0s",MsTransition:"opacity 0.25s ease 0s",WebkitTransition:"opacity 0.25s ease 0s"},"@motion":{transition:"none","&::placeholder":{transition:"none"}},"&:disabled":{pe:"none",color:"$accents4",cursor:"not-allowed"},variants:{isTextarea:{true:{boxShadow:"none",display:"block",size:"100%",resize:"none",border:"none",outline:"none"}},focused:{true:{"&::placeholder":{opacity:0,transition:"opacity 0.25s ease 0s"}}},bordered:{true:{padding:"0 $3"}},rounded:{true:{padding:"0 $3"}},animated:{false:{transition:"none","::placeholder":{transition:"none"}}},hasLeftContent:{true:{ml:0}},hasRightContent:{true:{mr:0}}}}),xV=Le("div",{flex:1,position:"relative",br:"$$inputBorderRadius",bg:"$$inputColor",display:"inline-flex",verticalAlign:"middle",alignItems:"center",userSelect:"none","@motion":{transition:"none","&:before":{transition:"none"},"&:after":{transition:"none"}},variants:{focused:{true:{}},isReadOnly:{true:{}},bordered:{true:{bg:"transparent",border:"none",boxShadow:"0 0 0 $$inputBorderWeight $$inputBorderColor",transition:"box-shadow 0.25s ease"}},shadow:{true:{transition:"$default"}},disabled:{true:{cursor:"not-allowed"}},underlined:{true:{bg:"transparent",[`& ${jm}`]:{margin:"$2 $3"},"&:before":{content:"",position:"absolute",zIndex:"$2",width:0,bottom:0,height:"$1",left:"50%",transform:"translate(-50%)",background:"$$inputHoverBorderColor",transition:"width 0.25s ease"},"&:after":{content:"",position:"absolute",zIndex:"$1",bottom:0,width:"100%",height:"$$inputBorderWeight",bg:"$$inputBorderColor"}},false:{[`& ${jm}`]:{margin:"$2 $5"}}},animated:{false:{transition:"none","&:before":{transition:"none"},"&:after":{transition:"none"}}},isTextarea:{true:{boxSizing:"border-box",width:"100%",maxWidth:"100%",height:"auto"},false:{height:"100%"}}},compoundVariants:[{bordered:!0,underlined:!0,css:{boxShadow:"0 0 0 0px $$inputBorderColor"}},{focused:!0,underlined:!0,css:{"&:before":{width:"100%"}}},{focused:!0,shadow:!0,isReadOnly:!1,underlined:!1,css:{boxShadow:"$$inputShadow"}},{focused:!0,bordered:!0,isReadOnly:!1,underlined:!1,css:{boxShadow:"0 0 0 $$inputBorderWeight $$inputHoverBorderColor"}},{bordered:!0,isReadOnly:!1,underlined:!1,css:{"&:hover":{boxShadow:"0 0 0 $$inputBorderWeight $$inputHoverBorderColor"}}},{isTextarea:!0,underlined:!1,css:{[`& ${jm}`]:{margin:"$xs $sm"}}}]}),bV=Le("div",{position:"absolute",opacity:0,bottom:"calc($$inputHeightRatio * -$space$5)","@motion":{transition:"none"},variants:{animated:{true:{transition:"opacity 0.25s ease"},false:{transition:"none"}},withValue:{true:{opacity:1}}}}),wV=Le("p",{margin:"$1 0 0 $5",fontSize:"$space$5",color:"$$inputHelperColor"}),SV=Le("span",{},BH),_V=Le("label",{d:"block",fontWeight:"$normal",color:"$$inputLabelColor",p:"0 0 0 $2",mb:"$3",fs:"$$inputFontSize",lh:"$md",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",us:"none","> *:first-child":{marginTop:0},"> *:last-child":{mb:0},"@motion":{transition:"none"},variants:{rounded:{true:{padding:"0 0 0 $3"}},asPlaceholder:{true:{position:"absolute",padding:0,zIndex:"$1",left:"$space$6",top:"20%",mb:0,cursor:"text",color:"$$inputPlaceholderColor",transition:"left 0.25s ease 0s, color 0.25s ease 0s, top 0.25s ease 0s"}},animated:{false:{transition:"none"}},focused:{true:{color:"$$inputHoverBorderColor"}},underlined:{true:{}},withValue:{true:{}},isTextarea:{true:{}},bordered:{true:{}},hasContentLeft:{true:{}}},compoundVariants:[{underlined:!0,asPlaceholder:!0,css:{left:"$space$2"}},{asPlaceholder:!0,focused:!0,underlined:!1,isTextarea:!1,css:{top:"-72%",left:"$2",cursor:"inherit"}},{asPlaceholder:!0,focused:!0,underlined:!0,isTextarea:!1,css:{top:"-72%",left:"0px",cursor:"inherit"}},{asPlaceholder:!0,withValue:!0,underlined:!1,isTextarea:!1,css:{color:"$$inputTextColor",top:"-72%",left:"$2",cursor:"inherit"}},{asPlaceholder:!0,withValue:!0,underlined:!0,isTextarea:!1,css:{color:"$$inputTextColor",top:"-72%",left:"0px",cursor:"inherit"}},{asPlaceholder:!0,isTextarea:!0,css:{top:"$5"}},{asPlaceholder:!0,hasContentLeft:!0,css:{left:"calc($space$6 + $$inputHeightRatio * $space$7)"}},{asPlaceholder:!0,isTextarea:!0,focused:!0,css:{top:"calc(-$space$10 - $space$3)",left:"$2"}},{asPlaceholder:!0,isTextarea:!0,withValue:!0,css:{top:"-$11"}},{asPlaceholder:!0,focused:!0,isTextarea:!0,bordered:!0,css:{top:"-$12"}}],defaultVariants:{asPlaceholder:!1}}),tE=Le("span",{position:"relative",display:"inline-flex",width:"initial",height:"100%",fontWeight:"$medium",ai:"center",pe:"none",margin:0,padding:"0 $sm",color:"$$inputPlaceholderColor",fontSize:"$$inputFontSize",lineHeight:"$xs",variants:{isRight:{true:{btrr:"$$inputBorderRadius",bbrr:"$$inputBorderRadius"},false:{btlr:"$$inputBorderRadius",bblr:"$$inputBorderRadius"}},isDark:{true:{}},isDefaultStatus:{true:{}},underlined:{true:{bg:"transparent"}},bordered:{true:{"&:after":{display:"none"},"&:before":{display:"none"}}}},compoundVariants:[{isRight:!0,underlined:!0,css:{borderLeftColor:"$$inputPlaceholderColor",borderLeftStyle:"solid",marginLeft:"$2",borderLeftWidth:"calc($$inputBorderWeight / 2)",height:"40%"}},{isRight:!1,underlined:!0,css:{borderRightColor:"$$inputPlaceholderColor",borderRightStyle:"solid",marginRight:"$2",borderRightWidth:"calc($$inputBorderWeight / 1)",height:"40%"}},{isDefaultStatus:!0,bordered:!1,underlined:!1,css:{bg:"$accents2"}},{isDefaultStatus:!0,bordered:!1,underlined:!1,isDark:!0,css:{color:"$accents6"}},{isDefaultStatus:!1,bordered:!0,underlined:!1,css:{bg:"$$inputColor"}},{bordered:!0,isRight:!0,css:{peddingRight:"$sm",paddingLeft:0}},{bordered:!0,isRight:!1,css:{peddingLeft:"$sm",paddingRight:0}}],defaultVariants:{isRight:!1}}),rE=Le("span",{variants:{applyStyles:{true:{display:"flex",boxSizing:"content-box",width:"calc($$inputHeightRatio * $space$4)",height:"100%",alignItems:"center",verticalAlign:"center",margin:0,padding:"0 calc($$inputHeightRatio * $3)",color:"$$inputTextColor",lineHeight:"$xs",position:"relative",cursor:"default",pe:"none"}},clickable:{true:{cursor:"pointer",pe:"auto"}}}}),AV=Le("button",{position:"absolute",right:0,margin:0,d:"inline-flex",ai:"center",border:"none",bg:"transparent",width:"auto",height:"auto",cursor:"pointer",boxSizing:"border-box",transition:"color 250ms ease 0s, transform 250ms ease 0s, opacity 250ms ease 0s",color:"$$inputPlaceholderColor",visibility:"hidden",transform:"translateX(20%)",opacity:0,"&:hover":{opacity:.85},svg:{color:"currentColor",size:"calc($space$5 * $$inputHeightRatio)"},"@motion":{transition:"none"},variants:{visible:{true:{visibility:"visible",transform:"translateX(0)",opacity:1}},underlined:{true:{padding:"0 $1"}},animated:{false:{transition:"none"}},hasContentRight:{true:{padding:0,position:"relative",transform:"translateX(30%)"}},disabled:{true:{cursor:"not-allowed","&:hover":{color:"$accents3"}}}}}),xR={disabled:!1,bordered:!1,readOnly:!1,clearable:!1,rounded:!1,animated:!0,underlined:!1,shadow:!0,fullWidth:!1,contentClickable:!1,contentRightStyling:!0,contentLeftStyling:!0,required:!1,width:"initial",size:"md",color:"default",helperColor:"default",status:"default",borderWeight:"normal",autoComplete:"off",className:"",placeholder:"",initialValue:""},Pt="nextui-input",Gm=me.forwardRef(({as:e="input",label:t,labelPlaceholder:r,labelLeft:i,labelRight:n,size:s,helperText:o,color:a,helperColor:l,status:c,contentLeft:h,contentRight:u,contentClickable:d,contentLeftStyling:f,contentRightStyling:m,onContentClick:p,initialValue:g,onChange:v,readOnly:y,value:b,onClearClick:x,clearable:A,shadow:S,animated:_,required:w,width:M,className:C,onBlur:E,onFocus:$,autoComplete:P,placeholder:D,fullWidth:W,borderWeight:V,disabled:H,bordered:L,underlined:O,rounded:k,css:j,...F},Y)=>{const X=I.exports.useRef(null);I.exports.useImperativeHandle(Y,()=>X.current);const[Z,U]=I.exports.useState(g),[ne,ee]=I.exports.useState(!1),{isDark:te}=XS(),Q=I.exports.useMemo(()=>b!==void 0,[b]),de=I.exports.useMemo(()=>t||r,[t,r]),le=I.exports.useMemo(()=>r?"":D,[D,r]),ce=I.exports.useMemo(()=>W?"100%":M||"initial",[W,M]);O&&E$&&(L&&Vx("Using underlined and bordered at the same time will have no effect."),k&&Vx("Using underlined and rounded at the same time will have no effect."));const ge=(Ue,ot)=>{H||p&&p(Ue,ot)};I.exports.useEffect(()=>{Q&&U(b)},[Q,b]);const fe=I.exports.useMemo(()=>e==="textarea",[e]),Fe={...F,...Q?{value:Z}:{defaultValue:g}},{labelProps:Ae,fieldProps:Ee}=gV({...Fe,label:de}),ke=I.exports.useMemo(()=>ne?"hover":H?"disabled":y?"read-only":Z?"with-value":"normal",[ne,H,y,Z]);return Ne(vV,{borderWeight:V,className:gt(`${Pt}-main-container`,`${Pt}-main-container--${ke}`),color:a,css:{width:ce,...j},"data-state":ke,disabled:H,helperColor:l,rounded:k,size:s,status:c,children:[de&&z(_V,{animated:_,asPlaceholder:!!r,bordered:L,className:`${Pt}-block-label`,focused:ne,hasContentLeft:!!h,htmlFor:"htmlFor"in Ae?Ae.htmlFor:"",id:Ae.id,isTextarea:fe,rounded:k,underlined:O,withValue:!!Z,children:de}),z(yV,{animated:_,className:gt(`${Pt}-container`,`${Pt}-container--${ke}`,{[`${Pt}-container--input`]:!fe,[`${Pt}-container--textarea`]:fe,[`${Pt}-container--read-only`]:y},C),focused:ne,isReadOnly:y,isTextarea:fe,underlined:O,children:Ne(xV,{animated:_,as:de?"div":"label",bordered:L,className:gt(`${Pt}-wrapper`,`${Pt}-wrapper--${ke}`,{[`${Pt}-wrapper--bordered`]:L,[`${Pt}-wrapper--underlined`]:O,[`${Pt}-wrapper--shadow`]:S}),disabled:H,focused:ne,isReadOnly:y,isTextarea:fe,shadow:S,underlined:O,children:[!de&&D&&z(SV,{className:`${Pt}-placeholder`,children:D}),i&&z(tE,{bordered:L,className:`${Pt}-label--left`,isDark:te,isDefaultStatus:c==="default",underlined:O,children:i}),h&&z(rE,{applyStyles:f,className:gt(`${Pt}-content`,`${Pt}-content--left`),clickable:d,onClick:Ue=>ge("left",Ue),children:h}),z(jm,{ref:X,"aria-multiline":fe,"aria-placeholder":le,"aria-readonly":y,"aria-required":w,as:e,autoComplete:P,bordered:L,className:gt({[`${Pt}`]:!fe,[`${Pt}-textarea`]:fe,[`${Pt}-disabled`]:H,[`${Pt}-rounded`]:k,[`${Pt}-${Pt}-right-content`]:u,[`${Pt}-left-content`]:h}),"data-state":ke,disabled:H,focused:ne,hasLeftContent:!!h,hasRightContent:!!u,isTextarea:fe,placeholder:le,readOnly:y,required:w,type:"text",onBlur:Ue=>{ee(!1),E&&E(Ue)},onChange:Ue=>{H||y||(U(Ue.target.value),v&&v(Ue))},onFocus:Ue=>{ee(!0),$&&$(Ue)},...Fe,...Ee}),A&&z(AV,{animated:_,className:`${Pt}-clear-button`,disabled:H||y,hasContentRight:!!u,type:"button",underlined:O,visible:Boolean(Z),onClick:Ue=>{if(Ue.preventDefault(),Ue.stopPropagation(),Ue.nativeEvent.stopImmediatePropagation(),U(""),x&&x(Ue),!X.current)return;const ot=((N,R)=>({...R,target:N,currentTarget:N}))(X.current,Ue);ot.target.value="",v&&v(ot),X.current.focus()},children:z(lV,{fill:"currentColor"})}),u&&z(rE,{applyStyles:m,className:gt(`${Pt}-content`,`${Pt}-content--right`),clickable:d,onClick:Ue=>ge("right",Ue),children:u}),n&&z(tE,{bordered:L,className:`${Pt}-label--right`,isDark:te,isDefaultStatus:c==="default",isRight:!0,underlined:O,children:n})]})}),z(bV,{className:`${Pt}-helper-text-container`,withValue:!!o,children:o&&z(wV,{className:`${Pt}-helper-text`,children:o})})]})});Gm.displayName="NextUI.Input",Gm.defaultProps=xR,Gm.toString=()=>".nextui-input";const qh=Gm,MV=({visible:e})=>z("svg",{className:"nextui-input-password-icon",fill:"none",height:"16",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",style:{color:"currentColor"},viewBox:"0 0 24 24",width:"16",children:Ne($n,e?{children:[z("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),z("path",{d:"M1 1l22 22"})]}:{children:[z("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),z("circle",{cx:"12",cy:"12",r:"3"})]})}),EV=me.memo(MV),iE=EV,CV={...xR,hideToggle:!1,visibleIcon:z(iE,{visible:!0}),hiddenIcon:z(iE,{visible:!1})},bR=me.forwardRef(({hideToggle:e,visibleIcon:t,hiddenIcon:r,children:i,...n},s)=>{const o=I.exports.useRef(null),[a,l]=I.exports.useState(!1);I.exports.useImperativeHandle(s,()=>o.current);const c=()=>{l(d=>!d)},h=I.exports.useMemo(()=>({...n,ref:o,className:gt("nextui-input-password",n.className),contentClickable:!0,onContentClick:c,type:a?"text":"password"}),[n,c,a,o]),u=I.exports.useMemo(()=>e?null:a?t:r,[e,a,t,r]);return z(qh,{contentRight:u,...h,children:i})});bR.toString=()=>".nextui-input-password";const TV=ei(bR,CV);qh.Textarea=fV,qh.Password=TV;function wR(e){return DU()?e.altKey:e.ctrlKey}function Oc(e){return Bv()?e.metaKey:e.ctrlKey}function PV(e){let{keyboardDelegate:t,selectionManager:r,onTypeSelect:i}=e,n=I.exports.useRef({search:"",timeout:null}).current,s=o=>{let a=DV(o.key);if(!a||o.ctrlKey||o.metaKey)return;a===" "&&n.search.trim().length>0&&(o.preventDefault(),"continuePropagation"in o||o.stopPropagation()),n.search+=a;let l=t.getKeyForSearch(n.search,r.focusedKey);l==null&&(l=t.getKeyForSearch(n.search)),l!=null&&(r.setFocusedKey(l),i&&i(l)),clearTimeout(n.timeout),n.timeout=setTimeout(()=>{n.search=""},500)};return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?s:null}}}function DV(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function LV(e){let{selectionManager:t,keyboardDelegate:r,ref:i,autoFocus:n=!1,shouldFocusWrap:s=!1,disallowEmptySelection:o=!1,disallowSelectAll:a=!1,selectOnFocus:l=t.selectionBehavior==="replace",disallowTypeAhead:c=!1,shouldUseVirtualFocus:h,allowsTabNavigation:u=!1,isVirtualized:d,scrollRef:f=i}=e,{direction:m}=zv(),p=_=>{if(_.altKey&&_.key==="Tab"&&_.preventDefault(),!i.current.contains(_.target))return;const w=(P,D)=>{P!=null&&(t.setFocusedKey(P,D),_.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(P):l&&!wR(_)&&t.replaceSelection(P))};switch(_.key){case"ArrowDown":if(r.getKeyBelow){var M,C;_.preventDefault();let P=t.focusedKey!=null?r.getKeyBelow(t.focusedKey):(M=r.getFirstKey)===null||M===void 0?void 0:M.call(r);P==null&&s&&(P=(C=r.getFirstKey)===null||C===void 0?void 0:C.call(r,t.focusedKey)),w(P)}break;case"ArrowUp":if(r.getKeyAbove){var E,$;_.preventDefault();let P=t.focusedKey!=null?r.getKeyAbove(t.focusedKey):(E=r.getLastKey)===null||E===void 0?void 0:E.call(r);P==null&&s&&(P=($=r.getLastKey)===null||$===void 0?void 0:$.call(r,t.focusedKey)),w(P)}break;case"ArrowLeft":if(r.getKeyLeftOf){_.preventDefault();let P=r.getKeyLeftOf(t.focusedKey);w(P,m==="rtl"?"first":"last")}break;case"ArrowRight":if(r.getKeyRightOf){_.preventDefault();let P=r.getKeyRightOf(t.focusedKey);w(P,m==="rtl"?"last":"first")}break;case"Home":if(r.getFirstKey){_.preventDefault();let P=r.getFirstKey(t.focusedKey,Oc(_));t.setFocusedKey(P),Oc(_)&&_.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(P):l&&t.replaceSelection(P)}break;case"End":if(r.getLastKey){_.preventDefault();let P=r.getLastKey(t.focusedKey,Oc(_));t.setFocusedKey(P),Oc(_)&&_.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(P):l&&t.replaceSelection(P)}break;case"PageDown":if(r.getKeyPageBelow){_.preventDefault();let P=r.getKeyPageBelow(t.focusedKey);w(P)}break;case"PageUp":if(r.getKeyPageAbove){_.preventDefault();let P=r.getKeyPageAbove(t.focusedKey);w(P)}break;case"a":Oc(_)&&t.selectionMode==="multiple"&&a!==!0&&(_.preventDefault(),t.selectAll());break;case"Escape":_.preventDefault(),o||t.clearSelection();break;case"Tab":if(!u){if(_.shiftKey)i.current.focus();else{let P=P8(i.current,{tabbable:!0}),D,W;do W=P.lastChild(),W&&(D=W);while(W);D&&!D.contains(document.activeElement)&&oa(D)}break}}},g=I.exports.useRef({top:0,left:0});LU(f,"scroll",d?null:()=>{g.current={top:f.current.scrollTop,left:f.current.scrollLeft}});let v=_=>{if(t.isFocused){_.currentTarget.contains(_.target)||t.setFocused(!1);return}if(!!_.currentTarget.contains(_.target)){if(t.setFocused(!0),t.focusedKey==null){let C=$=>{$!=null&&(t.setFocusedKey($),l&&t.replaceSelection($))},E=_.relatedTarget;var w,M;E&&_.currentTarget.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_FOLLOWING?C((w=t.lastSelectedKey)!==null&&w!==void 0?w:r.getLastKey()):C((M=t.firstSelectedKey)!==null&&M!==void 0?M:r.getFirstKey())}else if(!d){f.current.scrollTop=g.current.top,f.current.scrollLeft=g.current.left;let C=f.current.querySelector(`[data-key="${t.focusedKey}"]`);C&&(oa(C),dM(f.current,C))}}},y=_=>{_.currentTarget.contains(_.relatedTarget)||t.setFocused(!1)};const b=I.exports.useRef(n);I.exports.useEffect(()=>{if(b.current){let _=null;n==="first"&&(_=r.getFirstKey()),n==="last"&&(_=r.getLastKey());let w=t.selectedKeys;w.size&&(_=w.values().next().value),t.setFocused(!0),t.setFocusedKey(_),_==null&&!h&&Xh(i.current)}b.current=!1},[]),I.exports.useEffect(()=>{if(!d&&t.focusedKey&&(f==null?void 0:f.current)){let _=f.current.querySelector(`[data-key="${t.focusedKey}"]`);_&&dM(f.current,_)}},[d,f,t.focusedKey]);let x={onKeyDown:p,onFocus:v,onBlur:y,onMouseDown(_){_.currentTarget.contains(_.target)&&_.preventDefault()}},{typeSelectProps:A}=PV({keyboardDelegate:r,selectionManager:t});c||(x=Ci(A,x));let S;return h||(S=t.focusedKey==null?0:-1),{collectionProps:{...x,tabIndex:S}}}function $V(e){let{selectionManager:t,key:r,ref:i,shouldSelectOnPressUp:n,isVirtualized:s,shouldUseVirtualFocus:o,focus:a,isDisabled:l,onAction:c,allowsDifferentPressOrigin:h}=e,u=$=>{if($.pointerType==="keyboard"&&wR($))t.toggleSelection(r);else{if(t.selectionMode==="none")return;t.selectionMode==="single"?t.isSelected(r)&&!t.disallowEmptySelection?t.toggleSelection(r):t.replaceSelection(r):$&&$.shiftKey?t.extendSelection(r):t.selectionBehavior==="toggle"||$&&(Oc($)||$.pointerType==="touch"||$.pointerType==="virtual")?t.toggleSelection(r):t.replaceSelection(r)}};I.exports.useEffect(()=>{r===t.focusedKey&&t.isFocused&&!o&&document.activeElement!==i.current&&(a?a():Xh(i.current))},[i,r,t.focusedKey,t.childFocusStrategy,t.isFocused,o]);let d={};o||(d={tabIndex:r===t.focusedKey?0:-1,onFocus($){$.target===i.current&&t.setFocusedKey(r)}}),l=l||t.isDisabled(r);let f=!l&&t.canSelectItem(r),m=c&&!l,p=m&&(t.selectionBehavior==="replace"?!f:t.isEmpty),g=m&&f&&t.selectionBehavior==="replace",v=p||g,y=I.exports.useRef(null),b=v&&f,x=I.exports.useRef(!1),A=I.exports.useRef(!1),S={};n?(S.onPressStart=$=>{y.current=$.pointerType,x.current=b,$.pointerType==="keyboard"&&(!v||sE())&&u($)},h?(S.onPressUp=$=>{$.pointerType!=="keyboard"&&u($)},S.onPress=p?()=>c():null):S.onPress=$=>{if(p||g&&$.pointerType!=="mouse"){if($.pointerType==="keyboard"&&!nE())return;c()}else $.pointerType!=="keyboard"&&u($)}):(S.onPressStart=$=>{y.current=$.pointerType,x.current=b,A.current=p,($.pointerType==="mouse"&&!p||$.pointerType==="keyboard"&&(!c||sE()))&&u($)},S.onPress=$=>{($.pointerType==="touch"||$.pointerType==="pen"||$.pointerType==="virtual"||$.pointerType==="keyboard"&&v&&nE()||$.pointerType==="mouse"&&A.current)&&(v?c():u($))}),s||(d["data-key"]=r),S.preventFocusOnPress=o;let{pressProps:_,isPressed:w}=Tf(S),M=g?$=>{y.current==="mouse"&&($.stopPropagation(),$.preventDefault(),c())}:void 0,{longPressProps:C}=j$({isDisabled:!b,onLongPress($){$.pointerType==="touch"&&(u($),t.setSelectionBehavior("toggle"))}});return{itemProps:Ci(d,f||p?_:{},b?C:{},{onDoubleClick:M,onDragStart:$=>{y.current==="touch"&&x.current&&$.preventDefault()}}),isPressed:w,isSelected:t.isSelected(r),isDisabled:l,allowsSelection:f,hasAction:v}}function nE(){let e=window.event;return(e==null?void 0:e.key)==="Enter"}function sE(){let e=window.event;return(e==null?void 0:e.key)===" "||(e==null?void 0:e.code)==="Space"}class IV{getKeyBelow(t){for(t=this.collection.getKeyAfter(t);t!=null;){if(this.collection.getItem(t).type==="item"&&!this.disabledKeys.has(t))return t;t=this.collection.getKeyAfter(t)}}getKeyAbove(t){for(t=this.collection.getKeyBefore(t);t!=null;){if(this.collection.getItem(t).type==="item"&&!this.disabledKeys.has(t))return t;t=this.collection.getKeyBefore(t)}}getFirstKey(){let t=this.collection.getFirstKey();for(;t!=null;){if(this.collection.getItem(t).type==="item"&&!this.disabledKeys.has(t))return t;t=this.collection.getKeyAfter(t)}}getLastKey(){let t=this.collection.getLastKey();for(;t!=null;){if(this.collection.getItem(t).type==="item"&&!this.disabledKeys.has(t))return t;t=this.collection.getKeyBefore(t)}}getItem(t){return this.ref.current.querySelector(`[data-key="${t}"]`)}getKeyPageAbove(t){let r=this.ref.current,i=this.getItem(t);if(!i)return null;let n=Math.max(0,i.offsetTop+i.offsetHeight-r.offsetHeight);for(;i&&i.offsetTop>n;)t=this.getKeyAbove(t),i=this.getItem(t);return t}getKeyPageBelow(t){let r=this.ref.current,i=this.getItem(t);if(!i)return null;let n=Math.min(r.scrollHeight,i.offsetTop-i.offsetHeight+r.offsetHeight);for(;i&&i.offsetTop<n;)t=this.getKeyBelow(t),i=this.getItem(t);return t}getKeyForSearch(t,r){if(!this.collator)return null;let i=this.collection,n=r||this.getFirstKey();for(;n!=null;){let s=i.getItem(n),o=s.textValue.slice(0,t.length);if(s.textValue&&this.collator.compare(o,t)===0)return n;n=this.getKeyBelow(n)}return null}constructor(t,r,i,n){this.collection=t,this.disabledKeys=r,this.ref=i,this.collator=n}}function RV(e){let{selectionManager:t,collection:r,disabledKeys:i,ref:n,keyboardDelegate:s,autoFocus:o,shouldFocusWrap:a,isVirtualized:l,disallowEmptySelection:c,selectOnFocus:h=t.selectionBehavior==="replace",disallowTypeAhead:u,shouldUseVirtualFocus:d,allowsTabNavigation:f}=e,m=NU({usage:"search",sensitivity:"base"}),p=t.disabledBehavior,g=I.exports.useMemo(()=>s||new IV(r,p==="selection"?new Set:i,n,m),[s,r,i,n,m,p]),{collectionProps:v}=LV({ref:n,selectionManager:t,keyboardDelegate:g,autoFocus:o,shouldFocusWrap:a,disallowEmptySelection:c,selectOnFocus:h,disallowTypeAhead:u,shouldUseVirtualFocus:d,allowsTabNavigation:f,isVirtualized:l,scrollRef:n});return{listProps:v}}function SR(e){return null}SR.getCollectionNode=function*(t,r){let{childItems:i,title:n,children:s}=t,o=t.title||t.children,a=t.textValue||(typeof o=="string"?o:"")||t["aria-label"]||"";!a&&!(r!=null&&r.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:t,rendered:o,textValue:a,"aria-label":t["aria-label"],hasChildNodes:kV(t),*childNodes(){if(i)for(let l of i)yield{type:"item",value:l};else if(n){let l=[];me.Children.forEach(s,c=>{l.push({type:"item",element:c})}),yield*l}}}};function kV(e){return e.hasChildItems!=null?e.hasChildItems:!!(e.childItems||e.title&&me.Children.count(e.children)>0)}let OV=SR;function _R(e){return null}_R.getCollectionNode=function*(t){let{children:r,title:i,items:n}=t;yield{type:"section",hasChildNodes:!0,rendered:i,"aria-label":t["aria-label"],*childNodes(){if(typeof r=="function"){if(!n)throw new Error("props.children was a function but props.items is missing");for(let s of n)yield{type:"item",value:s,renderer:r}}else{let s=[];me.Children.forEach(r,o=>{s.push({type:"item",element:o})}),yield*s}}}};let BV=_R;class zV{build(t,r){return this.context=r,oE(()=>this.iterateCollection(t))}*iterateCollection(t){let{children:r,items:i}=t;if(typeof r=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let n of t.items)yield*this.getFullNode({value:n},{renderer:r})}else{let n=[];me.Children.forEach(r,o=>{n.push(o)});let s=0;for(let o of n){let a=this.getFullNode({element:o,index:s},{});for(let l of a)s++,yield l}}}getKey(t,r,i,n){if(t.key!=null)return t.key;if(r.type==="cell"&&r.key!=null)return`${n}${r.key}`;let s=r.value;if(s!=null){var o;let a=(o=s.key)!==null&&o!==void 0?o:s.id;if(a==null)throw new Error("No key found for item");return a}return n?`${n}.${r.index}`:`$.${r.index}`}getChildState(t,r){return{renderer:r.renderer||t.renderer}}*getFullNode(t,r,i,n){let s=t.element;if(!s&&t.value&&r&&r.renderer){let l=this.cache.get(t.value);if(l&&(!l.shouldInvalidate||!l.shouldInvalidate(this.context))){l.index=t.index,l.parentKey=n?n.key:null,yield l;return}s=r.renderer(t.value)}if(me.isValidElement(s)){let l=s.type;if(typeof l!="function"&&typeof l.getCollectionNode!="function"){let d=typeof s.type=="function"?s.type.name:s.type;throw new Error(`Unknown element <${d}> in collection.`)}let c=l.getCollectionNode(s.props,this.context),h=t.index,u=c.next();for(;!u.done&&u.value;){let d=u.value;t.index=h;let f=d.key;f||(f=d.element?null:this.getKey(s,t,r,i));let p=[...this.getFullNode({...d,key:f,index:h,wrapper:NV(t.wrapper,d.wrapper)},this.getChildState(r,d),i?`${i}${s.key}`:s.key,n)];for(let g of p){if(g.value=d.value||t.value,g.value&&this.cache.set(g.value,g),t.type&&g.type!==t.type)throw new Error(`Unsupported type <${ay(g.type)}> in <${ay(n.type)}>. Only <${ay(t.type)}> is supported.`);h++,yield g}u=c.next(p)}return}if(t.key==null)return;let o=this,a={type:t.type,props:t.props,key:t.key,parentKey:n?n.key:null,value:t.value,level:n?n.level+1:0,index:t.index,rendered:t.rendered,textValue:t.textValue,"aria-label":t["aria-label"],wrapper:t.wrapper,shouldInvalidate:t.shouldInvalidate,hasChildNodes:t.hasChildNodes,childNodes:oE(function*(){if(!t.hasChildNodes)return;let l=0;for(let c of t.childNodes()){c.key!=null&&(c.key=`${a.key}${c.key}`),c.index=l;let h=o.getFullNode(c,o.getChildState(r,c),a.key,a);for(let u of h)l++,yield u}})};yield a}constructor(){this.cache=new WeakMap}}function oE(e){let t=[],r=null;return{*[Symbol.iterator](){for(let i of t)yield i;r||(r=e());for(let i of r)t.push(i),yield i}}}function NV(e,t){if(e&&t)return r=>e(t(r));if(e)return e;if(t)return t}function ay(e){return e[0].toUpperCase()+e.slice(1)}function FV(e,t,r,i=[]){let n=I.exports.useMemo(()=>new zV,[]),s=I.exports.useRef(null);return I.exports.useMemo(()=>{let o=n.build(e,r);return s.current=t(o,s.current),s.current},[n,e.children,e.items,r,...i])}const aE=new WeakMap;function AR(e){let t=aE.get(e);if(t!=null)return t;t=0;for(let r of e)r.type==="section"?t+=AR(r.childNodes):t++;return aE.set(e,t),t}class jn extends Set{constructor(t,r,i){super(t),t instanceof jn?(this.anchorKey=r||t.anchorKey,this.currentKey=i||t.currentKey):(this.anchorKey=r,this.currentKey=i)}}function UV(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}function HV(e){let{selectionMode:t="none",disallowEmptySelection:r,allowDuplicateSelectionEvents:i,selectionBehavior:n="toggle",disabledBehavior:s="all"}=e,o=I.exports.useRef(!1),[,a]=I.exports.useState(!1),l=I.exports.useRef(null),c=I.exports.useRef(null),[,h]=I.exports.useState(null),u=I.exports.useMemo(()=>lE(e.selectedKeys),[e.selectedKeys]),d=I.exports.useMemo(()=>lE(e.defaultSelectedKeys,new jn),[e.defaultSelectedKeys]),[f,m]=Cf(u,d,e.onSelectionChange),p=I.exports.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),[g,v]=I.exports.useState(n);n==="replace"&&g==="toggle"&&typeof f=="object"&&f.size===0&&v("replace");let y=I.exports.useRef(n);return I.exports.useEffect(()=>{n!==y.current&&(v(n),y.current=n)},[n]),{selectionMode:t,disallowEmptySelection:r,selectionBehavior:g,setSelectionBehavior:v,get isFocused(){return o.current},setFocused(b){o.current=b,a(b)},get focusedKey(){return l.current},get childFocusStrategy(){return c.current},setFocusedKey(b,x="first"){l.current=b,c.current=x,h(b)},selectedKeys:f,setSelectedKeys(b){(i||!UV(b,f))&&m(b)},disabledKeys:p,disabledBehavior:s}}function lE(e,t){return e?e==="all"?"all":new jn(e):t}class VV{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(t){this.state.setSelectionBehavior(t)}get isFocused(){return this.state.isFocused}setFocused(t){this.state.setFocused(t)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(t,r){this.state.setFocusedKey(t,r)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(t){return this.state.selectionMode==="none"?!1:(t=this.getKey(t),this.state.selectedKeys==="all"?this.canSelectItem(t):this.state.selectedKeys.has(t))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let t=this.getSelectAllKeys(),r=this.state.selectedKeys;return this._isSelectAll=t.every(i=>r.has(i)),this._isSelectAll}get firstSelectedKey(){let t=null;for(let r of this.state.selectedKeys){let i=this.collection.getItem(r);(!t||(i==null?void 0:i.index)<t.index)&&(t=i)}return t==null?void 0:t.key}get lastSelectedKey(){let t=null;for(let r of this.state.selectedKeys){let i=this.collection.getItem(r);(!t||(i==null?void 0:i.index)>t.index)&&(t=i)}return t==null?void 0:t.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(t);return}t=this.getKey(t);let r;if(this.state.selectedKeys==="all")r=new jn([t],t,t);else{let i=this.state.selectedKeys,n=i.anchorKey||t;r=new jn(i,n,t);for(let s of this.getKeyRange(n,i.currentKey||t))r.delete(s);for(let s of this.getKeyRange(t,n))this.canSelectItem(s)&&r.add(s)}this.state.setSelectedKeys(r)}getKeyRange(t,r){let i=this.collection.getItem(t),n=this.collection.getItem(r);return i&&n?i.index<=n.index?this.getKeyRangeInternal(t,r):this.getKeyRangeInternal(r,t):[]}getKeyRangeInternal(t,r){let i=[],n=t;for(;n;){let s=this.collection.getItem(n);if((s&&s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&i.push(n),n===r)return i;n=this.collection.getKeyAfter(n)}return[]}getKey(t){let r=this.collection.getItem(t);if(!r||r.type==="cell"&&this.allowsCellSelection)return t;for(;r.type!=="item"&&r.parentKey!=null;)r=this.collection.getItem(r.parentKey);return!r||r.type!=="item"?null:r.key}toggleSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(t)){this.replaceSelection(t);return}if(t=this.getKey(t),t==null)return;let r=new jn(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);r.has(t)?r.delete(t):this.canSelectItem(t)&&(r.add(t),r.anchorKey=t,r.currentKey=t),!(this.disallowEmptySelection&&r.size===0)&&this.state.setSelectedKeys(r)}replaceSelection(t){if(this.selectionMode==="none"||(t=this.getKey(t),t==null))return;let r=this.canSelectItem(t)?new jn([t],t,t):new jn;this.state.setSelectedKeys(r)}setSelectedKeys(t){if(this.selectionMode==="none")return;let r=new jn;for(let i of t)if(i=this.getKey(i),i!=null&&(r.add(i),this.selectionMode==="single"))break;this.state.setSelectedKeys(r)}getSelectAllKeys(){let t=[],r=i=>{for(;i;){if(this.canSelectItem(i)){let n=this.collection.getItem(i);n.type==="item"&&t.push(i),n.hasChildNodes&&(this.allowsCellSelection||n.type!=="item")&&r([...n.childNodes][0].key)}i=this.collection.getKeyAfter(i)}};return r(this.collection.getFirstKey()),t}selectAll(){this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new jn)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(t,r){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(t)&&!this.disallowEmptySelection?this.toggleSelection(t):this.replaceSelection(t):this.selectionBehavior==="toggle"||r&&(r.pointerType==="touch"||r.pointerType==="virtual")?this.toggleSelection(t):this.replaceSelection(t))}isSelectionEqual(t){if(t===this.state.selectedKeys)return!0;let r=this.selectedKeys;if(t.size!==r.size)return!1;for(let i of t)if(!r.has(i))return!1;for(let i of r)if(!t.has(i))return!1;return!0}canSelectItem(t){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(t))return!1;let r=this.collection.getItem(t);return!(!r||r.type==="cell"&&!this.allowsCellSelection)}isDisabled(t){return this.state.disabledKeys.has(t)&&this.state.disabledBehavior==="all"}constructor(t,r,i){this.collection=t,this.state=r;var n;this.allowsCellSelection=(n=i==null?void 0:i.allowsCellSelection)!==null&&n!==void 0?n:!1,this._isSelectAll=null}}function WV(e){let[t,r]=Cf(e.isOpen,e.defaultOpen||!1,e.onOpenChange);return{isOpen:t,setOpen:r,open(){r(!0)},close(){r(!1)},toggle(){r(!t)}}}function jV(e,t){if(e!=null)if(G6(e))e(t);else try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}function Uv(...e){return t=>{e.forEach(r=>jV(r,t))}}const GV=e=>e?e.replace("-"," "):"bottom",YV=e=>{if(!e)return"bottom";switch(e){case"bottom":default:return"top center";case"top":return"bottom center";case"left":return"right center";case"right":return"left center";case"bottom-left":return"top left";case"bottom-right":return"top right";case"top-left":return"bottom left";case"top-right":return"bottom right";case"left-top":return"right top";case"left-bottom":return"right bottom";case"right-top":return"left top";case"right-bottom":return"left bottom"}};function KV(e={}){const{ref:t,triggerRef:r,scrollRef:i,isOpen:n,defaultOpen:s,onOpenChange:o,isBordered:a,borderWeight:l,disableShadow:c,shouldFlip:h=!0,offset:u=12,placement:d="bottom",onClose:f,triggerType:m="dialog",isDismissable:p=!0,shouldCloseOnBlur:g=!1,isKeyboardDismissDisabled:v=!1,disableAnimation:y=!1,shouldCloseOnInteractOutside:b}=e,x=I.exports.useRef(null),A=I.exports.useRef(null),S=t||x,_=r||A,w=WV({isOpen:n,defaultOpen:s,onOpenChange:o}),[M,C]=I.exports.useState(!w.isOpen),E=I.exports.useMemo(()=>w.isOpen?"open":"closed",[w.isOpen]),$=I.exports.useCallback(()=>{f==null||f(),w.close()},[w,f]),P=I.exports.useCallback(()=>{C(!1)},[]),D=I.exports.useCallback(()=>{C(!0)},[]),{triggerProps:W,overlayProps:V}=wH({type:m},w,_),H=I.exports.useMemo(()=>GV(d),[d]),{overlayProps:L}=vH({isOpen:w.isOpen,targetRef:_,scrollRef:i,placement:H,overlayRef:S,shouldFlip:h,offset:u}),O=I.exports.useCallback((j={},F=null)=>({...r!=null&&r.current?Mr(W,j):Mr(j,W),ref:Uv(_,F)}),[_,r,W]),k=I.exports.useCallback((j={})=>({...j,...V,...L,"data-state":E,"data-placement":d}),[E,L,V,d]);return{state:w,exited:M,overlayRef:S,triggerRef:_,placement:d,disableShadow:c,disableAnimation:y,shouldCloseOnBlur:g,isDismissable:p,isBordered:a,borderWeight:l,isKeyboardDismissDisabled:v,shouldCloseOnInteractOutside:b,isOpen:w.isOpen,onClose:$,onExited:D,onEntered:P,triggerProps:W,overlayProps:V,positionProps:L,getTriggerProps:O,getPopoverProps:k}}const[XV,MR]=Pf({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),ER=me.forwardRef((e,t)=>{const{children:r,...i}=e,n=KV({ref:t,...i}),[s,o]=me.Children.toArray(r),a=n.state.isOpen||!n.exited;return Ne(XV,{value:n,children:[s,a&&z(MH,{children:o})]})});ER.toString=()=>".nextui-popover";const Qh=ER,CR=I.exports.forwardRef((e,t)=>{const{state:r,triggerRef:i,getTriggerProps:n}=MR(),{children:s,...o}=e,a=()=>r.open(),{buttonProps:l}=c_({onPress:a,...o},i),c=typeof s=="string"?z(Kt,{children:s}):I.exports.Children.only(s),[,h]=qS(e.children,Ua),u=(h==null?void 0:h[0])!==void 0;return I.exports.cloneElement(c,n(Mr(c.props,u?{onPress:a}:l,o),c.ref))});CR.toString=()=>".nextui-popover-trigger";const qV=CR;function QV(e,t){let{role:r="dialog"}=e,i=Um();return i=e["aria-label"]?void 0:i,I.exports.useEffect(()=>{if(t.current&&!t.current.contains(document.activeElement)){Xh(t.current);let n=setTimeout(()=>{document.activeElement===t.current&&(t.current.blur(),Xh(t.current))},500);return()=>{clearTimeout(n)}}},[t]),{dialogProps:{...Ov(e,{labelable:!0}),role:r,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||i},titleProps:{id:i}}}const ZV=Ef({"0%":{opacity:0,transform:"scale(0.95)"},"60%":{opacity:.75,backfaceVisibility:"hidden",webkitFontSmoothing:"antialiased",transform:"translateZ(0) scale(1.05)"},"100%":{opacity:1}}),JV=Ef({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(0.5)"}}),e9=Le("div",{$$popoverMinWidth:"$space$13",$$popoverMinHeight:"$space$13",$$popoverBorderRadius:"$radii$lg",$$popoverBackground:"$colors$backgroundContrast",$$popoverBoxShadow:"$shadows$md",$$popoverBorderColor:"$colors$border",boxShadow:"$$popoverBoxShadow",outline:"none",overflow:"hidden auto",bg:"$$popoverBackground",display:"inline-flex",flexDirection:"column",boxSizing:"border-box",minWidth:"$$popoverMinWidth",minHeight:"$$popoverMinHeight",maxWidth:"calc(100% - $$popoverMinWidth)",maxHeight:"calc(100% - $$popoverMinWidth)",borderRadius:"$$popoverBorderRadius",animationFillMode:"forwards",willChange:"transform, opacity","@motion":{transition:"none"},"&.nextui-popover-content-enter":{animationName:ZV,animationTimingFunction:"ease-out",animationDirection:"normal",animationDuration:"250ms"},"&.nextui-popover-content-leave":{animationName:JV,animationTimingFunction:"ease-in",animationDuration:"60ms"},variants:{disableShadow:{true:{boxShadow:"none"}},isBordered:{true:{borderStyle:"solid",borderColor:"$$popoverBorderColor"}},borderWeight:{light:{bw:"$light",$$popoverBorderWeight:"$borderWeights$light"},normal:{bw:"$normal",$$popoverBorderWeight:"$borderWeights$normal"},bold:{bw:"$bold",$$popoverBorderWeight:"$borderWeights$bold"},extrabold:{bw:"$extrabold",$$popoverBorderWeight:"$borderWeights$extrabold"},black:{bw:"$black",$$popoverBorderWeight:"$borderWeights$black"}}},defaultVariants:{isBordered:!1,borderWeight:"light"}},Po),t9=Le("div",{}),TR=me.forwardRef((e,t)=>{const{children:r,as:i,css:n,className:s,...o}=e,{state:a,placement:l,overlayRef:c,disableAnimation:h,disableShadow:u,shouldCloseOnBlur:d,isDismissable:f,isKeyboardDismissDisabled:m,shouldCloseOnInteractOutside:p,getPopoverProps:g,isBordered:v,borderWeight:y,onClose:b,onEntered:x,onExited:A}=MR(),S=YV(l),{modalProps:_}=EH({isDisabled:!0}),{dialogProps:w}=QV({role:"dialog"},c),{overlayProps:M}=bH({onClose:b,isOpen:a.isOpen,isDismissable:f&&a.isOpen,shouldCloseOnBlur:d,isKeyboardDismissDisabled:m,shouldCloseOnInteractOutside:p},c),C=Mr({isBordered:v,disableShadow:u,borderWeight:y},o),{isFocusVisible:E,focusProps:$}=Do(),P=Ne(e9,{ref:Uv(c,t),...g(Mr(M,_,w,$,C)),as:i,className:gt("nextui-popover-content-container",s),css:{transformOrigin:S,...n},isFocusVisible:E,children:[z(PM,{onDismiss:b}),z(t9,{className:"nextui-popover-content",children:r}),z(PM,{onDismiss:b})]});return z($n,{children:h?a.isOpen?z(kM,{restoreFocus:!0,children:P}):null:z(kM,{restoreFocus:!0,children:z(V7,{clearTime:300,enterTime:20,leaveTime:60,name:"nextui-popover-content",visible:a.isOpen,onEntered:x,onExited:A,children:P})})})});TR.toString=()=>".nextui-popover-content";const r9=TR;Qh.Content=r9,Qh.Trigger=qV;const PR=OV;PR.toString=()=>".nextui-dropdown-item-base";const i9=PR,[n9,Hv]=Pf({name:"DropdownContext",errorMessage:"useDropdownContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Dropdown />`"}),DR=me.forwardRef((e,t)=>{const{children:r,...i}=e,{getMenuTriggerProps:n}=Hv();return z(Qh.Trigger,{...n(i),children:r})});DR.toString=()=>".nextui-dropdown-trigger";const LR=DR,s9=new WeakMap;function o9(e,t,r){let{type:i}=e,{isOpen:n}=t;I.exports.useEffect(()=>{r&&r.current&&s9.set(r.current,t.close)});let s;i==="menu"?s=!0:i==="listbox"&&(s="listbox");let o=Qu();return{triggerProps:{"aria-haspopup":s,"aria-expanded":n,"aria-controls":n?o:null,onPress:t.toggle},overlayProps:{id:o}}}function a9(e){return e&&e.__esModule?e.default:e}var $R={},IR={};IR={longPressMessage:"\u0627\u0636\u063A\u0637 \u0645\u0637\u0648\u0644\u0627\u064B \u0623\u0648 \u0627\u0636\u063A\u0637 \u0639\u0644\u0649 Alt + \u0627\u0644\u0633\u0647\u0645 \u0644\u0623\u0633\u0641\u0644 \u0644\u0641\u062A\u062D \u0627\u0644\u0642\u0627\u0626\u0645\u0629"};var RR={};RR={longPressMessage:"\u041D\u0430\u0442\u0438\u0441\u043D\u0435\u0442\u0435 \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E \u0438\u043B\u0438 \u043D\u0430\u0442\u0438\u0441\u043D\u0435\u0442\u0435 Alt+ \u0441\u0442\u0440\u0435\u043B\u043A\u0430 \u043D\u0430\u0434\u043E\u043B\u0443, \u0437\u0430 \u0434\u0430 \u043E\u0442\u0432\u043E\u0440\u0438\u0442\u0435 \u043C\u0435\u043D\u044E\u0442\u043E"};var kR={};kR={longPressMessage:"Dlouh\xFDm stiskem nebo stisknut\xEDm kl\xE1ves Alt + \u0161ipka dol\u016F otev\u0159ete nab\xEDdku"};var OR={};OR={longPressMessage:"Langt tryk eller tryk p\xE5 Alt + pil ned for at \xE5bne menuen"};var BR={};BR={longPressMessage:"Dr\xFCcken Sie lange oder dr\xFCcken Sie Alt + Nach-unten, um das Men\xFC zu \xF6ffnen"};var zR={};zR={longPressMessage:"\u03A0\u03B9\u03AD\u03C3\u03C4\u03B5 \u03C0\u03B1\u03C1\u03B1\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B1 \u03AE \u03C0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 Alt + \u03BA\u03AC\u03C4\u03C9 \u03B2\u03AD\u03BB\u03BF\u03C2 \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03B1\u03BD\u03BF\u03AF\u03BE\u03B5\u03C4\u03B5 \u03C4\u03BF \u03BC\u03B5\u03BD\u03BF\u03CD"};var NR={};NR={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var FR={};FR={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men\xFA"};var UR={};UR={longPressMessage:"Men\xFC\xFC avamiseks vajutage pikalt v\xF5i vajutage klahve Alt + allanool"};var HR={};HR={longPressMessage:"Avaa valikko painamalla pohjassa tai n\xE4pp\xE4inyhdistelm\xE4ll\xE4 Alt + Alanuoli"};var VR={};VR={longPressMessage:"Appuyez de mani\xE8re prolong\xE9e ou appuyez sur Alt\xA0+\xA0Fl\xE8che vers le bas pour ouvrir le menu."};var WR={};WR={longPressMessage:"\u05DC\u05D7\u05E5 \u05DC\u05D7\u05D9\u05E6\u05D4 \u05D0\u05E8\u05D5\u05DB\u05D4 \u05D0\u05D5 \u05D4\u05E7\u05E9 Alt + ArrowDown \u05DB\u05D3\u05D9 \u05DC\u05E4\u05EA\u05D5\u05D7 \u05D0\u05EA \u05D4\u05EA\u05E4\u05E8\u05D9\u05D8"};var jR={};jR={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var GR={};GR={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele ny\xEDl gombot a men\xFC megnyit\xE1s\xE1hoz"};var YR={};YR={longPressMessage:"Premere a lungo o premere Alt + Freccia gi\xF9 per aprire il menu"};var KR={};KR={longPressMessage:"\u9577\u62BC\u3057\u307E\u305F\u306F Alt+\u4E0B\u77E2\u5370\u30AD\u30FC\u3067\u30E1\u30CB\u30E5\u30FC\u3092\u958B\u304F"};var XR={};XR={longPressMessage:"\uAE38\uAC8C \uB204\uB974\uAC70\uB098 Alt + \uC544\uB798\uCABD \uD654\uC0B4\uD45C\uB97C \uB20C\uB7EC \uBA54\uB274 \uC5F4\uAE30"};var qR={};qR={longPressMessage:"Nor\u0117dami atidaryti meniu, nuspaud\u0119 palaikykite arba paspauskite \u201EAlt + ArrowDown\u201C."};var QR={};QR={longPressMessage:"Lai atv\u0113rtu izv\u0113lni, turiet nospiestu vai nospiediet tausti\u0146u kombin\u0101ciju Alt + lejupv\u0113rst\u0101 bulti\u0146a"};var ZR={};ZR={longPressMessage:"Langt trykk eller trykk Alt + PilNed for \xE5 \xE5pne menyen"};var JR={};JR={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var ek={};ek={longPressMessage:"Naci\u015Bnij i przytrzymaj lub naci\u015Bnij klawisze Alt + Strza\u0142ka w d\xF3\u0142, aby otworzy\u0107 menu"};var tk={};tk={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var rk={};rk={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var ik={};ik={longPressMessage:"Ap\u0103sa\u021Bi lung sau ap\u0103sa\u021Bi pe Alt + s\u0103geat\u0103 \xEEn jos pentru a deschide meniul"};var nk={};nk={longPressMessage:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0438 \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0438\u043B\u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 Alt + \u0421\u0442\u0440\u0435\u043B\u043A\u0430 \u0432\u043D\u0438\u0437, \u0447\u0442\u043E\u0431\u044B \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u043C\u0435\u043D\u044E"};var sk={};sk={longPressMessage:"Ponuku otvor\xEDte dlh\xFDm stla\u010Den\xEDm alebo stla\u010Den\xEDm kl\xE1vesu Alt + kl\xE1vesu so \u0161\xEDpkou nadol"};var ok={};ok={longPressMessage:"Za odprtje menija pritisnite in dr\u017Eite gumb ali pritisnite Alt+pu\u0161\u010Dica navzdol"};var ak={};ak={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var lk={};lk={longPressMessage:"H\xE5ll nedtryckt eller tryck p\xE5 Alt + pil ned\xE5t f\xF6r att \xF6ppna menyn"};var ck={};ck={longPressMessage:"Men\xFCy\xFC a\xE7mak i\xE7in uzun bas\u0131n veya Alt + A\u015Fa\u011F\u0131 Ok tu\u015Funa bas\u0131n"};var uk={};uk={longPressMessage:"\u0414\u043E\u0432\u0433\u043E \u0430\u0431\u043E \u0437\u0432\u0438\u0447\u0430\u0439\u043D\u043E \u043D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u043A\u043E\u043C\u0431\u0456\u043D\u0430\u0446\u0456\u044E \u043A\u043B\u0430\u0432\u0456\u0448 Alt \u0456 \u0441\u0442\u0440\u0456\u043B\u043A\u0430 \u0432\u043D\u0438\u0437, \u0449\u043E\u0431 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043C\u0435\u043D\u044E"};var dk={};dk={longPressMessage:"\u957F\u6309\u6216\u6309 Alt + \u5411\u4E0B\u65B9\u5411\u952E\u4EE5\u6253\u5F00\u83DC\u5355"};var hk={};hk={longPressMessage:"\u9577\u6309\u6216\u6309 Alt+\u5411\u4E0B\u9375\u4EE5\u958B\u555F\u529F\u80FD\u8868"};$R={"ar-AE":IR,"bg-BG":RR,"cs-CZ":kR,"da-DK":OR,"de-DE":BR,"el-GR":zR,"en-US":NR,"es-ES":FR,"et-EE":UR,"fi-FI":HR,"fr-FR":VR,"he-IL":WR,"hr-HR":jR,"hu-HU":GR,"it-IT":YR,"ja-JP":KR,"ko-KR":XR,"lt-LT":qR,"lv-LV":QR,"nb-NO":ZR,"nl-NL":JR,"pl-PL":ek,"pt-BR":tk,"pt-PT":rk,"ro-RO":ik,"ru-RU":nk,"sk-SK":sk,"sl-SI":ok,"sr-SP":ak,"sv-SE":lk,"tr-TR":ck,"uk-UA":uk,"zh-CN":dk,"zh-TW":hk};function l9(e,t,r){let{type:i="menu",isDisabled:n,trigger:s="press"}=e,o=Qu(),{triggerProps:a,overlayProps:l}=o9({type:i},t,r),c=f=>{if(!n&&!(s==="longPress"&&!f.altKey)&&r&&r.current)switch(f.key){case"Enter":case" ":if(s==="longPress")return;case"ArrowDown":"continuePropagation"in f||f.stopPropagation(),f.preventDefault(),t.toggle("first");break;case"ArrowUp":"continuePropagation"in f||f.stopPropagation(),f.preventDefault(),t.toggle("last");break}},h=F$(a9($R)),{longPressProps:u}=j$({isDisabled:n||s!=="longPress",accessibilityDescription:h.format("longPressMessage"),onLongPressStart(){t.close()},onLongPress(){t.open("first")}}),d={onPressStart(f){f.pointerType!=="touch"&&f.pointerType!=="keyboard"&&!n&&t.toggle(f.pointerType==="virtual"?"first":null)},onPress(f){f.pointerType==="touch"&&!n&&t.toggle()}};return delete a.onPress,{menuTriggerProps:{...a,...s==="press"?d:u,id:o,onKeyDown:c},menuProps:{...l,"aria-labelledby":o,autoFocus:t.focusStrategy,onClose:t.close}}}const fk=new WeakMap;function c9(e,t,r){let{shouldFocusWrap:i=!0,...n}=e;!e["aria-label"]&&!e["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let s=Ov(e,{labelable:!0}),{listProps:o}=RV({...n,ref:r,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,shouldFocusWrap:i});return fk.set(t,{onClose:e.onClose,onAction:e.onAction}),{menuProps:Ci(s,{role:"menu",...o})}}function u9(e,t,r){let{key:i,closeOnSelect:n,isVirtualized:s}=e;var o;let a=(o=e.isDisabled)!==null&&o!==void 0?o:t.disabledKeys.has(i);var l;let c=(l=e.isSelected)!==null&&l!==void 0?l:t.selectionManager.isSelected(i),h=t.selectionManager.focusedKey===i,u=fk.get(t),d=e.onClose||u.onClose,f=e.onAction||u.onAction,m="menuitem";t.selectionManager.selectionMode==="single"?m="menuitemradio":t.selectionManager.selectionMode==="multiple"&&(m="menuitemcheckbox");let p=Um(),g=Um(),v=Um(),y={"aria-disabled":a,role:m,"aria-label":e["aria-label"],"aria-labelledby":p,"aria-describedby":[g,v].filter(Boolean).join(" ")||void 0};t.selectionManager.selectionMode!=="none"&&(y["aria-checked"]=c),s&&(y["aria-posinset"]=t.collection.getItem(i).index,y["aria-setsize"]=AR(t.collection));let b=C=>{if(!C.repeat)switch(C.key){case" ":!a&&t.selectionManager.selectionMode==="none"&&n!==!1&&d&&d();break;case"Enter":!a&&n!==!1&&d&&d();break}},x=C=>{C.pointerType==="keyboard"&&f&&f(i)},A=C=>{C.pointerType!=="keyboard"&&(f&&f(i),d&&(n!=null?n:t.selectionManager.selectionMode!=="multiple")&&d())},{itemProps:S}=$V({selectionManager:t.selectionManager,key:i,ref:r,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0}),{pressProps:_,isPressed:w}=Tf({onPressStart:x,onPressUp:A,isDisabled:a}),{hoverProps:M}=rH({isDisabled:a,onHoverStart(){ZU()||(t.selectionManager.setFocused(!0),t.selectionManager.setFocusedKey(i))}});return{menuItemProps:{...y,...Ci(S,_,M,{onKeyDown:b})},labelProps:{id:p},descriptionProps:{id:g},keyboardShortcutProps:{id:v},isFocused:h,isSelected:c,isPressed:w,isDisabled:a}}function d9(e){let{heading:t,"aria-label":r}=e,i=Qu();return{itemProps:{role:"presentation"},headingProps:t?{id:i,"aria-hidden":!0}:{},groupProps:{role:"group","aria-label":r,"aria-labelledby":t?i:void 0}}}var h9=Symbol.iterator;class f9{*[h9](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let r=this.keyMap.get(t);return r?r.prevKey:null}getKeyAfter(t){let r=this.keyMap.get(t);return r?r.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){return this.keyMap.get(t)}at(t){const r=[...this.getKeys()];return this.getItem(r[t])}constructor(t,{expandedKeys:r}={}){this.keyMap=new Map,this.iterable=t,r=r||new Set;let i=o=>{if(this.keyMap.set(o.key,o),o.childNodes&&(o.type==="section"||r.has(o.key)))for(let a of o.childNodes)i(a)};for(let o of t)i(o);let n,s=0;for(let[o,a]of this.keyMap)n?(n.nextKey=o,a.prevKey=n.key):(this.firstKey=o,a.prevKey=void 0),a.type==="item"&&(a.index=s++),n=a,n.nextKey=void 0;this.lastKey=n==null?void 0:n.key}}function p9(e){let[t,r]=Cf(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,e.onExpandedChange),i=HV(e),n=I.exports.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),s=FV(e,a=>new f9(a,{expandedKeys:t}),null,[t]);return I.exports.useEffect(()=>{i.focusedKey!=null&&!s.getItem(i.focusedKey)&&i.setFocusedKey(null)},[s,i.focusedKey]),{collection:s,expandedKeys:t,disabledKeys:n,toggleKey:a=>{r(m9(t,a))},selectionManager:new VV(s,i)}}function m9(e,t){let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}const g9=Le("ul",{$$dropdownItemHeight:"$space$13",$$dropdownMenuPadding:"$space$4",$$dropdownMenuWidth:"250px",$$dropdownMenuMinWidth:"250px",listStyle:"none",position:"relative",maxWidth:"$$dropdownMenuWidth",minWidth:"$$dropdownMenuMinWidth",width:"100%",p:"$$dropdownMenuPadding",m:0,outline:"none"}),v9=Le("span",{dflex:"center",flexShrink:0,mr:"$4"}),Js=Le("kbd",{opacity:.8,ml:"$4",mr:0,dflex:"center",color:"$$dropdownItemKeyboardColor",fontSize:"$xs",fontFamily:"$sans",boxShadow:"none",bg:"transparent",transition:"border 0.12s ease 0s"}),y9=Le("div",{d:"flex",flex:"1 1 0%",flexDirection:"column",alignItems:"flex-start",lineHeight:1.2}),cE=Le("span",{flex:"1 1 0%"}),Bc=Le("span",{fontSize:"$xs",color:"$$dropdownItemDescriptionColor",truncateText:"calc($$dropdownMenuWidth * 0.9)",transition:"color 0.12s ease 0s",variants:{hasIcon:{true:{truncateText:"calc($$dropdownMenuWidth * 0.7)"}},hasCommand:{true:{truncateText:"calc($$dropdownMenuWidth * 0.7)"}}},compoundVariants:[{hasIcon:!0,hasCommand:!0,css:{truncateText:"calc($$dropdownMenuWidth * 0.6)"}}]}),x9=Le("li",{$$dropdownItemPressedScale:.97,$$dropdownItemTextColor:"$colors$text",$$dropdownItemBorderRadius:"$radii$sm",$$dropdownItemKeyboardColor:"$colors$accents8",$$dropdownItemDescriptionColor:"$colors$accents8",dflex:"center",outline:"none",cursor:"pointer",justifyContent:"space-between",bg:"transparent",position:"relative",height:"$$dropdownItemHeight",px:"$6",br:"$$dropdownItemBorderRadius",color:"$$dropdownItemTextColor",mb:0,transition:"$dropdownItem",transform:"translateZ(0)",backfaceVisibility:"hidden",$$dropdownItemShadow:"$colors$primaryShadow","@motion":{transition:"none",[`& ${Js}`]:{transition:"none"},[`& ${Bc}`]:{transition:"none"}},variants:{color:{default:{$$dropdownItemHoverBackground:"$colors$neutralLight",$$dropdownItemHoverTextColor:"$colors$neutralLightContrast",$$dropdownItemActiveBackground:"$colors$neutralLightActive",$$dropdownItemSolidHoverBackground:"$colors$neutral",$$dropdownItemSolidHoverTextColor:"$colors$neutralSolidContrast",$$dropdownItemShadow:"$colors$neutralShadow",$$dropdownItemHoverBorderColor:"$colors$neutralBorder"},primary:{$$dropdownItemHoverBackground:"$colors$primaryLight",$$dropdownItemHoverTextColor:"$colors$primaryLightContrast",$$dropdownItemActiveBackground:"$colors$primaryLightActive",$$dropdownItemSolidHoverBackground:"$colors$primary",$$dropdownItemSolidHoverTextColor:"$colors$primarySolidContrast",$$dropdownItemShadow:"$colors$primaryShadow",$$dropdownItemHoverBorderColor:"$colors$primaryBorder"},secondary:{$$dropdownItemHoverBackground:"$colors$secondaryLight",$$dropdownItemHoverTextColor:"$colors$secondaryLightContrast",$$dropdownItemActiveBackground:"$colors$secondaryLightActive",$$dropdownItemSolidHoverBackground:"$colors$secondary",$$dropdownItemSolidHoverTextColor:"$colors$secondarySolidContrast",$$dropdownItemShadow:"$colors$secondaryShadow",$$dropdownItemHoverBorderColor:"$colors$secondaryBorder"},success:{$$dropdownItemHoverBackground:"$colors$successLight",$$dropdownItemHoverTextColor:"$colors$successLightContrast",$$dropdownItemActiveBackground:"$colors$successLightActive",$$dropdownItemSolidHoverBackground:"$colors$success",$$dropdownItemSolidHoverTextColor:"$colors$successSolidContrast",$$dropdownItemShadow:"$colors$successShadow",$$dropdownItemHoverBorderColor:"$colors$successBorder"},warning:{$$dropdownItemHoverBackground:"$colors$warningLight",$$dropdownItemHoverTextColor:"$colors$warningLightContrast",$$dropdownItemActiveBackground:"$colors$warningLightActive",$$dropdownItemSolidHoverBackground:"$colors$warning",$$dropdownItemSolidHoverTextColor:"$colors$warningSolidContrast",$$dropdownItemShadow:"$colors$warningShadow",$$dropdownItemHoverBorderColor:"$colors$warningBorder"},error:{$$dropdownItemHoverBackground:"$colors$errorLight",$$dropdownItemHoverTextColor:"$colors$errorLightContrast",$$dropdownItemActiveBackground:"$colors$errorLightActive",$$dropdownItemSolidHoverBackground:"$colors$error",$$dropdownItemSolidHoverTextColor:"$colors$errorSolidContrast",$$dropdownItemShadow:"$colors$errorShadow",$$dropdownItemHoverBorderColor:"$colors$errorBorder"}},textColor:{default:{},primary:{$$dropdownItemTextColor:"$colors$primaryLightContrast",$$dropdownItemHoverTextColor:"$colors$primaryLightContrast"},secondary:{$$dropdownItemTextColor:"$colors$secondaryLightContrast",$$dropdownItemHoverTextColor:"$colors$secondaryLightContrast"},success:{$$dropdownItemTextColor:"$colors$successLightContrast",$$dropdownItemHoverTextColor:"$colors$successLightContrast"},warning:{$$dropdownItemTextColor:"$colors$warningLightContrast",$$dropdownItemHoverTextColor:"$colors$warningLightContrast"},error:{$$dropdownItemTextColor:"$colors$errorLightContrast",$$dropdownItemHoverTextColor:"$colors$errorLightContrast"}},variant:{flat:{true:{}},light:{true:{}},solid:{true:{}},shadow:{true:{}}},isPressed:{true:{bg:"$$dropdownItemActiveBackground"}},isFocused:{true:{bg:"$$dropdownItemHoverBackground",color:"$$dropdownItemHoverTextColor",zIndex:"$1",[`& ${Js}`]:{color:"$$dropdownItemHoverTextColor",borderColor:"$$dropdownItemHoverBorderColor"},[`& ${Bc}`]:{color:"currentColor"}}},isHovered:{true:{bg:"$$dropdownItemHoverBackground",color:"$$dropdownItemHoverTextColor",[`& ${Js}`]:{color:"$$dropdownItemHoverTextColor",borderColor:"$$dropdownItemHoverBorderColor"},[`& ${Bc}`]:{color:"currentColor"}}},shouldShowOutline:{true:{outline:"solid 2px $$dropdownItemActiveBackground"}},isSelected:{true:{}},isSelectable:{true:{}},isDisabled:{true:{color:"$accents5",cursor:"default"}},withDescription:{true:{height:"calc($$dropdownItemHeight * 1.2)"}},withDivider:{true:{mt:"$6","&:before":{content:'""',position:"absolute",top:"-$3",left:"-$$dropdownMenuPadding",right:"-$$dropdownMenuPadding",height:"$$dropdownItemBorderWeight",bg:"$border"}}},dividerWeight:{light:{$$dropdownItemBorderWeight:"$borderWeights$light"},normal:{$$dropdownItemBorderWeight:"$borderWeights$normal"},bold:{$$dropdownItemBorderWeight:"$borderWeights$bold"},extrabold:{$$dropdownItemBorderWeight:"$borderWeights$extrabold"},black:{$$dropdownItemBorderWeight:"$borderWeights$black"}},showFullDescription:{true:{[`& ${Bc}`]:{mt:"$2",overflow:"visible",textOverflow:"visible",whiteSpace:"normal"}}},disableAnimation:{true:{transition:"none",[`& ${Js}`]:{transition:"none"},[`& ${Bc}`]:{transition:"none"}}}},compoundVariants:[{isPressed:!0,disableAnimation:!1,css:{transform:"scale($$dropdownItemPressedScale)"}},{isHovered:!0,variant:"light",css:{bg:"transparent"}},{isFocused:!0,variant:"light",css:{bg:"transparent"}},{isHovered:!0,variant:"solid",css:{bg:"$$dropdownItemSolidHoverBackground",color:"$$dropdownItemSolidHoverTextColor",[`& ${Js}`]:{color:"$$dropdownItemSolidHoverTextColor"}}},{isFocused:!0,variant:"solid",css:{bg:"$$dropdownItemSolidHoverBackground",color:"$$dropdownItemSolidHoverTextColor",[`& ${Js}`]:{color:"$$dropdownItemSolidHoverTextColor"}}},{isHovered:!0,variant:"shadow",css:{bg:"$$dropdownItemSolidHoverBackground",color:"$$dropdownItemSolidHoverTextColor",boxShadow:"0 3px 10px 0 $$dropdownItemShadow",[`& ${Js}`]:{color:"$$dropdownItemSolidHoverTextColor"}}},{isFocused:!0,variant:"shadow",css:{bg:"$$dropdownItemSolidHoverBackground",color:"$$dropdownItemSolidHoverTextColor",boxShadow:"0 3px 10px 0 $$dropdownItemShadow",[`& ${Js}`]:{color:"$$dropdownItemSolidHoverTextColor"}}},{variant:"flat",color:"default",css:{$$dropdownItemHoverTextColor:"$colors$foreground"}}],defaultVariants:{color:"default",textColor:"default",dividerWeight:"light",variant:"flat"}},Po),b9=Le("li",{mb:0}),w9=Le("ul",{m:0,p:0,listStyle:"none"}),S9=Le("span",{fontWeight:"$medium",fontSize:"$xs",padding:"0 $4",color:"$accents8"}),_9=Ef({"100%":{strokeDashoffset:0}}),A9=Le("svg",{d:"block",path:{transformOrigin:"50% 50%",strokeDasharray:48,strokeDashoffset:48,animation:`${_9} .25s cubic-bezier(0.650, 0.000, 0.450, 1.000) forwards`}}),pk=e=>{const{width:t=24,height:r=24,size:i,strokeWidth:n=3,fill:s="currentColor",css:o,className:a}=e;return z(A9,{className:gt("nextui-checkmark",a),css:{...o},height:i||r,role:"img",viewBox:"0 0 52 52",width:i||t,xmlns:"http://www.w3.org/2000/svg",children:z("path",{d:"M14.1 27.2l7.1 7.2 16.7-16.8",fill:"none",stroke:s,strokeWidth:n})})};pk.toString=()=>".nextui-checkmark";const M9=pk,mk=({as:e,css:t,item:r,state:i,color:n,icon:s,command:o,description:a,textColor:l,variant:c,autoFocus:h,isVirtualized:u,withDivider:d,dividerWeight:f,showFullDescription:m,className:p,onAction:g})=>{const{onClose:v,closeOnSelect:y,disableAnimation:b,borderWeight:x}=Hv(),{rendered:A,key:S}=r,_=i.selectionManager.isSelected(S),w=i.selectionManager.focusedKey===r.key,M=i.disabledKeys.has(S),C=I.exports.useRef(null),{pressProps:E,isPressed:$}=WI({ref:C,isDisabled:M}),{isFocusVisible:P,focusProps:D}=Do({autoFocus:h}),{hoverProps:W,isHovered:V}=Fv({isDisabled:M}),H=i.selectionManager.selectionMode!=="none"&&!M,{menuItemProps:L,labelProps:O,descriptionProps:k,keyboardShortcutProps:j}=u9({key:S,onClose:v,isSelected:_,isDisabled:M,"aria-label":r["aria-label"],closeOnSelect:y,isVirtualized:u,onAction:g},i,C),F=I.exports.useMemo(()=>V?"hovered":_?"selected":$?"pressed":M?"disabled":"ready",[_,M,V,$]),Y=I.exports.useMemo(()=>r.props.textColor?r.props.textColor:r.props.color&&l==="default"?r.props.color:l,[l,r.props.color,r.props.textColor]),X=I.exports.useMemo(()=>a||r.props.description,[a,r.props.description]),Z=I.exports.useMemo(()=>o||r.props.command,[o,r.props.command]),U=I.exports.useMemo(()=>s||r.props.icon,[s,r.props.icon]);return Ne(x9,{ref:C,...Mr(L,W,E,D),as:r.props.as||e,className:gt("nextui-dropdown-item",{"is-disabled":M,"is-selected":_,"is-selectable":H,"is-hovered":V,"is-focused":w,"is-pressed":$},p,r.props.className),color:r.props.color||n,css:{...Mr(t,r.props.css)},"data-state":F,disableAnimation:b,dividerWeight:f||r.props.dividerWeight||x,isDisabled:M,isFocusVisible:P,isFocused:w,isHovered:V,isPressed:$,isSelectable:H,isSelected:_,shouldShowOutline:P&&c==="shadow",showFullDescription:m||r.props.showFullDescription,textColor:Y,variant:r.props.variant||c,withDescription:!!X,withDivider:d||r.props.withDivider,children:[U&&z(v9,{className:"nextui-dropdown-item-icon-wrapper",children:U}),X?Ne(y9,{children:[z(cE,{className:"nextui-dropdown-item-content",...O,children:A}),z(Bc,{className:"nextui-dropdown-item-description",hasCommand:!!Z,hasIcon:!!U,...k,children:X})]}):z(cE,{className:"nextui-dropdown-item-content",...O,children:A}),Z&&z(Js,{className:"nextui-dropdown-item-command",...j,children:Z}),_&&z(M9,{css:{ml:"$4"}})]})};mk.toString=()=>".nextui-dropdown-item";const gk=mk,vk=e=>{var t,r;const{item:i,state:n,css:s,as:o,color:a,textColor:l,variant:c,withDivider:h=!0,className:u,onAction:d}=e,{itemProps:f,headingProps:m,groupProps:p}=d9({heading:i.rendered,"aria-label":i["aria-label"]});return Ne(I.exports.Fragment,{children:[i.key!==n.collection.getFirstKey()&&h&&z(JI,{as:"li",className:"nextui-dropdown-section-divider",css:{my:"$2"}}),Ne(b9,{...f,className:"nextui-dropdown-section-wrapper",children:[i.rendered&&z(S9,{...m,className:"nextui-dropdown-section-title",children:i.rendered}),z(w9,{...p,as:((t=i.props)==null?void 0:t.as)||o,className:gt("nextui-dropdown-section",u),css:{...Mr(s,(r=i.props)==null?void 0:r.css)},children:[...i.childNodes].map(g=>{let v=z(gk,{color:a,item:g,state:n,textColor:l,variant:c,onAction:d},g.key);return g.wrapper&&(v=g.wrapper(v)),v})})]})]})};vk.toString=()=>".nextui-dropdown-section";const E9=vk,yk=me.forwardRef((e,t)=>{const{css:r={},as:i,color:n="default",textColor:s="default",variant:o="flat",...a}=e,l=Hv(),c={...Mr(l,a)},h=Br(t),u=p9(c),{menuProps:d}=c9(c,u,h);return y8(l,h),z(g9,{ref:h,as:i,className:gt("nextui-dropdown-menu",e.className),css:{...r},...d,children:[...u.collection].map(f=>{if(f.type==="section")return z(E9,{color:n,item:f,state:u,textColor:s,variant:o,onAction:c.onAction},f.key);let m=z(gk,{color:n,item:f,state:u,textColor:s,variant:o,onAction:c.onAction},f.key);return f.wrapper&&(m=f.wrapper(m)),m})})});yk.toString=()=>".nextui-dropdown-menu";const C9=yk,xk=({fill:e,size:t,height:r,width:i,...n})=>z("svg",{fill:"none",height:t||r||24,viewBox:"0 0 24 24",width:t||i||24,xmlns:"http://www.w3.org/2000/svg",...n,children:z("path",{d:"M17.9188 8.17969H11.6888H6.07877C5.11877 8.17969 4.63877 9.33969 5.31877 10.0197L10.4988 15.1997C11.3288 16.0297 12.6788 16.0297 13.5088 15.1997L15.4788 13.2297L18.6888 10.0197C19.3588 9.33969 18.8788 8.17969 17.9188 8.17969Z",fill:e})});xk.toString=()=>".nextui-dropdown-icon";const T9=xk,bk=me.forwardRef((e,t)=>{const{css:r,children:i,className:n,iconRight:s,iconRightCss:o,auto:a=!0,animated:l,...c}=e,{disableAnimation:h}=Hv(),u=Br(t),d=I.exports.useMemo(()=>s||z(T9,{fill:"currentColor",size:14}),[s]),f=I.exports.useMemo(()=>l||!h,[l,h]);return z(LR,{css:{"& .nextui-button-icon-right, & .nextui-button-text-right":{pointerEvents:"none"},...r},children:z(Ua,{ref:u,animated:f,auto:a,className:gt("nextui-dropdown-button",n),iconRight:d,iconRightCss:{mt:"$1",...o},...c,children:i})})});bk.toString=()=>".nextui-dropdown-button";const P9=bk;function D9(e){let[t,r]=Cf(e.isOpen,e.defaultOpen||!1,e.onOpenChange);return{isOpen:t,setOpen:r,open(){r(!0)},close(){r(!1)},toggle(){r(!t)}}}function L9(e){let t=D9(e),[r,i]=I.exports.useState(null);return{focusStrategy:r,...t,open(n=null){i(n),t.open()},toggle(n=null){i(n),t.toggle()}}}function $9(e={}){const{triggerRef:t,type:r="menu",trigger:i="press",isDisabled:n=!1,borderWeight:s,closeOnSelect:o,disableAnimation:a=!1,disableTriggerPressedAnimation:l=!1,...c}=e,h=I.exports.useRef(null),u=t||h,d=I.exports.useRef(null),f=I.exports.useRef(null),m=L9(e),{menuTriggerProps:p,menuProps:g}=l9({type:r,trigger:i,isDisabled:n},m,u),v=I.exports.useCallback((y={},b=null)=>{const{css:x,...A}=t!=null&&t.current?Mr(p,y):Mr(y,p);return{ref:Uv(h,b),css:l?x:{'&[aria-haspopup="true"]&[aria-expanded="true"]':{opacity:.7,backfaceVisibility:"hidden",transform:"translateZ(0) scale(0.97)"},...x},...A}},[h,t,p,l]);return{...g,popoverProps:c,state:m,ref:d,onClose:m.close,autoFocus:m.focusStrategy||!0,disableAnimation:a,disableTriggerPressedAnimation:l,menuRef:d,borderWeight:s,menuPopoverRef:f,menuTriggerRef:u,closeOnSelect:o,getMenuTriggerProps:v}}const wk=e=>{const{children:t,...r}=e,i=$9(r),[n,s]=me.Children.toArray(t);return z(n9,{value:i,children:Ne(Qh,{ref:i.menuPopoverRef,...i.popoverProps,borderWeight:i.borderWeight,disableAnimation:i.disableAnimation,isOpen:i.state.isOpen,scrollRef:i.menuRef,triggerRef:i.menuTriggerRef,onClose:i.state.close,children:[n,z(Qh.Content,{children:s})]})})};wk.toString=()=>".nextui-dropdown";const li=wk;li.Trigger=LR,li.Button=P9,li.Menu=C9,li.Section=BV,li.Item=i9;const h_={default:{$$navbarItemActiveColor:"$colors$link",$$navbarItemHighlightBackgroundColor:"$colors$primaryLight",$$navbarItemHighlightTextColor:"$colors$primaryLightContrast",$$navbarItemHighlightSolidBackgroundColor:"$colors$primary",$$navbarItemHighlightSolidTextColor:"$colors$primarySolidContrast"},neutral:{$$navbarItemActiveColor:"$colors$neutral",$$navbarItemHighlightBackgroundColor:"$colors$neutralLight",$$navbarItemHighlightTextColor:"$colors$text",$$navbarItemHighlightSolidBackgroundColor:"$colors$neutral",$$navbarItemHighlightSolidTextColor:"$colors$neutralSolidContrast"},primary:{$$navbarItemActiveColor:"$colors$primary",$$navbarItemHighlightBackgroundColor:"$colors$primaryLight",$$navbarItemHighlightTextColor:"$colors$primaryLightContrast",$$navbarItemHighlightSolidBackgroundColor:"$colors$primary",$$navbarItemHighlightSolidTextColor:"$colors$primarySolidContrast"},secondary:{$$navbarItemActiveColor:"$colors$secondary",$$navbarItemHighlightBackgroundColor:"$colors$secondaryLight",$$navbarItemHighlightTextColor:"$colors$secondaryLightContrast",$$navbarItemHighlightSolidBackgroundColor:"$colors$secondary",$$navbarItemHighlightSolidTextColor:"$colors$secondarySolidContrast"},success:{$$navbarItemActiveColor:"$colors$success",$$navbarItemHighlightBackgroundColor:"$colors$successLight",$$navbarItemHighlightTextColor:"$colors$successLightContrast",$$navbarItemHighlightSolidBackgroundColor:"$colors$success",$$navbarItemHighlightSolidTextColor:"$colors$successSolidContrast"},warning:{$$navbarItemActiveColor:"$colors$warning",$$navbarItemHighlightBackgroundColor:"$colors$warningLight",$$navbarItemHighlightTextColor:"$colors$warningLightContrast",$$navbarItemHighlightSolidBackgroundColor:"$colors$warning",$$navbarItemHighlightSolidTextColor:"$colors$warningSolidContrast"},error:{$$navbarItemActiveColor:"$colors$error",$$navbarItemHighlightBackgroundColor:"$colors$errorLight",$$navbarItemHighlightTextColor:"$colors$errorLightContrast",$$navbarItemHighlightSolidBackgroundColor:"$colors$error",$$navbarItemHighlightSolidTextColor:"$colors$errorSolidContrast"}},f_=Le("li",{mb:0,display:"flex",alignItems:"center",listStyleType:"none",lineHeight:"inherit"}),Sk=Le("ul",{m:0,listStyle:"none",lineHeight:"$xs",li:{mb:0}}),_k=Le(f_,{opacity:0,paddingBottom:"$6",fontSize:"$lg",lineHeight:"$lg",fontWeight:"$normal",transformOrigin:"top",variants:{activeColor:h_,isActive:{true:{color:"$$navbarItemActiveColor",fontWeight:"$semibold"}},disableAnimation:{true:{transition:"none"}}},defaultVariants:{activeColor:"default"}}),p_=Le(Sk,{py:"$8",px:"$$navbarPadding",overflowY:"scroll",maxHeight:"100%"}),I9=Le("div",{$$navbarListColor:"$colors$text",$$navbarListBackgroundColor:"$colors$background",$$navbarListBlurBackgroundColor:"$colors$backgroundAlpha",$$navbarListBlur:"16px",position:"absolute",top:0,left:0,right:0,background:"$$navbarListBackgroundColor",width:"100%",height:"0px",zIndex:"$4",boxSizing:"border-box",overflow:"hidden",variants:{isOpen:{true:{top:"$$navbarHeight",pb:"$$navbarHeight",height:"100vh"}},disableBlur:{false:{"@supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none))":{bg:"$$navbarListBlurBackgroundColor",backdropFilter:"saturate(180%) blur($$navbarListBlur)","@safari":{[`& ${p_}`]:{bg:"$$navbarListBlurBackgroundColor",backdropFilter:"saturate(180%) blur($$navbarListBlur)"}}}}},disableAnimation:{true:{[`& ${_k}`]:{transition:"none"}}}},defaultVariants:{disableBlur:"false"}},Ju),R9=Le("div",{dflex:"center",flexDirection:"column",pointerEvents:"none",size:"22px","& .line":{height:"1px",width:"100%",backgroundColor:"$$navbarTextColor",transition:"transform 0.3s ease","&.top":{transform:"translateY(-4px) rotate(0deg)"},"&.bottom":{transform:"translateY(4px) rotate(0deg)"}},variants:{isExpanded:{true:{"& .line":{"&.top":{transform:"translateY(1px) rotate(45deg)"},"&.bottom":{transform:"translateY(0px) rotate(-45deg)"}}}}}}),k9=Le("button",{appearance:"none",background:"transparent",border:"none",cursor:"pointer",p:"$2",transition:"box-shadow 0.25s ease 0s, opacity 0.25s ease 0s",variants:{isPressed:{true:{opacity:.7}}}},Ju,Po),O9=Le("span",{display:"flex",flexWrap:"nowrap",flexDirection:"row",justifyContent:"flex-start",bg:"transparent",alignItems:"center",textDecoration:"none",fontSize:"$base",whiteSpace:"nowrap",boxSizing:"border-box"},Ju),B9=Le(f_,{$$navbarItemFontSize:"inherit",$$navbarItemFontWeight:"$fontWeights$normal",fontSize:"$$navbarItemFontSize",fontWeight:"$$navbarItemFontWeight",position:"relative","> *":{zIndex:"$2",fontSize:"inherit !important",fontWeight:"inherit !important"},"&:before":{opacity:0,zIndex:"$1",content:'""',display:"block",position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"$sm"},"&:after":{opacity:0,zIndex:"$1",content:'""',display:"block",position:"absolute",left:"0",right:"0",bottom:"0",height:"$$navbarItemUnderlineHeight",borderRadius:"0px",background:"$$navbarItemActiveColor"},variants:{activeColor:h_,isActive:{true:{color:"$$navbarItemActiveColor",$$navbarItemFontWeight:"$fontWeights$semibold"}},variant:{default:{},underline:{color:"inherit",height:"100%"},"underline-rounded":{color:"inherit",height:"100%"},highlight:{},"highlight-solid":{},"highlight-rounded":{},"highlight-solid-rounded":{}},underlineHeight:{light:{$$navbarItemUnderlineHeight:"2px"},normal:{$$navbarItemUnderlineHeight:"4px"},bold:{$$navbarItemUnderlineHeight:"6px"},extrabold:{$$navbarItemUnderlineHeight:"8px"},black:{$$navbarItemUnderlineHeight:"10px"}},isDisabled:{true:{opacity:.5,cursor:"not-allowed"}}},compoundVariants:[{isActive:!0,variant:"underline",css:{color:"inherit","&:after":{opacity:1}}},{isActive:!0,variant:"underline-rounded",css:{color:"inherit","&:after":{opacity:1,borderRadius:"calc($$navbarItemUnderlineHeight / 2)"}}},{isActive:!0,variant:"highlight",css:{color:"$$navbarItemHighlightTextColor","*:first-child":{color:"inherit"},"&:before":{opacity:1,background:"$$navbarItemHighlightBackgroundColor"}}},{isActive:!0,variant:"highlight-solid",css:{color:"$$navbarItemHighlightSolidTextColor","*:first-child":{color:"inherit"},"&:before":{opacity:1,background:"$$navbarItemHighlightSolidBackgroundColor"}}},{isActive:!0,variant:"highlight-rounded",css:{color:"$$navbarItemHighlightTextColor","*:first-child":{color:"inherit"},"&:before":{opacity:1,background:"$$navbarItemHighlightBackgroundColor"}}},{isActive:!0,variant:"highlight-solid-rounded",css:{color:"$$navbarItemHighlightSolidTextColor","*:first-child":{color:"inherit"},"&:before":{opacity:1,background:"$$navbarItemHighlightSolidBackgroundColor"}}}],defaultVariants:{variant:"default",activeColor:"default",underlineHeight:"normal"}},Ju),z9=Le(f_,{position:"absolute",top:"calc(50% - $$navbarItemMaxHeight * 0.5)",height:"$$navbarItemMaxHeight",background:"$neutralLight",borderRadius:"$sm",transition:"width 0.2s ease 0s, transform 0.2s ease 0s, opacity 0.2s ease 0s",variants:{color:h_,isHighlightVariant:{true:{background:"$$navbarItemHighlightBackgroundColor"}},isHighlightSolidVariant:{true:{background:"$$navbarItemHighlightSolidBackgroundColor"}},isRounded:{true:{borderRadius:"$pill"}}}}),N9=Le(Sk,{$$navbarContentItemGap:"$space$10",$$navbarContentItemHorizontalPadding:"$space$10",d:"flex",height:"100%",flexWrap:"nowrap",alignItems:"center",gap:"$$navbarContentItemGap",color:"inherit",variants:{enableCursorHighlight:{true:{zIndex:"$2",position:"relative"}}}},Ju),zc=Le("div",{width:"100%",height:"$$navbarHeight",minHeight:"$$navbarHeight",display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",position:"relative",boxSizing:"border-box",color:"inherit",px:"$$navbarPadding",bg:"$$navbarBackgroundColor",maxW:"$$navbarContainerMaxWidth",zIndex:"$5","@xsMax":{$$navbarPadding:"$space$6",$$navbarFloatingMargin:"$space$6"}}),F9=Le("nav",{width:"100%",dflex:"center",position:"relative",height:"auto",color:"$$navbarTextColor",zIndex:"$2",variants:{variant:{static:{position:"static"},sticky:{top:0,right:0,left:0,position:"sticky"},floating:{top:0,right:0,left:0,position:"sticky","@safari":{top:"-5px"},[`& ${zc}`]:{mt:"calc($$navbarFloatingMargin * 0.5)",mx:"$$navbarFloatingMargin",borderRadius:"$$navbarBorderRadius"},[`& ${p_}`]:{px:"calc($$navbarFloatingMargin + $space$4)"}}},maxWidth:{xs:{$$navbarContainerMaxWidth:"$breakpoints$xs"},sm:{$$navbarContainerMaxWidth:"$breakpoints$sm"},md:{$$navbarContainerMaxWidth:"$breakpoints$md"},lg:{$$navbarContainerMaxWidth:"$breakpoints$lg"},xl:{$$navbarContainerMaxWidth:"$breakpoints$xl"},fluid:{$$navbarContainerMaxWidth:"100%"}},isBordered:{true:{[`& ${zc}`]:{borderBottom:"$$navbarBorderWeight solid $$navbarBorderColor"}}},isCompact:{true:{$$navbarHeight:"$$navbarCompactHeight",$$navbarItemMaxHeight:"$$navbarCompactItemMaxHeight",$$navbarBorderRadius:"$radii$md"}},disableShadow:{false:{boxShadow:"$$navbarShadow"}},disableBlur:{false:{"@supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none))":{[`& ${zc}`]:{bg:"$$navbarBlurBackgroundColor",backdropFilter:"saturate(180%) blur($$navbarBlur)"}}}}},compoundVariants:[{isBordered:!0,variant:"floating",css:{[`& ${zc}`]:{border:"$$navbarBorderWeight solid $$navbarBorderColor"}}},{variant:"floating",disableShadow:!1,css:{boxShadow:"none",[`& ${zc}`]:{boxShadow:"$$navbarShadow"}}}],defaultVariants:{variant:"static",maxWidth:"lg",isBordered:!1,disableShadow:!1,disableBlur:!1}}),Ak=Fs((e,t)=>{const r=Br(t),{children:i,className:n,...s}=e;return z(O9,{ref:r,className:gt("nextui-navbar-brand",n),...s,children:i})});Ak.toString=()=>".nextui-navbar-brand";const U9=Ak,[H9,V9]=Pf({strict:!1,name:"NavbarContentContext"});function W9(e={}){const{gap:t="$10",variant:r="default",activeColor:i="default",underlineHeight:n="normal",enableCursorHighlight:s=!1,isCursorHighlightRounded:o=!1,css:a,style:l,className:c,...h}=e,[u,d]=I.exports.useState(null),[f,m]=I.exports.useState(null),[p,g]=I.exports.useState(null),[v,y]=I.exports.useState(null),[b,x]=I.exports.useState(!0),A=I.exports.useRef(null),S=I.exports.useRef(null),_=r==null||r.toString==null?void 0:r.toString(),w=_.includes==null?void 0:_.includes("highlight"),M=_.includes==null?void 0:_.includes("highlight-solid"),C=I.exports.useMemo(()=>o||(_.includes==null?void 0:_.includes("rounded")),[o,_]),E=I.exports.useMemo(()=>w&&t==="$10"?"0px":t,[w,t]),$=I.exports.useMemo(()=>b?"0ms":"200ms",[b]),P=I.exports.useMemo(()=>p||v?1:0,[v,p]),D=I.exports.useMemo(()=>u?w?`${u.width}px`:`calc(${u.width}px + var(--nextui--navbarContentItemHorizontalPadding))`:"0px",[_,u]),W=I.exports.useMemo(()=>u&&f&&`translate(${u.left-f.left}px)`,[u,f]),V=I.exports.useMemo(()=>w?"0px":"calc(var(--nextui--navbarContentItemHorizontalPadding) * 0.5 * -1)",[w]),H=I.exports.useMemo(()=>Mr({"--nextui--transitionDuration":$,"--nextui--opacity":P,"--nextui--width":D,"--nextui--transform":W,"--nextui--left":V},l||{}),[$,V,P,D,W,l]),L=I.exports.useMemo(()=>u&&f&&s?{transitionDuration:"var(--nextui--transitionDuration)",opacity:"var(--nextui--opacity)",width:"var(--nextui--width)",transform:"var(--nextui--transform)",left:"var(--nextui--left)"}:{},[u,f,s]);return{css:a,gap:E,variant:r,activeColor:i,activeItem:v,updateActiveItem:O=>{var k;y(O),g(O),d(O==null||O.getBoundingClientRect==null?void 0:O.getBoundingClientRect()),m((k=S.current)==null||k.getBoundingClientRect==null?void 0:k.getBoundingClientRect())},highlightedItem:p,underlineHeight:n,cursorHighlightRef:A,isRounded:C,isHighlightVariant:w,isHighlightSolidVariant:M,isCursorHighlightRounded:o,enableCursorHighlight:s,cursorHighlightCss:L,repositionHighlight:(O,k)=>{var j,F;(O==null?void 0:O.target)instanceof Element&&(d((j=O.target)==null||j.getBoundingClientRect==null?void 0:j.getBoundingClientRect()),m((F=S.current)==null||F.getBoundingClientRect==null?void 0:F.getBoundingClientRect()),x(!p),g(k))},resetHighlight:()=>{v?(g(v),d(v==null||v.getBoundingClientRect==null?void 0:v.getBoundingClientRect())):g(null)},wrapperRef:S,className:c,style:H,otherProps:h}}const Mk=Fs((e,t)=>{const{children:r,...i}=e,n=W9(i),s=Br(t);return z(H9,{value:n,children:Ne(N9,{ref:Uv(n.wrapperRef,s),className:gt("nextui-navbar-content",n.className),css:{gap:n.gap,...n.css},enableCursorHighlight:n.enableCursorHighlight,style:n.style,onMouseLeave:n.resetHighlight,...n.otherProps,children:[n.enableCursorHighlight&&z(z9,{ref:n.cursorHighlightRef,className:"nextui-navbar-cursor-highlight",color:n.activeColor,css:n.cursorHighlightCss,isHighlightSolidVariant:n.isHighlightSolidVariant,isHighlightVariant:n.isHighlightVariant,isRounded:n.isRounded}),r]})})});Mk.toString=()=>".nextui-navbar-content";const j9=Mk,Ek=Fs((e,t)=>{var r;const{id:i,css:n,children:s,variant:o,activeColor:a,isActive:l,underlineHeight:c,onMouseEnter:h,onMouseLeave:u,isDisabled:d,className:f,...m}=e,p=V9(),g=Br(t),v=o||(p==null?void 0:p.variant),y=v==null?void 0:v.toString(),b=y.includes==null?void 0:y.includes("highlight"),x=y.includes==null?void 0:y.includes("highlight-solid"),{hoverProps:A,isHovered:S}=Fv({isDisabled:d}),_=sb(i);I.exports.useEffect(()=>{g.current&&p&&p!=null&&p.enableCursorHighlight&&l&&b&&p.updateActiveItem(g==null?void 0:g.current)},[g,b,l]);const w=I.exports.useMemo(()=>{var P;return!!p&&((P=p.highlightedItem)==null?void 0:P.id)===_},[_,p]),M=I.exports.useMemo(()=>{var P;return!(w||p==null||!p.enableCursorHighlight||!x||_!==(p==null||(P=p.activeItem)==null?void 0:P.id))},[p,_,w,x]),C=I.exports.useMemo(()=>{const P=[],D=typeof s=="string",W=y.includes==null?void 0:y.includes("highlight-solid");return p||P.push({$$navbarContentItemGap:"$space$8"}),b&&(P.push({dflex:"center",height:"$$navbarItemMaxHeight"}),D?P.push({px:"calc($$navbarContentItemHorizontalPadding * 0.5)"}):P.push({"*:first-child":{size:"100%",px:"calc($$navbarContentItemHorizontalPadding * 0.5)"}})),b&&y.includes!=null&&y.includes("rounded")&&!p.enableCursorHighlight&&P.push({"&:before":{borderRadius:"$pill"}}),p.enableCursorHighlight&&P.push({"&:before":{display:"none"}}),l&&!b&&P.push({$$navbarItemFontWeight:"$fontWeights$semibold"}),S&&p.enableCursorHighlight&&(b&&P.push({color:"$$navbarItemHighlightTextColor"}),W&&P.push({color:"$$navbarItemHighlightSolidTextColor"})),M&&P.push({color:"$$navbarItemActiveColor"}),{...QS(P),...n}},[s,n,p,y,M,l,S,b]),E=typeof s=="string"?z(Kt,{children:s}):me.Children.only(s),$=me.cloneElement(E,{id:((r=E.props)==null?void 0:r.id)||_,onMouseEnter:P=>{var D;if(p==null||!p.repositionHighlight)return void(h==null||h(P));((D=P.target)==null?void 0:D.id)===_&&p.repositionHighlight(P,g==null?void 0:g.current),h==null||h(P)},onMouseLeave:P=>{p!=null&&p.resetHighlight&&p.enableCursorHighlight&&b&&p.resetHighlight(),u==null||u(P)}});return z(B9,{ref:g,activeColor:a||(p==null?void 0:p.activeColor),className:gt("nextui-navbar-item",f),css:C,id:_,isActive:l,underlineHeight:c||(p==null?void 0:p.underlineHeight),variant:v,...Mr(A,m),children:$})});Ek.toString=()=>".nextui-navbar-item";const Ck=Ek,Tk=Fs((e,t)=>{const r=Br(t),{css:i,children:n,isActive:s,color:o,activeColor:a,underlineHeight:l,itemCss:c,itemClassName:h,isDisabled:u,hideIn:d,showIn:f,variant:m,className:p,...g}=e,v=I.exports.useMemo(()=>o||i!=null&&i.$$linkColor?{...i}:{color:"inherit",height:"100%",...i},[o,i]);return z(Ck,{activeColor:a,className:h,css:c,hideIn:d,isActive:s,isDisabled:u,showIn:f,underlineHeight:l,variant:m,children:z(Df,{ref:r,className:gt("nextui-navbar-link",p),color:o,css:v,...g,children:n})})});Tk.toString=()=>".nextui-navbar-link";const G9=Tk,[Y9,m_]=Pf({strict:!0,name:"NavbarContext",errorMessage:"useNavbarContext: `context` is undefined. Seems you forgot to wrap all navbar components within `<Navbar />`"}),Pk=e=>{const{isExpanded:t=!1,className:r,...i}=e;return Ne(R9,{"aria-hidden":!0,className:gt("nextui-navbar-toggle-icon",r),isExpanded:t,tabIndex:-1,...i,children:[z("span",{className:"line top"}),z("span",{className:"line bottom"})]})};Pk.toString=()=>".nextui-navbar-toggle-icon";const K9=Pk,Dk=Fs((e,t)=>{const{children:r,className:i,autoFocus:n,onChange:s,as:o,css:a,...l}=e,{parentRef:c,setIsCollapseOpen:h}=m_(),[,u]=M$(c,{scrollLayer:!0}),d=Br(t),f=E7({...e,onChange:b=>{h(b),s==null||s(b),u(b)}}),{buttonProps:m,isPressed:p}=$8(e,f,d),{isFocusVisible:g,focusProps:v}=Do({autoFocus:n}),y=I.exports.useMemo(()=>r||z(K9,{isExpanded:f.isSelected}),[r,f.isSelected]);return z(k9,{ref:d,as:o,className:gt("nextui-navbar-toggle",i),css:a,isFocusVisible:g,isPressed:p,...Mr(m,v,l),children:y})});Dk.toString=()=>".nextui-navbar-toggle";const X9=Dk,[q9,Q9]=Pf({strict:!1,name:"NavbarCollapseContext"}),Lk=Fs((e,t)=>{var r;const{children:i,className:n,transitionDelay:s,transitionTime:o,transitionMatrix:a,disableAnimation:l,style:c,css:h,...u}=e,d=m_(),f=Q9(),m=Br(t),{isVisible:p,setEntry:g}=J6(m,{root:d==null||(r=d.parentRef)==null?void 0:r.current,freezeOnceVisible:d.isCollapseOpen});I.exports.useEffect(()=>{!d.isCollapseOpen&&p&&g(null)},[p,d.isCollapseOpen]);const v=I.exports.useMemo(()=>{var A;return f!=null&&f.items?(A=f.items)==null?void 0:A.findIndex(S=>{var _;return(S==null||(_=S.props)==null?void 0:_.children)===i}):-1},[f==null?void 0:f.items]),y=I.exports.useMemo(()=>{var A,S,_;return{transitionDelay:(A=s!=null?s:f==null?void 0:f.transitionDelay)!=null?A:0,transitionTime:(S=o!=null?o:f==null?void 0:f.transitionTime)!=null?S:0,transitionMatrix:(_=a!=null?a:f==null?void 0:f.transitionMatrix)!=null?_:{in:"matrix(1, 0, 0, 1, 0, 0)",out:"matrix(0.97, 0, 0, 1, 0, 20)"}}},[s,o,a,f.transitionMatrix,f.transitionDelay,f.transitionTime]),b=I.exports.useMemo(()=>f.items&&v>-1?v/f.items.length*.5*1e3+y.transitionDelay:.1,[v,y.transitionDelay,f==null?void 0:f.items]),x=I.exports.useMemo(()=>{const A=p&&!f.hasScrolled?b:0;return{"--nextui--collapseItemOpacity":p?1:0,"--nextui--collapseItemTransform":p?y.transitionMatrix.in:y.transitionMatrix.out,"--netxui--collapseItemTransition":!l&&d.isCollapseOpen?`opacity ${y.transitionTime}ms cubic-bezier(0.5, 0, 0, 1) ${A}ms, transform ${y.transitionTime}ms cubic-bezier(0.5, 0, 0, 1) ${A}ms`:"none"}},[v,p,l,b,y.transitionMatrix,y.transitionTime,d.isCollapseOpen,f.hasScrolled]);return z(_k,{ref:m,className:gt("nextui-navbar-collapse-item",n),css:{opacity:"var(--nextui--collapseItemOpacity)",transition:"var(--netxui--collapseItemTransition)",transform:"var(--nextui--collapseItemTransform)",...h},disableAnimation:l,style:{...c,...x},...u,children:i})});Lk.toString=()=>".nextui-navbar-collapse-item";const $k=Lk;function Z9(e={}){var t;const{css:r,children:i,ref:n,transitionDelay:s=0,transitionTime:o=350,transitionMatrix:a={in:"matrix(1, 0, 0, 1, 0, 0)",out:"matrix(0.97, 0, 0, 1, 0, 20)"},className:l,...c}=e,[h,u]=I.exports.useState(!1),d=m_(),f=Br(n),[,m]=qS(i,$k),[,p]=M$(null,{scrollLayer:!0});I.exports.useEffect(()=>{var v,y;d.isCollapseOpen?p(!0):(f.current&&((y=f.current)==null||y.scrollTo==null||y.scrollTo({top:0})),u(!1),p(!1));const b=()=>{var x;f.current&&((x=f.current)==null?void 0:x.scrollTop)>0&&!h&&u(!0)};return(v=f.current)==null||v.addEventListener("scroll",b),()=>{var x;(x=f.current)==null||x.removeEventListener("scroll",b)}},[d.isCollapseOpen]);const g=I.exports.useMemo(()=>{const v=[];var y;return d.parentRef&&d.parentRef.current&&v.push({maxHeight:(y=d.parentRef.current)==null?void 0:y.clientHeight}),{...QS(v),...r}},[(t=d.parentRef)==null?void 0:t.current,r]);return{css:r,domRef:f,children:i,items:m,collpaseCss:g,isOpen:d.isCollapseOpen,hasScrolled:h,transitionDelay:s,transitionTime:o,transitionMatrix:a,className:l,otherProps:c}}const Ik=Fs((e,t)=>{const r=Z9({ref:t,...e});return z(q9,{value:r,children:z(I9,{className:gt("nextui-navbar-collapse",r.className),css:r.collpaseCss,isOpen:r.isOpen,...r.otherProps,children:z(p_,{ref:r.domRef,className:"nextui-navbar-collapse-wrapper",children:r.children})})})});Ik.toString=()=>".nextui-navbar-collapse";const Rk=Ik;function J9(e={}){const{css:t,containerCss:r,parentRef:i,isBordered:n,variant:s="static",height:o="76px",borderWeight:a="light",shouldHideOnScroll:l=!1,disableScrollHandler:c=!1,onScrollPositionChange:h,disableBlur:u=!1,className:d,...f}=e,[m,p]=I.exports.useState(!1),[g,v]=I.exports.useState(!1),{theme:y}=XS(),b=I.exports.useMemo(()=>n?`$borderWeights$${a}`:"0px",[n,a]),x=I.exports.useMemo(()=>u||g,[u,g]),A=I.exports.useMemo(()=>typeof o=="number"?`${o}px`:o,[o]);_$({":root":{$$navbarHeight:A,$$navbarCompactHeight:"calc($$navbarHeight * 0.7)",$$navbarTextColor:"$colors$text",$$navbarBackgroundColor:"$colors$background",$$navbarBlurBackgroundColor:"$colors$backgroundAlpha",$$navbarItemMaxHeight:"calc($$navbarHeight * 0.5)",$$navbarCompactItemMaxHeight:"calc($$navbarHeight * 0.5)",$$navbarBorderColor:"$colors$border",$$navbarBorderRadius:"$radii$lg",$$navbarPadding:"$space$10",$$navbarFloatingMargin:"$space$10",$$navbarContainerMaxWidth:"$breakpoints$lg",$$navbarShadow:"$shadows$md",$$navbarBorderWeight:b,$$navbarBlur:"10px"}})(),Z6({elementRef:i,enabled:l||!c,callback:({prevPos:_,currPos:w})=>{h==null||h(w.y),l&&p(M=>{const C=w.y>_.y;return C!==M?C:M})}});const S=I.exports.useMemo(()=>{const _=[];var w,M,C,E,$,P;return s==="floating"&&_.push({bg:`linear-gradient(180deg, ${ry(y==null||(w=y.colors)==null||(M=w.background)==null?void 0:M.value,.95)} 44%, ${ry(y==null||(C=y.colors)==null||(E=C.background)==null?void 0:E.value,.46)} 73%, ${ry(y==null||($=y.colors)==null||(P=$.background)==null?void 0:P.value,0)})`}),l&&_.push({position:"sticky",top:0,right:0,left:0,transform:m?"translateY(-100%)":"translateY(0)",transition:"transform 400ms ease"}),{...QS(_),...t}},[t,y==null?void 0:y.colors,s,l,m]);return{css:t,variant:s,sticky:m,isBordered:n,containerCss:r,navbarCss:S,parentRef:i,borderWeight:a,shouldHideOnScroll:l,disableBlur:x,isCollapseOpen:g,setIsCollapseOpen:v,className:d,otherProps:f}}const fb=Fs((e,t)=>{const{children:r,...i}=e,n=Br(t),s=J9(i),[o,a]=qS(r,Rk);return z(Y9,{value:s,children:Ne(F9,{ref:n,className:gt("nextui-navbar",s.className),css:s.navbarCss,disableBlur:s.disableBlur,isBordered:s.isBordered,variant:s.variant,...s.otherProps,children:[z(zc,{className:"nextui-navbar-container",css:s.containerCss,children:o}),a]})})});E$&&(fb.displayName="NextUI.Navbar"),fb.toString=()=>".nextui-navbar";const gr=fb;gr.Brand=U9,gr.Content=j9,gr.Item=Ck,gr.Link=G9,gr.Toggle=X9,gr.Collapse=Rk,gr.CollapseItem=$k;const eW=F6({type:"dark",theme:{colors:{nfamColor:"#fff"}}}),tW=[{id:1,title:"Certification process",description:"Via the creation of NFT'S validating normal life certifications needed for the cow, we can ensure that those steps were followed and that the cattle is healthy",srcImg:"assets/img/about/ribbon.png",altImg:"certification"},{id:2,title:"Cattle process",description:"When the farmer wants to give the cow the NFarm certification, he will need the previous NFT's that assure quality and then creating a cow that will almost everytime will pass the filters",srcImg:"assets/img/about/cowi.png",altImg:"certification"},{id:3,title:"Tipping",description:"If you felt like the meat was good and hope to give back a part, you can give the farmer a tip this way you will try even more of that meat.",srcImg:"assets/img/about/tip.png",altImg:"tip"}],rW=[{id:1,name:"Fued Majul",role:"Project Manager",social:"https://www.linkedin.com/in/fued-alejandro-majul-ramirez-43888599/",img:"assets/img/team/fued.jpeg"},{id:2,name:"Xochitl Escamilla",role:"UX Engineer",media:"https://www.linkedin.com/in/xochescam/",img:"assets/img/team/xoch.jpeg"},{id:3,name:"Jose Bayona",role:"Frontend Developer",social:"https://www.linkedin.com/in/emmanuel-bayona-b3a490212/",img:"assets/img/team/emma.jpeg"},{id:4,name:"Luis Cabral",role:"Backend Developer",social:"https://www.linkedin.com/in/luis-fernando-cabral-b13847220/",img:"assets/img/team/luis.jpeg"},{id:5,name:"Osain Avitia",role:"Cloud Engineer",social:"https://www.linkedin.com/in/osain-abitia/",img:"assets/img/team/osain.jpeg"}],iW=[{id:1,title:"What is an NFarm NFT?",description:"NFT or Non - Fungible Token it 's a crypto asset which has the ability to be unique.This tokens don' t have an equal cand cannot be exchanged with another same token,as in coins, It 's the representation of the certificated cow."},{id:2,title:"Where can I get my certification?",description:"With this service, you don't need a third person to get a certificate, it's generated as an NFT over a platform via the burn of NFT's which represent quality meassures."},{id:3,title:"How much do I have to pay?",description:"There is no stablished price, you only pay a fee to create the NFT of you cattle."},{id:4,title:"What standards do I have to follow?",description:"The same as before with the distinction that this certifications are represented as an NFT's."},{id:5,title:"How is this any different from now?",description:"With the addition of certain meassures to follow, we can certify that there is a quality in the cattle meat, you still have to follow the authentification process without assistance of a certification entity."}],nW=({title:e,description:t,srcImg:r,altImg:i})=>Ne("div",{className:"flex flex-col justify-center items-center mt-6",children:[z("img",{src:r,className:"aspect-square w-20",alt:i}),Ne("div",{className:"flex flex-col justify-center items-center",children:[z("p",{className:"font-semibold text-xl sm:text-2xl",children:e}),z("p",{className:"text-justify sm:text-xl",children:t})]})]}),sW=()=>z("section",{className:"flex w-full justify-center content-center mt-10",children:Ne("div",{className:"flex w-11/12 justify-center content-center",children:[z("div",{className:"hidden lg:flex lg:justify-center lg:items-center lg:w-2/5",children:z("img",{src:"assets/img/about/about.png",className:"w-full"})}),Ne("div",{className:"flex flex-col w-11/12 justify-center items-center lg:w-3/5",children:[z("p",{className:"text-3xl font-semibold mt-8 text-center sm:text-4xl",children:"What are we doing at NFarm?"}),z("p",{className:"text-justify mt-3 sm:text-lg",children:"On NFarm we think that 88 Million tons of food waste it's a shame, that's wy we want to unify all of the burocratic processes into one stamp that 100% of the time will assure that there is quality in the meat and that the user will be able to trace it back to where it came from."}),tW.map(({id:e,title:t,description:r,srcImg:i,altImg:n})=>z(nW,{title:t,description:r,srcImg:i,altImg:n},e))]})]})}),oW=({title:e,description:t})=>z(zg.Group,{splitted:!0,children:z(zg,{title:e,children:z(Kt,{children:t})})}),aW=()=>z($n,{children:z("section",{className:"flex w-full justify-center content-center mt-10 sm:mt-20",children:Ne("div",{className:"flex flex-col w-11/12 justify-center content-center",children:[Ne("div",{className:"flex flex-col justify-center items-center",children:[z("p",{className:"line text-xl sm:text-2xl font-semibold",children:"F.A.Q."}),z("p",{className:"text-3xl text-center sm:text-5xl font-bold",children:"FREQUENTLY ASKED QUESTIONS"})]}),z("div",{className:"flex flex-col",children:iW.map(({id:e,title:t,description:r})=>z(oW,{title:t,description:r},e))})]})})});function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(r),!0).forEach(function(i){Rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ng(e){return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function lW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dE(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cW(e,t,r){return t&&dE(e.prototype,t),r&&dE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g_(e,t){return dW(e)||fW(e,t)||kk(e,t)||mW()}function Lf(e){return uW(e)||hW(e)||kk(e)||pW()}function uW(e){if(Array.isArray(e))return pb(e)}function dW(e){if(Array.isArray(e))return e}function hW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i=[],n=!0,s=!1,o,a;try{for(r=r.call(e);!(n=(o=r.next()).done)&&(i.push(o.value),!(t&&i.length===t));n=!0);}catch(l){s=!0,a=l}finally{try{!n&&r.return!=null&&r.return()}finally{if(s)throw a}}return i}}function kk(e,t){if(!!e){if(typeof e=="string")return pb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pb(e,t)}}function pb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function pW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hE=function(){},v_={},Ok={},Bk=null,zk={mark:hE,measure:hE};try{typeof window<"u"&&(v_=window),typeof document<"u"&&(Ok=document),typeof MutationObserver<"u"&&(Bk=MutationObserver),typeof performance<"u"&&(zk=performance)}catch{}var gW=v_.navigator||{},fE=gW.userAgent,pE=fE===void 0?"":fE,Pa=v_,Qt=Ok,mE=Bk,xp=zk;Pa.document;var Lo=!!Qt.documentElement&&!!Qt.head&&typeof Qt.addEventListener=="function"&&typeof Qt.createElement=="function",Nk=~pE.indexOf("MSIE")||~pE.indexOf("Trident/"),bp,wp,Sp,_p,Ap,wo="___FONT_AWESOME___",mb=16,Fk="fa",Uk="svg-inline--fa",Bl="data-fa-i2svg",gb="data-fa-pseudo-element",vW="data-fa-pseudo-element-pending",y_="data-prefix",x_="data-icon",gE="fontawesome-i2svg",yW="async",xW=["HTML","HEAD","STYLE","SCRIPT"],Hk=function(){try{return!0}catch{return!1}}(),Xt="classic",cr="sharp",b_=[Xt,cr];function $f(e){return new Proxy(e,{get:function(r,i){return i in r?r[i]:r[Xt]}})}var Zh=$f((bp={},Rr(bp,Xt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Rr(bp,cr,{fa:"solid",fass:"solid","fa-solid":"solid"}),bp)),Jh=$f((wp={},Rr(wp,Xt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Rr(wp,cr,{solid:"fass"}),wp)),ef=$f((Sp={},Rr(Sp,Xt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Rr(Sp,cr,{fass:"fa-solid"}),Sp)),bW=$f((_p={},Rr(_p,Xt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Rr(_p,cr,{"fa-solid":"fass"}),_p)),wW=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,Vk="fa-layers-text",SW=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,_W=$f((Ap={},Rr(Ap,Xt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Rr(Ap,cr,{900:"fass"}),Ap)),Wk=[1,2,3,4,5,6,7,8,9,10],AW=Wk.concat([11,12,13,14,15,16,17,18,19,20]),MW=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],dl={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},tf=new Set;Object.keys(Jh[Xt]).map(tf.add.bind(tf));Object.keys(Jh[cr]).map(tf.add.bind(tf));var EW=[].concat(b_,Lf(tf),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",dl.GROUP,dl.SWAP_OPACITY,dl.PRIMARY,dl.SECONDARY]).concat(Wk.map(function(e){return"".concat(e,"x")})).concat(AW.map(function(e){return"w-".concat(e)})),xh=Pa.FontAwesomeConfig||{};function CW(e){var t=Qt.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function TW(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Qt&&typeof Qt.querySelector=="function"){var PW=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];PW.forEach(function(e){var t=g_(e,2),r=t[0],i=t[1],n=TW(CW(r));n!=null&&(xh[i]=n)})}var jk={styleDefault:"solid",familyDefault:"classic",cssPrefix:Fk,replacementClass:Uk,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};xh.familyPrefix&&(xh.cssPrefix=xh.familyPrefix);var Fu=Re(Re({},jk),xh);Fu.autoReplaceSvg||(Fu.observeMutations=!1);var Ve={};Object.keys(jk).forEach(function(e){Object.defineProperty(Ve,e,{enumerable:!0,set:function(r){Fu[e]=r,bh.forEach(function(i){return i(Ve)})},get:function(){return Fu[e]}})});Object.defineProperty(Ve,"familyPrefix",{enumerable:!0,set:function(t){Fu.cssPrefix=t,bh.forEach(function(r){return r(Ve)})},get:function(){return Fu.cssPrefix}});Pa.FontAwesomeConfig=Ve;var bh=[];function DW(e){return bh.push(e),function(){bh.splice(bh.indexOf(e),1)}}var Oo=mb,Ss={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function LW(e){if(!(!e||!Lo)){var t=Qt.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=Qt.head.childNodes,i=null,n=r.length-1;n>-1;n--){var s=r[n],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Qt.head.insertBefore(t,i),e}}var $W="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function rf(){for(var e=12,t="";e-- >0;)t+=$W[Math.random()*62|0];return t}function td(e){for(var t=[],r=(e||[]).length>>>0;r--;)t[r]=e[r];return t}function w_(e){return e.classList?td(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Gk(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function IW(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,'="').concat(Gk(e[r]),'" ')},"").trim()}function Vv(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,": ").concat(e[r].trim(),";")},"")}function S_(e){return e.size!==Ss.size||e.x!==Ss.x||e.y!==Ss.y||e.rotate!==Ss.rotate||e.flipX||e.flipY}function RW(e){var t=e.transform,r=e.containerWidth,i=e.iconWidth,n={transform:"translate(".concat(r/2," 256)")},s="translate(".concat(t.x*32,", ").concat(t.y*32,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:n,inner:l,path:c}}function kW(e){var t=e.transform,r=e.width,i=r===void 0?mb:r,n=e.height,s=n===void 0?mb:n,o=e.startCentered,a=o===void 0?!1:o,l="";return a&&Nk?l+="translate(".concat(t.x/Oo-i/2,"em, ").concat(t.y/Oo-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(t.x/Oo,"em), calc(-50% + ").concat(t.y/Oo,"em)) "):l+="translate(".concat(t.x/Oo,"em, ").concat(t.y/Oo,"em) "),l+="scale(".concat(t.size/Oo*(t.flipX?-1:1),", ").concat(t.size/Oo*(t.flipY?-1:1),") "),l+="rotate(".concat(t.rotate,"deg) "),l}var OW=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Yk(){var e=Fk,t=Uk,r=Ve.cssPrefix,i=Ve.replacementClass,n=OW;if(r!==e||i!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");n=n.replace(s,".".concat(r,"-")).replace(o,"--".concat(r,"-")).replace(a,".".concat(i))}return n}var vE=!1;function ly(){Ve.autoAddCss&&!vE&&(LW(Yk()),vE=!0)}var BW={mixout:function(){return{dom:{css:Yk,insertCss:ly}}},hooks:function(){return{beforeDOMElementCreation:function(){ly()},beforeI2svg:function(){ly()}}}},So=Pa||{};So[wo]||(So[wo]={});So[wo].styles||(So[wo].styles={});So[wo].hooks||(So[wo].hooks={});So[wo].shims||(So[wo].shims=[]);var Xn=So[wo],Kk=[],zW=function e(){Qt.removeEventListener("DOMContentLoaded",e),Fg=1,Kk.map(function(t){return t()})},Fg=!1;Lo&&(Fg=(Qt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Qt.readyState),Fg||Qt.addEventListener("DOMContentLoaded",zW));function NW(e){!Lo||(Fg?setTimeout(e,0):Kk.push(e))}function If(e){var t=e.tag,r=e.attributes,i=r===void 0?{}:r,n=e.children,s=n===void 0?[]:n;return typeof e=="string"?Gk(e):"<".concat(t," ").concat(IW(i),">").concat(s.map(If).join(""),"</").concat(t,">")}function yE(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}var FW=function(t,r){return function(i,n,s,o){return t.call(r,i,n,s,o)}},cy=function(t,r,i,n){var s=Object.keys(t),o=s.length,a=n!==void 0?FW(r,n):r,l,c,h;for(i===void 0?(l=1,h=t[s[0]]):(l=0,h=i);l<o;l++)c=s[l],h=a(h,t[c],c,t);return h};function UW(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var s=e.charCodeAt(r++);(s&64512)==56320?t.push(((n&1023)<<10)+(s&1023)+65536):(t.push(n),r--)}else t.push(n)}return t}function vb(e){var t=UW(e);return t.length===1?t[0].toString(16):null}function HW(e,t){var r=e.length,i=e.charCodeAt(t),n;return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(i-55296)*1024+n-56320+65536:i}function xE(e){return Object.keys(e).reduce(function(t,r){var i=e[r],n=!!i.icon;return n?t[i.iconName]=i.icon:t[r]=i,t},{})}function yb(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.skipHooks,n=i===void 0?!1:i,s=xE(t);typeof Xn.hooks.addPack=="function"&&!n?Xn.hooks.addPack(e,xE(t)):Xn.styles[e]=Re(Re({},Xn.styles[e]||{}),s),e==="fas"&&yb("fa",t)}var Mp,Ep,Cp,au=Xn.styles,VW=Xn.shims,WW=(Mp={},Rr(Mp,Xt,Object.values(ef[Xt])),Rr(Mp,cr,Object.values(ef[cr])),Mp),__=null,Xk={},qk={},Qk={},Zk={},Jk={},jW=(Ep={},Rr(Ep,Xt,Object.keys(Zh[Xt])),Rr(Ep,cr,Object.keys(Zh[cr])),Ep);function GW(e){return~EW.indexOf(e)}function YW(e,t){var r=t.split("-"),i=r[0],n=r.slice(1).join("-");return i===e&&n!==""&&!GW(n)?n:null}var eO=function(){var t=function(s){return cy(au,function(o,a,l){return o[l]=cy(a,s,{}),o},{})};Xk=t(function(n,s,o){if(s[3]&&(n[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){n[l.toString(16)]=o})}return n}),qk=t(function(n,s,o){if(n[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){n[l]=o})}return n}),Jk=t(function(n,s,o){var a=s[2];return n[o]=o,a.forEach(function(l){n[l]=o}),n});var r="far"in au||Ve.autoFetchSvg,i=cy(VW,function(n,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!r&&(a="fas"),typeof o=="string"&&(n.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(n.unicodes[o.toString(16)]={prefix:a,iconName:l}),n},{names:{},unicodes:{}});Qk=i.names,Zk=i.unicodes,__=Wv(Ve.styleDefault,{family:Ve.familyDefault})};DW(function(e){__=Wv(e.styleDefault,{family:Ve.familyDefault})});eO();function A_(e,t){return(Xk[e]||{})[t]}function KW(e,t){return(qk[e]||{})[t]}function hl(e,t){return(Jk[e]||{})[t]}function tO(e){return Qk[e]||{prefix:null,iconName:null}}function XW(e){var t=Zk[e],r=A_("fas",e);return t||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function Da(){return __}var M_=function(){return{prefix:null,iconName:null,rest:[]}};function Wv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.family,i=r===void 0?Xt:r,n=Zh[i][e],s=Jh[i][e]||Jh[i][n],o=e in Xn.styles?e:null;return s||o||null}var bE=(Cp={},Rr(Cp,Xt,Object.keys(ef[Xt])),Rr(Cp,cr,Object.keys(ef[cr])),Cp);function jv(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.skipLookups,n=i===void 0?!1:i,s=(t={},Rr(t,Xt,"".concat(Ve.cssPrefix,"-").concat(Xt)),Rr(t,cr,"".concat(Ve.cssPrefix,"-").concat(cr)),t),o=null,a=Xt;(e.includes(s[Xt])||e.some(function(c){return bE[Xt].includes(c)}))&&(a=Xt),(e.includes(s[cr])||e.some(function(c){return bE[cr].includes(c)}))&&(a=cr);var l=e.reduce(function(c,h){var u=YW(Ve.cssPrefix,h);if(au[h]?(h=WW[a].includes(h)?bW[a][h]:h,o=h,c.prefix=h):jW[a].indexOf(h)>-1?(o=h,c.prefix=Wv(h,{family:a})):u?c.iconName=u:h!==Ve.replacementClass&&h!==s[Xt]&&h!==s[cr]&&c.rest.push(h),!n&&c.prefix&&c.iconName){var d=o==="fa"?tO(c.iconName):{},f=hl(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!au.far&&au.fas&&!Ve.autoFetchSvg&&(c.prefix="fas")}return c},M_());return(e.includes("fa-brands")||e.includes("fab"))&&(l.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===cr&&(au.fass||Ve.autoFetchSvg)&&(l.prefix="fass",l.iconName=hl(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=Da()||"fas"),l}var qW=function(){function e(){lW(this,e),this.definitions={}}return cW(e,[{key:"add",value:function(){for(var r=this,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];var o=n.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){r.definitions[a]=Re(Re({},r.definitions[a]||{}),o[a]),yb(a,o[a]);var l=ef[Xt][a];l&&yb(l,o[a]),eO()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,i){var n=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(n).map(function(s){var o=n[s],a=o.prefix,l=o.iconName,c=o.icon,h=c[2];r[a]||(r[a]={}),h.length>0&&h.forEach(function(u){typeof u=="string"&&(r[a][u]=c)}),r[a][l]=c}),r}}]),e}(),wE=[],lu={},Mu={},QW=Object.keys(Mu);function ZW(e,t){var r=t.mixoutsTo;return wE=e,lu={},Object.keys(Mu).forEach(function(i){QW.indexOf(i)===-1&&delete Mu[i]}),wE.forEach(function(i){var n=i.mixout?i.mixout():{};if(Object.keys(n).forEach(function(o){typeof n[o]=="function"&&(r[o]=n[o]),Ng(n[o])==="object"&&Object.keys(n[o]).forEach(function(a){r[o]||(r[o]={}),r[o][a]=n[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){lu[o]||(lu[o]=[]),lu[o].push(s[o])})}i.provides&&i.provides(Mu)}),r}function xb(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];var s=lu[e]||[];return s.forEach(function(o){t=o.apply(null,[t].concat(i))}),t}function zl(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=lu[e]||[];n.forEach(function(s){s.apply(null,r)})}function _o(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Mu[e]?Mu[e].apply(null,t):void 0}function bb(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,r=e.prefix||Da();if(!!t)return t=hl(r,t)||t,yE(rO.definitions,r,t)||yE(Xn.styles,r,t)}var rO=new qW,JW=function(){Ve.autoReplaceSvg=!1,Ve.observeMutations=!1,zl("noAuto")},ej={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lo?(zl("beforeI2svg",t),_o("pseudoElements2svg",t),_o("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot;Ve.autoReplaceSvg===!1&&(Ve.autoReplaceSvg=!0),Ve.observeMutations=!0,NW(function(){rj({autoReplaceSvgRoot:r}),zl("watch",t)})}},tj={icon:function(t){if(t===null)return null;if(Ng(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:hl(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var r=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],i=Wv(t[0]);return{prefix:i,iconName:hl(i,r)||r}}if(typeof t=="string"&&(t.indexOf("".concat(Ve.cssPrefix,"-"))>-1||t.match(wW))){var n=jv(t.split(" "),{skipLookups:!0});return{prefix:n.prefix||Da(),iconName:hl(n.prefix,n.iconName)||n.iconName}}if(typeof t=="string"){var s=Da();return{prefix:s,iconName:hl(s,t)||t}}}},cn={noAuto:JW,config:Ve,dom:ej,parse:tj,library:rO,findIconDefinition:bb,toHtml:If},rj=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot,i=r===void 0?Qt:r;(Object.keys(Xn.styles).length>0||Ve.autoFetchSvg)&&Lo&&Ve.autoReplaceSvg&&cn.dom.i2svg({node:i})};function Gv(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(i){return If(i)})}}),Object.defineProperty(e,"node",{get:function(){if(!!Lo){var i=Qt.createElement("div");return i.innerHTML=e.html,i.children}}}),e}function ij(e){var t=e.children,r=e.main,i=e.mask,n=e.attributes,s=e.styles,o=e.transform;if(S_(o)&&r.found&&!i.found){var a=r.width,l=r.height,c={x:a/l/2,y:.5};n.style=Vv(Re(Re({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:n,children:t}]}function nj(e){var t=e.prefix,r=e.iconName,i=e.children,n=e.attributes,s=e.symbol,o=s===!0?"".concat(t,"-").concat(Ve.cssPrefix,"-").concat(r):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Re(Re({},n),{},{id:o}),children:i}]}]}function E_(e){var t=e.icons,r=t.main,i=t.mask,n=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,l=e.title,c=e.maskId,h=e.titleId,u=e.extra,d=e.watchable,f=d===void 0?!1:d,m=i.found?i:r,p=m.width,g=m.height,v=n==="fak",y=[Ve.replacementClass,s?"".concat(Ve.cssPrefix,"-").concat(s):""].filter(function(M){return u.classes.indexOf(M)===-1}).filter(function(M){return M!==""||!!M}).concat(u.classes).join(" "),b={children:[],attributes:Re(Re({},u.attributes),{},{"data-prefix":n,"data-icon":s,class:y,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(g)})},x=v&&!~u.classes.indexOf("fa-fw")?{width:"".concat(p/g*16*.0625,"em")}:{};f&&(b.attributes[Bl]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(h||rf())},children:[l]}),delete b.attributes.title);var A=Re(Re({},b),{},{prefix:n,iconName:s,main:r,mask:i,maskId:c,transform:o,symbol:a,styles:Re(Re({},x),u.styles)}),S=i.found&&r.found?_o("generateAbstractMask",A)||{children:[],attributes:{}}:_o("generateAbstractIcon",A)||{children:[],attributes:{}},_=S.children,w=S.attributes;return A.children=_,A.attributes=w,a?nj(A):ij(A)}function SE(e){var t=e.content,r=e.width,i=e.height,n=e.transform,s=e.title,o=e.extra,a=e.watchable,l=a===void 0?!1:a,c=Re(Re(Re({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[Bl]="");var h=Re({},o.styles);S_(n)&&(h.transform=kW({transform:n,startCentered:!0,width:r,height:i}),h["-webkit-transform"]=h.transform);var u=Vv(h);u.length>0&&(c.style=u);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function sj(e){var t=e.content,r=e.title,i=e.extra,n=Re(Re(Re({},i.attributes),r?{title:r}:{}),{},{class:i.classes.join(" ")}),s=Vv(i.styles);s.length>0&&(n.style=s);var o=[];return o.push({tag:"span",attributes:n,children:[t]}),r&&o.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),o}var uy=Xn.styles;function wb(e){var t=e[0],r=e[1],i=e.slice(4),n=g_(i,1),s=n[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(Ve.cssPrefix,"-").concat(dl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ve.cssPrefix,"-").concat(dl.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Ve.cssPrefix,"-").concat(dl.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:t,height:r,icon:o}}var oj={found:!1,width:512,height:512};function aj(e,t){!Hk&&!Ve.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Sb(e,t){var r=t;return t==="fa"&&Ve.styleDefault!==null&&(t=Da()),new Promise(function(i,n){if(_o("missingIconAbstract"),r==="fa"){var s=tO(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&uy[t]&&uy[t][e]){var o=uy[t][e];return i(wb(o))}aj(e,t),i(Re(Re({},oj),{},{icon:Ve.showMissingIcons&&e?_o("missingIconAbstract")||{}:{}}))})}var _E=function(){},_b=Ve.measurePerformance&&xp&&xp.mark&&xp.measure?xp:{mark:_E,measure:_E},Jd='FA "6.2.0"',lj=function(t){return _b.mark("".concat(Jd," ").concat(t," begins")),function(){return iO(t)}},iO=function(t){_b.mark("".concat(Jd," ").concat(t," ends")),_b.measure("".concat(Jd," ").concat(t),"".concat(Jd," ").concat(t," begins"),"".concat(Jd," ").concat(t," ends"))},C_={begin:lj,end:iO},Ym=function(){};function AE(e){var t=e.getAttribute?e.getAttribute(Bl):null;return typeof t=="string"}function cj(e){var t=e.getAttribute?e.getAttribute(y_):null,r=e.getAttribute?e.getAttribute(x_):null;return t&&r}function uj(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(Ve.replacementClass)}function dj(){if(Ve.autoReplaceSvg===!0)return Km.replace;var e=Km[Ve.autoReplaceSvg];return e||Km.replace}function hj(e){return Qt.createElementNS("http://www.w3.org/2000/svg",e)}function fj(e){return Qt.createElement(e)}function nO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.ceFn,i=r===void 0?e.tag==="svg"?hj:fj:r;if(typeof e=="string")return Qt.createTextNode(e);var n=i(e.tag);Object.keys(e.attributes||[]).forEach(function(o){n.setAttribute(o,e.attributes[o])});var s=e.children||[];return s.forEach(function(o){n.appendChild(nO(o,{ceFn:i}))}),n}function pj(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Km={replace:function(t){var r=t[0];if(r.parentNode)if(t[1].forEach(function(n){r.parentNode.insertBefore(nO(n),r)}),r.getAttribute(Bl)===null&&Ve.keepOriginalSource){var i=Qt.createComment(pj(r));r.parentNode.replaceChild(i,r)}else r.remove()},nest:function(t){var r=t[0],i=t[1];if(~w_(r).indexOf(Ve.replacementClass))return Km.replace(t);var n=new RegExp("".concat(Ve.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,l){return l===Ve.replacementClass||l.match(n)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return If(a)}).join(`
`);r.setAttribute(Bl,""),r.innerHTML=o}};function ME(e){e()}function sO(e,t){var r=typeof t=="function"?t:Ym;if(e.length===0)r();else{var i=ME;Ve.mutateApproach===yW&&(i=Pa.requestAnimationFrame||ME),i(function(){var n=dj(),s=C_.begin("mutate");e.map(n),s(),r()})}}var T_=!1;function oO(){T_=!0}function Ab(){T_=!1}var Ug=null;function EE(e){if(!!mE&&!!Ve.observeMutations){var t=e.treeCallback,r=t===void 0?Ym:t,i=e.nodeCallback,n=i===void 0?Ym:i,s=e.pseudoElementsCallback,o=s===void 0?Ym:s,a=e.observeMutationsRoot,l=a===void 0?Qt:a;Ug=new mE(function(c){if(!T_){var h=Da();td(c).forEach(function(u){if(u.type==="childList"&&u.addedNodes.length>0&&!AE(u.addedNodes[0])&&(Ve.searchPseudoElements&&o(u.target),r(u.target)),u.type==="attributes"&&u.target.parentNode&&Ve.searchPseudoElements&&o(u.target.parentNode),u.type==="attributes"&&AE(u.target)&&~MW.indexOf(u.attributeName))if(u.attributeName==="class"&&cj(u.target)){var d=jv(w_(u.target)),f=d.prefix,m=d.iconName;u.target.setAttribute(y_,f||h),m&&u.target.setAttribute(x_,m)}else uj(u.target)&&n(u.target)})}}),Lo&&Ug.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function mj(){!Ug||Ug.disconnect()}function gj(e){var t=e.getAttribute("style"),r=[];return t&&(r=t.split(";").reduce(function(i,n){var s=n.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),r}function vj(e){var t=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),i=e.innerText!==void 0?e.innerText.trim():"",n=jv(w_(e));return n.prefix||(n.prefix=Da()),t&&r&&(n.prefix=t,n.iconName=r),n.iconName&&n.prefix||(n.prefix&&i.length>0&&(n.iconName=KW(n.prefix,e.innerText)||A_(n.prefix,vb(e.innerText))),!n.iconName&&Ve.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(n.iconName=e.firstChild.data)),n}function yj(e){var t=td(e.attributes).reduce(function(n,s){return n.name!=="class"&&n.name!=="style"&&(n[s.name]=s.value),n},{}),r=e.getAttribute("title"),i=e.getAttribute("data-fa-title-id");return Ve.autoA11y&&(r?t["aria-labelledby"]="".concat(Ve.replacementClass,"-title-").concat(i||rf()):(t["aria-hidden"]="true",t.focusable="false")),t}function xj(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ss,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function CE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=vj(e),i=r.iconName,n=r.prefix,s=r.rest,o=yj(e),a=xb("parseNodeAttributes",{},e),l=t.styleParser?gj(e):[];return Re({iconName:i,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:n,transform:Ss,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var bj=Xn.styles;function aO(e){var t=Ve.autoReplaceSvg==="nest"?CE(e,{styleParser:!1}):CE(e);return~t.extra.classes.indexOf(Vk)?_o("generateLayersText",e,t):_o("generateSvgReplacementMutation",e,t)}var La=new Set;b_.map(function(e){La.add("fa-".concat(e))});Object.keys(Zh[Xt]).map(La.add.bind(La));Object.keys(Zh[cr]).map(La.add.bind(La));La=Lf(La);function TE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Lo)return Promise.resolve();var r=Qt.documentElement.classList,i=function(u){return r.add("".concat(gE,"-").concat(u))},n=function(u){return r.remove("".concat(gE,"-").concat(u))},s=Ve.autoFetchSvg?La:b_.map(function(h){return"fa-".concat(h)}).concat(Object.keys(bj));s.includes("fa")||s.push("fa");var o=[".".concat(Vk,":not([").concat(Bl,"])")].concat(s.map(function(h){return".".concat(h,":not([").concat(Bl,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=td(e.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),n("complete");else return Promise.resolve();var l=C_.begin("onTree"),c=a.reduce(function(h,u){try{var d=aO(u);d&&h.push(d)}catch(f){Hk||f.name==="MissingIcon"&&console.error(f)}return h},[]);return new Promise(function(h,u){Promise.all(c).then(function(d){sO(d,function(){i("active"),i("complete"),n("pending"),typeof t=="function"&&t(),l(),h()})}).catch(function(d){l(),u(d)})})}function wj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;aO(e).then(function(r){r&&sO([r],t)})}function Sj(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(t||{}).icon?t:bb(t||{}),n=r.mask;return n&&(n=(n||{}).icon?n:bb(n||{})),e(i,Re(Re({},r),{},{mask:n}))}}var _j=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,n=i===void 0?Ss:i,s=r.symbol,o=s===void 0?!1:s,a=r.mask,l=a===void 0?null:a,c=r.maskId,h=c===void 0?null:c,u=r.title,d=u===void 0?null:u,f=r.titleId,m=f===void 0?null:f,p=r.classes,g=p===void 0?[]:p,v=r.attributes,y=v===void 0?{}:v,b=r.styles,x=b===void 0?{}:b;if(!!t){var A=t.prefix,S=t.iconName,_=t.icon;return Gv(Re({type:"icon"},t),function(){return zl("beforeDOMElementCreation",{iconDefinition:t,params:r}),Ve.autoA11y&&(d?y["aria-labelledby"]="".concat(Ve.replacementClass,"-title-").concat(m||rf()):(y["aria-hidden"]="true",y.focusable="false")),E_({icons:{main:wb(_),mask:l?wb(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:A,iconName:S,transform:Re(Re({},Ss),n),symbol:o,title:d,maskId:h,titleId:m,extra:{attributes:y,styles:x,classes:g}})})}},Aj={mixout:function(){return{icon:Sj(_j)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=TE,r.nodeCallback=wj,r}}},provides:function(t){t.i2svg=function(r){var i=r.node,n=i===void 0?Qt:i,s=r.callback,o=s===void 0?function(){}:s;return TE(n,o)},t.generateSvgReplacementMutation=function(r,i){var n=i.iconName,s=i.title,o=i.titleId,a=i.prefix,l=i.transform,c=i.symbol,h=i.mask,u=i.maskId,d=i.extra;return new Promise(function(f,m){Promise.all([Sb(n,a),h.iconName?Sb(h.iconName,h.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(p){var g=g_(p,2),v=g[0],y=g[1];f([r,E_({icons:{main:v,mask:y},prefix:a,iconName:n,transform:l,symbol:c,maskId:u,title:s,titleId:o,extra:d,watchable:!0})])}).catch(m)})},t.generateAbstractIcon=function(r){var i=r.children,n=r.attributes,s=r.main,o=r.transform,a=r.styles,l=Vv(a);l.length>0&&(n.style=l);var c;return S_(o)&&(c=_o("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(c||s.icon),{children:i,attributes:n}}}},Mj={mixout:function(){return{layer:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.classes,s=n===void 0?[]:n;return Gv({type:"layer"},function(){zl("beforeDOMElementCreation",{assembler:r,params:i});var o=[];return r(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Ve.cssPrefix,"-layers")].concat(Lf(s)).join(" ")},children:o}]})}}}},Ej={mixout:function(){return{counter:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.title,s=n===void 0?null:n,o=i.classes,a=o===void 0?[]:o,l=i.attributes,c=l===void 0?{}:l,h=i.styles,u=h===void 0?{}:h;return Gv({type:"counter",content:r},function(){return zl("beforeDOMElementCreation",{content:r,params:i}),sj({content:r.toString(),title:s,extra:{attributes:c,styles:u,classes:["".concat(Ve.cssPrefix,"-layers-counter")].concat(Lf(a))}})})}}}},Cj={mixout:function(){return{text:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.transform,s=n===void 0?Ss:n,o=i.title,a=o===void 0?null:o,l=i.classes,c=l===void 0?[]:l,h=i.attributes,u=h===void 0?{}:h,d=i.styles,f=d===void 0?{}:d;return Gv({type:"text",content:r},function(){return zl("beforeDOMElementCreation",{content:r,params:i}),SE({content:r,transform:Re(Re({},Ss),s),title:a,extra:{attributes:u,styles:f,classes:["".concat(Ve.cssPrefix,"-layers-text")].concat(Lf(c))}})})}}},provides:function(t){t.generateLayersText=function(r,i){var n=i.title,s=i.transform,o=i.extra,a=null,l=null;if(Nk){var c=parseInt(getComputedStyle(r).fontSize,10),h=r.getBoundingClientRect();a=h.width/c,l=h.height/c}return Ve.autoA11y&&!n&&(o.attributes["aria-hidden"]="true"),Promise.resolve([r,SE({content:r.innerHTML,width:a,height:l,transform:s,title:n,extra:o,watchable:!0})])}}},Tj=new RegExp('"',"ug"),PE=[1105920,1112319];function Pj(e){var t=e.replace(Tj,""),r=HW(t,0),i=r>=PE[0]&&r<=PE[1],n=t.length===2?t[0]===t[1]:!1;return{value:vb(n?t[0]:t),isSecondary:i||n}}function DE(e,t){var r="".concat(vW).concat(t.replace(":","-"));return new Promise(function(i,n){if(e.getAttribute(r)!==null)return i();var s=td(e.children),o=s.filter(function(_){return _.getAttribute(gb)===t})[0],a=Pa.getComputedStyle(e,t),l=a.getPropertyValue("font-family").match(SW),c=a.getPropertyValue("font-weight"),h=a.getPropertyValue("content");if(o&&!l)return e.removeChild(o),i();if(l&&h!=="none"&&h!==""){var u=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?cr:Xt,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Jh[d][l[2].toLowerCase()]:_W[d][c],m=Pj(u),p=m.value,g=m.isSecondary,v=l[0].startsWith("FontAwesome"),y=A_(f,p),b=y;if(v){var x=XW(p);x.iconName&&x.prefix&&(y=x.iconName,f=x.prefix)}if(y&&!g&&(!o||o.getAttribute(y_)!==f||o.getAttribute(x_)!==b)){e.setAttribute(r,b),o&&e.removeChild(o);var A=xj(),S=A.extra;S.attributes[gb]=t,Sb(y,f).then(function(_){var w=E_(Re(Re({},A),{},{icons:{main:_,mask:M_()},prefix:f,iconName:b,extra:S,watchable:!0})),M=Qt.createElement("svg");t==="::before"?e.insertBefore(M,e.firstChild):e.appendChild(M),M.outerHTML=w.map(function(C){return If(C)}).join(`
`),e.removeAttribute(r),i()}).catch(n)}else i()}else i()})}function Dj(e){return Promise.all([DE(e,"::before"),DE(e,"::after")])}function Lj(e){return e.parentNode!==document.head&&!~xW.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(gb)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function LE(e){if(!!Lo)return new Promise(function(t,r){var i=td(e.querySelectorAll("*")).filter(Lj).map(Dj),n=C_.begin("searchPseudoElements");oO(),Promise.all(i).then(function(){n(),Ab(),t()}).catch(function(){n(),Ab(),r()})})}var $j={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=LE,r}}},provides:function(t){t.pseudoElements2svg=function(r){var i=r.node,n=i===void 0?Qt:i;Ve.searchPseudoElements&&LE(n)}}},$E=!1,Ij={mixout:function(){return{dom:{unwatch:function(){oO(),$E=!0}}}},hooks:function(){return{bootstrap:function(){EE(xb("mutationObserverCallbacks",{}))},noAuto:function(){mj()},watch:function(r){var i=r.observeMutationsRoot;$E?Ab():EE(xb("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},IE=function(t){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(i,n){var s=n.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return i.flipX=!0,i;if(o&&a==="v")return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a;break}return i},r)},Rj={mixout:function(){return{parse:{transform:function(r){return IE(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,i){var n=i.getAttribute("data-fa-transform");return n&&(r.transform=IE(n)),r}}},provides:function(t){t.generateAbstractTransformGrouping=function(r){var i=r.main,n=r.transform,s=r.containerWidth,o=r.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(n.x*32,", ").concat(n.y*32,") "),c="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),h="rotate(".concat(n.rotate," 0 0)"),u={transform:"".concat(l," ").concat(c," ").concat(h)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:u,path:d};return{tag:"g",attributes:Re({},f.outer),children:[{tag:"g",attributes:Re({},f.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:Re(Re({},i.icon.attributes),f.path)}]}]}}}},dy={x:0,y:0,width:"100%",height:"100%"};function RE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function kj(e){return e.tag==="g"?e.children:[e]}var Oj={hooks:function(){return{parseNodeAttributes:function(r,i){var n=i.getAttribute("data-fa-mask"),s=n?jv(n.split(" ").map(function(o){return o.trim()})):M_();return s.prefix||(s.prefix=Da()),r.mask=s,r.maskId=i.getAttribute("data-fa-mask-id"),r}}},provides:function(t){t.generateAbstractMask=function(r){var i=r.children,n=r.attributes,s=r.main,o=r.mask,a=r.maskId,l=r.transform,c=s.width,h=s.icon,u=o.width,d=o.icon,f=RW({transform:l,containerWidth:u,iconWidth:c}),m={tag:"rect",attributes:Re(Re({},dy),{},{fill:"white"})},p=h.children?{children:h.children.map(RE)}:{},g={tag:"g",attributes:Re({},f.inner),children:[RE(Re({tag:h.tag,attributes:Re(Re({},h.attributes),f.path)},p))]},v={tag:"g",attributes:Re({},f.outer),children:[g]},y="mask-".concat(a||rf()),b="clip-".concat(a||rf()),x={tag:"mask",attributes:Re(Re({},dy),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[m,v]},A={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:kj(d)},x]};return i.push(A,{tag:"rect",attributes:Re({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},dy)}),{children:i,attributes:n}}}},Bj={provides:function(t){var r=!1;Pa.matchMedia&&(r=Pa.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var i=[],n={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:Re(Re({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=Re(Re({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Re(Re({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||a.children.push({tag:"animate",attributes:Re(Re({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Re(Re({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:Re(Re({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:Re(Re({},o),{},{values:"1;0;0;0;0;1;"})}]}),r||i.push({tag:"path",attributes:Re(Re({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Re(Re({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},zj={hooks:function(){return{parseNodeAttributes:function(r,i){var n=i.getAttribute("data-fa-symbol"),s=n===null?!1:n===""?!0:n;return r.symbol=s,r}}}},Nj=[BW,Aj,Mj,Ej,Cj,$j,Ij,Rj,Oj,Bj,zj];ZW(Nj,{mixoutsTo:cn});cn.noAuto;cn.config;cn.library;cn.dom;var Mb=cn.parse;cn.findIconDefinition;cn.toHtml;var Fj=cn.icon;cn.layer;cn.text;cn.counter;var pt={exports:{}},Uj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Hj=Uj,Vj=Hj;function lO(){}function cO(){}cO.resetWarningCache=lO;var Wj=function(){function e(i,n,s,o,a,l){if(l!==Vj){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cO,resetWarningCache:lO};return r.PropTypes=r,r};pt.exports=Wj();function kE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(r),!0).forEach(function(i){cu(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Hg(e){return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function cu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jj(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Gj(e,t){if(e==null)return{};var r=jj(e,t),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,i)||(r[i]=e[i]))}return r}function Eb(e){return Yj(e)||Kj(e)||Xj(e)||qj()}function Yj(e){if(Array.isArray(e))return Cb(e)}function Kj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xj(e,t){if(!!e){if(typeof e=="string")return Cb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cb(e,t)}}function Cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function qj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qj(e){var t,r=e.beat,i=e.fade,n=e.beatFade,s=e.bounce,o=e.shake,a=e.flash,l=e.spin,c=e.spinPulse,h=e.spinReverse,u=e.pulse,d=e.fixedWidth,f=e.inverse,m=e.border,p=e.listItem,g=e.flip,v=e.size,y=e.rotation,b=e.pull,x=(t={"fa-beat":r,"fa-fade":i,"fa-beat-fade":n,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":h,"fa-spin-pulse":c,"fa-pulse":u,"fa-fw":d,"fa-inverse":f,"fa-border":m,"fa-li":p,"fa-flip":g===!0,"fa-flip-horizontal":g==="horizontal"||g==="both","fa-flip-vertical":g==="vertical"||g==="both"},cu(t,"fa-".concat(v),typeof v<"u"&&v!==null),cu(t,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),cu(t,"fa-pull-".concat(b),typeof b<"u"&&b!==null),cu(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(x).map(function(A){return x[A]?A:null}).filter(function(A){return A})}function Zj(e){return e=e-0,e===e}function uO(e){return Zj(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,r){return r?r.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var Jj=["style"];function eG(e){return e.charAt(0).toUpperCase()+e.slice(1)}function tG(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,r){var i=r.indexOf(":"),n=uO(r.slice(0,i)),s=r.slice(i+1).trim();return n.startsWith("webkit")?t[eG(n)]=s:t[n]=s,t},{})}function dO(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var i=(t.children||[]).map(function(l){return dO(e,l)}),n=Object.keys(t.attributes||{}).reduce(function(l,c){var h=t.attributes[c];switch(c){case"class":l.attrs.className=h,delete t.attributes.class;break;case"style":l.attrs.style=tG(h);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=h:l.attrs[uO(c)]=h}return l},{attrs:{}}),s=r.style,o=s===void 0?{}:s,a=Gj(r,Jj);return n.attrs.style=aa(aa({},n.attrs.style),o),e.apply(void 0,[t.tag,aa(aa({},n.attrs),a)].concat(Eb(i)))}var hO=!1;try{hO=!0}catch{}function rG(){if(!hO&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function OE(e){if(e&&Hg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Mb.icon)return Mb.icon(e);if(e===null)return null;if(e&&Hg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function hy(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?cu({},e,t):{}}var Rf=me.forwardRef(function(e,t){var r=e.icon,i=e.mask,n=e.symbol,s=e.className,o=e.title,a=e.titleId,l=e.maskId,c=OE(r),h=hy("classes",[].concat(Eb(Qj(e)),Eb(s.split(" ")))),u=hy("transform",typeof e.transform=="string"?Mb.transform(e.transform):e.transform),d=hy("mask",OE(i)),f=Fj(c,aa(aa(aa(aa({},h),u),d),{},{symbol:n,title:o,titleId:a,maskId:l}));if(!f)return rG("Could not find icon",c),null;var m=f.abstract,p={ref:t};return Object.keys(e).forEach(function(g){Rf.defaultProps.hasOwnProperty(g)||(p[g]=e[g])}),iG(m[0],p)});Rf.displayName="FontAwesomeIcon";Rf.propTypes={beat:pt.exports.bool,border:pt.exports.bool,beatFade:pt.exports.bool,bounce:pt.exports.bool,className:pt.exports.string,fade:pt.exports.bool,flash:pt.exports.bool,mask:pt.exports.oneOfType([pt.exports.object,pt.exports.array,pt.exports.string]),maskId:pt.exports.string,fixedWidth:pt.exports.bool,inverse:pt.exports.bool,flip:pt.exports.oneOf([!0,!1,"horizontal","vertical","both"]),icon:pt.exports.oneOfType([pt.exports.object,pt.exports.array,pt.exports.string]),listItem:pt.exports.bool,pull:pt.exports.oneOf(["right","left"]),pulse:pt.exports.bool,rotation:pt.exports.oneOf([0,90,180,270]),shake:pt.exports.bool,size:pt.exports.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:pt.exports.bool,spinPulse:pt.exports.bool,spinReverse:pt.exports.bool,symbol:pt.exports.oneOfType([pt.exports.bool,pt.exports.string]),title:pt.exports.string,titleId:pt.exports.string,transform:pt.exports.oneOfType([pt.exports.string,pt.exports.object]),swapOpacity:pt.exports.bool};Rf.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var iG=dO.bind(null,me.createElement),nG={prefix:"fas",iconName:"angle-right",icon:[320,512,[8250],"f105","M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]};const Tp=({title:e})=>Ne(Df,{children:[z(Rf,{icon:nG,className:"icon"}),z(Sn,{x:.5}),z(Kt,{children:e})]}),sG=()=>Ne($n,{children:[z(Sn,{y:2}),z(Kt,{weight:"semibold",children:"Our Newsletter"}),z(Kt,{children:"Subscribe to the newsletter to keep in touch with NFarm"}),z(qh,{type:"email","aria-label":"subscribe input",placeholder:"example@email.com",size:"md",css:{mt:"0.5rem"},contentRight:z(Ua,{size:"md",auto:!0,css:{bg:"#115F43"},children:"Send"})})]}),oG=()=>z($n,{children:Ne("footer",{className:"flex flex-col w-full sm:flex-row justify-around mt-10 sm:mt-20 bg-[#147452]",children:[Ne("div",{className:"flex flex-col justify-center items-center sm:mb-10",children:[z("div",{className:"footer-line mt-5"}),z("p",{className:"text-2xl font-bold",children:"NFarm"}),z("p",{children:"You, Your Cattle & The System"}),z(sG,{})]}),Ne("div",{className:"flex flex-col justify-center items-center mt-8 mb-8",children:[z("p",{className:"text-xl",children:"Useful Links"}),z(Tp,{title:"Home"}),z(Tp,{title:"About us"}),z(Tp,{title:"Features"}),z(Tp,{title:"Our Team"})]})]})}),aG="modulepreload",lG=function(e){return"/"+e},BE={},fO=function(t,r,i){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=lG(n),n in BE)return;BE[n]=!0;const s=n.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":aG,s||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),s)return new Promise((l,c)=>{a.addEventListener("load",l),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};var cG=Object.create,P_=Object.defineProperty,uG=Object.getOwnPropertyDescriptor,dG=Object.getOwnPropertyNames,hG=Object.getPrototypeOf,fG=Object.prototype.hasOwnProperty,pO=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pG=(e,t)=>{for(var r in t)P_(e,r,{get:t[r],enumerable:!0})},mG=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of dG(t))!fG.call(e,n)&&n!==r&&P_(e,n,{get:()=>t[n],enumerable:!(i=uG(t,n))||i.enumerable});return e},mO=(e,t,r)=>(r=e!=null?cG(hG(e)):{},mG(t||!e||!e.__esModule?P_(r,"default",{value:e,enumerable:!0}):r,e)),gG=pO(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var u=this||r;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||r;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var m=d._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=d._howls[f]._soundById(m[p]);g&&g._node&&(g._node.volume=g._volume*u)}return d}return d._volume},mute:function(u){var d=this||r;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var m=d._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=d._howls[f]._soundById(m[p]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return d},stop:function(){for(var u=this||r,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||r,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||r)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||r;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),m=u._navigator?u._navigator.userAgent:"",p=m.match(/OPR\/([0-6].)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,v=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,y=m.match(/Version\/(.*?) /),b=v&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!g&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||r;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,u._releaseHtml5Audio(m)}catch{u.noAudio=!0;break}for(var p=0;p<u._howls.length;p++)if(!u._howls[p]._webAudio)for(var g=u._howls[p]._getSoundIds(),v=0;v<g.length;v++){var y=u._howls[p]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var b=u.ctx.createBufferSource();b.buffer=u._scratchBuffer,b.connect(u.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),b.onended=function(){b.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var x=0;x<u._howls.length;x++)u._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||r;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||r;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var m=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(m,m)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!r.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var r=new t,i=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};i.prototype={init:function(u){var d=this;return r.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(r.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var m,p;if(u._format&&u._format[f])m=u._format[f];else{if(p=u._src[f],typeof p!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(p),m||(m=/\.([^.]+)$/.exec(p.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&r.codecs(m)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new n(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,m=null;if(typeof u=="number")m=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var p=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(p++,m=f._sounds[g]._id);p===1?u=null:m=null}}var v=m?f._soundById(m):f._inactiveSound();if(!v)return null;if(m&&!u&&(u=v._sprite||"__default"),f._state!=="loaded"){v._sprite=u,v._ended=!1;var y=v._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(m&&!v._paused)return d||f._loadQueue("play"),v._id;f._webAudio&&r._autoResume();var b=Math.max(0,v._seek>0?v._seek:f._sprite[u][0]/1e3),x=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-b),A=x*1e3/Math.abs(v._rate),S=f._sprite[u][0]/1e3,_=(f._sprite[u][0]+f._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var w=function(){v._paused=!1,v._seek=b,v._start=S,v._stop=_,v._loop=!!(v._loop||f._sprite[u][2])};if(b>=_){f._ended(v);return}var M=v._node;if(f._webAudio){var C=function(){f._playLock=!1,w(),f._refreshBuffer(v);var D=v._muted||f._muted?0:v._volume;M.gain.setValueAtTime(D,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof M.bufferSource.start>"u"?v._loop?M.bufferSource.noteGrainOn(0,b,86400):M.bufferSource.noteGrainOn(0,b,x):v._loop?M.bufferSource.start(0,b,86400):M.bufferSource.start(0,b,x),A!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),A)),d||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?C():(f._playLock=!0,f.once("resume",C),f._clearTimer(v._id))}else{var E=function(){M.currentTime=b,M.muted=v._muted||f._muted||r._muted||M.muted,M.volume=v._volume*r.volume(),M.playbackRate=v._rate;try{var D=M.play();if(D&&typeof Promise<"u"&&(D instanceof Promise||typeof D.then=="function")?(f._playLock=!0,w(),D.then(function(){f._playLock=!1,M._unlocked=!0,d?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):d||(f._playLock=!1,w(),f._emit("play",v._id)),M.playbackRate=v._rate,M.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),A):(f._endTimers[v._id]=function(){f._ended(v),M.removeEventListener("ended",f._endTimers[v._id],!1)},M.addEventListener("ended",f._endTimers[v._id],!1))}catch(W){f._emit("playerror",v._id,W)}};M.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(M.src=f._src,M.load());var $=window&&window.ejecta||!M.readyState&&r._navigator.isCocoonJS;if(M.readyState>=3||$)E();else{f._playLock=!0,f._state="loading";var P=function(){f._state="loaded",E(),M.removeEventListener(r._canPlayEvent,P,!1)};M.addEventListener(r._canPlayEvent,P,!1),f._clearTimer(v._id)}}return v._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),m=0;m<f.length;m++){d._clearTimer(f[m]);var p=d._soundById(f[m]);if(p&&!p._paused&&(p._seek=d.seek(f[m]),p._rateSeek=0,p._paused=!0,d._stopFade(f[m]),p._node))if(d._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),d._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||d._emit("pause",p?p._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var m=f._getSoundIds(u),p=0;p<m.length;p++){f._clearTimer(m[p]);var g=f._soundById(m[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[p]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),d||f._emit("stop",g._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var m=f._getSoundIds(d),p=0;p<m.length;p++){var g=f._soundById(m[p]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,d=arguments,f,m;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var p=u._getSoundIds(),g=p.indexOf(d[0]);g>=0?m=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),m=parseInt(d[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof m>"u"&&(u._volume=f),m=u._getSoundIds(m);for(var y=0;y<m.length;y++)v=u._soundById(m[y]),v&&(v._volume=f,d[2]||u._stopFade(m[y]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*r.volume()),u._emit("volume",v._id))}else return v=m?u._soundById(m):u._sounds[0],v?v._volume:0;return u},fade:function(u,d,f,m){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(u,d,f,m)}}),p;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),p.volume(u,m);for(var g=p._getSoundIds(m),v=0;v<g.length;v++){var y=p._soundById(g[v]);if(y){if(m||p._stopFade(g[v]),p._webAudio&&!y._muted){var b=r.ctx.currentTime,x=b+f/1e3;y._volume=u,y._node.gain.setValueAtTime(u,b),y._node.gain.linearRampToValueAtTime(d,x)}p._startFadeInterval(y,u,d,f,g[v],typeof m>"u")}}return p},_startFadeInterval:function(u,d,f,m,p,g){var v=this,y=d,b=f-d,x=Math.abs(b/.01),A=Math.max(4,x>0?m/x:m),S=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var _=(Date.now()-S)/m;S=Date.now(),y+=b*_,y=Math.round(y*100)/100,b<0?y=Math.max(f,y):y=Math.min(f,y),v._webAudio?u._volume=y:v.volume(y,u._id,!0),g&&(v._volume=y),(f<d&&y<=f||f>d&&y>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(f,u._id),v._emit("fade",u._id))},A)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,m,p;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return p=u._soundById(parseInt(d[0],10)),p?p._loop:!1;else d.length===2&&(f=d[0],m=parseInt(d[1],10));for(var g=u._getSoundIds(m),v=0;v<g.length;v++)p=u._soundById(g[v]),p&&(p._loop=f,u._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=f,f&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,d=arguments,f,m;if(d.length===0)m=u._sounds[0]._id;else if(d.length===1){var p=u._getSoundIds(),g=p.indexOf(d[0]);g>=0?m=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),m=parseInt(d[1],10));var v;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof m>"u"&&(u._rate=f),m=u._getSoundIds(m);for(var y=0;y<m.length;y++)if(v=u._soundById(m[y]),v){u.playing(m[y])&&(v._rateSeek=u.seek(m[y]),v._playStart=u._webAudio?r.ctx.currentTime:v._playStart),v._rate=f,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):v._node&&(v._node.playbackRate=f);var b=u.seek(m[y]),x=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-b,A=x*1e3/Math.abs(v._rate);(u._endTimers[m[y]]||!v._paused)&&(u._clearTimer(m[y]),u._endTimers[m[y]]=setTimeout(u._ended.bind(u,v),A)),u._emit("rate",v._id)}}else return v=u._soundById(m),v?v._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,m;if(d.length===0)u._sounds.length&&(m=u._sounds[0]._id);else if(d.length===1){var p=u._getSoundIds(),g=p.indexOf(d[0]);g>=0?m=parseInt(d[0],10):u._sounds.length&&(m=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),m=parseInt(d[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var v=u._soundById(m);if(v)if(typeof f=="number"&&f>=0){var y=u.playing(m);y&&u.pause(m,!0),v._seek=f,v._ended=!1,u._clearTimer(m),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var b=function(){y&&u.play(m,!0),u._emit("seek",m)};if(y&&!u._webAudio){var x=function(){u._playLock?setTimeout(x,0):b()};setTimeout(x,0)}else b()}else if(u._webAudio){var A=u.playing(m)?r.ctx.currentTime-v._playStart:0,S=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(S+A*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var m=0;m<d._sounds.length;m++)if(!d._sounds[m]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,m=d._soundById(u);return m&&(f=d._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(r._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),r._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var m=r._howls.indexOf(u);m>=0&&r._howls.splice(m,1);var p=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===u._src||u._src.indexOf(r._howls[f]._src)>=0){p=!1;break}return s&&p&&delete s[u._src],r.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,m){var p=this,g=p["_on"+u];return typeof d=="function"&&g.push(m?{id:f,fn:d,once:m}:{id:f,fn:d}),p},off:function(u,d,f){var m=this,p=m["_on"+u],g=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(g=0;g<p.length;g++){var v=f===p[g].id;if(d===p[g].fn&&v||!d&&v){p.splice(g,1);break}}else if(u)m["_on"+u]=[];else{var y=Object.keys(m);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(m[y[g]])&&(m[y[g]]=[])}return m},once:function(u,d,f){var m=this;return m.on(u,d,f,1),m},_emit:function(u,d,f){for(var m=this,p=m["_on"+u],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===d||u==="load")&&(setTimeout(function(v){v.call(this,d,f)}.bind(m,p[g].fn),0),p[g].once&&m.off(u,p[g].fn,p[g].id));return m._loadQueue(u),m},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var m=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&m&&d.stop(u._id,!0).play(u._id),d._webAudio&&m){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=r.ctx.currentTime;var p=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),p)}return d._webAudio&&!m&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),r._autoSuspend()),!d._webAudio&&!m&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new n(u)},_drain:function(){var u=this,d=u._pool,f=0,m=0;if(!(u._sounds.length<d)){for(m=0;m<u._sounds.length;m++)u._sounds[m]._ended&&f++;for(m=u._sounds.length-1;m>=0;m--){if(f<=d)return;u._sounds[m]._ended&&(u._webAudio&&u._sounds[m]._node&&u._sounds[m]._node.disconnect(0),u._sounds.splice(m,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],m=0;m<d._sounds.length;m++)f.push(d._sounds[m]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=r.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,r.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=r._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(u){this._parent=u,this.init()};n.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=r._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),u._node.gain.setValueAtTime(f,r.ctx.currentTime),u._node.paused=!0,u._node.connect(r.masterGain)):r.noAudio||(u._node=r._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(r._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*r.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(r._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),m=new Uint8Array(f.length),p=0;p<f.length;++p)m[p]=f.charCodeAt(p);l(m.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,d,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},m=function(p){p&&d._sounds.length>0?(s[d._src]=p,c(d,p)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(u).then(m).catch(f):r.ctx.decodeAudioData(u,m,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var m=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!m&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:i}}),typeof e<"u"&&(e.Howler=r,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=i,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=i,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(r);return i},HowlerGlobal.prototype.pos=function(r,i,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,n=typeof n!="number"?s._pos[2]:n,typeof r=="number")s._pos=[r,i,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,i,n,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(i=typeof i!="number"?c[1]:i,n=typeof n!="number"?c[2]:n,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof r=="number")l._orientation=[r,i,n,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,i,n,s,o,a);else return c;return l},Howl.prototype.init=function(r){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],r.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(r,i)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof r=="number")n._stereo=r,n._pos=[r,0,0];else return n._stereo;for(var o=n._getSoundIds(i),a=0;a<o.length;a++){var l=n._soundById(o[a]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(r,i,n,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,i,n,s)}}),o;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof r=="number")o._pos=[r,i,n];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof r=="number")c._pos=[r,i,n],c._node&&((!c._panner||c._panner.pan)&&t(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setPosition(r,i,n)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(r,i,n,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,i,n,s)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,n=typeof n!="number"?o._orientation[2]:n,typeof s>"u")if(typeof r=="number")o._orientation=[r,i,n];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof r=="number")c._orientation=[r,i,n],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),t(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):c._panner.setOrientation(r,i,n)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,i=arguments,n,s,o;if(!r._webAudio)return r;if(i.length===0)return r._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),r._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(i[0],10)),o?o._pannerAttr:r._pannerAttr;else i.length===2&&(n=i[0],s=parseInt(i[1],10));for(var a=r._getSoundIds(s),l=0;l<a.length;l++)if(o=r._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:c.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:c.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:c.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:c.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:c.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,r.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),r.call(this)}}(Sound.prototype.reset);var t=function(r,i){i=i||"spatial",i==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),vG=pO((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,s,o,a){if(n=n===void 0||n,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,f,m,p,g,v,y,b,x=i[0].length,A=i.length;if(A<x)throw new TypeError("Invalid matrix: m < n");for(var S=[],_=[],w=[],M=n==="f"?A:x,C=v=m=0;C<A;C++)_[C]=new Array(M).fill(0);for(C=0;C<x;C++)w[C]=new Array(x).fill(0);var E,$=new Array(x).fill(0);for(C=0;C<A;C++)for(l=0;l<x;l++)_[C][l]=i[C][l];for(C=0;C<x;C++){for(S[C]=m,g=0,h=C+1,l=C;l<A;l++)g+=Math.pow(_[l][C],2);if(g<a)m=0;else for(p=(f=_[C][C])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,_[C][C]=f-m,l=h;l<x;l++){for(g=0,c=C;c<A;c++)g+=_[c][C]*_[c][l];for(f=g/p,c=C;c<A;c++)_[c][l]=_[c][l]+f*_[c][C]}for($[C]=m,g=0,l=h;l<x;l++)g+=Math.pow(_[C][l],2);if(g<a)m=0;else{for(p=(f=_[C][C+1])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,_[C][C+1]=f-m,l=h;l<x;l++)S[l]=_[C][l]/p;for(l=h;l<A;l++){for(g=0,c=h;c<x;c++)g+=_[l][c]*_[C][c];for(c=h;c<x;c++)_[l][c]=_[l][c]+g*S[c]}}v<(y=Math.abs($[C])+Math.abs(S[C]))&&(v=y)}if(s)for(C=x-1;0<=C;C--){if(m!==0){for(p=_[C][C+1]*m,l=h;l<x;l++)w[l][C]=_[C][l]/p;for(l=h;l<x;l++){for(g=0,c=h;c<x;c++)g+=_[C][c]*w[c][l];for(c=h;c<x;c++)w[c][l]=w[c][l]+g*w[c][C]}}for(l=h;l<x;l++)w[C][l]=0,w[l][C]=0;w[C][C]=1,m=S[C],h=C}if(n){if(n==="f")for(C=x;C<A;C++){for(l=x;l<A;l++)_[C][l]=0;_[C][C]=1}for(C=x-1;0<=C;C--){for(h=C+1,m=$[C],l=h;l<M;l++)_[C][l]=0;if(m!==0){for(p=_[C][C]*m,l=h;l<M;l++){for(g=0,c=h;c<A;c++)g+=_[c][C]*_[c][l];for(f=g/p,c=C;c<A;c++)_[c][l]=_[c][l]+f*_[c][C]}for(l=C;l<A;l++)_[l][C]=_[l][C]/m}else for(l=C;l<A;l++)_[l][C]=0;_[C][C]=_[C][C]+1}}for(o*=v,c=x-1;0<=c;c--)for(var P=0;P<50;P++){for(E=!1,h=c;0<=h;h--){if(Math.abs(S[h])<=o){E=!0;break}if(Math.abs($[h-1])<=o)break}if(!E){for(d=0,u=h-(g=1),C=h;C<c+1&&(f=g*S[C],S[C]=d*S[C],!(Math.abs(f)<=o));C++)if(m=$[C],$[C]=Math.sqrt(f*f+m*m),d=m/(p=$[C]),g=-f/p,n)for(l=0;l<A;l++)y=_[l][u],b=_[l][C],_[l][u]=y*d+b*g,_[l][C]=-y*g+b*d}if(b=$[c],h===c){if(b<0&&($[c]=-b,s))for(l=0;l<x;l++)w[l][c]=-w[l][c];break}for(v=$[h],f=(((y=$[c-1])-b)*(y+b)+((m=S[c-1])-(p=S[c]))*(m+p))/(2*p*y),m=Math.sqrt(f*f+1),f=((v-b)*(v+b)+p*(y/(f<0?f-m:f+m)-p))/v,C=h+(g=d=1);C<c+1;C++){if(m=S[C],y=$[C],p=g*m,m*=d,b=Math.sqrt(f*f+p*p),f=v*(d=f/(S[C-1]=b))+m*(g=p/b),m=-v*g+m*d,p=y*g,y*=d,s)for(l=0;l<x;l++)v=w[l][C-1],b=w[l][C],w[l][C-1]=v*d+b*g,w[l][C]=-v*g+b*d;if(b=Math.sqrt(f*f+p*p),f=(d=f/($[C-1]=b))*m+(g=p/b)*y,v=-g*m+d*y,n)for(l=0;l<A;l++)y=_[l][C-1],b=_[l][C],_[l][C-1]=y*d+b*g,_[l][C]=-y*g+b*d}S[h]=0,S[c]=f,$[c]=v}for(C=0;C<x;C++)$[C]<o&&($[C]=0);return{u:_,q:$,v:w}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),kf="142",dn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yG=0,zE=1,xG=2,D_=1,gO=2,eh=3,Ao=0,Xr=1,_i=2,bG=1,Qr=0,wl=1,NE=2,FE=3,UE=4,wG=5,Nc=100,SG=101,_G=102,HE=103,VE=104,AG=200,MG=201,EG=202,CG=203,vO=204,yO=205,TG=206,PG=207,DG=208,LG=209,$G=210,IG=0,RG=1,kG=2,Tb=3,OG=4,BG=5,zG=6,NG=7,xO=0,FG=1,UG=2,ho=0,HG=1,VG=2,WG=3,jG=4,GG=5,bO=300,Nl=301,Fl=302,Pb=303,Db=304,Of=306,nf=1e3,Zi=1001,Lb=1002,ur=1003,WE=1004,jE=1005,Bt=1006,YG=1007,Bf=1008,gi=1009,KG=1010,XG=1011,wO=1012,qG=1013,la=1014,ca=1015,sf=1016,QG=1017,ZG=1018,Sl=1020,JG=1021,eY=1022,_s=1023,tY=1024,rY=1025,_l=1026,Ul=1027,iY=1028,nY=1029,sY=1030,oY=1031,aY=1033,fy=33776,py=33777,my=33778,gy=33779,GE=35840,YE=35841,KE=35842,XE=35843,lY=36196,qE=37492,QE=37496,ZE=37808,JE=37809,eC=37810,tC=37811,rC=37812,iC=37813,nC=37814,sC=37815,oC=37816,aC=37817,lC=37818,cC=37819,uC=37820,dC=37821,hC=36492,ks=3e3,ht=3001,$o=3200,SO=3201,cY=0,uY=1,io="srgb",fl="srgb-linear",vy=7680,dY=519,$b=35044,fC="300 es",Ib=1035,ki=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],pC=1234567,wh=Math.PI/180,of=180/Math.PI;function Ls(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ii[e&255]+ii[e>>8&255]+ii[e>>16&255]+ii[e>>24&255]+"-"+ii[t&255]+ii[t>>8&255]+"-"+ii[t>>16&15|64]+ii[t>>24&255]+"-"+ii[r&63|128]+ii[r>>8&255]+"-"+ii[r>>16&255]+ii[r>>24&255]+ii[i&255]+ii[i>>8&255]+ii[i>>16&255]+ii[i>>24&255]).toLowerCase()}function Lr(e,t,r){return Math.max(t,Math.min(r,e))}function L_(e,t){return(e%t+t)%t}function hY(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function fY(e,t,r){return e!==t?(r-e)/(t-e):0}function Sh(e,t,r){return(1-r)*e+r*t}function pY(e,t,r,i){return Sh(e,t,1-Math.exp(-r*i))}function mY(e,t=1){return t-Math.abs(L_(e,t*2)-t)}function gY(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function vY(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function yY(e,t){return e+Math.floor(Math.random()*(t-e+1))}function xY(e,t){return e+Math.random()*(t-e)}function bY(e){return e*(.5-Math.random())}function wY(e){e!==void 0&&(pC=e);let t=pC+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function SY(e){return e*wh}function _Y(e){return e*of}function Rb(e){return(e&e-1)===0&&e!==0}function AY(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Vg(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function MY(e,t,r,i,n){let s=Math.cos,o=Math.sin,a=s(r/2),l=o(r/2),c=s((t+i)/2),h=o((t+i)/2),u=s((t-i)/2),d=o((t-i)/2),f=s((i-t)/2),m=o((i-t)/2);switch(n){case"XYX":e.set(a*h,l*u,l*d,a*c);break;case"YZY":e.set(l*d,a*h,l*u,a*c);break;case"ZXZ":e.set(l*u,l*d,a*h,a*c);break;case"XZX":e.set(a*h,l*m,l*f,a*c);break;case"YXY":e.set(l*f,a*h,l*m,a*c);break;case"ZYZ":e.set(l*m,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function EY(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function CY(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var vt=Object.freeze({__proto__:null,DEG2RAD:wh,RAD2DEG:of,generateUUID:Ls,clamp:Lr,euclideanModulo:L_,mapLinear:hY,inverseLerp:fY,lerp:Sh,damp:pY,pingpong:mY,smoothstep:gY,smootherstep:vY,randInt:yY,randFloat:xY,randFloatSpread:bY,seededRandom:wY,degToRad:SY,radToDeg:_Y,isPowerOfTwo:Rb,ceilPowerOfTwo:AY,floorPowerOfTwo:Vg,setQuaternionFromProperEuler:MY,normalize:CY,denormalize:EY}),K=class{constructor(e=0,t=0){K.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*r-s*i+e.x,this.y=n*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},hi=class{constructor(){hi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,n,s,o,a,l){let c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=n,c[5]=a,c[6]=r,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],h=r[7],u=r[2],d=r[5],f=r[8],m=i[0],p=i[3],g=i[6],v=i[1],y=i[4],b=i[7],x=i[2],A=i[5],S=i[8];return n[0]=s*m+o*v+a*x,n[3]=s*p+o*y+a*A,n[6]=s*g+o*b+a*S,n[1]=l*m+c*v+h*x,n[4]=l*p+c*y+h*A,n[7]=l*g+c*b+h*S,n[2]=u*m+d*v+f*x,n[5]=u*p+d*y+f*A,n[8]=u*g+d*b+f*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-r*n*c+r*o*a+i*n*l-i*s*a}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=c*s-o*l,u=o*a-c*n,d=l*n-s*a,f=t*h+r*u+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return e[0]=h*m,e[1]=(i*l-c*r)*m,e[2]=(o*r-i*s)*m,e[3]=u*m,e[4]=(c*t-i*a)*m,e[5]=(i*n-o*t)*m,e[6]=d*m,e[7]=(r*a-l*t)*m,e[8]=(s*t-r*n)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,s,o){let a=Math.cos(n),l=Math.sin(n);return this.set(r*a,r*l,-r*(a*s+l*o)+s+e,-i*l,i*a,-i*(-l*s+a*o)+o+t,0,0,1),this}scale(e,t){let r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){let t=Math.cos(e),r=Math.sin(e),i=this.elements,n=i[0],s=i[3],o=i[6],a=i[1],l=i[4],c=i[7];return i[0]=t*n+r*a,i[3]=t*s+r*l,i[6]=t*o+r*c,i[1]=-r*n+t*a,i[4]=-r*s+t*l,i[7]=-r*o+t*c,this}translate(e,t){let r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function _O(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}var TY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Pp(e,t){return new TY[e](t)}function Wg(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Al(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Xm(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var yy={[io]:{[fl]:Al},[fl]:{[io]:Xm}},kn={legacyMode:!0,get workingColorSpace(){return fl},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(yy[t]&&yy[t][r]!==void 0){let i=yy[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},AO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tr={r:0,g:0,b:0},On={h:0,s:0,l:0},Dp={h:0,s:0,l:0};function xy(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function Lp(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var st=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=io){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=fl){return this.r=e,this.g=t,this.b=r,kn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=fl){if(e=L_(e,1),t=Lr(t,0,1),r=Lr(r,0,1),t===0)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,s=2*r-n;this.r=xy(s,n,e+1/3),this.g=xy(s,n,e),this.b=xy(s,n,e-1/3)}return kn.toWorkingColorSpace(this,i),this}setStyle(e,t=io){function r(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,kn.toWorkingColorSpace(this,t),r(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,kn.toWorkingColorSpace(this,t),r(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let a=parseFloat(n[1])/360,l=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return r(n[4]),this.setHSL(a,l,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],s=n.length;if(s===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,kn.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,kn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=io){let r=AO[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Al(e.r),this.g=Al(e.g),this.b=Al(e.b),this}copyLinearToSRGB(e){return this.r=Xm(e.r),this.g=Xm(e.g),this.b=Xm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=io){return kn.fromWorkingColorSpace(Lp(this,Tr),e),Lr(Tr.r*255,0,255)<<16^Lr(Tr.g*255,0,255)<<8^Lr(Tr.b*255,0,255)<<0}getHexString(e=io){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fl){kn.fromWorkingColorSpace(Lp(this,Tr),t);let r=Tr.r,i=Tr.g,n=Tr.b,s=Math.max(r,i,n),o=Math.min(r,i,n),a,l,c=(o+s)/2;if(o===s)a=0,l=0;else{let h=s-o;switch(l=c<=.5?h/(s+o):h/(2-s-o),s){case r:a=(i-n)/h+(i<n?6:0);break;case i:a=(n-r)/h+2;break;case n:a=(r-i)/h+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=fl){return kn.fromWorkingColorSpace(Lp(this,Tr),t),e.r=Tr.r,e.g=Tr.g,e.b=Tr.b,e}getStyle(e=io){return kn.fromWorkingColorSpace(Lp(this,Tr),e),e!==io?`color(${e} ${Tr.r} ${Tr.g} ${Tr.b})`:`rgb(${Tr.r*255|0},${Tr.g*255|0},${Tr.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(On),On.h+=e,On.s+=t,On.l+=r,this.setHSL(On.h,On.s,On.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(On),e.getHSL(Dp);let r=Sh(On.h,Dp.h,t),i=Sh(On.s,Dp.s,t),n=Sh(On.l,Dp.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};st.NAMES=AO;var hc,MO=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{hc===void 0&&(hc=Wg("canvas")),hc.width=e.width,hc.height=e.height;let r=hc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=hc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Wg("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let s=0;s<n.length;s++)n[s]=Al(n[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Al(t[r]/255)*255):t[r]=Al(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},EO=class{constructor(e=null){this.isSource=!0,this.uuid=Ls(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?n.push(by(i[s].image)):n.push(by(i[s]))}else n=by(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function by(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?MO.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var PY=0,Ti=class extends ki{constructor(e=Ti.DEFAULT_IMAGE,t=Ti.DEFAULT_MAPPING,r=Zi,i=Zi,n=Bt,s=Bf,o=_s,a=gi,l=1,c=ks){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:PY++}),this.uuid=Ls(),this.name="",this.source=new EO(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new K(0,0),this.repeat=new K(1,1),this.center=new K(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==bO)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nf:e.x=e.x-Math.floor(e.x);break;case Zi:e.x=e.x<0?0:1;break;case Lb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case nf:e.y=e.y-Math.floor(e.y);break;case Zi:e.y=e.y<0?0:1;break;case Lb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Ti.DEFAULT_IMAGE=null;Ti.DEFAULT_MAPPING=bO;var ct=class{constructor(e=0,t=0,r=0,i=1){ct.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*n,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*n,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*n,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],f=s[6],m=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-f)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+f)<.1&&Math.abs(o+h+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(o+1)/2,v=(h+1)/2,y=(m+1)/2,b=(a+c)/4,x=(l+d)/4,A=(u+f)/4;return g>v&&g>y?g<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=b/r,n=x/r):v>y?v<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(v),r=b/i,n=A/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=x/n,i=A/n),this.set(r,i,n,t),this}let p=Math.sqrt((f-u)*(f-u)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(p)<.001&&(p=1),this.x=(f-u)/p,this.y=(l-d)/p,this.z=(c-a)/p,this.w=Math.acos((o+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},br=class extends ki{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ct(0,0,e,t),this.scissorTest=!1,this.viewport=new ct(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new Ti(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Bt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new EO(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},CO=class extends Ti{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ur,this.minFilter=ur,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},DY=class extends Ti{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ur,this.minFilter=ur,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Yt=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,n,s,o){let a=r[i+0],l=r[i+1],c=r[i+2],h=r[i+3],u=n[s+0],d=n[s+1],f=n[s+2],m=n[s+3];if(o===0){e[t+0]=a,e[t+1]=l,e[t+2]=c,e[t+3]=h;return}if(o===1){e[t+0]=u,e[t+1]=d,e[t+2]=f,e[t+3]=m;return}if(h!==m||a!==u||l!==d||c!==f){let p=1-o,g=a*u+l*d+c*f+h*m,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let x=Math.sqrt(y),A=Math.atan2(x,g*v);p=Math.sin(p*A)/x,o=Math.sin(o*A)/x}let b=o*v;if(a=a*p+u*b,l=l*p+d*b,c=c*p+f*b,h=h*p+m*b,p===1-o){let x=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=x,l*=x,c*=x,h*=x}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,n,s){let o=r[i],a=r[i+1],l=r[i+2],c=r[i+3],h=n[s],u=n[s+1],d=n[s+2],f=n[s+3];return e[t]=o*f+c*h+a*d-l*u,e[t+1]=a*f+c*u+l*h-o*d,e[t+2]=l*f+c*d+o*u-a*h,e[t+3]=c*f-o*h-a*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let r=e._x,i=e._y,n=e._z,s=e._order,o=Math.cos,a=Math.sin,l=o(r/2),c=o(i/2),h=o(n/2),u=a(r/2),d=a(i/2),f=a(n/2);switch(s){case"XYZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"YXZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"ZXY":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"ZYX":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"YZX":this._x=u*c*h+l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h-u*d*f;break;case"XZY":this._x=u*c*h-l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h+u*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],h=t[10],u=r+o+h;if(u>0){let d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(c-a)*d,this._y=(n-l)*d,this._z=(s-i)*d}else if(r>o&&r>h){let d=2*Math.sqrt(1+r-o-h);this._w=(c-a)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(n+l)/d}else if(o>h){let d=2*Math.sqrt(1+o-r-h);this._w=(n-l)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(a+c)/d}else{let d=2*Math.sqrt(1+h-r-o);this._w=(s-i)/d,this._x=(n+l)/d,this._y=(a+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Lr(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=r*c+s*o+i*l-n*a,this._y=i*c+s*a+n*o-r*l,this._z=n*c+s*l+r*a-i*o,this._w=s*c-r*o-i*a-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,s=this._w,o=s*e._w+r*e._x+i*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=n,this;let a=1-o*o;if(a<=Number.EPSILON){let d=1-t;return this._w=d*s+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=s*h+this._w*u,this._x=r*h+this._x*u,this._y=i*h+this._y*u,this._z=n*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},T=class{constructor(e=0,t=0,r=0){T.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(mC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mC.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,s=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*s,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,s=e.y,o=e.z,a=e.w,l=a*t+s*i-o*r,c=a*r+o*t-n*i,h=a*i+n*r-s*t,u=-n*t-s*r-o*i;return this.x=l*a+u*-n+c*-o-h*-s,this.y=c*a+u*-s+h*-n-l*-o,this.z=h*a+u*-o+l*-s-c*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,s=t.x,o=t.y,a=t.z;return this.x=i*a-n*o,this.y=n*s-r*a,this.z=r*o-i*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return wy.copy(this).projectOnVector(e),this.sub(wy)}reflect(e){return this.sub(wy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Lr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},wy=new T,mC=new Yt,zr=class{constructor(e=new T(1/0,1/0,1/0),t=new T(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=3){let c=e[a],h=e[a+1],u=e[a+2];c<t&&(t=c),h<r&&(r=h),u<i&&(i=u),c>n&&(n=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(t,r,i),this.max.set(n,s,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.count;a<l;a++){let c=e.getX(a),h=e.getY(a),u=e.getZ(a);c<t&&(t=c),h<r&&(r=h),u<i&&(i=u),c>n&&(n=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(t,r,i),this.max.set(n,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Ga.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let s=0,o=n.count;s<o;s++)Ga.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Ga)}else r.boundingBox===null&&r.computeBoundingBox(),Sy.copy(r.boundingBox),Sy.applyMatrix4(e.matrixWorld),this.union(Sy);let i=e.children;for(let n=0,s=i.length;n<s;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ga),Ga.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dd),$p.subVectors(this.max,Dd),fc.subVectors(e.a,Dd),pc.subVectors(e.b,Dd),mc.subVectors(e.c,Dd),Bo.subVectors(pc,fc),zo.subVectors(mc,pc),Ya.subVectors(fc,mc);let t=[0,-Bo.z,Bo.y,0,-zo.z,zo.y,0,-Ya.z,Ya.y,Bo.z,0,-Bo.x,zo.z,0,-zo.x,Ya.z,0,-Ya.x,-Bo.y,Bo.x,0,-zo.y,zo.x,0,-Ya.y,Ya.x,0];return!_y(t,fc,pc,mc,$p)||(t=[1,0,0,0,1,0,0,0,1],!_y(t,fc,pc,mc,$p))?!1:(Ip.crossVectors(Bo,zo),t=[Ip.x,Ip.y,Ip.z],_y(t,fc,pc,mc,$p))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ga.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ga).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ys[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ys[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ys[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ys[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ys[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ys[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ys[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ys[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ys),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ys=[new T,new T,new T,new T,new T,new T,new T,new T],Ga=new T,Sy=new zr,fc=new T,pc=new T,mc=new T,Bo=new T,zo=new T,Ya=new T,Dd=new T,$p=new T,Ip=new T,Ka=new T;function _y(e,t,r,i,n){for(let s=0,o=e.length-3;s<=o;s+=3){Ka.fromArray(e,s);let a=n.x*Math.abs(Ka.x)+n.y*Math.abs(Ka.y)+n.z*Math.abs(Ka.z),l=t.dot(Ka),c=r.dot(Ka),h=i.dot(Ka);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}var LY=new zr,gC=new T,Rp=new T,Ay=new T,ts=class{constructor(e=new T,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):LY.setFromPoints(e).getCenter(r);let i=0;for(let n=0,s=e.length;n<s;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Ay.subVectors(e,this.center);let t=Ay.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(Ay.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?Rp.set(0,0,1).multiplyScalar(e.radius):Rp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(gC.copy(e.center).add(Rp)),this.expandByPoint(gC.copy(e.center).sub(Rp)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ks=new T,My=new T,kp=new T,No=new T,Ey=new T,Op=new T,Cy=new T,zf=class{constructor(e=new T,t=new T(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ks)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ks.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ks.copy(this.direction).multiplyScalar(t).add(this.origin),Ks.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){My.copy(e).add(t).multiplyScalar(.5),kp.copy(t).sub(e).normalize(),No.copy(this.origin).sub(My);let n=e.distanceTo(t)*.5,s=-this.direction.dot(kp),o=No.dot(this.direction),a=-No.dot(kp),l=No.lengthSq(),c=Math.abs(1-s*s),h,u,d,f;if(c>0)if(h=s*a-o,u=s*o-a,f=n*c,h>=0)if(u>=-f)if(u<=f){let m=1/c;h*=m,u*=m,d=h*(h+s*u+2*o)+u*(s*h+u+2*a)+l}else u=n,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u=-n,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u<=-f?(h=Math.max(0,-(-s*n+o)),u=h>0?-n:Math.min(Math.max(-n,-a),n),d=-h*h+u*(u+2*a)+l):u<=f?(h=0,u=Math.min(Math.max(-n,-a),n),d=u*(u+2*a)+l):(h=Math.max(0,-(s*n+o)),u=h>0?n:Math.min(Math.max(-n,-a),n),d=-h*h+u*(u+2*a)+l);else u=s>0?-n:n,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(kp).multiplyScalar(u).add(My),d}intersectSphere(e,t){Ks.subVectors(e.center,this.origin);let r=Ks.dot(this.direction),i=Ks.dot(Ks)-r*r,n=e.radius*e.radius;if(i>n)return null;let s=Math.sqrt(n-i),o=r-s,a=r+s;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,s,o,a,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(r=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(r=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),c>=0?(n=(e.min.y-u.y)*c,s=(e.max.y-u.y)*c):(n=(e.max.y-u.y)*c,s=(e.min.y-u.y)*c),r>s||n>i||((n>r||r!==r)&&(r=n),(s<i||i!==i)&&(i=s),h>=0?(o=(e.min.z-u.z)*h,a=(e.max.z-u.z)*h):(o=(e.max.z-u.z)*h,a=(e.min.z-u.z)*h),r>a||o>i)||((o>r||r!==r)&&(r=o),(a<i||i!==i)&&(i=a),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ks)!==null}intersectTriangle(e,t,r,i,n){Ey.subVectors(t,e),Op.subVectors(r,e),Cy.crossVectors(Ey,Op);let s=this.direction.dot(Cy),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;No.subVectors(this.origin,e);let a=o*this.direction.dot(Op.crossVectors(No,Op));if(a<0)return null;let l=o*this.direction.dot(Ey.cross(No));if(l<0||a+l>s)return null;let c=-o*No.dot(Cy);return c<0?null:this.at(c/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},We=class{constructor(){We.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,n,s,o,a,l,c,h,u,d,f,m,p){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=f,g[11]=m,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new We().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/gc.setFromMatrixColumn(e,0).length(),n=1/gc.setFromMatrixColumn(e,1).length(),s=1/gc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,r=e.x,i=e.y,n=e.z,s=Math.cos(r),o=Math.sin(r),a=Math.cos(i),l=Math.sin(i),c=Math.cos(n),h=Math.sin(n);if(e.order==="XYZ"){let u=s*c,d=s*h,f=o*c,m=o*h;t[0]=a*c,t[4]=-a*h,t[8]=l,t[1]=d+f*l,t[5]=u-m*l,t[9]=-o*a,t[2]=m-u*l,t[6]=f+d*l,t[10]=s*a}else if(e.order==="YXZ"){let u=a*c,d=a*h,f=l*c,m=l*h;t[0]=u+m*o,t[4]=f*o-d,t[8]=s*l,t[1]=s*h,t[5]=s*c,t[9]=-o,t[2]=d*o-f,t[6]=m+u*o,t[10]=s*a}else if(e.order==="ZXY"){let u=a*c,d=a*h,f=l*c,m=l*h;t[0]=u-m*o,t[4]=-s*h,t[8]=f+d*o,t[1]=d+f*o,t[5]=s*c,t[9]=m-u*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if(e.order==="ZYX"){let u=s*c,d=s*h,f=o*c,m=o*h;t[0]=a*c,t[4]=f*l-d,t[8]=u*l+m,t[1]=a*h,t[5]=m*l+u,t[9]=d*l-f,t[2]=-l,t[6]=o*a,t[10]=s*a}else if(e.order==="YZX"){let u=s*a,d=s*l,f=o*a,m=o*l;t[0]=a*c,t[4]=m-u*h,t[8]=f*h+d,t[1]=h,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=d*h+f,t[10]=u-m*h}else if(e.order==="XZY"){let u=s*a,d=s*l,f=o*a,m=o*l;t[0]=a*c,t[4]=-h,t[8]=l*c,t[1]=u*h+m,t[5]=s*c,t[9]=d*h-f,t[2]=f*h-d,t[6]=o*c,t[10]=m*h+u}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose($Y,e,IY)}lookAt(e,t,r){let i=this.elements;return Ki.subVectors(e,t),Ki.lengthSq()===0&&(Ki.z=1),Ki.normalize(),Fo.crossVectors(r,Ki),Fo.lengthSq()===0&&(Math.abs(r.z)===1?Ki.x+=1e-4:Ki.z+=1e-4,Ki.normalize(),Fo.crossVectors(r,Ki)),Fo.normalize(),Bp.crossVectors(Ki,Fo),i[0]=Fo.x,i[4]=Bp.x,i[8]=Ki.x,i[1]=Fo.y,i[5]=Bp.y,i[9]=Ki.y,i[2]=Fo.z,i[6]=Bp.z,i[10]=Ki.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],o=r[4],a=r[8],l=r[12],c=r[1],h=r[5],u=r[9],d=r[13],f=r[2],m=r[6],p=r[10],g=r[14],v=r[3],y=r[7],b=r[11],x=r[15],A=i[0],S=i[4],_=i[8],w=i[12],M=i[1],C=i[5],E=i[9],$=i[13],P=i[2],D=i[6],W=i[10],V=i[14],H=i[3],L=i[7],O=i[11],k=i[15];return n[0]=s*A+o*M+a*P+l*H,n[4]=s*S+o*C+a*D+l*L,n[8]=s*_+o*E+a*W+l*O,n[12]=s*w+o*$+a*V+l*k,n[1]=c*A+h*M+u*P+d*H,n[5]=c*S+h*C+u*D+d*L,n[9]=c*_+h*E+u*W+d*O,n[13]=c*w+h*$+u*V+d*k,n[2]=f*A+m*M+p*P+g*H,n[6]=f*S+m*C+p*D+g*L,n[10]=f*_+m*E+p*W+g*O,n[14]=f*w+m*$+p*V+g*k,n[3]=v*A+y*M+b*P+x*H,n[7]=v*S+y*C+b*D+x*L,n[11]=v*_+y*E+b*W+x*O,n[15]=v*w+y*$+b*V+x*k,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14],f=e[3],m=e[7],p=e[11],g=e[15];return f*(+n*a*h-i*l*h-n*o*u+r*l*u+i*o*d-r*a*d)+m*(+t*a*d-t*l*u+n*s*u-i*s*d+i*l*c-n*a*c)+p*(+t*l*h-t*o*d-n*s*h+r*s*d+n*o*c-r*l*c)+g*(-i*o*c-t*a*h+t*o*u+i*s*h-r*s*u+r*a*c)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11],f=e[12],m=e[13],p=e[14],g=e[15],v=h*p*l-m*u*l+m*a*d-o*p*d-h*a*g+o*u*g,y=f*u*l-c*p*l-f*a*d+s*p*d+c*a*g-s*u*g,b=c*m*l-f*h*l+f*o*d-s*m*d-c*o*g+s*h*g,x=f*h*a-c*m*a-f*o*u+s*m*u+c*o*p-s*h*p,A=t*v+r*y+i*b+n*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/A;return e[0]=v*S,e[1]=(m*u*n-h*p*n-m*i*d+r*p*d+h*i*g-r*u*g)*S,e[2]=(o*p*n-m*a*n+m*i*l-r*p*l-o*i*g+r*a*g)*S,e[3]=(h*a*n-o*u*n-h*i*l+r*u*l+o*i*d-r*a*d)*S,e[4]=y*S,e[5]=(c*p*n-f*u*n+f*i*d-t*p*d-c*i*g+t*u*g)*S,e[6]=(f*a*n-s*p*n-f*i*l+t*p*l+s*i*g-t*a*g)*S,e[7]=(s*u*n-c*a*n+c*i*l-t*u*l-s*i*d+t*a*d)*S,e[8]=b*S,e[9]=(f*h*n-c*m*n-f*r*d+t*m*d+c*r*g-t*h*g)*S,e[10]=(s*m*n-f*o*n+f*r*l-t*m*l-s*r*g+t*o*g)*S,e[11]=(c*o*n-s*h*n-c*r*l+t*h*l+s*r*d-t*o*d)*S,e[12]=x*S,e[13]=(c*m*i-f*h*i+f*r*u-t*m*u-c*r*p+t*h*p)*S,e[14]=(f*o*i-s*m*i-f*r*a+t*m*a+s*r*p-t*o*p)*S,e[15]=(s*h*i-c*o*i+c*r*a-t*h*a-s*r*u+t*o*u)*S,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,s=e.x,o=e.y,a=e.z,l=n*s,c=n*o;return this.set(l*s+r,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+r,c*a-i*s,0,l*a-i*o,c*a+i*s,n*a*a+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,s){return this.set(1,r,n,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,s=t._y,o=t._z,a=t._w,l=n+n,c=s+s,h=o+o,u=n*l,d=n*c,f=n*h,m=s*c,p=s*h,g=o*h,v=a*l,y=a*c,b=a*h,x=r.x,A=r.y,S=r.z;return i[0]=(1-(m+g))*x,i[1]=(d+b)*x,i[2]=(f-y)*x,i[3]=0,i[4]=(d-b)*A,i[5]=(1-(u+g))*A,i[6]=(p+v)*A,i[7]=0,i[8]=(f+y)*S,i[9]=(p-v)*S,i[10]=(1-(u+m))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=gc.set(i[0],i[1],i[2]).length(),s=gc.set(i[4],i[5],i[6]).length(),o=gc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],Bn.copy(this);let a=1/n,l=1/s,c=1/o;return Bn.elements[0]*=a,Bn.elements[1]*=a,Bn.elements[2]*=a,Bn.elements[4]*=l,Bn.elements[5]*=l,Bn.elements[6]*=l,Bn.elements[8]*=c,Bn.elements[9]*=c,Bn.elements[10]*=c,t.setFromRotationMatrix(Bn),r.x=n,r.y=s,r.z=o,this}makePerspective(e,t,r,i,n,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let o=this.elements,a=2*n/(t-e),l=2*n/(r-i),c=(t+e)/(t-e),h=(r+i)/(r-i),u=-(s+n)/(s-n),d=-2*s*n/(s-n);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,r,i,n,s){let o=this.elements,a=1/(t-e),l=1/(r-i),c=1/(s-n),h=(t+e)*a,u=(r+i)*l,d=(s+n)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},gc=new T,Bn=new We,$Y=new T(0,0,0),IY=new T(1,1,1),Fo=new T,Bp=new T,Ki=new T,vC=new We,yC=new Yt,_n=class{constructor(e=0,t=0,r=0,i=_n.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Lr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Lr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZXY":this._x=Math.asin(Lr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,n));break;case"ZYX":this._y=Math.asin(-Lr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Lr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Lr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return vC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(vC,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return yC.setFromEuler(this),this.setFromQuaternion(yC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};_n.DefaultOrder="XYZ";_n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var $_=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},RY=0,xC=new T,vc=new Yt,Xs=new We,zp=new T,Ld=new T,kY=new T,OY=new Yt,bC=new T(1,0,0),wC=new T(0,1,0),SC=new T(0,0,1),BY={type:"added"},_C={type:"removed"},zt=class extends ki{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:RY++}),this.uuid=Ls(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DefaultUp.clone();let e=new T,t=new _n,r=new Yt,i=new T(1,1,1);function n(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new We},normalMatrix:{value:new hi}}),this.matrix=new We,this.matrixWorld=new We,this.matrixAutoUpdate=zt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vc.setFromAxisAngle(e,t),this.quaternion.multiply(vc),this}rotateOnWorldAxis(e,t){return vc.setFromAxisAngle(e,t),this.quaternion.premultiply(vc),this}rotateX(e){return this.rotateOnAxis(bC,e)}rotateY(e){return this.rotateOnAxis(wC,e)}rotateZ(e){return this.rotateOnAxis(SC,e)}translateOnAxis(e,t){return xC.copy(e).applyQuaternion(this.quaternion),this.position.add(xC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bC,e)}translateY(e){return this.translateOnAxis(wC,e)}translateZ(e){return this.translateOnAxis(SC,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Xs.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?zp.copy(e):zp.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),Ld.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xs.lookAt(Ld,zp,this.up):Xs.lookAt(zp,Ld,this.up),this.quaternion.setFromRotationMatrix(Xs),i&&(Xs.extractRotation(i.matrixWorld),vc.setFromRotationMatrix(Xs),this.quaternion.premultiply(vc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(BY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_C)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(_C)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Xs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ld,e,kY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ld,OY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,s=i.length;n<s;n++)i[n].updateWorldMatrix(!1,!0)}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(e)),a.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){let h=a[l];n(e.shapes,h)}else n(e.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(n(e.materials,this.material[a]));i.material=o}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let a=this.animations[o];i.animations.push(n(e.animations,a))}}if(t){let o=s(e.geometries),a=s(e.materials),l=s(e.textures),c=s(e.images),h=s(e.shapes),u=s(e.skeletons),d=s(e.animations),f=s(e.nodes);o.length>0&&(r.geometries=o),a.length>0&&(r.materials=a),l.length>0&&(r.textures=l),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),u.length>0&&(r.skeletons=u),d.length>0&&(r.animations=d),f.length>0&&(r.nodes=f)}return r.object=i,r;function s(o){let a=[];for(let l in o){let c=o[l];delete c.metadata,a.push(c)}return a}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};zt.DefaultUp=new T(0,1,0);zt.DefaultMatrixAutoUpdate=!0;var zn=new T,qs=new T,Ty=new T,Qs=new T,yc=new T,xc=new T,AC=new T,Py=new T,Dy=new T,Ly=new T,An=class{constructor(e=new T,t=new T,r=new T){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),zn.subVectors(e,t),i.cross(zn);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){zn.subVectors(i,t),qs.subVectors(r,t),Ty.subVectors(e,t);let s=zn.dot(zn),o=zn.dot(qs),a=zn.dot(Ty),l=qs.dot(qs),c=qs.dot(Ty),h=s*l-o*o;if(h===0)return n.set(-2,-1,-1);let u=1/h,d=(l*a-o*c)*u,f=(s*c-o*a)*u;return n.set(1-d-f,f,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Qs),Qs.x>=0&&Qs.y>=0&&Qs.x+Qs.y<=1}static getUV(e,t,r,i,n,s,o,a){return this.getBarycoord(e,t,r,i,Qs),a.set(0,0),a.addScaledVector(n,Qs.x),a.addScaledVector(s,Qs.y),a.addScaledVector(o,Qs.z),a}static isFrontFacing(e,t,r,i){return zn.subVectors(r,t),qs.subVectors(e,t),zn.cross(qs).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return zn.subVectors(this.c,this.b),qs.subVectors(this.a,this.b),zn.cross(qs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return An.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return An.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return An.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return An.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return An.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,s,o;yc.subVectors(i,r),xc.subVectors(n,r),Py.subVectors(e,r);let a=yc.dot(Py),l=xc.dot(Py);if(a<=0&&l<=0)return t.copy(r);Dy.subVectors(e,i);let c=yc.dot(Dy),h=xc.dot(Dy);if(c>=0&&h<=c)return t.copy(i);let u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),t.copy(r).addScaledVector(yc,s);Ly.subVectors(e,n);let d=yc.dot(Ly),f=xc.dot(Ly);if(f>=0&&d<=f)return t.copy(n);let m=d*l-a*f;if(m<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(r).addScaledVector(xc,o);let p=c*f-d*h;if(p<=0&&h-c>=0&&d-f>=0)return AC.subVectors(n,i),o=(h-c)/(h-c+(d-f)),t.copy(i).addScaledVector(AC,o);let g=1/(p+m+u);return s=m*g,o=u*g,t.copy(r).addScaledVector(yc,s).addScaledVector(xc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},zY=0,Nf=class extends ki{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:zY++}),this.uuid=Ls(),this.name="",this.type="Material",this.blending=wl,this.side=Ao,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=vO,this.blendDst=yO,this.blendEquation=Nc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Tb,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dY,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vy,this.stencilZFail=vy,this.stencilZPass=vy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===bG;continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==wl&&(r.blending=this.blending),this.side!==Ao&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(n){let s=[];for(let o in n){let a=n[o];delete a.metadata,s.push(a)}return s}if(t){let n=i(e.textures),s=i(e.images);n.length>0&&(r.textures=n),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Uu=class extends Nf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=xO,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Sr=new T,Np=new K,ft=class{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=$b,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new st),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}copyVector2sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new K),t[r++]=s.x,t[r++]=s.y}return this}copyVector3sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new T),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}copyVector4sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new ct),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Np.fromBufferAttribute(this,t),Np.applyMatrix3(e),this.setXY(t,Np.x,Np.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.applyMatrix3(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.applyMatrix4(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.applyNormalMatrix(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.transformDirection(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==$b&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},TO=class extends ft{constructor(e,t,r){super(new Uint16Array(e),t,r)}},_h=class extends ft{constructor(e,t,r){super(new Uint32Array(e),t,r)}},$e=class extends ft{constructor(e,t,r){super(new Float32Array(e),t,r)}},NY=0,hn=new We,$y=new zt,bc=new T,Xi=new zr,$d=new zr,Ur=new T,at=class extends ki{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NY++}),this.uuid=Ls(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_O(e)?_h:TO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new hi().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hn.makeRotationFromQuaternion(e),this.applyMatrix4(hn),this}rotateX(e){return hn.makeRotationX(e),this.applyMatrix4(hn),this}rotateY(e){return hn.makeRotationY(e),this.applyMatrix4(hn),this}rotateZ(e){return hn.makeRotationZ(e),this.applyMatrix4(hn),this}translate(e,t,r){return hn.makeTranslation(e,t,r),this.applyMatrix4(hn),this}scale(e,t,r){return hn.makeScale(e,t,r),this.applyMatrix4(hn),this}lookAt(e){return $y.lookAt(e),$y.updateMatrix(),this.applyMatrix4($y.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bc).negate(),this.translate(bc.x,bc.y,bc.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new $e(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new T(-1/0,-1/0,-1/0),new T(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Xi.setFromBufferAttribute(n),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,Xi.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,Xi.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(Xi.min),this.boundingBox.expandByPoint(Xi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new T,1/0);return}if(e){let r=this.boundingSphere.center;if(Xi.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let o=t[n];$d.setFromBufferAttribute(o),this.morphTargetsRelative?(Ur.addVectors(Xi.min,$d.min),Xi.expandByPoint(Ur),Ur.addVectors(Xi.max,$d.max),Xi.expandByPoint(Ur)):(Xi.expandByPoint($d.min),Xi.expandByPoint($d.max))}Xi.getCenter(r);let i=0;for(let n=0,s=e.count;n<s;n++)Ur.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(Ur));if(t)for(let n=0,s=t.length;n<s;n++){let o=t[n],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Ur.fromBufferAttribute(o,l),a&&(bc.fromBufferAttribute(e,l),Ur.add(bc)),i=Math.max(i,r.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,s=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ft(new Float32Array(4*o),4));let a=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<o;M++)l[M]=new T,c[M]=new T;let h=new T,u=new T,d=new T,f=new K,m=new K,p=new K,g=new T,v=new T;function y(M,C,E){h.fromArray(i,M*3),u.fromArray(i,C*3),d.fromArray(i,E*3),f.fromArray(s,M*2),m.fromArray(s,C*2),p.fromArray(s,E*2),u.sub(h),d.sub(h),m.sub(f),p.sub(f);let $=1/(m.x*p.y-p.x*m.y);!isFinite($)||(g.copy(u).multiplyScalar(p.y).addScaledVector(d,-m.y).multiplyScalar($),v.copy(d).multiplyScalar(m.x).addScaledVector(u,-p.x).multiplyScalar($),l[M].add(g),l[C].add(g),l[E].add(g),c[M].add(v),c[C].add(v),c[E].add(v))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let M=0,C=b.length;M<C;++M){let E=b[M],$=E.start,P=E.count;for(let D=$,W=$+P;D<W;D+=3)y(r[D+0],r[D+1],r[D+2])}let x=new T,A=new T,S=new T,_=new T;function w(M){S.fromArray(n,M*3),_.copy(S);let C=l[M];x.copy(C),x.sub(S.multiplyScalar(S.dot(C))).normalize(),A.crossVectors(_,C);let E=A.dot(c[M])<0?-1:1;a[M*4]=x.x,a[M*4+1]=x.y,a[M*4+2]=x.z,a[M*4+3]=E}for(let M=0,C=b.length;M<C;++M){let E=b[M],$=E.start,P=E.count;for(let D=$,W=$+P;D<W;D+=3)w(r[D+0]),w(r[D+1]),w(r[D+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ft(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let u=0,d=r.count;u<d;u++)r.setXYZ(u,0,0,0);let i=new T,n=new T,s=new T,o=new T,a=new T,l=new T,c=new T,h=new T;if(e)for(let u=0,d=e.count;u<d;u+=3){let f=e.getX(u+0),m=e.getX(u+1),p=e.getX(u+2);i.fromBufferAttribute(t,f),n.fromBufferAttribute(t,m),s.fromBufferAttribute(t,p),c.subVectors(s,n),h.subVectors(i,n),c.cross(h),o.fromBufferAttribute(r,f),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,p),o.add(c),a.add(c),l.add(c),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(p,l.x,l.y,l.z)}else for(let u=0,d=t.count;u<d;u+=3)i.fromBufferAttribute(t,u+0),n.fromBufferAttribute(t,u+1),s.fromBufferAttribute(t,u+2),c.subVectors(s,n),h.subVectors(i,n),c.cross(h),r.setXYZ(u+0,c.x,c.y,c.z),r.setXYZ(u+1,c.x,c.y,c.z),r.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let r=this.attributes;for(let i in r){if(e.attributes[i]===void 0)continue;let n=r[i].array,s=e.attributes[i],o=s.array,a=s.itemSize*t,l=Math.min(o.length,n.length-a);for(let c=0,h=a;c<l;c++,h++)n[h]=o[c]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ur.fromBufferAttribute(e,t),Ur.normalize(),e.setXYZ(t,Ur.x,Ur.y,Ur.z)}toNonIndexed(){function e(o,a){let l=o.array,c=o.itemSize,h=o.normalized,u=new l.constructor(a.length*c),d=0,f=0;for(let m=0,p=a.length;m<p;m++){o.isInterleavedBufferAttribute?d=a[m]*o.data.stride+o.offset:d=a[m]*c;for(let g=0;g<c;g++)u[f++]=l[d++]}return new ft(u,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new at,r=this.index.array,i=this.attributes;for(let o in i){let a=i[o],l=e(a,r);t.setAttribute(o,l)}let n=this.morphAttributes;for(let o in n){let a=[],l=n[o];for(let c=0,h=l.length;c<h;c++){let u=l[c],d=e(u,r);a.push(d)}t.morphAttributes[o]=a}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let o=0,a=s.length;o<a;o++){let l=s[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let a=this.parameters;for(let l in a)a[l]!==void 0&&(e[l]=a[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let a in r){let l=r[a];e.data.attributes[a]=l.toJSON(e.data)}let i={},n=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let h=0,u=l.length;h<u;h++){let d=l[h];c.push(d.toJSON(e.data))}c.length>0&&(i[a]=c,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let c=i[l];this.setAttribute(l,c.clone(t))}let n=e.morphAttributes;for(let l in n){let c=[],h=n[l];for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,c=s.length;l<c;l++){let h=s[l];this.addGroup(h.start,h.count,h.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},MC=new We,wc=new zf,Iy=new ts,Uo=new T,Ho=new T,Vo=new T,Ry=new T,ky=new T,Oy=new T,Fp=new T,Up=new T,Hp=new T,Vp=new K,Wp=new K,jp=new K,By=new T,Gp=new T,fi=class extends zt{constructor(e=new at,t=new Uu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Iy.copy(r.boundingSphere),Iy.applyMatrix4(n),e.ray.intersectsSphere(Iy)===!1)||(MC.copy(n).invert(),wc.copy(e.ray).applyMatrix4(MC),r.boundingBox!==null&&wc.intersectsBox(r.boundingBox)===!1))return;let s,o=r.index,a=r.attributes.position,l=r.morphAttributes.position,c=r.morphTargetsRelative,h=r.attributes.uv,u=r.attributes.uv2,d=r.groups,f=r.drawRange;if(o!==null)if(Array.isArray(i))for(let m=0,p=d.length;m<p;m++){let g=d[m],v=i[g.materialIndex],y=Math.max(g.start,f.start),b=Math.min(o.count,Math.min(g.start+g.count,f.start+f.count));for(let x=y,A=b;x<A;x+=3){let S=o.getX(x),_=o.getX(x+1),w=o.getX(x+2);s=Yp(this,v,e,wc,a,l,c,h,u,S,_,w),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let m=Math.max(0,f.start),p=Math.min(o.count,f.start+f.count);for(let g=m,v=p;g<v;g+=3){let y=o.getX(g),b=o.getX(g+1),x=o.getX(g+2);s=Yp(this,i,e,wc,a,l,c,h,u,y,b,x),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let m=0,p=d.length;m<p;m++){let g=d[m],v=i[g.materialIndex],y=Math.max(g.start,f.start),b=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let x=y,A=b;x<A;x+=3){let S=x,_=x+1,w=x+2;s=Yp(this,v,e,wc,a,l,c,h,u,S,_,w),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{let m=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let g=m,v=p;g<v;g+=3){let y=g,b=g+1,x=g+2;s=Yp(this,i,e,wc,a,l,c,h,u,y,b,x),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}}};function FY(e,t,r,i,n,s,o,a){let l;if(t.side===Xr?l=i.intersectTriangle(o,s,n,!0,a):l=i.intersectTriangle(n,s,o,t.side!==_i,a),l===null)return null;Gp.copy(a),Gp.applyMatrix4(e.matrixWorld);let c=r.ray.origin.distanceTo(Gp);return c<r.near||c>r.far?null:{distance:c,point:Gp.clone(),object:e}}function Yp(e,t,r,i,n,s,o,a,l,c,h,u){Uo.fromBufferAttribute(n,c),Ho.fromBufferAttribute(n,h),Vo.fromBufferAttribute(n,u);let d=e.morphTargetInfluences;if(s&&d){Fp.set(0,0,0),Up.set(0,0,0),Hp.set(0,0,0);for(let m=0,p=s.length;m<p;m++){let g=d[m],v=s[m];g!==0&&(Ry.fromBufferAttribute(v,c),ky.fromBufferAttribute(v,h),Oy.fromBufferAttribute(v,u),o?(Fp.addScaledVector(Ry,g),Up.addScaledVector(ky,g),Hp.addScaledVector(Oy,g)):(Fp.addScaledVector(Ry.sub(Uo),g),Up.addScaledVector(ky.sub(Ho),g),Hp.addScaledVector(Oy.sub(Vo),g)))}Uo.add(Fp),Ho.add(Up),Vo.add(Hp)}e.isSkinnedMesh&&(e.boneTransform(c,Uo),e.boneTransform(h,Ho),e.boneTransform(u,Vo));let f=FY(e,t,r,i,Uo,Ho,Vo,By);if(f){a&&(Vp.fromBufferAttribute(a,c),Wp.fromBufferAttribute(a,h),jp.fromBufferAttribute(a,u),f.uv=An.getUV(By,Uo,Ho,Vo,Vp,Wp,jp,new K)),l&&(Vp.fromBufferAttribute(l,c),Wp.fromBufferAttribute(l,h),jp.fromBufferAttribute(l,u),f.uv2=An.getUV(By,Uo,Ho,Vo,Vp,Wp,jp,new K));let m={a:c,b:h,c:u,normal:new T,materialIndex:0};An.getNormal(Uo,Ho,Vo,m.normal),f.face=m}return f}var $a=class extends at{constructor(e=1,t=1,r=1,i=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:s};let o=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s);let a=[],l=[],c=[],h=[],u=0,d=0;f("z","y","x",-1,-1,r,t,e,s,n,0),f("z","y","x",1,-1,r,t,-e,s,n,1),f("x","z","y",1,1,e,r,t,i,s,2),f("x","z","y",1,-1,e,r,-t,i,s,3),f("x","y","z",1,-1,e,t,r,i,n,4),f("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(a),this.setAttribute("position",new $e(l,3)),this.setAttribute("normal",new $e(c,3)),this.setAttribute("uv",new $e(h,2));function f(m,p,g,v,y,b,x,A,S,_,w){let M=b/S,C=x/_,E=b/2,$=x/2,P=A/2,D=S+1,W=_+1,V=0,H=0,L=new T;for(let O=0;O<W;O++){let k=O*C-$;for(let j=0;j<D;j++){let F=j*M-E;L[m]=F*v,L[p]=k*y,L[g]=P,l.push(L.x,L.y,L.z),L[m]=0,L[p]=0,L[g]=A>0?1:-1,c.push(L.x,L.y,L.z),h.push(j/S),h.push(1-O/_),V+=1}}for(let O=0;O<_;O++)for(let k=0;k<S;k++){let j=u+k+D*O,F=u+k+D*(O+1),Y=u+(k+1)+D*(O+1),X=u+(k+1)+D*O;a.push(j,F,X),a.push(F,Y,X),H+=6}o.addGroup(d,H,w),d+=H,u+=V}}static fromJSON(e){return new $a(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Hu(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function oi(e){let t={};for(let r=0;r<e.length;r++){let i=Hu(e[r]);for(let n in i)t[n]=i[n]}return t}var rd={clone:Hu,merge:oi},UY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,HY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,kr=class extends Nf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=UY,this.fragmentShader=HY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},id=class extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new We,this.projectionMatrix=new We,this.projectionMatrixInverse=new We}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ui=class extends id{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=of*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(wh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return of*2*Math.atan(Math.tan(wh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(wh*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let a=s.fullWidth,l=s.fullHeight;n+=s.offsetX*i/a,t-=s.offsetY*r/l,i*=s.width/a,r*=s.height/l}let o=this.filmOffset;o!==0&&(n+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Sc=90,_c=1,VY=class extends zt{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;let i=new ui(Sc,_c,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new T(1,0,0)),this.add(i);let n=new ui(Sc,_c,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new T(-1,0,0)),this.add(n);let s=new ui(Sc,_c,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new T(0,1,0)),this.add(s);let o=new ui(Sc,_c,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new T(0,-1,0)),this.add(o);let a=new ui(Sc,_c,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new T(0,0,1)),this.add(a);let l=new ui(Sc,_c,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new T(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,s,o,a,l]=this.children,c=e.getRenderTarget(),h=e.toneMapping,u=e.xr.enabled;e.toneMapping=ho,e.xr.enabled=!1;let d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,o),e.setRenderTarget(r,4),e.render(t,a),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=u,r.texture.needsPMREMUpdate=!0}},I_=class extends Ti{constructor(e,t,r,i,n,s,o,a,l,c){e=e!==void 0?e:[],t=t!==void 0?t:Nl,super(e,t,r,i,n,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},WY=class extends br{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new I_(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Bt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new $a(5,5,5),n=new kr({name:"CubemapFromEquirect",uniforms:Hu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Xr,blending:Qr});n.uniforms.tEquirect.value=t;let s=new fi(i,n),o=t.minFilter;return t.minFilter===Bf&&(t.minFilter=Bt),new VY(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(n)}},zy=new T,jY=new T,GY=new hi,wn=class{constructor(e=new T(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=zy.subVectors(r,t).cross(jY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(zy),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||GY.getNormalMatrix(e),i=this.coplanarPoint(zy).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Ac=new ts,Kp=new T,R_=class{constructor(e=new wn,t=new wn,r=new wn,i=new wn,n=new wn,s=new wn){this.planes=[e,t,r,i,n,s]}set(e,t,r,i,n,s){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(s),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=r[5],c=r[6],h=r[7],u=r[8],d=r[9],f=r[10],m=r[11],p=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(o-i,h-a,m-u,y-p).normalize(),t[1].setComponents(o+i,h+a,m+u,y+p).normalize(),t[2].setComponents(o+n,h+l,m+d,y+g).normalize(),t[3].setComponents(o-n,h-l,m-d,y-g).normalize(),t[4].setComponents(o-s,h-c,m-f,y-v).normalize(),t[5].setComponents(o+s,h+c,m+f,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ac.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ac)}intersectsSprite(e){return Ac.center.set(0,0,0),Ac.radius=.7071067811865476,Ac.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ac)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(Kp.x=i.normal.x>0?e.max.x:e.min.x,Kp.y=i.normal.y>0?e.max.y:e.min.y,Kp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Kp)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function PO(){let e=null,t=!1,r=null,i=null;function n(s,o){r(s,o),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){r=s},setContext:function(s){e=s}}}function YY(e,t){let r=t.isWebGL2,i=new WeakMap;function n(c,h){let u=c.array,d=c.usage,f=e.createBuffer();e.bindBuffer(h,f),e.bufferData(h,u,d),c.onUploadCallback();let m;if(u instanceof Float32Array)m=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(r)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(u instanceof Int16Array)m=5122;else if(u instanceof Uint32Array)m=5125;else if(u instanceof Int32Array)m=5124;else if(u instanceof Int8Array)m=5120;else if(u instanceof Uint8Array)m=5121;else if(u instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){let d=h.array,f=h.updateRange;e.bindBuffer(u,c),f.count===-1?e.bufferSubData(u,0,d):(r?e.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):e.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let h=i.get(c);h&&(e.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){let d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=i.get(c);u===void 0?i.set(c,n(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:o,remove:a,update:l}}var Yv=class extends at{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,s=t/2,o=Math.floor(r),a=Math.floor(i),l=o+1,c=a+1,h=e/o,u=t/a,d=[],f=[],m=[],p=[];for(let g=0;g<c;g++){let v=g*u-s;for(let y=0;y<l;y++){let b=y*h-n;f.push(b,-v,0),m.push(0,0,1),p.push(y/o),p.push(1-g/a)}}for(let g=0;g<a;g++)for(let v=0;v<o;v++){let y=v+l*g,b=v+l*(g+1),x=v+1+l*(g+1),A=v+1+l*g;d.push(y,b,A),d.push(b,x,A)}this.setIndex(d),this.setAttribute("position",new $e(f,3)),this.setAttribute("normal",new $e(m,3)),this.setAttribute("uv",new $e(p,2))}static fromJSON(e){return new Yv(e.width,e.height,e.widthSegments,e.heightSegments)}},KY=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,XY=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qY=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,QY=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ZY=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,JY=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,eK="vec3 transformed = vec3( position );",tK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rK=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iK=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,nK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,sK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,oK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,aK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,uK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,fK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,pK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mK=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,yK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,xK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bK="gl_FragColor = linearToOutputTexel( gl_FragColor );",wK=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,SK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,_K=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,AK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,EK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,TK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,PK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,DK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,LK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,$K=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,IK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,RK=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,kK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,OK=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,BK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,NK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,FK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,UK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,HK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,VK=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,WK=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,jK=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,GK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,YK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KK=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,XK=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,qK=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,QK=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ZK=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,JK=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,eX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,tX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rX=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,iX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,nX=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,sX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,oX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,aX=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,lX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uX=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,fX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,pX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,mX=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,gX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,yX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,xX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,SX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_X=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,AX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,MX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,EX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,CX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,PX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,DX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,LX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$X=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,IX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,RX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,kX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,OX=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,BX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,zX=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,NX=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,FX=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,UX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,HX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,VX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,WX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,jX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,GX=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,YX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KX=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XX=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,QX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ZX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,JX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,eq=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tq=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rq=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iq=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nq=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sq=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oq=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aq=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lq=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cq=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uq=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,dq=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hq=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fq=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pq=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mq=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gq=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vq=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xq=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bq=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,wq=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Sq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,lt={alphamap_fragment:KY,alphamap_pars_fragment:XY,alphatest_fragment:qY,alphatest_pars_fragment:QY,aomap_fragment:ZY,aomap_pars_fragment:JY,begin_vertex:eK,beginnormal_vertex:tK,bsdfs:rK,iridescence_fragment:iK,bumpmap_pars_fragment:nK,clipping_planes_fragment:sK,clipping_planes_pars_fragment:oK,clipping_planes_pars_vertex:aK,clipping_planes_vertex:lK,color_fragment:cK,color_pars_fragment:uK,color_pars_vertex:dK,color_vertex:hK,common:fK,cube_uv_reflection_fragment:pK,defaultnormal_vertex:mK,displacementmap_pars_vertex:gK,displacementmap_vertex:vK,emissivemap_fragment:yK,emissivemap_pars_fragment:xK,encodings_fragment:bK,encodings_pars_fragment:wK,envmap_fragment:SK,envmap_common_pars_fragment:_K,envmap_pars_fragment:AK,envmap_pars_vertex:MK,envmap_physical_pars_fragment:OK,envmap_vertex:EK,fog_vertex:CK,fog_pars_vertex:TK,fog_fragment:PK,fog_pars_fragment:DK,gradientmap_pars_fragment:LK,lightmap_fragment:$K,lightmap_pars_fragment:IK,lights_lambert_vertex:RK,lights_pars_begin:kK,lights_toon_fragment:BK,lights_toon_pars_fragment:zK,lights_phong_fragment:NK,lights_phong_pars_fragment:FK,lights_physical_fragment:UK,lights_physical_pars_fragment:HK,lights_fragment_begin:VK,lights_fragment_maps:WK,lights_fragment_end:jK,logdepthbuf_fragment:GK,logdepthbuf_pars_fragment:YK,logdepthbuf_pars_vertex:KK,logdepthbuf_vertex:XK,map_fragment:qK,map_pars_fragment:QK,map_particle_fragment:ZK,map_particle_pars_fragment:JK,metalnessmap_fragment:eX,metalnessmap_pars_fragment:tX,morphcolor_vertex:rX,morphnormal_vertex:iX,morphtarget_pars_vertex:nX,morphtarget_vertex:sX,normal_fragment_begin:oX,normal_fragment_maps:aX,normal_pars_fragment:lX,normal_pars_vertex:cX,normal_vertex:uX,normalmap_pars_fragment:dX,clearcoat_normal_fragment_begin:hX,clearcoat_normal_fragment_maps:fX,clearcoat_pars_fragment:pX,iridescence_pars_fragment:mX,output_fragment:gX,packing:vX,premultiplied_alpha_fragment:yX,project_vertex:xX,dithering_fragment:bX,dithering_pars_fragment:wX,roughnessmap_fragment:SX,roughnessmap_pars_fragment:_X,shadowmap_pars_fragment:AX,shadowmap_pars_vertex:MX,shadowmap_vertex:EX,shadowmask_pars_fragment:CX,skinbase_vertex:TX,skinning_pars_vertex:PX,skinning_vertex:DX,skinnormal_vertex:LX,specularmap_fragment:$X,specularmap_pars_fragment:IX,tonemapping_fragment:RX,tonemapping_pars_fragment:kX,transmission_fragment:OX,transmission_pars_fragment:BX,uv_pars_fragment:zX,uv_pars_vertex:NX,uv_vertex:FX,uv2_pars_fragment:UX,uv2_pars_vertex:HX,uv2_vertex:VX,worldpos_vertex:WX,background_vert:jX,background_frag:GX,cube_vert:YX,cube_frag:KX,depth_vert:XX,depth_frag:qX,distanceRGBA_vert:QX,distanceRGBA_frag:ZX,equirect_vert:JX,equirect_frag:eq,linedashed_vert:tq,linedashed_frag:rq,meshbasic_vert:iq,meshbasic_frag:nq,meshlambert_vert:sq,meshlambert_frag:oq,meshmatcap_vert:aq,meshmatcap_frag:lq,meshnormal_vert:cq,meshnormal_frag:uq,meshphong_vert:dq,meshphong_frag:hq,meshphysical_vert:fq,meshphysical_frag:pq,meshtoon_vert:mq,meshtoon_frag:gq,points_vert:vq,points_frag:yq,shadow_vert:xq,shadow_frag:bq,sprite_vert:wq,sprite_frag:Sq},we={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new hi},uv2Transform:{value:new hi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new K(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hi}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new K(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hi}}},gs={basic:{uniforms:oi([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.fog]),vertexShader:lt.meshbasic_vert,fragmentShader:lt.meshbasic_frag},lambert:{uniforms:oi([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.fog,we.lights,{emissive:{value:new st(0)}}]),vertexShader:lt.meshlambert_vert,fragmentShader:lt.meshlambert_frag},phong:{uniforms:oi([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.fog,we.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:lt.meshphong_vert,fragmentShader:lt.meshphong_frag},standard:{uniforms:oi([we.common,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.roughnessmap,we.metalnessmap,we.fog,we.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lt.meshphysical_vert,fragmentShader:lt.meshphysical_frag},toon:{uniforms:oi([we.common,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.gradientmap,we.fog,we.lights,{emissive:{value:new st(0)}}]),vertexShader:lt.meshtoon_vert,fragmentShader:lt.meshtoon_frag},matcap:{uniforms:oi([we.common,we.bumpmap,we.normalmap,we.displacementmap,we.fog,{matcap:{value:null}}]),vertexShader:lt.meshmatcap_vert,fragmentShader:lt.meshmatcap_frag},points:{uniforms:oi([we.points,we.fog]),vertexShader:lt.points_vert,fragmentShader:lt.points_frag},dashed:{uniforms:oi([we.common,we.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lt.linedashed_vert,fragmentShader:lt.linedashed_frag},depth:{uniforms:oi([we.common,we.displacementmap]),vertexShader:lt.depth_vert,fragmentShader:lt.depth_frag},normal:{uniforms:oi([we.common,we.bumpmap,we.normalmap,we.displacementmap,{opacity:{value:1}}]),vertexShader:lt.meshnormal_vert,fragmentShader:lt.meshnormal_frag},sprite:{uniforms:oi([we.sprite,we.fog]),vertexShader:lt.sprite_vert,fragmentShader:lt.sprite_frag},background:{uniforms:{uvTransform:{value:new hi},t2D:{value:null}},vertexShader:lt.background_vert,fragmentShader:lt.background_frag},cube:{uniforms:oi([we.envmap,{opacity:{value:1}}]),vertexShader:lt.cube_vert,fragmentShader:lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lt.equirect_vert,fragmentShader:lt.equirect_frag},distanceRGBA:{uniforms:oi([we.common,we.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lt.distanceRGBA_vert,fragmentShader:lt.distanceRGBA_frag},shadow:{uniforms:oi([we.lights,we.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:lt.shadow_vert,fragmentShader:lt.shadow_frag}};gs.physical={uniforms:oi([gs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new K(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new K},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null}}]),vertexShader:lt.meshphysical_vert,fragmentShader:lt.meshphysical_frag};function _q(e,t,r,i,n,s){let o=new st(0),a=n===!0?0:1,l,c,h=null,u=0,d=null;function f(p,g){let v=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=t.get(y));let b=e.xr,x=b.getSession&&b.getSession();x&&x.environmentBlendMode==="additive"&&(y=null),y===null?m(o,a):y&&y.isColor&&(m(y,1),v=!0),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Of)?(c===void 0&&(c=new fi(new $a(1,1,1),new kr({name:"BackgroundCubeMaterial",uniforms:Hu(gs.cube.uniforms),vertexShader:gs.cube.vertexShader,fragmentShader:gs.cube.fragmentShader,side:Xr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(A,S,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(h!==y||u!==y.version||d!==e.toneMapping)&&(c.material.needsUpdate=!0,h=y,u=y.version,d=e.toneMapping),c.layers.enableAll(),p.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new fi(new Yv(2,2),new kr({name:"BackgroundMaterial",uniforms:Hu(gs.background.uniforms),vertexShader:gs.background.vertexShader,fragmentShader:gs.background.fragmentShader,side:Ao,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||u!==y.version||d!==e.toneMapping)&&(l.material.needsUpdate=!0,h=y,u=y.version,d=e.toneMapping),l.layers.enableAll(),p.unshift(l,l.geometry,l.material,0,0,null))}function m(p,g){r.buffers.color.setClear(p.r,p.g,p.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(p,g=1){o.set(p),a=g,m(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(p){a=p,m(o,a)},render:f}}function Aq(e,t,r,i){let n=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null),c=l,h=!1;function u(D,W,V,H,L){let O=!1;if(o){let k=p(H,V,W);c!==k&&(c=k,f(c.object)),O=v(D,H,V,L),O&&y(D,H,V,L)}else{let k=W.wireframe===!0;(c.geometry!==H.id||c.program!==V.id||c.wireframe!==k)&&(c.geometry=H.id,c.program=V.id,c.wireframe=k,O=!0)}L!==null&&r.update(L,34963),(O||h)&&(h=!1,w(D,W,V,H),L!==null&&e.bindBuffer(34963,r.get(L).buffer))}function d(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(D){return i.isWebGL2?e.bindVertexArray(D):s.bindVertexArrayOES(D)}function m(D){return i.isWebGL2?e.deleteVertexArray(D):s.deleteVertexArrayOES(D)}function p(D,W,V){let H=V.wireframe===!0,L=a[D.id];L===void 0&&(L={},a[D.id]=L);let O=L[W.id];O===void 0&&(O={},L[W.id]=O);let k=O[H];return k===void 0&&(k=g(d()),O[H]=k),k}function g(D){let W=[],V=[],H=[];for(let L=0;L<n;L++)W[L]=0,V[L]=0,H[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:V,attributeDivisors:H,object:D,attributes:{},index:null}}function v(D,W,V,H){let L=c.attributes,O=W.attributes,k=0,j=V.getAttributes();for(let F in j)if(j[F].location>=0){let Y=L[F],X=O[F];if(X===void 0&&(F==="instanceMatrix"&&D.instanceMatrix&&(X=D.instanceMatrix),F==="instanceColor"&&D.instanceColor&&(X=D.instanceColor)),Y===void 0||Y.attribute!==X||X&&Y.data!==X.data)return!0;k++}return c.attributesNum!==k||c.index!==H}function y(D,W,V,H){let L={},O=W.attributes,k=0,j=V.getAttributes();for(let F in j)if(j[F].location>=0){let Y=O[F];Y===void 0&&(F==="instanceMatrix"&&D.instanceMatrix&&(Y=D.instanceMatrix),F==="instanceColor"&&D.instanceColor&&(Y=D.instanceColor));let X={};X.attribute=Y,Y&&Y.data&&(X.data=Y.data),L[F]=X,k++}c.attributes=L,c.attributesNum=k,c.index=H}function b(){let D=c.newAttributes;for(let W=0,V=D.length;W<V;W++)D[W]=0}function x(D){A(D,0)}function A(D,W){let V=c.newAttributes,H=c.enabledAttributes,L=c.attributeDivisors;V[D]=1,H[D]===0&&(e.enableVertexAttribArray(D),H[D]=1),L[D]!==W&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,W),L[D]=W)}function S(){let D=c.newAttributes,W=c.enabledAttributes;for(let V=0,H=W.length;V<H;V++)W[V]!==D[V]&&(e.disableVertexAttribArray(V),W[V]=0)}function _(D,W,V,H,L,O){i.isWebGL2===!0&&(V===5124||V===5125)?e.vertexAttribIPointer(D,W,V,L,O):e.vertexAttribPointer(D,W,V,H,L,O)}function w(D,W,V,H){if(i.isWebGL2===!1&&(D.isInstancedMesh||H.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();let L=H.attributes,O=V.getAttributes(),k=W.defaultAttributeValues;for(let j in O){let F=O[j];if(F.location>=0){let Y=L[j];if(Y===void 0&&(j==="instanceMatrix"&&D.instanceMatrix&&(Y=D.instanceMatrix),j==="instanceColor"&&D.instanceColor&&(Y=D.instanceColor)),Y!==void 0){let X=Y.normalized,Z=Y.itemSize,U=r.get(Y);if(U===void 0)continue;let ne=U.buffer,ee=U.type,te=U.bytesPerElement;if(Y.isInterleavedBufferAttribute){let Q=Y.data,de=Q.stride,le=Y.offset;if(Q.isInstancedInterleavedBuffer){for(let ce=0;ce<F.locationSize;ce++)A(F.location+ce,Q.meshPerAttribute);D.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let ce=0;ce<F.locationSize;ce++)x(F.location+ce);e.bindBuffer(34962,ne);for(let ce=0;ce<F.locationSize;ce++)_(F.location+ce,Z/F.locationSize,ee,X,de*te,(le+Z/F.locationSize*ce)*te)}else{if(Y.isInstancedBufferAttribute){for(let Q=0;Q<F.locationSize;Q++)A(F.location+Q,Y.meshPerAttribute);D.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Q=0;Q<F.locationSize;Q++)x(F.location+Q);e.bindBuffer(34962,ne);for(let Q=0;Q<F.locationSize;Q++)_(F.location+Q,Z/F.locationSize,ee,X,Z*te,Z/F.locationSize*Q*te)}}else if(k!==void 0){let X=k[j];if(X!==void 0)switch(X.length){case 2:e.vertexAttrib2fv(F.location,X);break;case 3:e.vertexAttrib3fv(F.location,X);break;case 4:e.vertexAttrib4fv(F.location,X);break;default:e.vertexAttrib1fv(F.location,X)}}}}S()}function M(){$();for(let D in a){let W=a[D];for(let V in W){let H=W[V];for(let L in H)m(H[L].object),delete H[L];delete W[V]}delete a[D]}}function C(D){if(a[D.id]===void 0)return;let W=a[D.id];for(let V in W){let H=W[V];for(let L in H)m(H[L].object),delete H[L];delete W[V]}delete a[D.id]}function E(D){for(let W in a){let V=a[W];if(V[D.id]===void 0)continue;let H=V[D.id];for(let L in H)m(H[L].object),delete H[L];delete V[D.id]}}function $(){P(),h=!0,c!==l&&(c=l,f(c.object))}function P(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:$,resetDefaultState:P,dispose:M,releaseStatesOfGeometry:C,releaseStatesOfProgram:E,initAttributes:b,enableAttribute:x,disableUnusedAttributes:S}}function Mq(e,t,r,i){let n=i.isWebGL2,s;function o(c){s=c}function a(c,h){e.drawArrays(s,c,h),r.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(n)d=e,f="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),r.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function Eq(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let _=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(_){if(_==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_="mediump"}return _==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext,a=r.precision!==void 0?r.precision:"highp",l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=o||t.has("WEBGL_draw_buffers"),h=r.logarithmicDepthBuffer===!0,u=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),m=e.getParameter(34076),p=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),b=d>0,x=o||t.has("OES_texture_float"),A=b&&x,S=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:A,maxSamples:S}}function Cq(e){let t=this,r=null,i=0,n=!1,s=!1,o=new wn,a=new hi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d,f){let m=u.length!==0||d||i!==0||n;return n=d,r=h(u,f,0),i=u.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,d,f){let m=u.clippingPlanes,p=u.clipIntersection,g=u.clipShadows,v=e.get(u);if(!n||m===null||m.length===0||s&&!g)s?h(null):c();else{let y=s?0:i,b=y*4,x=v.clippingState||null;l.value=x,x=h(m,d,b,f);for(let A=0;A!==b;++A)x[A]=r[A];v.clippingState=x,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function h(u,d,f,m){let p=u!==null?u.length:0,g=null;if(p!==0){if(g=l.value,m!==!0||g===null){let v=f+p*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let b=0,x=f;b!==p;++b,x+=4)o.copy(u[b]).applyMatrix4(y,a),o.normal.toArray(g,x),g[x+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,g}}function Tq(e){let t=new WeakMap;function r(o,a){return a===Pb?o.mapping=Nl:a===Db&&(o.mapping=Fl),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let a=o.mapping;if(a===Pb||a===Db)if(t.has(o)){let l=t.get(o).texture;return r(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new WY(l.height/2);return c.fromEquirectangularTexture(e,o),t.set(o,c),o.addEventListener("dispose",n),r(c.texture,o.mapping)}else return null}}return o}function n(o){let a=o.target;a.removeEventListener("dispose",n);let l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var k_=class extends id{constructor(e=-1,t=1,r=1,i=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,s=r+e,o=i+t,a=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(n,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},uu=4,EC=[.125,.215,.35,.446,.526,.582],sl=20,Ny=new k_,CC=new st,Fy=null,tl=(1+Math.sqrt(5))/2,Mc=1/tl,TC=[new T(1,1,1),new T(-1,1,1),new T(1,1,-1),new T(-1,1,-1),new T(0,tl,Mc),new T(0,tl,-Mc),new T(Mc,0,tl),new T(-Mc,0,tl),new T(tl,Mc,0),new T(-tl,Mc,0)],PC=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Fy=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=$C(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=LC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Fy),e.scissorTest=!1,Xp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Nl||e.mapping===Fl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Fy=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Bt,minFilter:Bt,generateMipmaps:!1,type:sf,format:_s,encoding:ks,depthBuffer:!1},i=DC(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DC(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Pq(n)),this._blurMaterial=Dq(n,e,t)}return i}_compileMaterial(e){let t=new fi(this._lodPlanes[0],e);this._renderer.compile(t,Ny)}_sceneToCubeUV(e,t,r,i){let n=new ui(90,1,t,r),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(CC),a.toneMapping=ho,a.autoClear=!1;let h=new Uu({name:"PMREM.Background",side:Xr,depthWrite:!1,depthTest:!1}),u=new fi(new $a,h),d=!1,f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,d=!0):(h.color.copy(CC),d=!0);for(let m=0;m<6;m++){let p=m%3;p===0?(n.up.set(0,s[m],0),n.lookAt(o[m],0,0)):p===1?(n.up.set(0,0,s[m]),n.lookAt(0,o[m],0)):(n.up.set(0,s[m],0),n.lookAt(0,0,o[m]));let g=this._cubeSize;Xp(i,p*g,m>2?g:0,g,g),a.setRenderTarget(i),d&&a.render(u,n),a.render(e,n)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=f}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===Nl||e.mapping===Fl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=$C()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=LC());let n=i?this._cubemapMaterial:this._equirectMaterial,s=new fi(this._lodPlanes[0],n),o=n.uniforms;o.envMap.value=e;let a=this._cubeSize;Xp(t,0,0,3*a,2*a),r.setRenderTarget(t),r.render(s,Ny)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let n=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=TC[(i-1)%TC.length];this._blur(e,i-1,i,n,s)}t.autoClear=r}_blur(e,t,r,i,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",n),this._halfBlur(s,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,s,o){let a=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,h=new fi(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[r]-1,f=isFinite(n)?Math.PI/(2*d):2*Math.PI/(2*sl-1),m=n/f,p=isFinite(n)?1+Math.floor(c*m):sl;p>sl&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${sl}`);let g=[],v=0;for(let S=0;S<sl;++S){let _=S/m,w=Math.exp(-_*_/2);g.push(w),S===0?v+=w:S<p&&(v+=2*w)}for(let S=0;S<g.length;S++)g[S]=g[S]/v;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=g,u.latitudinal.value=s==="latitudinal",o&&(u.poleAxis.value=o);let{_lodMax:y}=this;u.dTheta.value=f,u.mipInt.value=y-r;let b=this._sizeLods[i],x=3*b*(i>y-uu?i-y+uu:0),A=4*(this._cubeSize-b);Xp(t,x,A,3*b,2*b),a.setRenderTarget(t),a.render(h,Ny)}};function Pq(e){let t=[],r=[],i=[],n=e,s=e-uu+1+EC.length;for(let o=0;o<s;o++){let a=Math.pow(2,n);r.push(a);let l=1/a;o>e-uu?l=EC[o-e+uu-1]:o===0&&(l=0),i.push(l);let c=1/(a-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],f=6,m=6,p=3,g=2,v=1,y=new Float32Array(p*m*f),b=new Float32Array(g*m*f),x=new Float32Array(v*m*f);for(let S=0;S<f;S++){let _=S%3*2/3-1,w=S>2?0:-1,M=[_,w,0,_+2/3,w,0,_+2/3,w+1,0,_,w,0,_+2/3,w+1,0,_,w+1,0];y.set(M,p*m*S),b.set(d,g*m*S);let C=[S,S,S,S,S,S];x.set(C,v*m*S)}let A=new at;A.setAttribute("position",new ft(y,p)),A.setAttribute("uv",new ft(b,g)),A.setAttribute("faceIndex",new ft(x,v)),t.push(A),n>uu&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function DC(e,t,r){let i=new br(e,t,r);return i.texture.mapping=Of,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Xp(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function Dq(e,t,r){let i=new Float32Array(sl),n=new T(0,1,0);return new kr({name:"SphericalGaussianBlur",defines:{n:sl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:O_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qr,depthTest:!1,depthWrite:!1})}function LC(){return new kr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:O_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qr,depthTest:!1,depthWrite:!1})}function $C(){return new kr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:O_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qr,depthTest:!1,depthWrite:!1})}function O_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Lq(e){let t=new WeakMap,r=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===Pb||l===Db,h=l===Nl||l===Fl;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=t.get(a);return r===null&&(r=new PC(e)),u=c?r.fromEquirectangular(a,u):r.fromCubemap(a,u),t.set(a,u),u.texture}else{if(t.has(a))return t.get(a).texture;{let u=a.image;if(c&&u&&u.height>0||h&&u&&n(u)){r===null&&(r=new PC(e));let d=c?r.fromEquirectangular(a):r.fromCubemap(a);return t.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function n(a){let l=0,c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function o(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:o}}function $q(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function Iq(e,t,r,i){let n={},s=new WeakMap;function o(u){let d=u.target;d.index!==null&&t.remove(d.index);for(let m in d.attributes)t.remove(d.attributes[m]);d.removeEventListener("dispose",o),delete n[d.id];let f=s.get(d);f&&(t.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,r.memory.geometries--}function a(u,d){return n[d.id]===!0||(d.addEventListener("dispose",o),n[d.id]=!0,r.memory.geometries++),d}function l(u){let d=u.attributes;for(let m in d)t.update(d[m],34962);let f=u.morphAttributes;for(let m in f){let p=f[m];for(let g=0,v=p.length;g<v;g++)t.update(p[g],34962)}}function c(u){let d=[],f=u.index,m=u.attributes.position,p=0;if(f!==null){let y=f.array;p=f.version;for(let b=0,x=y.length;b<x;b+=3){let A=y[b+0],S=y[b+1],_=y[b+2];d.push(A,S,S,_,_,A)}}else{let y=m.array;p=m.version;for(let b=0,x=y.length/3-1;b<x;b+=3){let A=b+0,S=b+1,_=b+2;d.push(A,S,S,_,_,A)}}let g=new(_O(d)?_h:TO)(d,1);g.version=p;let v=s.get(u);v&&t.remove(v),s.set(u,g)}function h(u){let d=s.get(u);if(d){let f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function Rq(e,t,r,i){let n=i.isWebGL2,s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){e.drawElements(s,f,a,d*l),r.update(f,s,1)}function u(d,f,m){if(m===0)return;let p,g;if(n)p=e,g="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](s,f,a,d*l,m),r.update(f,s,m)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function kq(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(r.calls++,o){case 4:r.triangles+=a*(s/3);break;case 1:r.lines+=a*(s/2);break;case 3:r.lines+=a*(s-1);break;case 2:r.lines+=a*s;break;case 0:r.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function Oq(e,t){return e[0]-t[0]}function Bq(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Uy(e,t){let r=1,i=t.isInterleavedBufferAttribute?t.data.array:t.array;i instanceof Int8Array?r=127:i instanceof Uint8Array?r=255:i instanceof Uint16Array?r=65535:i instanceof Int16Array?r=32767:i instanceof Int32Array?r=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),e.divideScalar(r)}function zq(e,t,r){let i={},n=new Float32Array(8),s=new WeakMap,o=new ct,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,u,d){let f=c.morphTargetInfluences;if(t.isWebGL2===!0){let m=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,p=m!==void 0?m.length:0,g=s.get(h);if(g===void 0||g.count!==p){let b=function(){D.dispose(),s.delete(h),h.removeEventListener("dispose",b)};g!==void 0&&g.texture.dispose();let x=h.morphAttributes.position!==void 0,A=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,_=h.morphAttributes.position||[],w=h.morphAttributes.normal||[],M=h.morphAttributes.color||[],C=0;x===!0&&(C=1),A===!0&&(C=2),S===!0&&(C=3);let E=h.attributes.position.count*C,$=1;E>t.maxTextureSize&&($=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);let P=new Float32Array(E*$*4*p),D=new CO(P,E,$,p);D.type=ca,D.needsUpdate=!0;let W=C*4;for(let V=0;V<p;V++){let H=_[V],L=w[V],O=M[V],k=E*$*4*V;for(let j=0;j<H.count;j++){let F=j*W;x===!0&&(o.fromBufferAttribute(H,j),H.normalized===!0&&Uy(o,H),P[k+F+0]=o.x,P[k+F+1]=o.y,P[k+F+2]=o.z,P[k+F+3]=0),A===!0&&(o.fromBufferAttribute(L,j),L.normalized===!0&&Uy(o,L),P[k+F+4]=o.x,P[k+F+5]=o.y,P[k+F+6]=o.z,P[k+F+7]=0),S===!0&&(o.fromBufferAttribute(O,j),O.normalized===!0&&Uy(o,O),P[k+F+8]=o.x,P[k+F+9]=o.y,P[k+F+10]=o.z,P[k+F+11]=O.itemSize===4?o.w:1)}}g={count:p,texture:D,size:new K(E,$)},s.set(h,g),h.addEventListener("dispose",b)}let v=0;for(let b=0;b<f.length;b++)v+=f[b];let y=h.morphTargetsRelative?1:1-v;d.getUniforms().setValue(e,"morphTargetBaseInfluence",y),d.getUniforms().setValue(e,"morphTargetInfluences",f),d.getUniforms().setValue(e,"morphTargetsTexture",g.texture,r),d.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let m=f===void 0?0:f.length,p=i[h.id];if(p===void 0||p.length!==m){p=[];for(let x=0;x<m;x++)p[x]=[x,0];i[h.id]=p}for(let x=0;x<m;x++){let A=p[x];A[0]=x,A[1]=f[x]}p.sort(Bq);for(let x=0;x<8;x++)x<m&&p[x][1]?(a[x][0]=p[x][0],a[x][1]=p[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(Oq);let g=h.morphAttributes.position,v=h.morphAttributes.normal,y=0;for(let x=0;x<8;x++){let A=a[x],S=A[0],_=A[1];S!==Number.MAX_SAFE_INTEGER&&_?(g&&h.getAttribute("morphTarget"+x)!==g[S]&&h.setAttribute("morphTarget"+x,g[S]),v&&h.getAttribute("morphNormal"+x)!==v[S]&&h.setAttribute("morphNormal"+x,v[S]),n[x]=_,y+=_):(g&&h.hasAttribute("morphTarget"+x)===!0&&h.deleteAttribute("morphTarget"+x),v&&h.hasAttribute("morphNormal"+x)===!0&&h.deleteAttribute("morphNormal"+x),n[x]=0)}let b=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(e,"morphTargetBaseInfluence",b),d.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function Nq(e,t,r,i){let n=new WeakMap;function s(l){let c=i.render.frame,h=l.geometry,u=t.get(l,h);return n.get(u)!==c&&(t.update(u),n.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),u}function o(){n=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),r.remove(c.instanceMatrix),c.instanceColor!==null&&r.remove(c.instanceColor)}return{update:s,dispose:o}}var DO=new Ti,LO=new CO,$O=new DY,IO=new I_,IC=[],RC=[],kC=new Float32Array(16),OC=new Float32Array(9),BC=new Float32Array(4);function nd(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,s=IC[n];if(s===void 0&&(s=new Float32Array(n),IC[n]=s),t!==0){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=r,e[o].toArray(s,a)}return s}function Pi(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function Di(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function Kv(e,t){let r=RC[t];r===void 0&&(r=new Int32Array(t),RC[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function Fq(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function Uq(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Pi(r,t))return;e.uniform2fv(this.addr,t),Di(r,t)}}function Hq(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Pi(r,t))return;e.uniform3fv(this.addr,t),Di(r,t)}}function Vq(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Pi(r,t))return;e.uniform4fv(this.addr,t),Di(r,t)}}function Wq(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Pi(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Di(r,t)}else{if(Pi(r,i))return;BC.set(i),e.uniformMatrix2fv(this.addr,!1,BC),Di(r,i)}}function jq(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Pi(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Di(r,t)}else{if(Pi(r,i))return;OC.set(i),e.uniformMatrix3fv(this.addr,!1,OC),Di(r,i)}}function Gq(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Pi(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Di(r,t)}else{if(Pi(r,i))return;kC.set(i),e.uniformMatrix4fv(this.addr,!1,kC),Di(r,i)}}function Yq(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Kq(e,t){let r=this.cache;Pi(r,t)||(e.uniform2iv(this.addr,t),Di(r,t))}function Xq(e,t){let r=this.cache;Pi(r,t)||(e.uniform3iv(this.addr,t),Di(r,t))}function qq(e,t){let r=this.cache;Pi(r,t)||(e.uniform4iv(this.addr,t),Di(r,t))}function Qq(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function Zq(e,t){let r=this.cache;Pi(r,t)||(e.uniform2uiv(this.addr,t),Di(r,t))}function Jq(e,t){let r=this.cache;Pi(r,t)||(e.uniform3uiv(this.addr,t),Di(r,t))}function eQ(e,t){let r=this.cache;Pi(r,t)||(e.uniform4uiv(this.addr,t),Di(r,t))}function tQ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||DO,n)}function rQ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||$O,n)}function iQ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||IO,n)}function nQ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||LO,n)}function sQ(e){switch(e){case 5126:return Fq;case 35664:return Uq;case 35665:return Hq;case 35666:return Vq;case 35674:return Wq;case 35675:return jq;case 35676:return Gq;case 5124:case 35670:return Yq;case 35667:case 35671:return Kq;case 35668:case 35672:return Xq;case 35669:case 35673:return qq;case 5125:return Qq;case 36294:return Zq;case 36295:return Jq;case 36296:return eQ;case 35678:case 36198:case 36298:case 36306:case 35682:return tQ;case 35679:case 36299:case 36307:return rQ;case 35680:case 36300:case 36308:case 36293:return iQ;case 36289:case 36303:case 36311:case 36292:return nQ}}function oQ(e,t){e.uniform1fv(this.addr,t)}function aQ(e,t){let r=nd(t,this.size,2);e.uniform2fv(this.addr,r)}function lQ(e,t){let r=nd(t,this.size,3);e.uniform3fv(this.addr,r)}function cQ(e,t){let r=nd(t,this.size,4);e.uniform4fv(this.addr,r)}function uQ(e,t){let r=nd(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function dQ(e,t){let r=nd(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function hQ(e,t){let r=nd(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function fQ(e,t){e.uniform1iv(this.addr,t)}function pQ(e,t){e.uniform2iv(this.addr,t)}function mQ(e,t){e.uniform3iv(this.addr,t)}function gQ(e,t){e.uniform4iv(this.addr,t)}function vQ(e,t){e.uniform1uiv(this.addr,t)}function yQ(e,t){e.uniform2uiv(this.addr,t)}function xQ(e,t){e.uniform3uiv(this.addr,t)}function bQ(e,t){e.uniform4uiv(this.addr,t)}function wQ(e,t,r){let i=t.length,n=Kv(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.setTexture2D(t[s]||DO,n[s])}function SQ(e,t,r){let i=t.length,n=Kv(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.setTexture3D(t[s]||$O,n[s])}function _Q(e,t,r){let i=t.length,n=Kv(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.setTextureCube(t[s]||IO,n[s])}function AQ(e,t,r){let i=t.length,n=Kv(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.setTexture2DArray(t[s]||LO,n[s])}function MQ(e){switch(e){case 5126:return oQ;case 35664:return aQ;case 35665:return lQ;case 35666:return cQ;case 35674:return uQ;case 35675:return dQ;case 35676:return hQ;case 5124:case 35670:return fQ;case 35667:case 35671:return pQ;case 35668:case 35672:return mQ;case 35669:case 35673:return gQ;case 5125:return vQ;case 36294:return yQ;case 36295:return xQ;case 36296:return bQ;case 35678:case 36198:case 36298:case 36306:case 35682:return wQ;case 35679:case 36299:case 36307:return SQ;case 35680:case 36300:case 36308:case 36293:return _Q;case 36289:case 36303:case 36311:case 36292:return AQ}}var EQ=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=sQ(t.type)}},CQ=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=MQ(t.type)}},TQ=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let n=0,s=i.length;n!==s;++n){let o=i[n];o.setValue(e,t[o.id],r)}}},Hy=/(\w+)(\])?(\[|\.)?/g;function zC(e,t){e.seq.push(t),e.map[t.id]=t}function PQ(e,t,r){let i=e.name,n=i.length;for(Hy.lastIndex=0;;){let s=Hy.exec(i),o=Hy.lastIndex,a=s[1],l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===n){zC(r,c===void 0?new EQ(a,e,t):new CQ(a,e,t));break}else{let h=r.map[a];h===void 0&&(h=new TQ(a),zC(r,h)),r=h}}}var qm=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),s=e.getUniformLocation(t,n.name);PQ(n,s,this)}}setValue(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,s=t.length;n!==s;++n){let o=t[n],a=r[o.id];a.needsUpdate!==!1&&o.setValue(e,a.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let s=e[i];s.id in t&&r.push(s)}return r}};function NC(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var DQ=0;function LQ(e,t){let r=e.split(`
`),i=[],n=Math.max(t-6,0),s=Math.min(t+6,r.length);for(let o=n;o<s;o++){let a=o+1;i.push(`${a===t?">":" "} ${a}: ${r[o]}`)}return i.join(`
`)}function $Q(e){switch(e){case ks:return["Linear","( value )"];case ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function FC(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let o=parseInt(s[1]);return r.toUpperCase()+`

`+n+`

`+LQ(e.getShaderSource(t),o)}else return n}function IQ(e,t){let r=$Q(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function RQ(e,t){let r;switch(t){case HG:r="Linear";break;case VG:r="Reinhard";break;case WG:r="OptimizedCineon";break;case jG:r="ACESFilmic";break;case GG:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function kQ(e){return[e.extensionDerivatives||!!e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(th).join(`
`)}function OQ(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function BQ(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let s=e.getActiveAttrib(t,n),o=s.name,a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),r[o]={type:s.type,location:e.getAttribLocation(t,o),locationSize:a}}return r}function th(e){return e!==""}function UC(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function HC(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var zQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function kb(e){return e.replace(zQ,NQ)}function NQ(e,t){let r=lt[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return kb(r)}var FQ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,UQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function VC(e){return e.replace(UQ,RO).replace(FQ,HQ)}function HQ(e,t,r,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),RO(e,t,r,i)}function RO(e,t,r,i){let n="";for(let s=parseInt(t);s<parseInt(r);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function WC(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function VQ(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===D_?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===gO?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===eh&&(t="SHADOWMAP_TYPE_VSM"),t}function WQ(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Nl:case Fl:t="ENVMAP_TYPE_CUBE";break;case Of:t="ENVMAP_TYPE_CUBE_UV";break}return t}function jQ(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Fl:t="ENVMAP_MODE_REFRACTION";break}return t}function GQ(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case xO:t="ENVMAP_BLENDING_MULTIPLY";break;case FG:t="ENVMAP_BLENDING_MIX";break;case UG:t="ENVMAP_BLENDING_ADD";break}return t}function YQ(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function KQ(e,t,r,i){let n=e.getContext(),s=r.defines,o=r.vertexShader,a=r.fragmentShader,l=VQ(r),c=WQ(r),h=jQ(r),u=GQ(r),d=YQ(r),f=r.isWebGL2?"":kQ(r),m=OQ(s),p=n.createProgram(),g,v,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=[m].filter(th).join(`
`),g.length>0&&(g+=`
`),v=[f,m].filter(th).join(`
`),v.length>0&&(v+=`
`)):(g=[WC(r),"#define SHADER_NAME "+r.shaderName,m,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(th).join(`
`),v=[f,WC(r),"#define SHADER_NAME "+r.shaderName,m,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",r.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==ho?"#define TONE_MAPPING":"",r.toneMapping!==ho?lt.tonemapping_pars_fragment:"",r.toneMapping!==ho?RQ("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",lt.encodings_pars_fragment,IQ("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(th).join(`
`)),o=kb(o),o=UC(o,r),o=HC(o,r),a=kb(a),a=UC(a,r),a=HC(a,r),o=VC(o),a=VC(a),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",r.glslVersion===fC?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===fC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let b=y+g+o,x=y+v+a,A=NC(n,35633,b),S=NC(n,35632,x);if(n.attachShader(p,A),n.attachShader(p,S),r.index0AttributeName!==void 0?n.bindAttribLocation(p,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(p,0,"position"),n.linkProgram(p),e.debug.checkShaderErrors){let M=n.getProgramInfoLog(p).trim(),C=n.getShaderInfoLog(A).trim(),E=n.getShaderInfoLog(S).trim(),$=!0,P=!0;if(n.getProgramParameter(p,35714)===!1){$=!1;let D=FC(n,A,"vertex"),W=FC(n,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(p,35715)+`

Program Info Log: `+M+`
`+D+`
`+W)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(C===""||E==="")&&(P=!1);P&&(this.diagnostics={runnable:$,programLog:M,vertexShader:{log:C,prefix:g},fragmentShader:{log:E,prefix:v}})}n.deleteShader(A),n.deleteShader(S);let _;this.getUniforms=function(){return _===void 0&&(_=new qm(n,p)),_};let w;return this.getAttributes=function(){return w===void 0&&(w=BQ(n,p)),w},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(p),this.program=void 0},this.name=r.shaderName,this.id=DQ++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=A,this.fragmentShader=S,this}var XQ=0,qQ=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){let t=this.shaderCache;if(t.has(e)===!1){let r=new QQ(e);t.set(e,r)}return t.get(e)}},QQ=class{constructor(e){this.id=XQ++,this.code=e,this.usedTimes=0}};function ZQ(e,t,r,i,n,s,o){let a=new $_,l=new qQ,c=[],h=n.isWebGL2,u=n.logarithmicDepthBuffer,d=n.vertexTextures,f=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(w,M,C,E,$){let P=E.fog,D=$.geometry,W=w.isMeshStandardMaterial?E.environment:null,V=(w.isMeshStandardMaterial?r:t).get(w.envMap||W),H=!!V&&V.mapping===Of?V.image.height:null,L=m[w.type];w.precision!==null&&(f=n.getMaxPrecision(w.precision),f!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",f,"instead."));let O=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,k=O!==void 0?O.length:0,j=0;D.morphAttributes.position!==void 0&&(j=1),D.morphAttributes.normal!==void 0&&(j=2),D.morphAttributes.color!==void 0&&(j=3);let F,Y,X,Z;if(L){let Q=gs[L];F=Q.vertexShader,Y=Q.fragmentShader}else F=w.vertexShader,Y=w.fragmentShader,l.update(w),X=l.getVertexShaderID(w),Z=l.getFragmentShaderID(w);let U=e.getRenderTarget(),ne=w.alphaTest>0,ee=w.clearcoat>0,te=w.iridescence>0;return{isWebGL2:h,shaderID:L,shaderName:w.type,vertexShader:F,fragmentShader:Y,defines:w.defines,customVertexShaderID:X,customFragmentShaderID:Z,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:f,instancing:$.isInstancedMesh===!0,instancingColor:$.isInstancedMesh===!0&&$.instanceColor!==null,supportsVertexTextures:d,outputEncoding:U===null?e.outputEncoding:U.isXRRenderTarget===!0?U.texture.encoding:ks,map:!!w.map,matcap:!!w.matcap,envMap:!!V,envMapMode:V&&V.mapping,envMapCubeUVHeight:H,lightMap:!!w.lightMap,aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:w.normalMapType===uY,tangentSpaceNormalMap:w.normalMapType===cY,decodeVideoTexture:!!w.map&&w.map.isVideoTexture===!0&&w.map.encoding===ht,clearcoat:ee,clearcoatMap:ee&&!!w.clearcoatMap,clearcoatRoughnessMap:ee&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:ee&&!!w.clearcoatNormalMap,iridescence:te,iridescenceMap:te&&!!w.iridescenceMap,iridescenceThicknessMap:te&&!!w.iridescenceThicknessMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,opaque:w.transparent===!1&&w.blending===wl,alphaMap:!!w.alphaMap,alphaTest:ne,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!D.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,vertexUvs:!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatMap||!!w.clearcoatRoughnessMap||!!w.clearcoatNormalMap||!!w.iridescenceMap||!!w.iridescenceThicknessMap||!!w.displacementMap||!!w.transmissionMap||!!w.thicknessMap||!!w.specularIntensityMap||!!w.specularColorMap||!!w.sheenColorMap||!!w.sheenRoughnessMap,uvsVertexOnly:!(!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatNormalMap||!!w.iridescenceMap||!!w.iridescenceThicknessMap||w.transmission>0||!!w.transmissionMap||!!w.thicknessMap||!!w.specularIntensityMap||!!w.specularColorMap||w.sheen>0||!!w.sheenColorMap||!!w.sheenRoughnessMap)&&!!w.displacementMap,fog:!!P,useFog:w.fog===!0,fogExp2:P&&P.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:u,skinning:$.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:j,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:e.shadowMap.enabled&&C.length>0,shadowMapType:e.shadowMap.type,toneMapping:w.toneMapped?e.toneMapping:ho,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===_i,flipSided:w.side===Xr,useDepthPacking:!!w.depthPacking,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}}function g(w){let M=[];if(w.shaderID?M.push(w.shaderID):(M.push(w.customVertexShaderID),M.push(w.customFragmentShaderID)),w.defines!==void 0)for(let C in w.defines)M.push(C),M.push(w.defines[C]);return w.isRawShaderMaterial===!1&&(v(M,w),y(M,w),M.push(e.outputEncoding)),M.push(w.customProgramCacheKey),M.join()}function v(w,M){w.push(M.precision),w.push(M.outputEncoding),w.push(M.envMapMode),w.push(M.envMapCubeUVHeight),w.push(M.combine),w.push(M.vertexUvs),w.push(M.fogExp2),w.push(M.sizeAttenuation),w.push(M.morphTargetsCount),w.push(M.morphAttributeCount),w.push(M.numDirLights),w.push(M.numPointLights),w.push(M.numSpotLights),w.push(M.numHemiLights),w.push(M.numRectAreaLights),w.push(M.numDirLightShadows),w.push(M.numPointLightShadows),w.push(M.numSpotLightShadows),w.push(M.shadowMapType),w.push(M.toneMapping),w.push(M.numClippingPlanes),w.push(M.numClipIntersection),w.push(M.depthPacking)}function y(w,M){a.disableAll(),M.isWebGL2&&a.enable(0),M.supportsVertexTextures&&a.enable(1),M.instancing&&a.enable(2),M.instancingColor&&a.enable(3),M.map&&a.enable(4),M.matcap&&a.enable(5),M.envMap&&a.enable(6),M.lightMap&&a.enable(7),M.aoMap&&a.enable(8),M.emissiveMap&&a.enable(9),M.bumpMap&&a.enable(10),M.normalMap&&a.enable(11),M.objectSpaceNormalMap&&a.enable(12),M.tangentSpaceNormalMap&&a.enable(13),M.clearcoat&&a.enable(14),M.clearcoatMap&&a.enable(15),M.clearcoatRoughnessMap&&a.enable(16),M.clearcoatNormalMap&&a.enable(17),M.iridescence&&a.enable(18),M.iridescenceMap&&a.enable(19),M.iridescenceThicknessMap&&a.enable(20),M.displacementMap&&a.enable(21),M.specularMap&&a.enable(22),M.roughnessMap&&a.enable(23),M.metalnessMap&&a.enable(24),M.gradientMap&&a.enable(25),M.alphaMap&&a.enable(26),M.alphaTest&&a.enable(27),M.vertexColors&&a.enable(28),M.vertexAlphas&&a.enable(29),M.vertexUvs&&a.enable(30),M.vertexTangents&&a.enable(31),M.uvsVertexOnly&&a.enable(32),M.fog&&a.enable(33),w.push(a.mask),a.disableAll(),M.useFog&&a.enable(0),M.flatShading&&a.enable(1),M.logarithmicDepthBuffer&&a.enable(2),M.skinning&&a.enable(3),M.morphTargets&&a.enable(4),M.morphNormals&&a.enable(5),M.morphColors&&a.enable(6),M.premultipliedAlpha&&a.enable(7),M.shadowMapEnabled&&a.enable(8),M.physicallyCorrectLights&&a.enable(9),M.doubleSided&&a.enable(10),M.flipSided&&a.enable(11),M.useDepthPacking&&a.enable(12),M.dithering&&a.enable(13),M.specularIntensityMap&&a.enable(14),M.specularColorMap&&a.enable(15),M.transmission&&a.enable(16),M.transmissionMap&&a.enable(17),M.thicknessMap&&a.enable(18),M.sheen&&a.enable(19),M.sheenColorMap&&a.enable(20),M.sheenRoughnessMap&&a.enable(21),M.decodeVideoTexture&&a.enable(22),M.opaque&&a.enable(23),w.push(a.mask)}function b(w){let M=m[w.type],C;if(M){let E=gs[M];C=rd.clone(E.uniforms)}else C=w.uniforms;return C}function x(w,M){let C;for(let E=0,$=c.length;E<$;E++){let P=c[E];if(P.cacheKey===M){C=P,++C.usedTimes;break}}return C===void 0&&(C=new KQ(e,M,w,s),c.push(C)),C}function A(w){if(--w.usedTimes===0){let M=c.indexOf(w);c[M]=c[c.length-1],c.pop(),w.destroy()}}function S(w){l.remove(w)}function _(){l.dispose()}return{getParameters:p,getProgramCacheKey:g,getUniforms:b,acquireProgram:x,releaseProgram:A,releaseShaderCache:S,programs:c,dispose:_}}function JQ(){let e=new WeakMap;function t(s){let o=e.get(s);return o===void 0&&(o={},e.set(s,o)),o}function r(s){e.delete(s)}function i(s,o,a){e.get(s)[o]=a}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function eZ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function jC(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function GC(){let e=[],t=0,r=[],i=[],n=[];function s(){t=0,r.length=0,i.length=0,n.length=0}function o(u,d,f,m,p,g){let v=e[t];return v===void 0?(v={id:u.id,object:u,geometry:d,material:f,groupOrder:m,renderOrder:u.renderOrder,z:p,group:g},e[t]=v):(v.id=u.id,v.object=u,v.geometry=d,v.material=f,v.groupOrder=m,v.renderOrder=u.renderOrder,v.z=p,v.group=g),t++,v}function a(u,d,f,m,p,g){let v=o(u,d,f,m,p,g);f.transmission>0?i.push(v):f.transparent===!0?n.push(v):r.push(v)}function l(u,d,f,m,p,g){let v=o(u,d,f,m,p,g);f.transmission>0?i.unshift(v):f.transparent===!0?n.unshift(v):r.unshift(v)}function c(u,d){r.length>1&&r.sort(u||eZ),i.length>1&&i.sort(d||jC),n.length>1&&n.sort(d||jC)}function h(){for(let u=t,d=e.length;u<d;u++){let f=e[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:i,transparent:n,init:s,push:a,unshift:l,finish:h,sort:c}}function tZ(){let e=new WeakMap;function t(i,n){let s;return e.has(i)===!1?(s=new GC,e.set(i,[s])):n>=e.get(i).length?(s=new GC,e.get(i).push(s)):s=e.get(i)[n],s}function r(){e=new WeakMap}return{get:t,dispose:r}}function rZ(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new T,color:new st};break;case"SpotLight":r={position:new T,direction:new T,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new T,color:new st,distance:0,decay:0};break;case"HemisphereLight":r={direction:new T,skyColor:new st,groundColor:new st};break;case"RectAreaLight":r={color:new st,position:new T,halfWidth:new T,halfHeight:new T};break}return e[t.id]=r,r}}}function iZ(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var nZ=0;function sZ(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function oZ(e,t){let r=new rZ,i=iZ(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let h=0;h<9;h++)n.probe.push(new T);let s=new T,o=new We,a=new We;function l(h,u){let d=0,f=0,m=0;for(let M=0;M<9;M++)n.probe[M].set(0,0,0);let p=0,g=0,v=0,y=0,b=0,x=0,A=0,S=0;h.sort(sZ);let _=u!==!0?Math.PI:1;for(let M=0,C=h.length;M<C;M++){let E=h[M],$=E.color,P=E.intensity,D=E.distance,W=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)d+=$.r*P*_,f+=$.g*P*_,m+=$.b*P*_;else if(E.isLightProbe)for(let V=0;V<9;V++)n.probe[V].addScaledVector(E.sh.coefficients[V],P);else if(E.isDirectionalLight){let V=r.get(E);if(V.color.copy(E.color).multiplyScalar(E.intensity*_),E.castShadow){let H=E.shadow,L=i.get(E);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,n.directionalShadow[p]=L,n.directionalShadowMap[p]=W,n.directionalShadowMatrix[p]=E.shadow.matrix,x++}n.directional[p]=V,p++}else if(E.isSpotLight){let V=r.get(E);if(V.position.setFromMatrixPosition(E.matrixWorld),V.color.copy($).multiplyScalar(P*_),V.distance=D,V.coneCos=Math.cos(E.angle),V.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),V.decay=E.decay,E.castShadow){let H=E.shadow,L=i.get(E);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,n.spotShadow[v]=L,n.spotShadowMap[v]=W,n.spotShadowMatrix[v]=E.shadow.matrix,S++}n.spot[v]=V,v++}else if(E.isRectAreaLight){let V=r.get(E);V.color.copy($).multiplyScalar(P),V.halfWidth.set(E.width*.5,0,0),V.halfHeight.set(0,E.height*.5,0),n.rectArea[y]=V,y++}else if(E.isPointLight){let V=r.get(E);if(V.color.copy(E.color).multiplyScalar(E.intensity*_),V.distance=E.distance,V.decay=E.decay,E.castShadow){let H=E.shadow,L=i.get(E);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,L.shadowCameraNear=H.camera.near,L.shadowCameraFar=H.camera.far,n.pointShadow[g]=L,n.pointShadowMap[g]=W,n.pointShadowMatrix[g]=E.shadow.matrix,A++}n.point[g]=V,g++}else if(E.isHemisphereLight){let V=r.get(E);V.skyColor.copy(E.color).multiplyScalar(P*_),V.groundColor.copy(E.groundColor).multiplyScalar(P*_),n.hemi[b]=V,b++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=we.LTC_FLOAT_1,n.rectAreaLTC2=we.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=we.LTC_HALF_1,n.rectAreaLTC2=we.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=f,n.ambient[2]=m;let w=n.hash;(w.directionalLength!==p||w.pointLength!==g||w.spotLength!==v||w.rectAreaLength!==y||w.hemiLength!==b||w.numDirectionalShadows!==x||w.numPointShadows!==A||w.numSpotShadows!==S)&&(n.directional.length=p,n.spot.length=v,n.rectArea.length=y,n.point.length=g,n.hemi.length=b,n.directionalShadow.length=x,n.directionalShadowMap.length=x,n.pointShadow.length=A,n.pointShadowMap.length=A,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=x,n.pointShadowMatrix.length=A,n.spotShadowMatrix.length=S,w.directionalLength=p,w.pointLength=g,w.spotLength=v,w.rectAreaLength=y,w.hemiLength=b,w.numDirectionalShadows=x,w.numPointShadows=A,w.numSpotShadows=S,n.version=nZ++)}function c(h,u){let d=0,f=0,m=0,p=0,g=0,v=u.matrixWorldInverse;for(let y=0,b=h.length;y<b;y++){let x=h[y];if(x.isDirectionalLight){let A=n.directional[d];A.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(v),d++}else if(x.isSpotLight){let A=n.spot[m];A.position.setFromMatrixPosition(x.matrixWorld),A.position.applyMatrix4(v),A.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(v),m++}else if(x.isRectAreaLight){let A=n.rectArea[p];A.position.setFromMatrixPosition(x.matrixWorld),A.position.applyMatrix4(v),a.identity(),o.copy(x.matrixWorld),o.premultiply(v),a.extractRotation(o),A.halfWidth.set(x.width*.5,0,0),A.halfHeight.set(0,x.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),p++}else if(x.isPointLight){let A=n.point[f];A.position.setFromMatrixPosition(x.matrixWorld),A.position.applyMatrix4(v),f++}else if(x.isHemisphereLight){let A=n.hemi[g];A.direction.setFromMatrixPosition(x.matrixWorld),A.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:n}}function YC(e,t){let r=new oZ(e,t),i=[],n=[];function s(){i.length=0,n.length=0}function o(h){i.push(h)}function a(h){n.push(h)}function l(h){r.setup(i,h)}function c(h){r.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function aZ(e,t){let r=new WeakMap;function i(s,o=0){let a;return r.has(s)===!1?(a=new YC(e,t),r.set(s,[a])):o>=r.get(s).length?(a=new YC(e,t),r.get(s).push(a)):a=r.get(s)[o],a}function n(){r=new WeakMap}return{get:i,dispose:n}}var kO=class extends Nf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=$o,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},lZ=class extends Nf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new T,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},cZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function dZ(e,t,r){let i=new R_,n=new K,s=new K,o=new ct,a=new kO({depthPacking:SO}),l=new lZ,c={},h=r.maxTextureSize,u={0:Xr,1:Ao,2:_i},d=new kr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new K},radius:{value:4}},vertexShader:cZ,fragmentShader:uZ}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let m=new at;m.setAttribute("position",new ft(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let p=new fi(m,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=D_,this.render=function(x,A,S){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;let _=e.getRenderTarget(),w=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),C=e.state;C.setBlending(Qr),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);for(let E=0,$=x.length;E<$;E++){let P=x[E],D=P.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;n.copy(D.mapSize);let W=D.getFrameExtents();if(n.multiply(W),s.copy(D.mapSize),(n.x>h||n.y>h)&&(n.x>h&&(s.x=Math.floor(h/W.x),n.x=s.x*W.x,D.mapSize.x=s.x),n.y>h&&(s.y=Math.floor(h/W.y),n.y=s.y*W.y,D.mapSize.y=s.y)),D.map===null){let H=this.type!==eh?{minFilter:ur,magFilter:ur}:{};D.map=new br(n.x,n.y,H),D.map.texture.name=P.name+".shadowMap",D.camera.updateProjectionMatrix()}e.setRenderTarget(D.map),e.clear();let V=D.getViewportCount();for(let H=0;H<V;H++){let L=D.getViewport(H);o.set(s.x*L.x,s.y*L.y,s.x*L.z,s.y*L.w),C.viewport(o),D.updateMatrices(P,H),i=D.getFrustum(),b(A,S,D.camera,P,this.type)}D.isPointLightShadow!==!0&&this.type===eh&&v(D,S),D.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(_,w,M)};function v(x,A){let S=t.update(p);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new br(n.x,n.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(A,null,S,d,p,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(A,null,S,f,p,null)}function y(x,A,S,_,w,M){let C=null,E=S.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(E!==void 0?C=E:C=S.isPointLight===!0?l:a,e.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){let $=C.uuid,P=A.uuid,D=c[$];D===void 0&&(D={},c[$]=D);let W=D[P];W===void 0&&(W=C.clone(),D[P]=W),C=W}return C.visible=A.visible,C.wireframe=A.wireframe,M===eh?C.side=A.shadowSide!==null?A.shadowSide:A.side:C.side=A.shadowSide!==null?A.shadowSide:u[A.side],C.alphaMap=A.alphaMap,C.alphaTest=A.alphaTest,C.clipShadows=A.clipShadows,C.clippingPlanes=A.clippingPlanes,C.clipIntersection=A.clipIntersection,C.displacementMap=A.displacementMap,C.displacementScale=A.displacementScale,C.displacementBias=A.displacementBias,C.wireframeLinewidth=A.wireframeLinewidth,C.linewidth=A.linewidth,S.isPointLight===!0&&C.isMeshDistanceMaterial===!0&&(C.referencePosition.setFromMatrixPosition(S.matrixWorld),C.nearDistance=_,C.farDistance=w),C}function b(x,A,S,_,w){if(x.visible===!1)return;if(x.layers.test(A.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&w===eh)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);let C=t.update(x),E=x.material;if(Array.isArray(E)){let $=C.groups;for(let P=0,D=$.length;P<D;P++){let W=$[P],V=E[W.materialIndex];if(V&&V.visible){let H=y(x,V,_,S.near,S.far,w);e.renderBufferDirect(S,null,C,H,x,W)}}}else if(E.visible){let $=y(x,E,_,S.near,S.far,w);e.renderBufferDirect(S,null,C,$,x,null)}}let M=x.children;for(let C=0,E=M.length;C<E;C++)b(M[C],A,S,_,w)}}function hZ(e,t,r){let i=r.isWebGL2;function n(){let G=!1,Me=new ct,be=null,Je=new ct(0,0,0,0);return{setMask:function(Ie){be!==Ie&&!G&&(e.colorMask(Ie,Ie,Ie,Ie),be=Ie)},setLocked:function(Ie){G=Ie},setClear:function(Ie,rt,ye,Ke,Pe){Pe===!0&&(Ie*=Ke,rt*=Ke,ye*=Ke),Me.set(Ie,rt,ye,Ke),Je.equals(Me)===!1&&(e.clearColor(Ie,rt,ye,Ke),Je.copy(Me))},reset:function(){G=!1,be=null,Je.set(-1,0,0,0)}}}function s(){let G=!1,Me=null,be=null,Je=null;return{setTest:function(Ie){Ie?Z(2929):U(2929)},setMask:function(Ie){Me!==Ie&&!G&&(e.depthMask(Ie),Me=Ie)},setFunc:function(Ie){if(be!==Ie){if(Ie)switch(Ie){case IG:e.depthFunc(512);break;case RG:e.depthFunc(519);break;case kG:e.depthFunc(513);break;case Tb:e.depthFunc(515);break;case OG:e.depthFunc(514);break;case BG:e.depthFunc(518);break;case zG:e.depthFunc(516);break;case NG:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);be=Ie}},setLocked:function(Ie){G=Ie},setClear:function(Ie){Je!==Ie&&(e.clearDepth(Ie),Je=Ie)},reset:function(){G=!1,Me=null,be=null,Je=null}}}function o(){let G=!1,Me=null,be=null,Je=null,Ie=null,rt=null,ye=null,Ke=null,Pe=null;return{setTest:function(Te){G||(Te?Z(2960):U(2960))},setMask:function(Te){Me!==Te&&!G&&(e.stencilMask(Te),Me=Te)},setFunc:function(Te,Ge,it){(be!==Te||Je!==Ge||Ie!==it)&&(e.stencilFunc(Te,Ge,it),be=Te,Je=Ge,Ie=it)},setOp:function(Te,Ge,it){(rt!==Te||ye!==Ge||Ke!==it)&&(e.stencilOp(Te,Ge,it),rt=Te,ye=Ge,Ke=it)},setLocked:function(Te){G=Te},setClear:function(Te){Pe!==Te&&(e.clearStencil(Te),Pe=Te)},reset:function(){G=!1,Me=null,be=null,Je=null,Ie=null,rt=null,ye=null,Ke=null,Pe=null}}}let a=new n,l=new s,c=new o,h={},u={},d=new WeakMap,f=[],m=null,p=!1,g=null,v=null,y=null,b=null,x=null,A=null,S=null,_=!1,w=null,M=null,C=null,E=null,$=null,P=e.getParameter(35661),D=!1,W=0,V=e.getParameter(7938);V.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(V)[1]),D=W>=1):V.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),D=W>=2);let H=null,L={},O=e.getParameter(3088),k=e.getParameter(2978),j=new ct().fromArray(O),F=new ct().fromArray(k);function Y(G,Me,be){let Je=new Uint8Array(4),Ie=e.createTexture();e.bindTexture(G,Ie),e.texParameteri(G,10241,9728),e.texParameteri(G,10240,9728);for(let rt=0;rt<be;rt++)e.texImage2D(Me+rt,0,6408,1,1,0,6408,5121,Je);return Ie}let X={};X[3553]=Y(3553,3553,1),X[34067]=Y(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Z(2929),l.setFunc(Tb),ge(!1),fe(zE),Z(2884),le(Qr);function Z(G){h[G]!==!0&&(e.enable(G),h[G]=!0)}function U(G){h[G]!==!1&&(e.disable(G),h[G]=!1)}function ne(G,Me){return u[G]!==Me?(e.bindFramebuffer(G,Me),u[G]=Me,i&&(G===36009&&(u[36160]=Me),G===36160&&(u[36009]=Me)),!0):!1}function ee(G,Me){let be=f,Je=!1;if(G)if(be=d.get(Me),be===void 0&&(be=[],d.set(Me,be)),G.isWebGLMultipleRenderTargets){let Ie=G.texture;if(be.length!==Ie.length||be[0]!==36064){for(let rt=0,ye=Ie.length;rt<ye;rt++)be[rt]=36064+rt;be.length=Ie.length,Je=!0}}else be[0]!==36064&&(be[0]=36064,Je=!0);else be[0]!==1029&&(be[0]=1029,Je=!0);Je&&(r.isWebGL2?e.drawBuffers(be):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function te(G){return m!==G?(e.useProgram(G),m=G,!0):!1}let Q={[Nc]:32774,[SG]:32778,[_G]:32779};if(i)Q[HE]=32775,Q[VE]=32776;else{let G=t.get("EXT_blend_minmax");G!==null&&(Q[HE]=G.MIN_EXT,Q[VE]=G.MAX_EXT)}let de={[AG]:0,[MG]:1,[EG]:768,[vO]:770,[$G]:776,[DG]:774,[TG]:772,[CG]:769,[yO]:771,[LG]:775,[PG]:773};function le(G,Me,be,Je,Ie,rt,ye,Ke){if(G===Qr){p===!0&&(U(3042),p=!1);return}if(p===!1&&(Z(3042),p=!0),G!==wG){if(G!==g||Ke!==_){if((v!==Nc||x!==Nc)&&(e.blendEquation(32774),v=Nc,x=Nc),Ke)switch(G){case wl:e.blendFuncSeparate(1,771,1,771);break;case NE:e.blendFunc(1,1);break;case FE:e.blendFuncSeparate(0,769,0,1);break;case UE:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}else switch(G){case wl:e.blendFuncSeparate(770,771,1,771);break;case NE:e.blendFunc(770,1);break;case FE:e.blendFuncSeparate(0,769,0,1);break;case UE:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}y=null,b=null,A=null,S=null,g=G,_=Ke}return}Ie=Ie||Me,rt=rt||be,ye=ye||Je,(Me!==v||Ie!==x)&&(e.blendEquationSeparate(Q[Me],Q[Ie]),v=Me,x=Ie),(be!==y||Je!==b||rt!==A||ye!==S)&&(e.blendFuncSeparate(de[be],de[Je],de[rt],de[ye]),y=be,b=Je,A=rt,S=ye),g=G,_=null}function ce(G,Me){G.side===_i?U(2884):Z(2884);let be=G.side===Xr;Me&&(be=!be),ge(be),G.blending===wl&&G.transparent===!1?le(Qr):le(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha),l.setFunc(G.depthFunc),l.setTest(G.depthTest),l.setMask(G.depthWrite),a.setMask(G.colorWrite);let Je=G.stencilWrite;c.setTest(Je),Je&&(c.setMask(G.stencilWriteMask),c.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),c.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),Ae(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?Z(32926):U(32926)}function ge(G){w!==G&&(G?e.frontFace(2304):e.frontFace(2305),w=G)}function fe(G){G!==yG?(Z(2884),G!==M&&(G===zE?e.cullFace(1029):G===xG?e.cullFace(1028):e.cullFace(1032))):U(2884),M=G}function Fe(G){G!==C&&(D&&e.lineWidth(G),C=G)}function Ae(G,Me,be){G?(Z(32823),(E!==Me||$!==be)&&(e.polygonOffset(Me,be),E=Me,$=be)):U(32823)}function Ee(G){G?Z(3089):U(3089)}function ke(G){G===void 0&&(G=33984+P-1),H!==G&&(e.activeTexture(G),H=G)}function Ue(G,Me){H===null&&ke();let be=L[H];be===void 0&&(be={type:void 0,texture:void 0},L[H]=be),(be.type!==G||be.texture!==Me)&&(e.bindTexture(G,Me||X[G]),be.type=G,be.texture=Me)}function ot(){let G=L[H];G!==void 0&&G.type!==void 0&&(e.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function N(){try{e.compressedTexImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function R(){try{e.texSubImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function se(){try{e.texSubImage3D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function pe(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function xe(){try{e.texStorage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Ce(){try{e.texStorage3D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function tt(){try{e.texImage2D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function oe(){try{e.texImage3D.apply(e,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Ye(G){j.equals(G)===!1&&(e.scissor(G.x,G.y,G.z,G.w),j.copy(G))}function Se(G){F.equals(G)===!1&&(e.viewport(G.x,G.y,G.z,G.w),F.copy(G))}function _e(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},H=null,L={},u={},d=new WeakMap,f=[],m=null,p=!1,g=null,v=null,y=null,b=null,x=null,A=null,S=null,_=!1,w=null,M=null,C=null,E=null,$=null,j.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Z,disable:U,bindFramebuffer:ne,drawBuffers:ee,useProgram:te,setBlending:le,setMaterial:ce,setFlipSided:ge,setCullFace:fe,setLineWidth:Fe,setPolygonOffset:Ae,setScissorTest:Ee,activeTexture:ke,bindTexture:Ue,unbindTexture:ot,compressedTexImage2D:N,texImage2D:tt,texImage3D:oe,texStorage2D:xe,texStorage3D:Ce,texSubImage2D:R,texSubImage3D:se,compressedTexSubImage2D:pe,scissor:Ye,viewport:Se,reset:_e}}function fZ(e,t,r,i,n,s,o){let a=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,h=n.maxTextureSize,u=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,p,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,R){return v?new OffscreenCanvas(N,R):Wg("canvas")}function b(N,R,se,pe){let xe=1;if((N.width>pe||N.height>pe)&&(xe=pe/Math.max(N.width,N.height)),xe<1||R===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){let Ce=R?Vg:Math.floor,tt=Ce(xe*N.width),oe=Ce(xe*N.height);p===void 0&&(p=y(tt,oe));let Ye=se?y(tt,oe):p;return Ye.width=tt,Ye.height=oe,Ye.getContext("2d").drawImage(N,0,0,tt,oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+tt+"x"+oe+")."),Ye}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function x(N){return Rb(N.width)&&Rb(N.height)}function A(N){return a?!1:N.wrapS!==Zi||N.wrapT!==Zi||N.minFilter!==ur&&N.minFilter!==Bt}function S(N,R){return N.generateMipmaps&&R&&N.minFilter!==ur&&N.minFilter!==Bt}function _(N){e.generateMipmap(N)}function w(N,R,se,pe,xe=!1){if(a===!1)return R;if(N!==null){if(e[N]!==void 0)return e[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Ce=R;return R===6403&&(se===5126&&(Ce=33326),se===5131&&(Ce=33325),se===5121&&(Ce=33321)),R===33319&&(se===5126&&(Ce=33328),se===5131&&(Ce=33327),se===5121&&(Ce=33323)),R===6408&&(se===5126&&(Ce=34836),se===5131&&(Ce=34842),se===5121&&(Ce=pe===ht&&xe===!1?35907:32856),se===32819&&(Ce=32854),se===32820&&(Ce=32855)),(Ce===33325||Ce===33326||Ce===33327||Ce===33328||Ce===34842||Ce===34836)&&t.get("EXT_color_buffer_float"),Ce}function M(N,R,se){return S(N,se)===!0||N.isFramebufferTexture&&N.minFilter!==ur&&N.minFilter!==Bt?Math.log2(Math.max(R.width,R.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?R.mipmaps.length:1}function C(N){return N===ur||N===WE||N===jE?9728:9729}function E(N){let R=N.target;R.removeEventListener("dispose",E),P(R),R.isVideoTexture&&m.delete(R)}function $(N){let R=N.target;R.removeEventListener("dispose",$),W(R)}function P(N){let R=i.get(N);if(R.__webglInit===void 0)return;let se=N.source,pe=g.get(se);if(pe){let xe=pe[R.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&D(N),Object.keys(pe).length===0&&g.delete(se)}i.remove(N)}function D(N){let R=i.get(N);e.deleteTexture(R.__webglTexture);let se=N.source,pe=g.get(se);delete pe[R.__cacheKey],o.memory.textures--}function W(N){let R=N.texture,se=i.get(N),pe=i.get(R);if(pe.__webglTexture!==void 0&&(e.deleteTexture(pe.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++)e.deleteFramebuffer(se.__webglFramebuffer[xe]),se.__webglDepthbuffer&&e.deleteRenderbuffer(se.__webglDepthbuffer[xe]);else{if(e.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&e.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&e.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let xe=0;xe<se.__webglColorRenderbuffer.length;xe++)se.__webglColorRenderbuffer[xe]&&e.deleteRenderbuffer(se.__webglColorRenderbuffer[xe]);se.__webglDepthRenderbuffer&&e.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let xe=0,Ce=R.length;xe<Ce;xe++){let tt=i.get(R[xe]);tt.__webglTexture&&(e.deleteTexture(tt.__webglTexture),o.memory.textures--),i.remove(R[xe])}i.remove(R),i.remove(N)}let V=0;function H(){V=0}function L(){let N=V;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),V+=1,N}function O(N){let R=[];return R.push(N.wrapS),R.push(N.wrapT),R.push(N.magFilter),R.push(N.minFilter),R.push(N.anisotropy),R.push(N.internalFormat),R.push(N.format),R.push(N.type),R.push(N.generateMipmaps),R.push(N.premultiplyAlpha),R.push(N.flipY),R.push(N.unpackAlignment),R.push(N.encoding),R.join()}function k(N,R){let se=i.get(N);if(N.isVideoTexture&&Ue(N),N.isRenderTargetTexture===!1&&N.version>0&&se.__version!==N.version){let pe=N.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(se,N,R);return}}r.activeTexture(33984+R),r.bindTexture(3553,se.__webglTexture)}function j(N,R){let se=i.get(N);if(N.version>0&&se.__version!==N.version){ee(se,N,R);return}r.activeTexture(33984+R),r.bindTexture(35866,se.__webglTexture)}function F(N,R){let se=i.get(N);if(N.version>0&&se.__version!==N.version){ee(se,N,R);return}r.activeTexture(33984+R),r.bindTexture(32879,se.__webglTexture)}function Y(N,R){let se=i.get(N);if(N.version>0&&se.__version!==N.version){te(se,N,R);return}r.activeTexture(33984+R),r.bindTexture(34067,se.__webglTexture)}let X={[nf]:10497,[Zi]:33071,[Lb]:33648},Z={[ur]:9728,[WE]:9984,[jE]:9986,[Bt]:9729,[YG]:9985,[Bf]:9987};function U(N,R,se){if(se?(e.texParameteri(N,10242,X[R.wrapS]),e.texParameteri(N,10243,X[R.wrapT]),(N===32879||N===35866)&&e.texParameteri(N,32882,X[R.wrapR]),e.texParameteri(N,10240,Z[R.magFilter]),e.texParameteri(N,10241,Z[R.minFilter])):(e.texParameteri(N,10242,33071),e.texParameteri(N,10243,33071),(N===32879||N===35866)&&e.texParameteri(N,32882,33071),(R.wrapS!==Zi||R.wrapT!==Zi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(N,10240,C(R.magFilter)),e.texParameteri(N,10241,C(R.minFilter)),R.minFilter!==ur&&R.minFilter!==Bt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let pe=t.get("EXT_texture_filter_anisotropic");if(R.type===ca&&t.has("OES_texture_float_linear")===!1||a===!1&&R.type===sf&&t.has("OES_texture_half_float_linear")===!1)return;(R.anisotropy>1||i.get(R).__currentAnisotropy)&&(e.texParameterf(N,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,n.getMaxAnisotropy())),i.get(R).__currentAnisotropy=R.anisotropy)}}function ne(N,R){let se=!1;N.__webglInit===void 0&&(N.__webglInit=!0,R.addEventListener("dispose",E));let pe=R.source,xe=g.get(pe);xe===void 0&&(xe={},g.set(pe,xe));let Ce=O(R);if(Ce!==N.__cacheKey){xe[Ce]===void 0&&(xe[Ce]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,se=!0),xe[Ce].usedTimes++;let tt=xe[N.__cacheKey];tt!==void 0&&(xe[N.__cacheKey].usedTimes--,tt.usedTimes===0&&D(R)),N.__cacheKey=Ce,N.__webglTexture=xe[Ce].texture}return se}function ee(N,R,se){let pe=3553;R.isDataArrayTexture&&(pe=35866),R.isData3DTexture&&(pe=32879);let xe=ne(N,R),Ce=R.source;if(r.activeTexture(33984+se),r.bindTexture(pe,N.__webglTexture),Ce.version!==Ce.__currentVersion||xe===!0){e.pixelStorei(37440,R.flipY),e.pixelStorei(37441,R.premultiplyAlpha),e.pixelStorei(3317,R.unpackAlignment),e.pixelStorei(37443,0);let tt=A(R)&&x(R.image)===!1,oe=b(R.image,tt,!1,h);oe=ot(R,oe);let Ye=x(oe)||a,Se=s.convert(R.format,R.encoding),_e=s.convert(R.type),G=w(R.internalFormat,Se,_e,R.encoding,R.isVideoTexture);U(pe,R,Ye);let Me,be=R.mipmaps,Je=a&&R.isVideoTexture!==!0,Ie=Ce.__currentVersion===void 0||xe===!0,rt=M(R,oe,Ye);if(R.isDepthTexture)G=6402,a?R.type===ca?G=36012:R.type===la?G=33190:R.type===Sl?G=35056:G=33189:R.type===ca&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),R.format===_l&&G===6402&&R.type!==wO&&R.type!==la&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),R.type=la,_e=s.convert(R.type)),R.format===Ul&&G===6402&&(G=34041,R.type!==Sl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),R.type=Sl,_e=s.convert(R.type))),Ie&&(Je?r.texStorage2D(3553,1,G,oe.width,oe.height):r.texImage2D(3553,0,G,oe.width,oe.height,0,Se,_e,null));else if(R.isDataTexture)if(be.length>0&&Ye){Je&&Ie&&r.texStorage2D(3553,rt,G,be[0].width,be[0].height);for(let ye=0,Ke=be.length;ye<Ke;ye++)Me=be[ye],Je?r.texSubImage2D(3553,ye,0,0,Me.width,Me.height,Se,_e,Me.data):r.texImage2D(3553,ye,G,Me.width,Me.height,0,Se,_e,Me.data);R.generateMipmaps=!1}else Je?(Ie&&r.texStorage2D(3553,rt,G,oe.width,oe.height),r.texSubImage2D(3553,0,0,0,oe.width,oe.height,Se,_e,oe.data)):r.texImage2D(3553,0,G,oe.width,oe.height,0,Se,_e,oe.data);else if(R.isCompressedTexture){Je&&Ie&&r.texStorage2D(3553,rt,G,be[0].width,be[0].height);for(let ye=0,Ke=be.length;ye<Ke;ye++)Me=be[ye],R.format!==_s?Se!==null?Je?r.compressedTexSubImage2D(3553,ye,0,0,Me.width,Me.height,Se,Me.data):r.compressedTexImage2D(3553,ye,G,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?r.texSubImage2D(3553,ye,0,0,Me.width,Me.height,Se,_e,Me.data):r.texImage2D(3553,ye,G,Me.width,Me.height,0,Se,_e,Me.data)}else if(R.isDataArrayTexture)Je?(Ie&&r.texStorage3D(35866,rt,G,oe.width,oe.height,oe.depth),r.texSubImage3D(35866,0,0,0,0,oe.width,oe.height,oe.depth,Se,_e,oe.data)):r.texImage3D(35866,0,G,oe.width,oe.height,oe.depth,0,Se,_e,oe.data);else if(R.isData3DTexture)Je?(Ie&&r.texStorage3D(32879,rt,G,oe.width,oe.height,oe.depth),r.texSubImage3D(32879,0,0,0,0,oe.width,oe.height,oe.depth,Se,_e,oe.data)):r.texImage3D(32879,0,G,oe.width,oe.height,oe.depth,0,Se,_e,oe.data);else if(R.isFramebufferTexture){if(Ie)if(Je)r.texStorage2D(3553,rt,G,oe.width,oe.height);else{let ye=oe.width,Ke=oe.height;for(let Pe=0;Pe<rt;Pe++)r.texImage2D(3553,Pe,G,ye,Ke,0,Se,_e,null),ye>>=1,Ke>>=1}}else if(be.length>0&&Ye){Je&&Ie&&r.texStorage2D(3553,rt,G,be[0].width,be[0].height);for(let ye=0,Ke=be.length;ye<Ke;ye++)Me=be[ye],Je?r.texSubImage2D(3553,ye,0,0,Se,_e,Me):r.texImage2D(3553,ye,G,Se,_e,Me);R.generateMipmaps=!1}else Je?(Ie&&r.texStorage2D(3553,rt,G,oe.width,oe.height),r.texSubImage2D(3553,0,0,0,Se,_e,oe)):r.texImage2D(3553,0,G,Se,_e,oe);S(R,Ye)&&_(pe),Ce.__currentVersion=Ce.version,R.onUpdate&&R.onUpdate(R)}N.__version=R.version}function te(N,R,se){if(R.image.length!==6)return;let pe=ne(N,R),xe=R.source;if(r.activeTexture(33984+se),r.bindTexture(34067,N.__webglTexture),xe.version!==xe.__currentVersion||pe===!0){e.pixelStorei(37440,R.flipY),e.pixelStorei(37441,R.premultiplyAlpha),e.pixelStorei(3317,R.unpackAlignment),e.pixelStorei(37443,0);let Ce=R.isCompressedTexture||R.image[0].isCompressedTexture,tt=R.image[0]&&R.image[0].isDataTexture,oe=[];for(let ye=0;ye<6;ye++)!Ce&&!tt?oe[ye]=b(R.image[ye],!1,!0,c):oe[ye]=tt?R.image[ye].image:R.image[ye],oe[ye]=ot(R,oe[ye]);let Ye=oe[0],Se=x(Ye)||a,_e=s.convert(R.format,R.encoding),G=s.convert(R.type),Me=w(R.internalFormat,_e,G,R.encoding),be=a&&R.isVideoTexture!==!0,Je=xe.__currentVersion===void 0||pe===!0,Ie=M(R,Ye,Se);U(34067,R,Se);let rt;if(Ce){be&&Je&&r.texStorage2D(34067,Ie,Me,Ye.width,Ye.height);for(let ye=0;ye<6;ye++){rt=oe[ye].mipmaps;for(let Ke=0;Ke<rt.length;Ke++){let Pe=rt[Ke];R.format!==_s?_e!==null?be?r.compressedTexSubImage2D(34069+ye,Ke,0,0,Pe.width,Pe.height,_e,Pe.data):r.compressedTexImage2D(34069+ye,Ke,Me,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):be?r.texSubImage2D(34069+ye,Ke,0,0,Pe.width,Pe.height,_e,G,Pe.data):r.texImage2D(34069+ye,Ke,Me,Pe.width,Pe.height,0,_e,G,Pe.data)}}}else{rt=R.mipmaps,be&&Je&&(rt.length>0&&Ie++,r.texStorage2D(34067,Ie,Me,oe[0].width,oe[0].height));for(let ye=0;ye<6;ye++)if(tt){be?r.texSubImage2D(34069+ye,0,0,0,oe[ye].width,oe[ye].height,_e,G,oe[ye].data):r.texImage2D(34069+ye,0,Me,oe[ye].width,oe[ye].height,0,_e,G,oe[ye].data);for(let Ke=0;Ke<rt.length;Ke++){let Pe=rt[Ke].image[ye].image;be?r.texSubImage2D(34069+ye,Ke+1,0,0,Pe.width,Pe.height,_e,G,Pe.data):r.texImage2D(34069+ye,Ke+1,Me,Pe.width,Pe.height,0,_e,G,Pe.data)}}else{be?r.texSubImage2D(34069+ye,0,0,0,_e,G,oe[ye]):r.texImage2D(34069+ye,0,Me,_e,G,oe[ye]);for(let Ke=0;Ke<rt.length;Ke++){let Pe=rt[Ke];be?r.texSubImage2D(34069+ye,Ke+1,0,0,_e,G,Pe.image[ye]):r.texImage2D(34069+ye,Ke+1,Me,_e,G,Pe.image[ye])}}}S(R,Se)&&_(34067),xe.__currentVersion=xe.version,R.onUpdate&&R.onUpdate(R)}N.__version=R.version}function Q(N,R,se,pe,xe){let Ce=s.convert(se.format,se.encoding),tt=s.convert(se.type),oe=w(se.internalFormat,Ce,tt,se.encoding);i.get(R).__hasExternalTextures||(xe===32879||xe===35866?r.texImage3D(xe,0,oe,R.width,R.height,R.depth,0,Ce,tt,null):r.texImage2D(xe,0,oe,R.width,R.height,0,Ce,tt,null)),r.bindFramebuffer(36160,N),ke(R)?d.framebufferTexture2DMultisampleEXT(36160,pe,xe,i.get(se).__webglTexture,0,Ee(R)):e.framebufferTexture2D(36160,pe,xe,i.get(se).__webglTexture,0),r.bindFramebuffer(36160,null)}function de(N,R,se){if(e.bindRenderbuffer(36161,N),R.depthBuffer&&!R.stencilBuffer){let pe=33189;if(se||ke(R)){let xe=R.depthTexture;xe&&xe.isDepthTexture&&(xe.type===ca?pe=36012:xe.type===la&&(pe=33190));let Ce=Ee(R);ke(R)?d.renderbufferStorageMultisampleEXT(36161,Ce,pe,R.width,R.height):e.renderbufferStorageMultisample(36161,Ce,pe,R.width,R.height)}else e.renderbufferStorage(36161,pe,R.width,R.height);e.framebufferRenderbuffer(36160,36096,36161,N)}else if(R.depthBuffer&&R.stencilBuffer){let pe=Ee(R);se&&ke(R)===!1?e.renderbufferStorageMultisample(36161,pe,35056,R.width,R.height):ke(R)?d.renderbufferStorageMultisampleEXT(36161,pe,35056,R.width,R.height):e.renderbufferStorage(36161,34041,R.width,R.height),e.framebufferRenderbuffer(36160,33306,36161,N)}else{let pe=R.isWebGLMultipleRenderTargets===!0?R.texture:[R.texture];for(let xe=0;xe<pe.length;xe++){let Ce=pe[xe],tt=s.convert(Ce.format,Ce.encoding),oe=s.convert(Ce.type),Ye=w(Ce.internalFormat,tt,oe,Ce.encoding),Se=Ee(R);se&&ke(R)===!1?e.renderbufferStorageMultisample(36161,Se,Ye,R.width,R.height):ke(R)?d.renderbufferStorageMultisampleEXT(36161,Se,Ye,R.width,R.height):e.renderbufferStorage(36161,Ye,R.width,R.height)}}e.bindRenderbuffer(36161,null)}function le(N,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,N),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(R.depthTexture).__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),k(R.depthTexture,0);let se=i.get(R.depthTexture).__webglTexture,pe=Ee(R);if(R.depthTexture.format===_l)ke(R)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,se,0,pe):e.framebufferTexture2D(36160,36096,3553,se,0);else if(R.depthTexture.format===Ul)ke(R)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,se,0,pe):e.framebufferTexture2D(36160,33306,3553,se,0);else throw new Error("Unknown depthTexture format")}function ce(N){let R=i.get(N),se=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!R.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");le(R.__webglFramebuffer,N)}else if(se){R.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)r.bindFramebuffer(36160,R.__webglFramebuffer[pe]),R.__webglDepthbuffer[pe]=e.createRenderbuffer(),de(R.__webglDepthbuffer[pe],N,!1)}else r.bindFramebuffer(36160,R.__webglFramebuffer),R.__webglDepthbuffer=e.createRenderbuffer(),de(R.__webglDepthbuffer,N,!1);r.bindFramebuffer(36160,null)}function ge(N,R,se){let pe=i.get(N);R!==void 0&&Q(pe.__webglFramebuffer,N,N.texture,36064,3553),se!==void 0&&ce(N)}function fe(N){let R=N.texture,se=i.get(N),pe=i.get(R);N.addEventListener("dispose",$),N.isWebGLMultipleRenderTargets!==!0&&(pe.__webglTexture===void 0&&(pe.__webglTexture=e.createTexture()),pe.__version=R.version,o.memory.textures++);let xe=N.isWebGLCubeRenderTarget===!0,Ce=N.isWebGLMultipleRenderTargets===!0,tt=x(N)||a;if(xe){se.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)se.__webglFramebuffer[oe]=e.createFramebuffer()}else{if(se.__webglFramebuffer=e.createFramebuffer(),Ce)if(n.drawBuffers){let oe=N.texture;for(let Ye=0,Se=oe.length;Ye<Se;Ye++){let _e=i.get(oe[Ye]);_e.__webglTexture===void 0&&(_e.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&ke(N)===!1){let oe=Ce?R:[R];se.__webglMultisampledFramebuffer=e.createFramebuffer(),se.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,se.__webglMultisampledFramebuffer);for(let Ye=0;Ye<oe.length;Ye++){let Se=oe[Ye];se.__webglColorRenderbuffer[Ye]=e.createRenderbuffer(),e.bindRenderbuffer(36161,se.__webglColorRenderbuffer[Ye]);let _e=s.convert(Se.format,Se.encoding),G=s.convert(Se.type),Me=w(Se.internalFormat,_e,G,Se.encoding),be=Ee(N);e.renderbufferStorageMultisample(36161,be,Me,N.width,N.height),e.framebufferRenderbuffer(36160,36064+Ye,36161,se.__webglColorRenderbuffer[Ye])}e.bindRenderbuffer(36161,null),N.depthBuffer&&(se.__webglDepthRenderbuffer=e.createRenderbuffer(),de(se.__webglDepthRenderbuffer,N,!0)),r.bindFramebuffer(36160,null)}}if(xe){r.bindTexture(34067,pe.__webglTexture),U(34067,R,tt);for(let oe=0;oe<6;oe++)Q(se.__webglFramebuffer[oe],N,R,36064,34069+oe);S(R,tt)&&_(34067),r.unbindTexture()}else if(Ce){let oe=N.texture;for(let Ye=0,Se=oe.length;Ye<Se;Ye++){let _e=oe[Ye],G=i.get(_e);r.bindTexture(3553,G.__webglTexture),U(3553,_e,tt),Q(se.__webglFramebuffer,N,_e,36064+Ye,3553),S(_e,tt)&&_(3553)}r.unbindTexture()}else{let oe=3553;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?oe=N.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(oe,pe.__webglTexture),U(oe,R,tt),Q(se.__webglFramebuffer,N,R,36064,oe),S(R,tt)&&_(oe),r.unbindTexture()}N.depthBuffer&&ce(N)}function Fe(N){let R=x(N)||a,se=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let pe=0,xe=se.length;pe<xe;pe++){let Ce=se[pe];if(S(Ce,R)){let tt=N.isWebGLCubeRenderTarget?34067:3553,oe=i.get(Ce).__webglTexture;r.bindTexture(tt,oe),_(tt),r.unbindTexture()}}}function Ae(N){if(a&&N.samples>0&&ke(N)===!1){let R=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],se=N.width,pe=N.height,xe=16384,Ce=[],tt=N.stencilBuffer?33306:36096,oe=i.get(N),Ye=N.isWebGLMultipleRenderTargets===!0;if(Ye)for(let Se=0;Se<R.length;Se++)r.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Se,36161,null),r.bindFramebuffer(36160,oe.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Se,3553,null,0);r.bindFramebuffer(36008,oe.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,oe.__webglFramebuffer);for(let Se=0;Se<R.length;Se++){Ce.push(36064+Se),N.depthBuffer&&Ce.push(tt);let _e=oe.__ignoreDepthValues!==void 0?oe.__ignoreDepthValues:!1;if(_e===!1&&(N.depthBuffer&&(xe|=256),N.stencilBuffer&&(xe|=1024)),Ye&&e.framebufferRenderbuffer(36008,36064,36161,oe.__webglColorRenderbuffer[Se]),_e===!0&&(e.invalidateFramebuffer(36008,[tt]),e.invalidateFramebuffer(36009,[tt])),Ye){let G=i.get(R[Se]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,G,0)}e.blitFramebuffer(0,0,se,pe,0,0,se,pe,xe,9728),f&&e.invalidateFramebuffer(36008,Ce)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),Ye)for(let Se=0;Se<R.length;Se++){r.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Se,36161,oe.__webglColorRenderbuffer[Se]);let _e=i.get(R[Se]).__webglTexture;r.bindFramebuffer(36160,oe.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Se,3553,_e,0)}r.bindFramebuffer(36009,oe.__webglMultisampledFramebuffer)}}function Ee(N){return Math.min(u,N.samples)}function ke(N){let R=i.get(N);return a&&N.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function Ue(N){let R=o.render.frame;m.get(N)!==R&&(m.set(N,R),N.update())}function ot(N,R){let se=N.encoding,pe=N.format,xe=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||N.format===Ib||se!==ks&&(se===ht?a===!1?t.has("EXT_sRGB")===!0&&pe===_s?(N.format=Ib,N.minFilter=Bt,N.generateMipmaps=!1):R=MO.sRGBToLinear(R):(pe!==_s||xe!==gi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",se)),R}this.allocateTextureUnit=L,this.resetTextureUnits=H,this.setTexture2D=k,this.setTexture2DArray=j,this.setTexture3D=F,this.setTextureCube=Y,this.rebindTextures=ge,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=Ae,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=Q,this.useMultisampledRTT=ke}function pZ(e,t,r){let i=r.isWebGL2;function n(s,o=null){let a;if(s===gi)return 5121;if(s===QG)return 32819;if(s===ZG)return 32820;if(s===KG)return 5120;if(s===XG)return 5122;if(s===wO)return 5123;if(s===qG)return 5124;if(s===la)return 5125;if(s===ca)return 5126;if(s===sf)return i?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===JG)return 6406;if(s===_s)return 6408;if(s===tY)return 6409;if(s===rY)return 6410;if(s===_l)return 6402;if(s===Ul)return 34041;if(s===iY)return 6403;if(s===eY)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===Ib)return a=t.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===nY)return 36244;if(s===sY)return 33319;if(s===oY)return 33320;if(s===aY)return 36249;if(s===fy||s===py||s===my||s===gy)if(o===ht)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===fy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===py)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===my)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===gy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===fy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===py)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===my)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===gy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===GE||s===YE||s===KE||s===XE)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===GE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===YE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===KE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===XE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===lY)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===qE||s===QE)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(s===qE)return o===ht?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===QE)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===ZE||s===JE||s===eC||s===tC||s===rC||s===iC||s===nC||s===sC||s===oC||s===aC||s===lC||s===cC||s===uC||s===dC)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(s===ZE)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===JE)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===eC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===tC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===rC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===iC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===nC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===sC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===oC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===aC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===lC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===uC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===dC)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===hC)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(s===hC)return o===ht?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Sl?i?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):e[s]!==void 0?e[s]:null}return{convert:n}}var mZ=class extends ui{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},rh=class extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}},gZ={type:"move"},Vy=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new T,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new T),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new T,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new T),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,s=null,o=this._targetRay,a=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let m of e.hand.values()){let p=t.getJointPose(m,r);if(l.joints[m.jointName]===void 0){let v=new rh;v.matrixAutoUpdate=!1,v.visible=!1,l.joints[m.jointName]=v,l.add(v)}let g=l.joints[m.jointName];p!==null&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=p.radius),g.visible=p!==null}let c=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],u=c.position.distanceTo(h.position),d=.02,f=.005;l.inputState.pinching&&u>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&u<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else a!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&n!==null&&(i=n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(gZ)))}return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=n!==null),l!==null&&(l.visible=s!==null),this}},B_=class extends Ti{constructor(e,t,r,i,n,s,o,a,l,c){if(c=c!==void 0?c:_l,c!==_l&&c!==Ul)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===_l&&(r=la),r===void 0&&c===Ul&&(r=Sl),super(null,i,n,s,o,a,c,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ur,this.minFilter=a!==void 0?a:ur,this.flipY=!1,this.generateMipmaps=!1}},vZ=class extends ki{constructor(e,t){super();let r=this,i=null,n=1,s=null,o="local-floor",a=null,l=null,c=null,h=null,u=null,d=null,f=t.getContextAttributes(),m=null,p=null,g=[],v=[],y=new ui;y.layers.enable(1),y.viewport=new ct;let b=new ui;b.layers.enable(2),b.viewport=new ct;let x=[y,b],A=new mZ;A.layers.enable(1),A.layers.enable(2);let S=null,_=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let O=g[L];return O===void 0&&(O=new Vy,g[L]=O),O.getTargetRaySpace()},this.getControllerGrip=function(L){let O=g[L];return O===void 0&&(O=new Vy,g[L]=O),O.getGripSpace()},this.getHand=function(L){let O=g[L];return O===void 0&&(O=new Vy,g[L]=O),O.getHandSpace()};function w(L){let O=v.indexOf(L.inputSource);if(O===-1)return;let k=g[O];k!==void 0&&k.dispatchEvent({type:L.type,data:L.inputSource})}function M(){i.removeEventListener("select",w),i.removeEventListener("selectstart",w),i.removeEventListener("selectend",w),i.removeEventListener("squeeze",w),i.removeEventListener("squeezestart",w),i.removeEventListener("squeezeend",w),i.removeEventListener("end",M),i.removeEventListener("inputsourceschange",C);for(let L=0;L<g.length;L++){let O=v[L];O!==null&&(v[L]=null,g[L].disconnect(O))}S=null,_=null,e.setRenderTarget(m),u=null,h=null,c=null,i=null,p=null,H.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){n=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){o=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||s},this.setReferenceSpace=function(L){a=L},this.getBaseLayer=function(){return h!==null?h:u},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(L){if(i=L,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",w),i.addEventListener("selectstart",w),i.addEventListener("selectend",w),i.addEventListener("squeeze",w),i.addEventListener("squeezestart",w),i.addEventListener("squeezeend",w),i.addEventListener("end",M),i.addEventListener("inputsourceschange",C),f.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let O={antialias:i.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:n};u=new XRWebGLLayer(i,t,O),i.updateRenderState({baseLayer:u}),p=new br(u.framebufferWidth,u.framebufferHeight,{format:_s,type:gi,encoding:e.outputEncoding})}else{let O=null,k=null,j=null;f.depth&&(j=f.stencil?35056:33190,O=f.stencil?Ul:_l,k=f.stencil?Sl:la);let F={colorFormat:32856,depthFormat:j,scaleFactor:n};c=new XRWebGLBinding(i,t),h=c.createProjectionLayer(F),i.updateRenderState({layers:[h]}),p=new br(h.textureWidth,h.textureHeight,{format:_s,type:gi,depthTexture:new B_(h.textureWidth,h.textureHeight,k,void 0,void 0,void 0,void 0,void 0,void 0,O),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let Y=e.properties.get(p);Y.__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(1),a=null,s=await i.requestReferenceSpace(o),H.setContext(i),H.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function C(L){for(let O=0;O<L.removed.length;O++){let k=L.removed[O],j=v.indexOf(k);j>=0&&(v[j]=null,g[j].dispatchEvent({type:"disconnected",data:k}))}for(let O=0;O<L.added.length;O++){let k=L.added[O],j=v.indexOf(k);if(j===-1){for(let Y=0;Y<g.length;Y++)if(Y>=v.length){v.push(k),j=Y;break}else if(v[Y]===null){v[Y]=k,j=Y;break}if(j===-1)break}let F=g[j];F&&F.dispatchEvent({type:"connected",data:k})}}let E=new T,$=new T;function P(L,O,k){E.setFromMatrixPosition(O.matrixWorld),$.setFromMatrixPosition(k.matrixWorld);let j=E.distanceTo($),F=O.projectionMatrix.elements,Y=k.projectionMatrix.elements,X=F[14]/(F[10]-1),Z=F[14]/(F[10]+1),U=(F[9]+1)/F[5],ne=(F[9]-1)/F[5],ee=(F[8]-1)/F[0],te=(Y[8]+1)/Y[0],Q=X*ee,de=X*te,le=j/(-ee+te),ce=le*-ee;O.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(ce),L.translateZ(le),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();let ge=X+le,fe=Z+le,Fe=Q-ce,Ae=de+(j-ce),Ee=U*Z/fe*ge,ke=ne*Z/fe*ge;L.projectionMatrix.makePerspective(Fe,Ae,Ee,ke,ge,fe)}function D(L,O){O===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(O.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(i===null)return;A.near=b.near=y.near=L.near,A.far=b.far=y.far=L.far,(S!==A.near||_!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),S=A.near,_=A.far);let O=L.parent,k=A.cameras;D(A,O);for(let F=0;F<k.length;F++)D(k[F],O);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),L.position.copy(A.position),L.quaternion.copy(A.quaternion),L.scale.copy(A.scale),L.matrix.copy(A.matrix),L.matrixWorld.copy(A.matrixWorld);let j=L.children;for(let F=0,Y=j.length;F<Y;F++)j[F].updateMatrixWorld(!0);k.length===2?P(A,y,b):A.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return A},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(u!==null)return u.fixedFoveation},this.setFoveation=function(L){h!==null&&(h.fixedFoveation=L),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=L)};let W=null;function V(L,O){if(l=O.getViewerPose(a||s),d=O,l!==null){let k=l.views;u!==null&&(e.setRenderTargetFramebuffer(p,u.framebuffer),e.setRenderTarget(p));let j=!1;k.length!==A.cameras.length&&(A.cameras.length=0,j=!0);for(let F=0;F<k.length;F++){let Y=k[F],X=null;if(u!==null)X=u.getViewport(Y);else{let U=c.getViewSubImage(h,Y);X=U.viewport,F===0&&(e.setRenderTargetTextures(p,U.colorTexture,h.ignoreDepthValues?void 0:U.depthStencilTexture),e.setRenderTarget(p))}let Z=x[F];Z===void 0&&(Z=new ui,Z.layers.enable(F),Z.viewport=new ct,x[F]=Z),Z.matrix.fromArray(Y.transform.matrix),Z.projectionMatrix.fromArray(Y.projectionMatrix),Z.viewport.set(X.x,X.y,X.width,X.height),F===0&&A.matrix.copy(Z.matrix),j===!0&&A.cameras.push(Z)}}for(let k=0;k<g.length;k++){let j=v[k],F=g[k];j!==null&&F!==void 0&&F.update(j,O,a||s)}W&&W(L,O),d=null}let H=new PO;H.setAnimationLoop(V),this.setAnimationLoop=function(L){W=L},this.dispose=function(){}}};function yZ(e,t){function r(p,g){p.fogColor.value.copy(g.color),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)}function i(p,g,v,y,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(p,g):g.isMeshToonMaterial?(n(p,g),h(p,g)):g.isMeshPhongMaterial?(n(p,g),c(p,g)):g.isMeshStandardMaterial?(n(p,g),u(p,g),g.isMeshPhysicalMaterial&&d(p,g,b)):g.isMeshMatcapMaterial?(n(p,g),f(p,g)):g.isMeshDepthMaterial?n(p,g):g.isMeshDistanceMaterial?(n(p,g),m(p,g)):g.isMeshNormalMaterial?n(p,g):g.isLineBasicMaterial?(s(p,g),g.isLineDashedMaterial&&o(p,g)):g.isPointsMaterial?a(p,g,v,y):g.isSpriteMaterial?l(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,g.side===Xr&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),g.side===Xr&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(p.envMap.value=v,p.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;let x=e.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*x}g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix));let b;g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),p.uv2Transform.value.copy(b.matrix))}function s(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}function o(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}function a(p,g,v,y){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*v,p.scale.value=y*.5,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let b;g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),p.uvTransform.value.copy(b.matrix))}function l(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}function c(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}function h(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}function u(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}function d(p,g,v){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Xr&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function xZ(){let e=Wg("canvas");return e.style.display="block",e}function OO(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:xZ(),r=e.context!==void 0?e.context:null,i=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,a=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,h;r!==null?h=r.getContextAttributes().alpha:h=e.alpha!==void 0?e.alpha:!1;let u=null,d=null,f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ks,this.physicallyCorrectLights=!1,this.toneMapping=ho,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});let p=this,g=!1,v=0,y=0,b=null,x=-1,A=null,S=new ct,_=new ct,w=null,M=t.width,C=t.height,E=1,$=null,P=null,D=new ct(0,0,M,C),W=new ct(0,0,M,C),V=!1,H=new R_,L=!1,O=!1,k=null,j=new We,F=new K,Y=new T,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return b===null?E:1}let U=r;function ne(B,J){for(let ae=0;ae<B.length;ae++){let ie=B[ae],he=t.getContext(ie,J);if(he!==null)return he}return null}try{let B={alpha:!0,depth:i,stencil:n,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${kf}`),t.addEventListener("webglcontextlost",G,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",be,!1),U===null){let J=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&J.shift(),U=ne(J,B),U===null)throw ne(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}U.getShaderPrecisionFormat===void 0&&(U.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let ee,te,Q,de,le,ce,ge,fe,Fe,Ae,Ee,ke,Ue,ot,N,R,se,pe,xe,Ce,tt,oe,Ye;function Se(){ee=new $q(U),te=new Eq(U,ee,e),ee.init(te),oe=new pZ(U,ee,te),Q=new hZ(U,ee,te),de=new kq,le=new JQ,ce=new fZ(U,ee,Q,le,te,oe,de),ge=new Tq(p),fe=new Lq(p),Fe=new YY(U,te),Ye=new Aq(U,ee,Fe,te),Ae=new Iq(U,Fe,de,Ye),Ee=new Nq(U,Ae,Fe,de),xe=new zq(U,te,ce),R=new Cq(le),ke=new ZQ(p,ge,fe,ee,te,Ye,R),Ue=new yZ(p,le),ot=new tZ,N=new aZ(ee,te),pe=new _q(p,ge,Q,Ee,h,o),se=new dZ(p,Ee,te),Ce=new Mq(U,ee,de,te),tt=new Rq(U,ee,de,te),de.programs=ke.programs,p.capabilities=te,p.extensions=ee,p.properties=le,p.renderLists=ot,p.shadowMap=se,p.state=Q,p.info=de}Se();let _e=new vZ(p,U);this.xr=_e,this.getContext=function(){return U},this.getContextAttributes=function(){return U.getContextAttributes()},this.forceContextLoss=function(){let B=ee.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){let B=ee.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(B){B!==void 0&&(E=B,this.setSize(M,C,!1))},this.getSize=function(B){return B.set(M,C)},this.setSize=function(B,J,ae){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=B,C=J,t.width=Math.floor(B*E),t.height=Math.floor(J*E),ae!==!1&&(t.style.width=B+"px",t.style.height=J+"px"),this.setViewport(0,0,B,J)},this.getDrawingBufferSize=function(B){return B.set(M*E,C*E).floor()},this.setDrawingBufferSize=function(B,J,ae){M=B,C=J,E=ae,t.width=Math.floor(B*ae),t.height=Math.floor(J*ae),this.setViewport(0,0,B,J)},this.getCurrentViewport=function(B){return B.copy(S)},this.getViewport=function(B){return B.copy(D)},this.setViewport=function(B,J,ae,ie){B.isVector4?D.set(B.x,B.y,B.z,B.w):D.set(B,J,ae,ie),Q.viewport(S.copy(D).multiplyScalar(E).floor())},this.getScissor=function(B){return B.copy(W)},this.setScissor=function(B,J,ae,ie){B.isVector4?W.set(B.x,B.y,B.z,B.w):W.set(B,J,ae,ie),Q.scissor(_.copy(W).multiplyScalar(E).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(B){Q.setScissorTest(V=B)},this.setOpaqueSort=function(B){$=B},this.setTransparentSort=function(B){P=B},this.getClearColor=function(B){return B.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(B=!0,J=!0,ae=!0){let ie=0;B&&(ie|=16384),J&&(ie|=256),ae&&(ie|=1024),U.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",G,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",be,!1),ot.dispose(),N.dispose(),le.dispose(),ge.dispose(),fe.dispose(),Ee.dispose(),Ye.dispose(),ke.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Pe),_e.removeEventListener("sessionend",Te),k&&(k.dispose(),k=null),Ge.stop()};function G(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let B=de.autoReset,J=se.enabled,ae=se.autoUpdate,ie=se.needsUpdate,he=se.type;Se(),de.autoReset=B,se.enabled=J,se.autoUpdate=ae,se.needsUpdate=ie,se.type=he}function be(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Je(B){let J=B.target;J.removeEventListener("dispose",Je),Ie(J)}function Ie(B){rt(B),le.remove(B)}function rt(B){let J=le.get(B).programs;J!==void 0&&(J.forEach(function(ae){ke.releaseProgram(ae)}),B.isShaderMaterial&&ke.releaseShaderCache(B))}this.renderBufferDirect=function(B,J,ae,ie,he,qe){J===null&&(J=X);let ut=he.isMesh&&he.matrixWorld.determinant()<0,dt=Nr(B,J,ae,ie,he);Q.setMaterial(ie,ut);let xt=ae.index,or=ae.attributes.position;if(xt===null){if(or===void 0||or.count===0)return}else if(xt.count===0)return;let bt=1;ie.wireframe===!0&&(xt=Ae.getWireframeAttribute(ae),bt=2),Ye.setup(he,ie,dt,ae,xt);let _t,Fr=Ce;xt!==null&&(_t=Fe.get(xt),Fr=tt,Fr.setIndex(_t));let ja=xt!==null?xt.count:or.count,ec=ae.drawRange.start*bt,tc=ae.drawRange.count*bt,is=qe!==null?qe.start*bt:0,Tt=qe!==null?qe.count*bt:1/0,rc=Math.max(ec,is),md=Math.min(ja,ec+tc,is+Tt)-1,ns=Math.max(0,md-rc+1);if(ns!==0){if(he.isMesh)ie.wireframe===!0?(Q.setLineWidth(ie.wireframeLinewidth*Z()),Fr.setMode(1)):Fr.setMode(4);else if(he.isLine){let Ro=ie.linewidth;Ro===void 0&&(Ro=1),Q.setLineWidth(Ro*Z()),he.isLineSegments?Fr.setMode(1):he.isLineLoop?Fr.setMode(2):Fr.setMode(3)}else he.isPoints?Fr.setMode(0):he.isSprite&&Fr.setMode(4);if(he.isInstancedMesh)Fr.renderInstances(rc,ns,he.count);else if(ae.isInstancedBufferGeometry){let Ro=Math.min(ae.instanceCount,ae._maxInstanceCount);Fr.renderInstances(rc,ns,Ro)}else Fr.render(rc,ns)}},this.compile=function(B,J){d=N.get(B),d.init(),m.push(d),B.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(d.pushLight(ae),ae.castShadow&&d.pushShadow(ae))}),d.setupLights(p.physicallyCorrectLights),B.traverse(function(ae){let ie=ae.material;if(ie)if(Array.isArray(ie))for(let he=0;he<ie.length;he++){let qe=ie[he];Rt(qe,B,ae)}else Rt(ie,B,ae)}),m.pop(),d=null};let ye=null;function Ke(B){ye&&ye(B)}function Pe(){Ge.stop()}function Te(){Ge.start()}let Ge=new PO;Ge.setAnimationLoop(Ke),typeof self<"u"&&Ge.setContext(self),this.setAnimationLoop=function(B){ye=B,_e.setAnimationLoop(B),B===null?Ge.stop():Ge.start()},_e.addEventListener("sessionstart",Pe),_e.addEventListener("sessionend",Te),this.render=function(B,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;B.autoUpdate===!0&&B.updateMatrixWorld(),J.parent===null&&J.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(J),J=_e.getCamera()),B.isScene===!0&&B.onBeforeRender(p,B,J,b),d=N.get(B,m.length),d.init(),m.push(d),j.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),H.setFromProjectionMatrix(j),O=this.localClippingEnabled,L=R.init(this.clippingPlanes,O,J),u=ot.get(B,f.length),u.init(),f.push(u),it(B,J,0,p.sortObjects),u.finish(),p.sortObjects===!0&&u.sort($,P),L===!0&&R.beginShadows();let ae=d.state.shadowsArray;if(se.render(ae,B,J),L===!0&&R.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(u,B),d.setupLights(p.physicallyCorrectLights),J.isArrayCamera){let ie=J.cameras;for(let he=0,qe=ie.length;he<qe;he++){let ut=ie[he];St(u,B,ut,ut.viewport)}}else St(u,B,J);b!==null&&(ce.updateMultisampleRenderTarget(b),ce.updateRenderTargetMipmap(b)),B.isScene===!0&&B.onAfterRender(p,B,J),Ye.resetDefaultState(),x=-1,A=null,m.pop(),m.length>0?d=m[m.length-1]:d=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function it(B,J,ae,ie){if(B.visible===!1)return;if(B.layers.test(J.layers)){if(B.isGroup)ae=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(J);else if(B.isLight)d.pushLight(B),B.castShadow&&d.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||H.intersectsSprite(B)){ie&&Y.setFromMatrixPosition(B.matrixWorld).applyMatrix4(j);let qe=Ee.update(B),ut=B.material;ut.visible&&u.push(B,qe,ut,ae,Y.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(B.isSkinnedMesh&&B.skeleton.frame!==de.render.frame&&(B.skeleton.update(),B.skeleton.frame=de.render.frame),!B.frustumCulled||H.intersectsObject(B))){ie&&Y.setFromMatrixPosition(B.matrixWorld).applyMatrix4(j);let qe=Ee.update(B),ut=B.material;if(Array.isArray(ut)){let dt=qe.groups;for(let xt=0,or=dt.length;xt<or;xt++){let bt=dt[xt],_t=ut[bt.materialIndex];_t&&_t.visible&&u.push(B,qe,_t,ae,Y.z,bt)}}else ut.visible&&u.push(B,qe,ut,ae,Y.z,null)}}let he=B.children;for(let qe=0,ut=he.length;qe<ut;qe++)it(he[qe],J,ae,ie)}function St(B,J,ae,ie){let he=B.opaque,qe=B.transmissive,ut=B.transparent;d.setupLightsView(ae),qe.length>0&&Zt(he,J,ae),ie&&Q.viewport(S.copy(ie)),he.length>0&&Ct(he,J,ae),qe.length>0&&Ct(qe,J,ae),ut.length>0&&Ct(ut,J,ae),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Zt(B,J,ae){let ie=te.isWebGL2;k===null&&(k=new br(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?sf:gi,minFilter:Bf,samples:ie&&s===!0?4:0})),p.getDrawingBufferSize(F),ie?k.setSize(F.x,F.y):k.setSize(Vg(F.x),Vg(F.y));let he=p.getRenderTarget();p.setRenderTarget(k),p.clear();let qe=p.toneMapping;p.toneMapping=ho,Ct(B,J,ae),p.toneMapping=qe,ce.updateMultisampleRenderTarget(k),ce.updateRenderTargetMipmap(k),p.setRenderTarget(he)}function Ct(B,J,ae){let ie=J.isScene===!0?J.overrideMaterial:null;for(let he=0,qe=B.length;he<qe;he++){let ut=B[he],dt=ut.object,xt=ut.geometry,or=ie===null?ut.material:ie,bt=ut.group;dt.layers.test(ae.layers)&&Ft(dt,J,ae,xt,or,bt)}}function Ft(B,J,ae,ie,he,qe){B.onBeforeRender(p,J,ae,ie,he,qe),B.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),he.onBeforeRender(p,J,ae,ie,B,qe),he.transparent===!0&&he.side===_i?(he.side=Xr,he.needsUpdate=!0,p.renderBufferDirect(ae,J,ie,he,B,qe),he.side=Ao,he.needsUpdate=!0,p.renderBufferDirect(ae,J,ie,he,B,qe),he.side=_i):p.renderBufferDirect(ae,J,ie,he,B,qe),B.onAfterRender(p,J,ae,ie,he,qe)}function Rt(B,J,ae){J.isScene!==!0&&(J=X);let ie=le.get(B),he=d.state.lights,qe=d.state.shadowsArray,ut=he.state.version,dt=ke.getParameters(B,he.state,qe,J,ae),xt=ke.getProgramCacheKey(dt),or=ie.programs;ie.environment=B.isMeshStandardMaterial?J.environment:null,ie.fog=J.fog,ie.envMap=(B.isMeshStandardMaterial?fe:ge).get(B.envMap||ie.environment),or===void 0&&(B.addEventListener("dispose",Je),or=new Map,ie.programs=or);let bt=or.get(xt);if(bt!==void 0){if(ie.currentProgram===bt&&ie.lightsStateVersion===ut)return Ut(B,dt),bt}else dt.uniforms=ke.getUniforms(B),B.onBuild(ae,dt,p),B.onBeforeCompile(dt,p),bt=ke.acquireProgram(dt,xt),or.set(xt,bt),ie.uniforms=dt.uniforms;let _t=ie.uniforms;(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(_t.clippingPlanes=R.uniform),Ut(B,dt),ie.needsLights=vi(B),ie.lightsStateVersion=ut,ie.needsLights&&(_t.ambientLightColor.value=he.state.ambient,_t.lightProbe.value=he.state.probe,_t.directionalLights.value=he.state.directional,_t.directionalLightShadows.value=he.state.directionalShadow,_t.spotLights.value=he.state.spot,_t.spotLightShadows.value=he.state.spotShadow,_t.rectAreaLights.value=he.state.rectArea,_t.ltc_1.value=he.state.rectAreaLTC1,_t.ltc_2.value=he.state.rectAreaLTC2,_t.pointLights.value=he.state.point,_t.pointLightShadows.value=he.state.pointShadow,_t.hemisphereLights.value=he.state.hemi,_t.directionalShadowMap.value=he.state.directionalShadowMap,_t.directionalShadowMatrix.value=he.state.directionalShadowMatrix,_t.spotShadowMap.value=he.state.spotShadowMap,_t.spotShadowMatrix.value=he.state.spotShadowMatrix,_t.pointShadowMap.value=he.state.pointShadowMap,_t.pointShadowMatrix.value=he.state.pointShadowMatrix);let Fr=bt.getUniforms(),ja=qm.seqWithValue(Fr.seq,_t);return ie.currentProgram=bt,ie.uniformsList=ja,bt}function Ut(B,J){let ae=le.get(B);ae.outputEncoding=J.outputEncoding,ae.instancing=J.instancing,ae.skinning=J.skinning,ae.morphTargets=J.morphTargets,ae.morphNormals=J.morphNormals,ae.morphColors=J.morphColors,ae.morphTargetsCount=J.morphTargetsCount,ae.numClippingPlanes=J.numClippingPlanes,ae.numIntersection=J.numClipIntersection,ae.vertexAlphas=J.vertexAlphas,ae.vertexTangents=J.vertexTangents,ae.toneMapping=J.toneMapping}function Nr(B,J,ae,ie,he){J.isScene!==!0&&(J=X),ce.resetTextureUnits();let qe=J.fog,ut=ie.isMeshStandardMaterial?J.environment:null,dt=b===null?p.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:ks,xt=(ie.isMeshStandardMaterial?fe:ge).get(ie.envMap||ut),or=ie.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,bt=!!ie.normalMap&&!!ae.attributes.tangent,_t=!!ae.morphAttributes.position,Fr=!!ae.morphAttributes.normal,ja=!!ae.morphAttributes.color,ec=ie.toneMapped?p.toneMapping:ho,tc=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,is=tc!==void 0?tc.length:0,Tt=le.get(ie),rc=d.state.lights;if(L===!0&&(O===!0||B!==A)){let ss=B===A&&ie.id===x;R.setState(ie,B,ss)}let md=!1;ie.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==rc.state.version||Tt.outputEncoding!==dt||he.isInstancedMesh&&Tt.instancing===!1||!he.isInstancedMesh&&Tt.instancing===!0||he.isSkinnedMesh&&Tt.skinning===!1||!he.isSkinnedMesh&&Tt.skinning===!0||Tt.envMap!==xt||ie.fog===!0&&Tt.fog!==qe||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==R.numPlanes||Tt.numIntersection!==R.numIntersection)||Tt.vertexAlphas!==or||Tt.vertexTangents!==bt||Tt.morphTargets!==_t||Tt.morphNormals!==Fr||Tt.morphColors!==ja||Tt.toneMapping!==ec||te.isWebGL2===!0&&Tt.morphTargetsCount!==is)&&(md=!0):(md=!0,Tt.__version=ie.version);let ns=Tt.currentProgram;md===!0&&(ns=Rt(ie,J,he));let Ro=!1,gd=!1,w0=!1,yi=ns.getUniforms(),vd=Tt.uniforms;if(Q.useProgram(ns.program)&&(Ro=!0,gd=!0,w0=!0),ie.id!==x&&(x=ie.id,gd=!0),Ro||A!==B){if(yi.setValue(U,"projectionMatrix",B.projectionMatrix),te.logarithmicDepthBuffer&&yi.setValue(U,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),A!==B&&(A=B,gd=!0,w0=!0),ie.isShaderMaterial||ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshStandardMaterial||ie.envMap){let ss=yi.map.cameraPosition;ss!==void 0&&ss.setValue(U,Y.setFromMatrixPosition(B.matrixWorld))}(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&yi.setValue(U,"isOrthographic",B.isOrthographicCamera===!0),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial||ie.isShadowMaterial||he.isSkinnedMesh)&&yi.setValue(U,"viewMatrix",B.matrixWorldInverse)}if(he.isSkinnedMesh){yi.setOptional(U,he,"bindMatrix"),yi.setOptional(U,he,"bindMatrixInverse");let ss=he.skeleton;ss&&(te.floatVertexTextures?(ss.boneTexture===null&&ss.computeBoneTexture(),yi.setValue(U,"boneTexture",ss.boneTexture,ce),yi.setValue(U,"boneTextureSize",ss.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let S0=ae.morphAttributes;return(S0.position!==void 0||S0.normal!==void 0||S0.color!==void 0&&te.isWebGL2===!0)&&xe.update(he,ae,ie,ns),(gd||Tt.receiveShadow!==he.receiveShadow)&&(Tt.receiveShadow=he.receiveShadow,yi.setValue(U,"receiveShadow",he.receiveShadow)),gd&&(yi.setValue(U,"toneMappingExposure",p.toneMappingExposure),Tt.needsLights&&Gi(vd,w0),qe&&ie.fog===!0&&Ue.refreshFogUniforms(vd,qe),Ue.refreshMaterialUniforms(vd,ie,E,C,k),qm.upload(U,Tt.uniformsList,vd,ce)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(qm.upload(U,Tt.uniformsList,vd,ce),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&yi.setValue(U,"center",he.center),yi.setValue(U,"modelViewMatrix",he.modelViewMatrix),yi.setValue(U,"normalMatrix",he.normalMatrix),yi.setValue(U,"modelMatrix",he.matrixWorld),ns}function Gi(B,J){B.ambientLightColor.needsUpdate=J,B.lightProbe.needsUpdate=J,B.directionalLights.needsUpdate=J,B.directionalLightShadows.needsUpdate=J,B.pointLights.needsUpdate=J,B.pointLightShadows.needsUpdate=J,B.spotLights.needsUpdate=J,B.spotLightShadows.needsUpdate=J,B.rectAreaLights.needsUpdate=J,B.hemisphereLights.needsUpdate=J}function vi(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(B,J,ae){le.get(B.texture).__webglTexture=J,le.get(B.depthTexture).__webglTexture=ae;let ie=le.get(B);ie.__hasExternalTextures=!0,ie.__hasExternalTextures&&(ie.__autoAllocateDepthBuffer=ae===void 0,ie.__autoAllocateDepthBuffer||ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,J){let ae=le.get(B);ae.__webglFramebuffer=J,ae.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(B,J=0,ae=0){b=B,v=J,y=ae;let ie=!0;if(B){let dt=le.get(B);dt.__useDefaultFramebuffer!==void 0?(Q.bindFramebuffer(36160,null),ie=!1):dt.__webglFramebuffer===void 0?ce.setupRenderTarget(B):dt.__hasExternalTextures&&ce.rebindTextures(B,le.get(B.texture).__webglTexture,le.get(B.depthTexture).__webglTexture)}let he=null,qe=!1,ut=!1;if(B){let dt=B.texture;(dt.isData3DTexture||dt.isDataArrayTexture)&&(ut=!0);let xt=le.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(he=xt[J],qe=!0):te.isWebGL2&&B.samples>0&&ce.useMultisampledRTT(B)===!1?he=le.get(B).__webglMultisampledFramebuffer:he=xt,S.copy(B.viewport),_.copy(B.scissor),w=B.scissorTest}else S.copy(D).multiplyScalar(E).floor(),_.copy(W).multiplyScalar(E).floor(),w=V;if(Q.bindFramebuffer(36160,he)&&te.drawBuffers&&ie&&Q.drawBuffers(B,he),Q.viewport(S),Q.scissor(_),Q.setScissorTest(w),qe){let dt=le.get(B.texture);U.framebufferTexture2D(36160,36064,34069+J,dt.__webglTexture,ae)}else if(ut){let dt=le.get(B.texture),xt=J||0;U.framebufferTextureLayer(36160,36064,dt.__webglTexture,ae||0,xt)}x=-1},this.readRenderTargetPixels=function(B,J,ae,ie,he,qe,ut){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=le.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&ut!==void 0&&(dt=dt[ut]),dt){Q.bindFramebuffer(36160,dt);try{let xt=B.texture,or=xt.format,bt=xt.type;if(or!==_s&&oe.convert(or)!==U.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let _t=bt===sf&&(ee.has("EXT_color_buffer_half_float")||te.isWebGL2&&ee.has("EXT_color_buffer_float"));if(bt!==gi&&oe.convert(bt)!==U.getParameter(35738)&&!(bt===ca&&(te.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float")))&&!_t){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=B.width-ie&&ae>=0&&ae<=B.height-he&&U.readPixels(J,ae,ie,he,oe.convert(or),oe.convert(bt),qe)}finally{let xt=b!==null?le.get(b).__webglFramebuffer:null;Q.bindFramebuffer(36160,xt)}}},this.copyFramebufferToTexture=function(B,J,ae=0){let ie=Math.pow(2,-ae),he=Math.floor(J.image.width*ie),qe=Math.floor(J.image.height*ie);ce.setTexture2D(J,0),U.copyTexSubImage2D(3553,ae,0,0,B.x,B.y,he,qe),Q.unbindTexture()},this.copyTextureToTexture=function(B,J,ae,ie=0){let he=J.image.width,qe=J.image.height,ut=oe.convert(ae.format),dt=oe.convert(ae.type);ce.setTexture2D(ae,0),U.pixelStorei(37440,ae.flipY),U.pixelStorei(37441,ae.premultiplyAlpha),U.pixelStorei(3317,ae.unpackAlignment),J.isDataTexture?U.texSubImage2D(3553,ie,B.x,B.y,he,qe,ut,dt,J.image.data):J.isCompressedTexture?U.compressedTexSubImage2D(3553,ie,B.x,B.y,J.mipmaps[0].width,J.mipmaps[0].height,ut,J.mipmaps[0].data):U.texSubImage2D(3553,ie,B.x,B.y,ut,dt,J.image),ie===0&&ae.generateMipmaps&&U.generateMipmap(3553),Q.unbindTexture()},this.copyTextureToTexture3D=function(B,J,ae,ie,he=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let qe=B.max.x-B.min.x+1,ut=B.max.y-B.min.y+1,dt=B.max.z-B.min.z+1,xt=oe.convert(ie.format),or=oe.convert(ie.type),bt;if(ie.isData3DTexture)ce.setTexture3D(ie,0),bt=32879;else if(ie.isDataArrayTexture)ce.setTexture2DArray(ie,0),bt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}U.pixelStorei(37440,ie.flipY),U.pixelStorei(37441,ie.premultiplyAlpha),U.pixelStorei(3317,ie.unpackAlignment);let _t=U.getParameter(3314),Fr=U.getParameter(32878),ja=U.getParameter(3316),ec=U.getParameter(3315),tc=U.getParameter(32877),is=ae.isCompressedTexture?ae.mipmaps[0]:ae.image;U.pixelStorei(3314,is.width),U.pixelStorei(32878,is.height),U.pixelStorei(3316,B.min.x),U.pixelStorei(3315,B.min.y),U.pixelStorei(32877,B.min.z),ae.isDataTexture||ae.isData3DTexture?U.texSubImage3D(bt,he,J.x,J.y,J.z,qe,ut,dt,xt,or,is.data):ae.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),U.compressedTexSubImage3D(bt,he,J.x,J.y,J.z,qe,ut,dt,xt,is.data)):U.texSubImage3D(bt,he,J.x,J.y,J.z,qe,ut,dt,xt,or,is),U.pixelStorei(3314,_t),U.pixelStorei(32878,Fr),U.pixelStorei(3316,ja),U.pixelStorei(3315,ec),U.pixelStorei(32877,tc),he===0&&ie.generateMipmaps&&U.generateMipmap(bt),Q.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?ce.setTextureCube(B,0):B.isData3DTexture?ce.setTexture3D(B,0):B.isDataArrayTexture?ce.setTexture2DArray(B,0):ce.setTexture2D(B,0),Q.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,Q.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var bZ=class extends OO{};bZ.prototype.isWebGL1Renderer=!0;var BO=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new st(e),this.near=t,this.far=r}clone(){return new BO(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Ml=class extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}},wZ=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=$b,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ls()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ls()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ls()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},bi=new T,Ob=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)bi.fromBufferAttribute(this,t),bi.applyMatrix4(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)bi.fromBufferAttribute(this,t),bi.applyNormalMatrix(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)bi.fromBufferAttribute(this,t),bi.transformDirection(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new ft(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ob(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},SZ=class extends ft{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Ha=class extends Nf{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},KC=new T,XC=new T,qC=new We,Wy=new zf,qp=new ts,jg=class extends zt{constructor(e=new at,t=new Ha){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)KC.fromBufferAttribute(t,i-1),XC.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=KC.distanceTo(XC);e.setAttribute("lineDistance",new $e(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),qp.copy(r.boundingSphere),qp.applyMatrix4(i),qp.radius+=n,e.ray.intersectsSphere(qp)===!1)return;qC.copy(i).invert(),Wy.copy(e.ray).applyMatrix4(qC);let o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new T,c=new T,h=new T,u=new T,d=this.isLineSegments?2:1,f=r.index,m=r.attributes.position;if(f!==null){let p=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=p,y=g-1;v<y;v+=d){let b=f.getX(v),x=f.getX(v+1);if(l.fromBufferAttribute(m,b),c.fromBufferAttribute(m,x),Wy.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);let A=e.ray.origin.distanceTo(u);A<e.near||A>e.far||t.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let p=Math.max(0,s.start),g=Math.min(m.count,s.start+s.count);for(let v=p,y=g-1;v<y;v+=d){if(l.fromBufferAttribute(m,v),c.fromBufferAttribute(m,v+1),Wy.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);let b=e.ray.origin.distanceTo(u);b<e.near||b>e.far||t.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},QC=new T,ZC=new T,Ff=class extends jg{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)QC.fromBufferAttribute(t,i),ZC.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+QC.distanceTo(ZC);e.setAttribute("lineDistance",new $e(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Us=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,s;t?s=t:s=e*r[n-1];let o=0,a=n-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=r[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,r[i]===s)return i/(n-1);let c=r[i],h=r[i+1]-c,u=(s-c)/h;return(i+u)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),s=this.getPoint(i),o=t||(n.isVector2?new K:new T);return o.copy(s).sub(n).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new T,i=[],n=[],s=[],o=new T,a=new We;for(let d=0;d<=e;d++){let f=d/e;i[d]=this.getTangentAt(f,new T)}n[0]=new T,s[0]=new T;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,r.set(1,0,0)),h<=l&&(l=h,r.set(0,1,0)),u<=l&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],o),s[0].crossVectors(i[0],n[0]);for(let d=1;d<=e;d++){if(n[d]=n[d-1].clone(),s[d]=s[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(Lr(i[d-1].dot(i[d]),-1,1));n[d].applyMatrix4(a.makeRotationAxis(o,f))}s[d].crossVectors(i[d],n[d])}if(t===!0){let d=Math.acos(Lr(n[0].dot(n[e]),-1,1));d/=e,i[0].dot(o.crossVectors(n[0],n[e]))>0&&(d=-d);for(let f=1;f<=e;f++)n[f].applyMatrix4(a.makeRotationAxis(i[f],d*f)),s[f].crossVectors(i[f],n[f])}return{tangents:i,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Xv=class extends Us{constructor(e=0,t=0,r=1,i=1,n=0,s=Math.PI*2,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){let r=t||new K,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(s?n=0:n=i),this.aClockwise===!0&&!s&&(n===i?n=-i:n=n-i);let o=this.aStartAngle+e*n,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return r.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},_Z=class extends Xv{constructor(e,t,r,i,n,s){super(e,t,r,r,i,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function z_(){let e=0,t=0,r=0,i=0;function n(s,o,a,l){e=s,t=a,r=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){n(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,n(o,a,d,f)},calc:function(s){let o=s*s,a=o*s;return e+t*s+r*o+i*a}}}var Qp=new T,jy=new z_,Gy=new z_,Yy=new z_,AZ=class extends Us{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new T){let r=t,i=this.points,n=i.length,s=(n-(this.closed?0:1))*e,o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:a===0&&o===n-1&&(o=n-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%n]:(Qp.subVectors(i[0],i[1]).add(i[0]),l=Qp);let h=i[o%n],u=i[(o+1)%n];if(this.closed||o+2<n?c=i[(o+2)%n]:(Qp.subVectors(i[n-1],i[n-2]).add(i[n-1]),c=Qp),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(u),d),p=Math.pow(u.distanceToSquared(c),d);m<1e-4&&(m=1),f<1e-4&&(f=m),p<1e-4&&(p=m),jy.initNonuniformCatmullRom(l.x,h.x,u.x,c.x,f,m,p),Gy.initNonuniformCatmullRom(l.y,h.y,u.y,c.y,f,m,p),Yy.initNonuniformCatmullRom(l.z,h.z,u.z,c.z,f,m,p)}else this.curveType==="catmullrom"&&(jy.initCatmullRom(l.x,h.x,u.x,c.x,this.tension),Gy.initCatmullRom(l.y,h.y,u.y,c.y,this.tension),Yy.initCatmullRom(l.z,h.z,u.z,c.z,this.tension));return r.set(jy.calc(a),Gy.calc(a),Yy.calc(a)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new T().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function JC(e,t,r,i,n){let s=(i-t)*.5,o=(n-r)*.5,a=e*e,l=e*a;return(2*r-2*i+s+o)*l+(-3*r+3*i-2*s-o)*a+s*e+r}function MZ(e,t){let r=1-e;return r*r*t}function EZ(e,t){return 2*(1-e)*e*t}function CZ(e,t){return e*e*t}function Ah(e,t,r,i){return MZ(e,t)+EZ(e,r)+CZ(e,i)}function TZ(e,t){let r=1-e;return r*r*r*t}function PZ(e,t){let r=1-e;return 3*r*r*e*t}function DZ(e,t){return 3*(1-e)*e*e*t}function LZ(e,t){return e*e*e*t}function Mh(e,t,r,i,n){return TZ(e,t)+PZ(e,r)+DZ(e,i)+LZ(e,n)}var As=class extends Us{constructor(e=new K,t=new K,r=new K,i=new K){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new K){let r=t,i=this.v0,n=this.v1,s=this.v2,o=this.v3;return r.set(Mh(e,i.x,n.x,s.x,o.x),Mh(e,i.y,n.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},$Z=class extends Us{constructor(e=new T,t=new T,r=new T,i=new T){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new T){let r=t,i=this.v0,n=this.v1,s=this.v2,o=this.v3;return r.set(Mh(e,i.x,n.x,s.x,o.x),Mh(e,i.y,n.y,s.y,o.y),Mh(e,i.z,n.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},$s=class extends Us{constructor(e=new K,t=new K){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new K){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new K;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},zO=class extends Us{constructor(e=new T,t=new T){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new T){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Hl=class extends Us{constructor(e=new K,t=new K,r=new K){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new K){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(Ah(e,i.x,n.x,s.x),Ah(e,i.y,n.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},IZ=class extends Us{constructor(e=new T,t=new T,r=new T){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new T){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(Ah(e,i.x,n.x,s.x),Ah(e,i.y,n.y,s.y),Ah(e,i.z,n.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},N_=class extends Us{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new K){let r=t,i=this.points,n=(i.length-1)*e,s=Math.floor(n),o=n-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(JC(o,a.x,l.x,c.x,h.x),JC(o,a.y,l.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new K().fromArray(i))}return this}},RZ=Object.freeze({__proto__:null,ArcCurve:_Z,CatmullRomCurve3:AZ,CubicBezierCurve:As,CubicBezierCurve3:$Z,EllipseCurve:Xv,LineCurve:$s,LineCurve3:zO,QuadraticBezierCurve:Hl,QuadraticBezierCurve3:IZ,SplineCurve:N_}),kZ=class extends Us{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new $s(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let s=i[n]-r,o=this.curves[n],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let s=n[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let l=0;l<a.length;l++){let c=a[l];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new RZ[i.type]().fromJSON(i))}return this}},Bb=class extends kZ{constructor(e){super(),this.type="Path",this.currentPoint=new K,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new $s(this.currentPoint.clone(),new K(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new Hl(this.currentPoint.clone(),new K(e,t),new K(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,s){let o=new As(this.currentPoint.clone(),new K(e,t),new K(r,i),new K(n,s));return this.curves.push(o),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new N_(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,s){let o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,r,i,n,s),this}absarc(e,t,r,i,n,s){return this.absellipse(e,t,r,r,i,n,s),this}ellipse(e,t,r,i,n,s,o,a){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,r,i,n,s,o,a),this}absellipse(e,t,r,i,n,s,o,a){let l=new Xv(e,t,r,i,n,s,o,a);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},NO=class extends at{constructor(e=[new K(0,.5),new K(.5,0),new K(0,-.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Lr(i,0,Math.PI*2);let n=[],s=[],o=[],a=[],l=[],c=1/t,h=new T,u=new K,d=new T,f=new T,m=new T,p=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-p,d.z=g*0,m.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case e.length-1:a.push(m.x,m.y,m.z);break;default:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-p,d.z=g*0,f.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),a.push(d.x,d.y,d.z),m.copy(f)}for(let v=0;v<=t;v++){let y=r+v*c*i,b=Math.sin(y),x=Math.cos(y);for(let A=0;A<=e.length-1;A++){h.x=e[A].x*b,h.y=e[A].y,h.z=e[A].x*x,s.push(h.x,h.y,h.z),u.x=v/t,u.y=A/(e.length-1),o.push(u.x,u.y);let S=a[3*A+0]*b,_=a[3*A+1],w=a[3*A+0]*x;l.push(S,_,w)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){let b=y+v*e.length,x=b,A=b+e.length,S=b+e.length+1,_=b+1;n.push(x,A,_),n.push(S,_,A)}this.setIndex(n),this.setAttribute("position",new $e(s,3)),this.setAttribute("uv",new $e(o,2)),this.setAttribute("normal",new $e(l,3))}static fromJSON(e){return new NO(e.points,e.segments,e.phiStart,e.phiLength)}},F_=class extends at{constructor(e=1,t=1,r=1,i=8,n=1,s=!1,o=0,a=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:a};let l=this;i=Math.floor(i),n=Math.floor(n);let c=[],h=[],u=[],d=[],f=0,m=[],p=r/2,g=0;v(),s===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new $e(h,3)),this.setAttribute("normal",new $e(u,3)),this.setAttribute("uv",new $e(d,2));function v(){let b=new T,x=new T,A=0,S=(t-e)/r;for(let _=0;_<=n;_++){let w=[],M=_/n,C=M*(t-e)+e;for(let E=0;E<=i;E++){let $=E/i,P=$*a+o,D=Math.sin(P),W=Math.cos(P);x.x=C*D,x.y=-M*r+p,x.z=C*W,h.push(x.x,x.y,x.z),b.set(D,S,W).normalize(),u.push(b.x,b.y,b.z),d.push($,1-M),w.push(f++)}m.push(w)}for(let _=0;_<i;_++)for(let w=0;w<n;w++){let M=m[w][_],C=m[w+1][_],E=m[w+1][_+1],$=m[w][_+1];c.push(M,C,$),c.push(C,E,$),A+=6}l.addGroup(g,A,0),g+=A}function y(b){let x=f,A=new K,S=new T,_=0,w=b===!0?e:t,M=b===!0?1:-1;for(let E=1;E<=i;E++)h.push(0,p*M,0),u.push(0,M,0),d.push(.5,.5),f++;let C=f;for(let E=0;E<=i;E++){let $=E/i*a+o,P=Math.cos($),D=Math.sin($);S.x=w*D,S.y=p*M,S.z=w*P,h.push(S.x,S.y,S.z),u.push(0,M,0),A.x=P*.5+.5,A.y=D*.5*M+.5,d.push(A.x,A.y),f++}for(let E=0;E<i;E++){let $=x+E,P=C+E;b===!0?c.push(P,P+1,$):c.push(P+1,P,$),_+=3}l.addGroup(g,_,b===!0?1:2),g+=_}}static fromJSON(e){return new F_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},FO=class extends F_{constructor(e=1,t=1,r=8,i=1,n=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,n,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:o}}static fromJSON(e){return new FO(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},U_=class extends at{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],s=[];o(i),l(r),c(),this.setAttribute("position",new $e(n,3)),this.setAttribute("normal",new $e(n.slice(),3)),this.setAttribute("uv",new $e(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(v){let y=new T,b=new T,x=new T;for(let A=0;A<t.length;A+=3)d(t[A+0],y),d(t[A+1],b),d(t[A+2],x),a(y,b,x,v)}function a(v,y,b,x){let A=x+1,S=[];for(let _=0;_<=A;_++){S[_]=[];let w=v.clone().lerp(b,_/A),M=y.clone().lerp(b,_/A),C=A-_;for(let E=0;E<=C;E++)E===0&&_===A?S[_][E]=w:S[_][E]=w.clone().lerp(M,E/C)}for(let _=0;_<A;_++)for(let w=0;w<2*(A-_)-1;w++){let M=Math.floor(w/2);w%2===0?(u(S[_][M+1]),u(S[_+1][M]),u(S[_][M])):(u(S[_][M+1]),u(S[_+1][M+1]),u(S[_+1][M]))}}function l(v){let y=new T;for(let b=0;b<n.length;b+=3)y.x=n[b+0],y.y=n[b+1],y.z=n[b+2],y.normalize().multiplyScalar(v),n[b+0]=y.x,n[b+1]=y.y,n[b+2]=y.z}function c(){let v=new T;for(let y=0;y<n.length;y+=3){v.x=n[y+0],v.y=n[y+1],v.z=n[y+2];let b=p(v)/2/Math.PI+.5,x=g(v)/Math.PI+.5;s.push(b,1-x)}f(),h()}function h(){for(let v=0;v<s.length;v+=6){let y=s[v+0],b=s[v+2],x=s[v+4],A=Math.max(y,b,x),S=Math.min(y,b,x);A>.9&&S<.1&&(y<.2&&(s[v+0]+=1),b<.2&&(s[v+2]+=1),x<.2&&(s[v+4]+=1))}}function u(v){n.push(v.x,v.y,v.z)}function d(v,y){let b=v*3;y.x=e[b+0],y.y=e[b+1],y.z=e[b+2]}function f(){let v=new T,y=new T,b=new T,x=new T,A=new K,S=new K,_=new K;for(let w=0,M=0;w<n.length;w+=9,M+=6){v.set(n[w+0],n[w+1],n[w+2]),y.set(n[w+3],n[w+4],n[w+5]),b.set(n[w+6],n[w+7],n[w+8]),A.set(s[M+0],s[M+1]),S.set(s[M+2],s[M+3]),_.set(s[M+4],s[M+5]),x.copy(v).add(y).add(b).divideScalar(3);let C=p(x);m(A,M+0,v,C),m(S,M+2,y,C),m(_,M+4,b,C)}}function m(v,y,b,x){x<0&&v.x===1&&(s[y]=v.x-1),b.x===0&&b.z===0&&(s[y]=x/2/Math.PI+.5)}function p(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new U_(e.vertices,e.indices,e.radius,e.details)}},UO=class extends U_{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new UO(e.radius,e.detail)}},El=class extends Bb{constructor(e){super(e),this.uuid=Ls(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new Bb().fromJSON(i))}return this}},OZ={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,s=HO(e,0,n,r,!0),o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(i&&(s=UZ(e,t,s,r)),e.length>80*r){a=c=e[0],l=h=e[1];for(let m=r;m<n;m+=r)u=e[m],d=e[m+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?1/f:0}return af(s,o,r,a,l,f),o}};function HO(e,t,r,i,n){let s,o;if(n===ZZ(e,t,r,i)>0)for(s=t;s<r;s+=i)o=eT(s,e[s],e[s+1],o);else for(s=r-i;s>=t;s-=i)o=eT(s,e[s],e[s+1],o);return o&&qv(o,o.next)&&(cf(o),o=o.next),o}function Ia(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(qv(r,r.next)||ir(r.prev,r,r.next)===0)){if(cf(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function af(e,t,r,i,n,s,o){if(!e)return;!o&&s&&GZ(e,i,n,s);let a=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?zZ(e,i,n,s):BZ(e)){t.push(l.i/r),t.push(e.i/r),t.push(c.i/r),cf(e),e=c.next,a=c.next;continue}if(e=c,e===a){o?o===1?(e=NZ(Ia(e),t,r),af(e,t,r,i,n,s,2)):o===2&&FZ(e,t,r,i,n,s):af(Ia(e),t,r,i,n,s,1);break}}}function BZ(e){let t=e.prev,r=e,i=e.next;if(ir(t,r,i)>=0)return!1;let n=e.next.next;for(;n!==e.prev;){if(du(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&ir(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function zZ(e,t,r,i){let n=e.prev,s=e,o=e.next;if(ir(n,s,o)>=0)return!1;let a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,l=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,c=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,h=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,u=zb(a,l,t,r,i),d=zb(c,h,t,r,i),f=e.prevZ,m=e.nextZ;for(;f&&f.z>=u&&m&&m.z<=d;){if(f!==e.prev&&f!==e.next&&du(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&ir(f.prev,f,f.next)>=0||(f=f.prevZ,m!==e.prev&&m!==e.next&&du(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&ir(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=u;){if(f!==e.prev&&f!==e.next&&du(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&ir(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=d;){if(m!==e.prev&&m!==e.next&&du(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&ir(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function NZ(e,t,r){let i=e;do{let n=i.prev,s=i.next.next;!qv(n,s)&&VO(n,i,i.next,s)&&lf(n,s)&&lf(s,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(s.i/r),cf(i),cf(i.next),i=e=s),i=i.next}while(i!==e);return Ia(i)}function FZ(e,t,r,i,n,s){let o=e;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&XZ(o,a)){let l=WO(o,a);o=Ia(o,o.next),l=Ia(l,l.next),af(o,t,r,i,n,s),af(l,t,r,i,n,s);return}a=a.next}o=o.next}while(o!==e)}function UZ(e,t,r,i){let n=[],s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:e.length,c=HO(e,a,l,i,!1),c===c.next&&(c.steiner=!0),n.push(KZ(c));for(n.sort(HZ),s=0;s<n.length;s++)VZ(n[s],r),r=Ia(r,r.next);return r}function HZ(e,t){return e.x-t.x}function VZ(e,t){if(t=WZ(e,t),t){let r=WO(t,e);Ia(t,t.next),Ia(r,r.next)}}function WZ(e,t){let r=t,i=e.x,n=e.y,s=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){let d=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=i&&d>s){if(s=d,d===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===s)return o;let a=o,l=o.x,c=o.y,h=1/0,u;r=o;do i>=r.x&&r.x>=l&&i!==r.x&&du(n<c?i:s,n,l,c,n<c?s:i,n,r.x,r.y)&&(u=Math.abs(n-r.y)/(i-r.x),lf(r,e)&&(u<h||u===h&&(r.x>o.x||r.x===o.x&&jZ(o,r)))&&(o=r,h=u)),r=r.next;while(r!==a);return o}function jZ(e,t){return ir(e.prev,e,t.prev)<0&&ir(t.next,e,e.next)<0}function GZ(e,t,r,i){let n=e;do n.z===null&&(n.z=zb(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,YZ(n)}function YZ(e){let t,r,i,n,s,o,a,l,c=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,i=r,a=0,t=0;t<c&&(a++,i=i.nextZ,!!i);t++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,c*=2}while(o>1);return e}function zb(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function KZ(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function du(e,t,r,i,n,s,o,a){return(n-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(i-a)-(r-o)*(t-a)>=0&&(r-o)*(s-a)-(n-o)*(i-a)>=0}function XZ(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!qZ(e,t)&&(lf(e,t)&&lf(t,e)&&QZ(e,t)&&(ir(e.prev,e,t.prev)||ir(e,t.prev,t))||qv(e,t)&&ir(e.prev,e,e.next)>0&&ir(t.prev,t,t.next)>0)}function ir(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function qv(e,t){return e.x===t.x&&e.y===t.y}function VO(e,t,r,i){let n=Jp(ir(e,t,r)),s=Jp(ir(e,t,i)),o=Jp(ir(r,i,e)),a=Jp(ir(r,i,t));return!!(n!==s&&o!==a||n===0&&Zp(e,r,t)||s===0&&Zp(e,i,t)||o===0&&Zp(r,e,i)||a===0&&Zp(r,t,i))}function Zp(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Jp(e){return e>0?1:e<0?-1:0}function qZ(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&VO(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function lf(e,t){return ir(e.prev,e,e.next)<0?ir(e,t,e.next)>=0&&ir(e,e.prev,t)>=0:ir(e,t,e.prev)<0||ir(e,e.next,t)<0}function QZ(e,t){let r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function WO(e,t){let r=new Nb(e.i,e.x,e.y),i=new Nb(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function eT(e,t,r,i){let n=new Nb(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function cf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Nb(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ZZ(e,t,r,i){let n=0;for(let s=t,o=r-i;s<r;s+=i)n+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return n}var Eh=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return Eh.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];tT(e),rT(r,e);let s=e.length;t.forEach(tT);for(let a=0;a<t.length;a++)i.push(s),s+=t[a].length,rT(r,t[a]);let o=OZ.triangulate(r,i);for(let a=0;a<o.length;a+=3)n.push(o.slice(a,a+3));return n}};function tT(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function rT(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var jO=class extends U_{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jO(e.radius,e.detail)}},GO=class extends at{constructor(e=new El([new K(0,.5),new K(-.5,-.5),new K(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let r=[],i=[],n=[],s=[],o=0,a=0;if(Array.isArray(e)===!1)l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(o,a,c),o+=a,a=0;this.setIndex(r),this.setAttribute("position",new $e(i,3)),this.setAttribute("normal",new $e(n,3)),this.setAttribute("uv",new $e(s,2));function l(c){let h=i.length/3,u=c.extractPoints(t),d=u.shape,f=u.holes;Eh.isClockWise(d)===!1&&(d=d.reverse());for(let p=0,g=f.length;p<g;p++){let v=f[p];Eh.isClockWise(v)===!0&&(f[p]=v.reverse())}let m=Eh.triangulateShape(d,f);for(let p=0,g=f.length;p<g;p++){let v=f[p];d=d.concat(v)}for(let p=0,g=d.length;p<g;p++){let v=d[p];i.push(v.x,v.y,0),n.push(0,0,1),s.push(v.x,v.y)}for(let p=0,g=m.length;p<g;p++){let v=m[p],y=v[0]+h,b=v[1]+h,x=v[2]+h;r.push(y,b,x),a+=3}}}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return JZ(t,e)}static fromJSON(e,t){let r=[];for(let i=0,n=e.shapes.length;i<n;i++){let s=t[e.shapes[i]];r.push(s)}return new GO(r,e.curveSegments)}};function JZ(e,t){if(t.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){let n=e[r];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}var H_=class extends at{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let a=Math.min(s+o,Math.PI),l=0,c=[],h=new T,u=new T,d=[],f=[],m=[],p=[];for(let g=0;g<=r;g++){let v=[],y=g/r,b=0;g==0&&s==0?b=.5/t:g==r&&a==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){let A=x/t;h.x=-e*Math.cos(i+A*n)*Math.sin(s+y*o),h.y=e*Math.cos(s+y*o),h.z=e*Math.sin(i+A*n)*Math.sin(s+y*o),f.push(h.x,h.y,h.z),u.copy(h).normalize(),m.push(u.x,u.y,u.z),p.push(A+b,1-y),v.push(l++)}c.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){let y=c[g][v+1],b=c[g][v],x=c[g+1][v],A=c[g+1][v+1];(g!==0||s>0)&&d.push(y,b,A),(g!==r-1||a<Math.PI)&&d.push(b,x,A)}this.setIndex(d),this.setAttribute("position",new $e(f,3)),this.setAttribute("normal",new $e(m,3)),this.setAttribute("uv",new $e(p,2))}static fromJSON(e){return new H_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},YO=class extends at{constructor(e=1,t=.4,r=64,i=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:s},r=Math.floor(r),i=Math.floor(i);let o=[],a=[],l=[],c=[],h=new T,u=new T,d=new T,f=new T,m=new T,p=new T,g=new T;for(let y=0;y<=r;++y){let b=y/r*n*Math.PI*2;v(b,n,s,e,d),v(b+.01,n,s,e,f),p.subVectors(f,d),g.addVectors(f,d),m.crossVectors(p,g),g.crossVectors(m,p),m.normalize(),g.normalize();for(let x=0;x<=i;++x){let A=x/i*Math.PI*2,S=-t*Math.cos(A),_=t*Math.sin(A);h.x=d.x+(S*g.x+_*m.x),h.y=d.y+(S*g.y+_*m.y),h.z=d.z+(S*g.z+_*m.z),a.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(y/r),c.push(x/i)}}for(let y=1;y<=r;y++)for(let b=1;b<=i;b++){let x=(i+1)*(y-1)+(b-1),A=(i+1)*y+(b-1),S=(i+1)*y+b,_=(i+1)*(y-1)+b;o.push(x,A,_),o.push(A,S,_)}this.setIndex(o),this.setAttribute("position",new $e(a,3)),this.setAttribute("normal",new $e(l,3)),this.setAttribute("uv",new $e(c,2));function v(y,b,x,A,S){let _=Math.cos(y),w=Math.sin(y),M=x/b*y,C=Math.cos(M);S.x=A*(2+C)*.5*_,S.y=A*(2+C)*w*.5,S.z=A*Math.sin(M)*.5}}static fromJSON(e){return new YO(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},iT={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},KO=class{constructor(e,t,r){let i=this,n=!1,s=0,o=0,a,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){o++,n===!1&&i.onStart!==void 0&&i.onStart(c,s,o),n=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,h){return l.push(c,h),this},this.removeHandler=function(c){let h=l.indexOf(c);return h!==-1&&l.splice(h,2),this},this.getHandler=function(c){for(let h=0,u=l.length;h<u;h+=2){let d=l[h],f=l[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return f}return null}}},eJ=new KO,Qv=class{constructor(e){this.manager=e!==void 0?e:eJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Zs={},Gg=class extends Qv{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=iT.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Zs[e]!==void 0){Zs[e].push({onLoad:t,onProgress:r,onError:i});return}Zs[e]=[],Zs[e].push({onLoad:t,onProgress:r,onError:i});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=Zs[e],h=l.body.getReader(),u=l.headers.get("Content-Length"),d=u?parseInt(u):0,f=d!==0,m=0,p=new ReadableStream({start(g){v();function v(){h.read().then(({done:y,value:b})=>{if(y)g.close();else{m+=b.byteLength;let x=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:d});for(let A=0,S=c.length;A<S;A++){let _=c[A];_.onProgress&&_.onProgress(x)}g.enqueue(b),v()}})}}});return new Response(p)}else throw Error(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(o),h=c&&c[1]?c[1].toLowerCase():void 0,u=new TextDecoder(h);return l.arrayBuffer().then(d=>u.decode(d))}}}).then(l=>{iT.add(e,l);let c=Zs[e];delete Zs[e];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let c=Zs[e];if(c===void 0)throw this.manager.itemError(e),l;delete Zs[e];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Zv=class extends zt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Fb=class extends Zv{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DefaultUp),this.updateMatrix(),this.groundColor=new st(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},nT=new We,sT=new T,oT=new T,V_=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new K(512,512),this.map=null,this.mapPass=null,this.matrix=new We,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new R_,this._frameExtents=new K(1,1),this._viewportCount=1,this._viewports=[new ct(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;sT.setFromMatrixPosition(e.matrixWorld),t.position.copy(sT),oT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(oT),t.updateMatrixWorld(),nT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},tJ=class extends V_{constructor(){super(new ui(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=of*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},rJ=class extends Zv{constructor(e,t,r=0,i=Math.PI/3,n=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DefaultUp),this.updateMatrix(),this.target=new zt,this.distance=r,this.angle=i,this.penumbra=n,this.decay=s,this.shadow=new tJ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},aT=new We,Id=new T,Ky=new T,iJ=class extends V_{constructor(){super(new ui(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new K(4,2),this._viewportCount=6,this._viewports=[new ct(2,1,1,1),new ct(0,1,1,1),new ct(3,1,1,1),new ct(1,1,1,1),new ct(3,0,1,1),new ct(1,0,1,1)],this._cubeDirections=[new T(1,0,0),new T(-1,0,0),new T(0,0,1),new T(0,0,-1),new T(0,1,0),new T(0,-1,0)],this._cubeUps=[new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,0,1),new T(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),Id.setFromMatrixPosition(e.matrixWorld),r.position.copy(Id),Ky.copy(r.position),Ky.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Ky),r.updateMatrixWorld(),i.makeTranslation(-Id.x,-Id.y,-Id.z),aT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aT)}},nJ=class extends Zv{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new iJ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},sJ=class extends V_{constructor(){super(new k_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},oJ=class extends Zv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DefaultUp),this.updateMatrix(),this.target=new zt,this.shadow=new sJ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},aJ=class extends at{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},XO=class extends Qv{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new Gg(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(o){try{t(n.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(u,d){if(t[d]!==void 0)return t[d];let f=u.interleavedBuffers[d],m=n(u,f.buffer),p=Pp(f.type,m),g=new wZ(p,f.stride);return g.uuid=f.uuid,t[d]=g,g}function n(u,d){if(r[d]!==void 0)return r[d];let f=u.arrayBuffers[d],m=new Uint32Array(f).buffer;return r[d]=m,m}let s=e.isInstancedBufferGeometry?new aJ:new at,o=e.data.index;if(o!==void 0){let u=Pp(o.type,o.array);s.setIndex(new ft(u,1))}let a=e.data.attributes;for(let u in a){let d=a[u],f;if(d.isInterleavedBufferAttribute){let m=i(e.data,d.data);f=new Ob(m,d.itemSize,d.offset,d.normalized)}else{let m=Pp(d.type,d.array),p=d.isInstancedBufferAttribute?SZ:ft;f=new p(m,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),s.setAttribute(u,f)}let l=e.data.morphAttributes;if(l)for(let u in l){let d=l[u],f=[];for(let m=0,p=d.length;m<p;m++){let g=d[m],v;if(g.isInterleavedBufferAttribute){let y=i(e.data,g.data);v=new Ob(y,g.itemSize,g.offset,g.normalized)}else{let y=Pp(g.type,g.array);v=new ft(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}s.morphAttributes[u]=f}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let u=0,d=c.length;u!==d;++u){let f=c[u];s.addGroup(f.start,f.count,f.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let u=new T;h.center!==void 0&&u.fromArray(h.center),s.boundingSphere=new ts(u,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},lJ=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=lT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=lT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function lT(){return(typeof performance>"u"?Date:performance).now()}var qO="\\[\\]\\.:\\/",W_="[^"+qO+"]",cJ="[^"+qO.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",W_);/(WCOD+)?/.source.replace("WCOD",cJ);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",W_);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",W_);var He=class{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new He(this.value.clone===void 0?this.value:this.value.clone())}},QO=class{constructor(e,t,r=0,i=1/0){this.ray=new zf(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new $_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Ub(e,this,r,t),r.sort(cT),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)Ub(e[i],this,r,t);return r.sort(cT),r}};function cT(e,t){return e.distance-t.distance}function Ub(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let s=0,o=n.length;s<o;s++)Ub(n[s],t,r,!0)}}var uT=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Lr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},dT=new T,em=new T,Pn=class{constructor(e=new T,t=new T){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){dT.subVectors(e,this.start),em.subVectors(this.end,this.start);let r=em.dot(em),i=em.dot(dT)/r;return t&&(i=Lr(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},hT=new T,uJ=class extends zt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let r=new at,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){let l=s/a*Math.PI*2,c=o/a*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new $e(i,3));let n=new Ha({fog:!1,toneMapped:!1});this.cone=new Ff(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),hT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(hT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},dJ=class extends fi{constructor(e,t,r){let i=new H_(t,4,2),n=new Uu({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},fT=new T,tm=new T,pT=new T,hJ=class extends zt{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new at;i.setAttribute("position",new $e([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Ha({fog:!1,toneMapped:!1});this.lightPlane=new jg(i,n),this.add(this.lightPlane),i=new at,i.setAttribute("position",new $e([0,0,0,0,0,1],3)),this.targetLine=new jg(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){fT.setFromMatrixPosition(this.light.matrixWorld),tm.setFromMatrixPosition(this.light.target.matrixWorld),pT.subVectors(tm,fT),this.lightPlane.lookAt(tm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tm),this.targetLine.scale.z=pT.length()}},rm=new T,ar=new id,ua=class extends Ff{constructor(e){let t=new at,r=new Ha({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,m){a(f),a(m)}function a(f){i.push(0,0,0),n.push(0,0,0),s[f]===void 0&&(s[f]=[]),s[f].push(i.length/3-1)}t.setAttribute("position",new $e(i,3)),t.setAttribute("color",new $e(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new st(16755200),c=new st(16711680),h=new st(43775),u=new st(16777215),d=new st(3355443);this.setColors(l,c,h,u,d)}setColors(e,t,r,i,n){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,r.r,r.g,r.b),s.setXYZ(33,r.r,r.g,r.b),s.setXYZ(34,r.r,r.g,r.b),s.setXYZ(35,r.r,r.g,r.b),s.setXYZ(36,r.r,r.g,r.b),s.setXYZ(37,r.r,r.g,r.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;ar.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pr("c",t,e,ar,0,0,-1),pr("t",t,e,ar,0,0,1),pr("n1",t,e,ar,-r,-i,-1),pr("n2",t,e,ar,r,-i,-1),pr("n3",t,e,ar,-r,i,-1),pr("n4",t,e,ar,r,i,-1),pr("f1",t,e,ar,-r,-i,1),pr("f2",t,e,ar,r,-i,1),pr("f3",t,e,ar,-r,i,1),pr("f4",t,e,ar,r,i,1),pr("u1",t,e,ar,r*.7,i*1.1,-1),pr("u2",t,e,ar,-r*.7,i*1.1,-1),pr("u3",t,e,ar,0,i*2,-1),pr("cf1",t,e,ar,-r,0,1),pr("cf2",t,e,ar,r,0,1),pr("cf3",t,e,ar,0,-i,1),pr("cf4",t,e,ar,0,i,1),pr("cn1",t,e,ar,-r,0,-1),pr("cn2",t,e,ar,r,0,-1),pr("cn3",t,e,ar,0,-i,-1),pr("cn4",t,e,ar,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function pr(e,t,r,i,n,s,o){rm.set(n,s,o).unproject(i);let a=t[e];if(a!==void 0){let l=r.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],rm.x,rm.y,rm.z)}}var im=class extends Ff{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new at;n.setIndex(new ft(r,1)),n.setAttribute("position",new $e(i,3)),super(n,new Ha({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},fJ=class extends Ff{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new at;i.setAttribute("position",new $e(t,3)),i.setAttribute("color",new $e(r,3));let n=new Ha({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new st,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},pJ=class{constructor(){this.type="ShapePath",this.color=new st,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Bb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,s){return this.currentPath.bezierCurveTo(e,t,r,i,n,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(v){let y=[];for(let b=0,x=v.length;b<x;b++){let A=v[b],S=new El;S.curves=A.curves,y.push(S)}return y}function i(v,y){let b=y.length,x=!1;for(let A=b-1,S=0;S<b;A=S++){let _=y[A],w=y[S],M=w.x-_.x,C=w.y-_.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(_=y[S],M=-M,w=y[A],C=-C),v.y<_.y||v.y>w.y)continue;if(v.y===_.y){if(v.x===_.x)return!0}else{let E=C*(v.x-_.x)-M*(v.y-_.y);if(E===0)return!0;if(E<0)continue;x=!x}}else{if(v.y!==_.y)continue;if(w.x<=v.x&&v.x<=_.x||_.x<=v.x&&v.x<=w.x)return!0}}return x}let n=Eh.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return r(s);let o,a,l,c=[];if(s.length===1)return a=s[0],l=new El,l.curves=a.curves,c.push(l),c;let h=!n(s[0].getPoints());h=e?!h:h;let u=[],d=[],f=[],m=0,p;d[m]=void 0,f[m]=[];for(let v=0,y=s.length;v<y;v++)a=s[v],p=a.getPoints(),o=n(p),o=e?!o:o,o?(!h&&d[m]&&m++,d[m]={s:new El,p},d[m].s.curves=a.curves,h&&m++,f[m]=[]):f[m].push({h:a,p:p[0]});if(!d[0])return r(s);if(d.length>1){let v=!1,y=0;for(let b=0,x=d.length;b<x;b++)u[b]=[];for(let b=0,x=d.length;b<x;b++){let A=f[b];for(let S=0;S<A.length;S++){let _=A[S],w=!0;for(let M=0;M<d.length;M++)i(_.p,d[M].p)&&(b!==M&&y++,w?(w=!1,u[M].push(_)):v=!0);w&&u[b].push(_)}}y>0&&v===!1&&(f=u)}let g;for(let v=0,y=d.length;v<y;v++){l=d[v].s,c.push(l),g=f[v];for(let b=0,x=g.length;b<x;b++)l.holes.push(g[b].h)}return c}};mJ();function mJ(){let e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),i=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(i[l]=0,i[l|256]=32768,n[l]=24,n[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,n[l]=-c-1,n[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,n[l]=13,n[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,n[l]=24,n[l|256]=24):(i[l]=31744,i[l|256]=64512,n[l]=13,n[l|256]=13)}let s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;(c&8388608)===0;)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:t,uint32View:r,baseTable:i,shiftTable:n,mantissaTable:s,exponentTable:o,offsetTable:a}}var gJ=class extends br{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,r),this.samples=4}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kf);var Rd=".",j_=Symbol("target"),ZO=Symbol("unsubscribe");function Hb(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function vJ(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var xs=Array.isArray;function G_(e){return typeof e=="symbol"}var yJ={after:(e,t)=>xs(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>xs(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=Rd),G_(t)?e+t.toString():e+t):e,initial:e=>{if(xs(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(Rd);return t===-1?"":e.slice(0,t)},last:e=>{if(xs(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(Rd);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(xs(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(Rd);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(Rd,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},gn=yJ;function xJ(e){return typeof e=="object"&&typeof e.next=="function"}function bJ(e,t,r,i,n){let s=e.next;if(t.name==="entries")e.next=function(){let o=s.call(this);return o.done===!1&&(o.value[0]=n(o.value[0],t,o.value[0],i),o.value[1]=n(o.value[1],t,o.value[0],i)),o};else if(t.name==="values"){let o=r[j_].keys();e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,o.next().value,i)),a}}else e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,o.value,i)),o};return e}function mT(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&G_(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var wJ=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],s=n||e;this._pathCache.set(s,t);let o=this._proxyCache.get(s);return o===void 0&&(o=n===void 0?new Proxy(e,r):e,this._proxyCache.set(s,o)),o}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,gn.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function Vb(e){return toString.call(e)==="[object Object]"}function nm(){return!0}function Ec(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var JO=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),SJ=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),e4={push:nm,pop:nm,shift:nm,unshift:nm,copyWithin:Ec,reverse:Ec,sort:Ec,splice:Ec,flat:Ec,fill:Ec},_J=new Set([...JO,...SJ,...Object.keys(e4)]);function sm(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var t4=["keys","values","entries"],r4=new Set(["has","toString"]),i4={add:sm,clear:sm,delete:sm,forEach:sm},AJ=new Set([...r4,...Object.keys(i4),...t4]);function om(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var MJ=new Set([...r4,"get"]),n4={set:om,clear:om,delete:om,forEach:om},EJ=new Set([...MJ,...Object.keys(n4),...t4]),Ra=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return JO.has(e)}_shallowClone(e){let t=e;if(Vb(e))t={...e};else if(xs(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(xs(i)?this._onIsChanged=e4[t]:i instanceof Set?this._onIsChanged=i4[t]:i instanceof Map&&(this._onIsChanged=n4[t]),i):r}update(e,t,r){let i=gn.after(e,this._path);if(t!=="length"){let n=this.clone;gn.walk(i,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],gn.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},gT=class extends Ra{static isHandledMethod(e){return _J.has(e)}},CJ=class extends Ra{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},vT=class extends Ra{static isHandledMethod(e){return AJ.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},yT=class extends Ra{static isHandledMethod(e){return EJ.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},TJ=class extends Ra{constructor(e,t,r,i){super(void 0,t,r,i),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},PJ=class extends Ra{constructor(e,t,r,i){super(void 0,t,r,i),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Fc=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return Vb(e)||xs(e)||Hb(e)}static isHandledMethod(e,t){return Vb(e)?Ra.isHandledMethod(t):xs(e)?gT.isHandledMethod(t):e instanceof Set?vT.isHandledMethod(t):e instanceof Map?yT.isHandledMethod(t):Hb(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=Ra;xs(e)?i=gT:e instanceof Date?i=CJ:e instanceof Set?i=vT:e instanceof Map?i=yT:e instanceof WeakSet?i=TJ:e instanceof WeakMap&&(i=PJ),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=Fc.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},DJ={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Y_=(e,t,r={})=>{r={...DJ,...r};let i=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:o,details:a}=r,l=new wJ(n),c=typeof r.onValidate=="function",h=new Fc(c),u=(y,b,x,A,S)=>!c||h.isCloning||r.onValidate(gn.concat(l.getPath(y),b),x,A,S)===!0,d=(y,b,x,A)=>{!mT(l,r,b)&&!(o&&l.isDetached(y,e))&&f(l.getPath(y),b,x,A)},f=(y,b,x,A,S)=>{h.isCloning?h.update(y,b,A):t(gn.concat(y,b),x,A,S)},m=y=>y&&(y[i]||y),p=(y,b,x,A)=>vJ(y)||x==="constructor"||s&&!Fc.isHandledMethod(b,x)||mT(l,r,x)||l.isGetInvariant(b,x)||o&&l.isDetached(b,e)?y:(A===void 0&&(A=l.getPath(b)),l.getProxy(y,gn.concat(A,x),g,i)),g={get(y,b,x){if(G_(b)){if(b===i||b===j_)return y;if(b===ZO&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let A=Hb(y)?Reflect.get(y,b):Reflect.get(y,b,x);return p(A,y,b)},set(y,b,x,A){x=m(x);let S=y[i]||y,_=S[b];if(n(_,x)&&b in y)return!0;let w=u(y,b,x,_);return w&&l.setProperty(S,b,x,A,_)?(d(y,b,y[b],_),!0):!w},defineProperty(y,b,x){if(!l.isSameDescriptor(x,y,b)){let A=y[b];u(y,b,x.value,A)&&l.defineProperty(y,b,x,A)&&d(y,b,x.value,A)}return!0},deleteProperty(y,b){if(!Reflect.has(y,b))return!0;let x=Reflect.get(y,b),A=u(y,b,void 0,x);return A&&l.deleteProperty(y,b,x)?(d(y,b,void 0,x),!0):!A},apply(y,b,x){let A=b[i]||b;if(l.isUnsubscribed)return Reflect.apply(y,A,x);if((a===!1||a!==!0&&!a.includes(y.name))&&Fc.isHandledType(A)){let S=gn.initial(l.getPath(y)),_=Fc.isHandledMethod(A,y.name);h.start(A,S,x);let w=Reflect.apply(y,h.preferredThisArg(y,b,A),_?x.map(E=>m(E)):x),M=h.isChanged(A,n),C=h.stop();if(Fc.isHandledType(w)&&_&&(b instanceof Map&&y.name==="get"&&(S=gn.concat(S,x[0])),w=l.getProxy(w,S,g)),M){let E={name:y.name,args:x,result:w},$=h.isCloning?gn.initial(S):S,P=h.isCloning?gn.last(S):"";u(gn.get(e,$),P,A,C,E)?f($,P,A,C,E):h.undo(A)}return(b instanceof Map||b instanceof Set)&&xJ(w)?bJ(w,y,b,S,p):w}return Reflect.apply(y,b,x)}},v=l.getProxy(e,r.pathAsArray?[]:"",g);return t=t.bind(v),c&&(r.onValidate=r.onValidate.bind(v)),v};Y_.target=e=>e&&e[j_]||e;Y_.unsubscribe=e=>e[ZO]||e;var xT=Y_,LJ=typeof global=="object"&&global&&global.Object===Object&&global,s4=LJ,$J=typeof self=="object"&&self&&self.Object===Object&&self,IJ=s4||$J||Function("return this")(),rs=IJ,RJ=rs.Symbol,Os=RJ,o4=Object.prototype,kJ=o4.hasOwnProperty,OJ=o4.toString,kd=Os?Os.toStringTag:void 0;function BJ(e){var t=kJ.call(e,kd),r=e[kd];try{e[kd]=void 0;var i=!0}catch{}var n=OJ.call(e);return i&&(t?e[kd]=r:delete e[kd]),n}var zJ=BJ,NJ=Object.prototype,FJ=NJ.toString;function UJ(e){return FJ.call(e)}var HJ=UJ,VJ="[object Null]",WJ="[object Undefined]",bT=Os?Os.toStringTag:void 0;function jJ(e){return e==null?e===void 0?WJ:VJ:bT&&bT in Object(e)?zJ(e):HJ(e)}var Xl=jJ;function GJ(e){return e!=null&&typeof e=="object"}var Va=GJ,YJ="[object Symbol]";function KJ(e){return typeof e=="symbol"||Va(e)&&Xl(e)==YJ}var Jv=KJ;function XJ(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var a4=XJ,qJ=Array.isArray,Bs=qJ,QJ=1/0,wT=Os?Os.prototype:void 0,ST=wT?wT.toString:void 0;function l4(e){if(typeof e=="string")return e;if(Bs(e))return a4(e,l4)+"";if(Jv(e))return ST?ST.call(e):"";var t=e+"";return t=="0"&&1/e==-QJ?"-0":t}var ZJ=l4,JJ=/\s/;function eee(e){for(var t=e.length;t--&&JJ.test(e.charAt(t)););return t}var tee=eee,ree=/^\s+/;function iee(e){return e&&e.slice(0,tee(e)+1).replace(ree,"")}var nee=iee;function see(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var on=see,_T=0/0,oee=/^[-+]0x[0-9a-f]+$/i,aee=/^0b[01]+$/i,lee=/^0o[0-7]+$/i,cee=parseInt;function uee(e){if(typeof e=="number")return e;if(Jv(e))return _T;if(on(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=on(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=nee(e);var r=aee.test(e);return r||lee.test(e)?cee(e.slice(2),r?2:8):oee.test(e)?_T:+e}var AT=uee;function dee(e){return e}var c4=dee,hee="[object AsyncFunction]",fee="[object Function]",pee="[object GeneratorFunction]",mee="[object Proxy]";function gee(e){if(!on(e))return!1;var t=Xl(e);return t==fee||t==pee||t==hee||t==mee}var K_=gee,vee=rs["__core-js_shared__"],Xy=vee,MT=function(){var e=/[^.]+$/.exec(Xy&&Xy.keys&&Xy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function yee(e){return!!MT&&MT in e}var xee=yee,bee=Function.prototype,wee=bee.toString;function See(e){if(e!=null){try{return wee.call(e)}catch{}try{return e+""}catch{}}return""}var ql=See,_ee=/[\\^$.*+?()[\]{}|]/g,Aee=/^\[object .+?Constructor\]$/,Mee=Function.prototype,Eee=Object.prototype,Cee=Mee.toString,Tee=Eee.hasOwnProperty,Pee=RegExp("^"+Cee.call(Tee).replace(_ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dee(e){if(!on(e)||xee(e))return!1;var t=K_(e)?Pee:Aee;return t.test(ql(e))}var Lee=Dee;function $ee(e,t){return e==null?void 0:e[t]}var Iee=$ee;function Ree(e,t){var r=Iee(e,t);return Lee(r)?r:void 0}var Ql=Ree,kee=Ql(rs,"WeakMap"),Wb=kee,ET=Object.create,Oee=function(){function e(){}return function(t){if(!on(t))return{};if(ET)return ET(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Bee=Oee;function zee(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Nee=zee;function Fee(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var u4=Fee,Uee=800,Hee=16,Vee=Date.now;function Wee(e){var t=0,r=0;return function(){var i=Vee(),n=Hee-(i-r);if(r=i,n>0){if(++t>=Uee)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var jee=Wee;function Gee(e){return function(){return e}}var Yee=Gee,Kee=function(){try{var e=Ql(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Yg=Kee,Xee=Yg?function(e,t){return Yg(e,"toString",{configurable:!0,enumerable:!1,value:Yee(t),writable:!0})}:c4,qee=Xee,Qee=jee(qee),d4=Qee;function Zee(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var Jee=Zee,ete=9007199254740991,tte=/^(?:0|[1-9]\d*)$/;function rte(e,t){var r=typeof e;return t=t!=null?t:ete,!!t&&(r=="number"||r!="symbol"&&tte.test(e))&&e>-1&&e%1==0&&e<t}var e0=rte;function ite(e,t,r){t=="__proto__"&&Yg?Yg(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var X_=ite;function nte(e,t){return e===t||e!==e&&t!==t}var t0=nte,ste=Object.prototype,ote=ste.hasOwnProperty;function ate(e,t,r){var i=e[t];(!(ote.call(e,t)&&t0(i,r))||r===void 0&&!(t in e))&&X_(e,t,r)}var q_=ate;function lte(e,t,r,i){var n=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(r[a],e[a],a,r,e):void 0;l===void 0&&(l=e[a]),n?X_(r,a,l):q_(r,a,l)}return r}var sd=lte,CT=Math.max;function cte(e,t,r){return t=CT(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=CT(i.length-t,0),o=Array(s);++n<s;)o[n]=i[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=i[n];return a[t]=r(o),Nee(e,this,a)}}var h4=cte;function ute(e,t){return d4(h4(e,t,c4),e+"")}var dte=ute,hte=9007199254740991;function fte(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hte}var Q_=fte;function pte(e){return e!=null&&Q_(e.length)&&!K_(e)}var r0=pte;function mte(e,t,r){if(!on(r))return!1;var i=typeof t;return(i=="number"?r0(r)&&e0(t,r.length):i=="string"&&t in r)?t0(r[t],e):!1}var gte=mte;function vte(e){return dte(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,o&&gte(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var a=r[i];a&&e(t,a,i,s)}return t})}var yte=vte,xte=Object.prototype;function bte(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||xte;return e===r}var Z_=bte;function wte(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Ste=wte,_te="[object Arguments]";function Ate(e){return Va(e)&&Xl(e)==_te}var TT=Ate,f4=Object.prototype,Mte=f4.hasOwnProperty,Ete=f4.propertyIsEnumerable,Cte=TT(function(){return arguments}())?TT:function(e){return Va(e)&&Mte.call(e,"callee")&&!Ete.call(e,"callee")},uf=Cte;function Tte(){return!1}var Pte=Tte,p4=typeof tn=="object"&&tn&&!tn.nodeType&&tn,PT=p4&&typeof rn=="object"&&rn&&!rn.nodeType&&rn,Dte=PT&&PT.exports===p4,DT=Dte?rs.Buffer:void 0,Lte=DT?DT.isBuffer:void 0,$te=Lte||Pte,J_=$te,Ite="[object Arguments]",Rte="[object Array]",kte="[object Boolean]",Ote="[object Date]",Bte="[object Error]",zte="[object Function]",Nte="[object Map]",Fte="[object Number]",Ute="[object Object]",Hte="[object RegExp]",Vte="[object Set]",Wte="[object String]",jte="[object WeakMap]",Gte="[object ArrayBuffer]",Yte="[object DataView]",Kte="[object Float32Array]",Xte="[object Float64Array]",qte="[object Int8Array]",Qte="[object Int16Array]",Zte="[object Int32Array]",Jte="[object Uint8Array]",ere="[object Uint8ClampedArray]",tre="[object Uint16Array]",rre="[object Uint32Array]",jt={};jt[Kte]=jt[Xte]=jt[qte]=jt[Qte]=jt[Zte]=jt[Jte]=jt[ere]=jt[tre]=jt[rre]=!0;jt[Ite]=jt[Rte]=jt[Gte]=jt[kte]=jt[Yte]=jt[Ote]=jt[Bte]=jt[zte]=jt[Nte]=jt[Fte]=jt[Ute]=jt[Hte]=jt[Vte]=jt[Wte]=jt[jte]=!1;function ire(e){return Va(e)&&Q_(e.length)&&!!jt[Xl(e)]}var nre=ire;function sre(e){return function(t){return e(t)}}var e2=sre,m4=typeof tn=="object"&&tn&&!tn.nodeType&&tn,Ch=m4&&typeof rn=="object"&&rn&&!rn.nodeType&&rn,ore=Ch&&Ch.exports===m4,qy=ore&&s4.process,are=function(){try{var e=Ch&&Ch.require&&Ch.require("util").types;return e||qy&&qy.binding&&qy.binding("util")}catch{}}(),Vu=are,LT=Vu&&Vu.isTypedArray,lre=LT?e2(LT):nre,g4=lre,cre=Object.prototype,ure=cre.hasOwnProperty;function dre(e,t){var r=Bs(e),i=!r&&uf(e),n=!r&&!i&&J_(e),s=!r&&!i&&!n&&g4(e),o=r||i||n||s,a=o?Ste(e.length,String):[],l=a.length;for(var c in e)(t||ure.call(e,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||e0(c,l)))&&a.push(c);return a}var v4=dre;function hre(e,t){return function(r){return e(t(r))}}var y4=hre,fre=y4(Object.keys,Object),pre=fre,mre=Object.prototype,gre=mre.hasOwnProperty;function vre(e){if(!Z_(e))return pre(e);var t=[];for(var r in Object(e))gre.call(e,r)&&r!="constructor"&&t.push(r);return t}var yre=vre;function xre(e){return r0(e)?v4(e):yre(e)}var t2=xre;function bre(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var wre=bre,Sre=Object.prototype,_re=Sre.hasOwnProperty;function Are(e){if(!on(e))return wre(e);var t=Z_(e),r=[];for(var i in e)i=="constructor"&&(t||!_re.call(e,i))||r.push(i);return r}var Mre=Are;function Ere(e){return r0(e)?v4(e,!0):Mre(e)}var Uf=Ere,Cre=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tre=/^\w*$/;function Pre(e,t){if(Bs(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Jv(e)?!0:Tre.test(e)||!Cre.test(e)||t!=null&&e in Object(t)}var Dre=Pre,Lre=Ql(Object,"create"),df=Lre;function $re(){this.__data__=df?df(null):{},this.size=0}var Ire=$re;function Rre(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var kre=Rre,Ore="__lodash_hash_undefined__",Bre=Object.prototype,zre=Bre.hasOwnProperty;function Nre(e){var t=this.__data__;if(df){var r=t[e];return r===Ore?void 0:r}return zre.call(t,e)?t[e]:void 0}var Fre=Nre,Ure=Object.prototype,Hre=Ure.hasOwnProperty;function Vre(e){var t=this.__data__;return df?t[e]!==void 0:Hre.call(t,e)}var Wre=Vre,jre="__lodash_hash_undefined__";function Gre(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=df&&t===void 0?jre:t,this}var Yre=Gre;function od(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}od.prototype.clear=Ire;od.prototype.delete=kre;od.prototype.get=Fre;od.prototype.has=Wre;od.prototype.set=Yre;var $T=od;function Kre(){this.__data__=[],this.size=0}var Xre=Kre;function qre(e,t){for(var r=e.length;r--;)if(t0(e[r][0],t))return r;return-1}var i0=qre,Qre=Array.prototype,Zre=Qre.splice;function Jre(e){var t=this.__data__,r=i0(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():Zre.call(t,r,1),--this.size,!0}var eie=Jre;function tie(e){var t=this.__data__,r=i0(t,e);return r<0?void 0:t[r][1]}var rie=tie;function iie(e){return i0(this.__data__,e)>-1}var nie=iie;function sie(e,t){var r=this.__data__,i=i0(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var oie=sie;function ad(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ad.prototype.clear=Xre;ad.prototype.delete=eie;ad.prototype.get=rie;ad.prototype.has=nie;ad.prototype.set=oie;var n0=ad,aie=Ql(rs,"Map"),hf=aie;function lie(){this.size=0,this.__data__={hash:new $T,map:new(hf||n0),string:new $T}}var cie=lie;function uie(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var die=uie;function hie(e,t){var r=e.__data__;return die(t)?r[typeof t=="string"?"string":"hash"]:r.map}var s0=hie;function fie(e){var t=s0(this,e).delete(e);return this.size-=t?1:0,t}var pie=fie;function mie(e){return s0(this,e).get(e)}var gie=mie;function vie(e){return s0(this,e).has(e)}var yie=vie;function xie(e,t){var r=s0(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var bie=xie;function ld(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ld.prototype.clear=cie;ld.prototype.delete=pie;ld.prototype.get=gie;ld.prototype.has=yie;ld.prototype.set=bie;var r2=ld,wie="Expected a function";function i2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(wie);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var o=e.apply(this,i);return r.cache=s.set(n,o)||s,o};return r.cache=new(i2.Cache||r2),r}i2.Cache=r2;var Sie=i2,_ie=500;function Aie(e){var t=Sie(e,function(i){return r.size===_ie&&r.clear(),i}),r=t.cache;return t}var Mie=Aie,Eie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cie=/\\(\\)?/g,Tie=Mie(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Eie,function(r,i,n,s){t.push(n?s.replace(Cie,"$1"):i||r)}),t}),Pie=Tie;function Die(e){return e==null?"":ZJ(e)}var Lie=Die;function $ie(e,t){return Bs(e)?e:Dre(e,t)?[e]:Pie(Lie(e))}var cd=$ie,Iie=1/0;function Rie(e){if(typeof e=="string"||Jv(e))return e;var t=e+"";return t=="0"&&1/e==-Iie?"-0":t}var o0=Rie;function kie(e,t){t=cd(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[o0(t[r++])];return r&&r==i?e:void 0}var x4=kie;function Oie(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var n2=Oie,IT=Os?Os.isConcatSpreadable:void 0;function Bie(e){return Bs(e)||uf(e)||!!(IT&&e&&e[IT])}var zie=Bie;function b4(e,t,r,i,n){var s=-1,o=e.length;for(r||(r=zie),n||(n=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?b4(a,t-1,r,i,n):n2(n,a):i||(n[n.length]=a)}return n}var Nie=b4;function Fie(e){var t=e==null?0:e.length;return t?Nie(e,1):[]}var Uie=Fie;function Hie(e){return d4(h4(e,void 0,Uie),e+"")}var w4=Hie,Vie=y4(Object.getPrototypeOf,Object),s2=Vie,Wie="[object Object]",jie=Function.prototype,Gie=Object.prototype,S4=jie.toString,Yie=Gie.hasOwnProperty,Kie=S4.call(Object);function Xie(e){if(!Va(e)||Xl(e)!=Wie)return!1;var t=s2(e);if(t===null)return!0;var r=Yie.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&S4.call(r)==Kie}var _4=Xie;function qie(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}var Qie=qie;function Zie(){this.__data__=new n0,this.size=0}var Jie=Zie;function ene(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var tne=ene;function rne(e){return this.__data__.get(e)}var ine=rne;function nne(e){return this.__data__.has(e)}var sne=nne,one=200;function ane(e,t){var r=this.__data__;if(r instanceof n0){var i=r.__data__;if(!hf||i.length<one-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new r2(i)}return r.set(e,t),this.size=r.size,this}var lne=ane;function ud(e){var t=this.__data__=new n0(e);this.size=t.size}ud.prototype.clear=Jie;ud.prototype.delete=tne;ud.prototype.get=ine;ud.prototype.has=sne;ud.prototype.set=lne;var A4=ud;function cne(e,t){return e&&sd(t,t2(t),e)}var une=cne;function dne(e,t){return e&&sd(t,Uf(t),e)}var hne=dne,M4=typeof tn=="object"&&tn&&!tn.nodeType&&tn,RT=M4&&typeof rn=="object"&&rn&&!rn.nodeType&&rn,fne=RT&&RT.exports===M4,kT=fne?rs.Buffer:void 0,OT=kT?kT.allocUnsafe:void 0;function pne(e,t){if(t)return e.slice();var r=e.length,i=OT?OT(r):new e.constructor(r);return e.copy(i),i}var E4=pne;function mne(e,t){for(var r=-1,i=e==null?0:e.length,n=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[n++]=o)}return s}var gne=mne;function vne(){return[]}var C4=vne,yne=Object.prototype,xne=yne.propertyIsEnumerable,BT=Object.getOwnPropertySymbols,bne=BT?function(e){return e==null?[]:(e=Object(e),gne(BT(e),function(t){return xne.call(e,t)}))}:C4,o2=bne;function wne(e,t){return sd(e,o2(e),t)}var Sne=wne,_ne=Object.getOwnPropertySymbols,Ane=_ne?function(e){for(var t=[];e;)n2(t,o2(e)),e=s2(e);return t}:C4,T4=Ane;function Mne(e,t){return sd(e,T4(e),t)}var Ene=Mne;function Cne(e,t,r){var i=t(e);return Bs(e)?i:n2(i,r(e))}var P4=Cne;function Tne(e){return P4(e,t2,o2)}var Pne=Tne;function Dne(e){return P4(e,Uf,T4)}var D4=Dne,Lne=Ql(rs,"DataView"),jb=Lne,$ne=Ql(rs,"Promise"),Gb=$ne,Ine=Ql(rs,"Set"),Yb=Ine,zT="[object Map]",Rne="[object Object]",NT="[object Promise]",FT="[object Set]",UT="[object WeakMap]",HT="[object DataView]",kne=ql(jb),One=ql(hf),Bne=ql(Gb),zne=ql(Yb),Nne=ql(Wb),rl=Xl;(jb&&rl(new jb(new ArrayBuffer(1)))!=HT||hf&&rl(new hf)!=zT||Gb&&rl(Gb.resolve())!=NT||Yb&&rl(new Yb)!=FT||Wb&&rl(new Wb)!=UT)&&(rl=function(e){var t=Xl(e),r=t==Rne?e.constructor:void 0,i=r?ql(r):"";if(i)switch(i){case kne:return HT;case One:return zT;case Bne:return NT;case zne:return FT;case Nne:return UT}return t});var a2=rl,Fne=Object.prototype,Une=Fne.hasOwnProperty;function Hne(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Une.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Vne=Hne,Wne=rs.Uint8Array,VT=Wne;function jne(e){var t=new e.constructor(e.byteLength);return new VT(t).set(new VT(e)),t}var l2=jne;function Gne(e,t){var r=t?l2(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Yne=Gne,Kne=/\w*$/;function Xne(e){var t=new e.constructor(e.source,Kne.exec(e));return t.lastIndex=e.lastIndex,t}var qne=Xne,WT=Os?Os.prototype:void 0,jT=WT?WT.valueOf:void 0;function Qne(e){return jT?Object(jT.call(e)):{}}var Zne=Qne;function Jne(e,t){var r=t?l2(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var L4=Jne,ese="[object Boolean]",tse="[object Date]",rse="[object Map]",ise="[object Number]",nse="[object RegExp]",sse="[object Set]",ose="[object String]",ase="[object Symbol]",lse="[object ArrayBuffer]",cse="[object DataView]",use="[object Float32Array]",dse="[object Float64Array]",hse="[object Int8Array]",fse="[object Int16Array]",pse="[object Int32Array]",mse="[object Uint8Array]",gse="[object Uint8ClampedArray]",vse="[object Uint16Array]",yse="[object Uint32Array]";function xse(e,t,r){var i=e.constructor;switch(t){case lse:return l2(e);case ese:case tse:return new i(+e);case cse:return Yne(e,r);case use:case dse:case hse:case fse:case pse:case mse:case gse:case vse:case yse:return L4(e,r);case rse:return new i;case ise:case ose:return new i(e);case nse:return qne(e);case sse:return new i;case ase:return Zne(e)}}var bse=xse;function wse(e){return typeof e.constructor=="function"&&!Z_(e)?Bee(s2(e)):{}}var $4=wse,Sse="[object Map]";function _se(e){return Va(e)&&a2(e)==Sse}var Ase=_se,GT=Vu&&Vu.isMap,Mse=GT?e2(GT):Ase,Ese=Mse,Cse="[object Set]";function Tse(e){return Va(e)&&a2(e)==Cse}var Pse=Tse,YT=Vu&&Vu.isSet,Dse=YT?e2(YT):Pse,Lse=Dse,$se=1,Ise=2,Rse=4,I4="[object Arguments]",kse="[object Array]",Ose="[object Boolean]",Bse="[object Date]",zse="[object Error]",R4="[object Function]",Nse="[object GeneratorFunction]",Fse="[object Map]",Use="[object Number]",k4="[object Object]",Hse="[object RegExp]",Vse="[object Set]",Wse="[object String]",jse="[object Symbol]",Gse="[object WeakMap]",Yse="[object ArrayBuffer]",Kse="[object DataView]",Xse="[object Float32Array]",qse="[object Float64Array]",Qse="[object Int8Array]",Zse="[object Int16Array]",Jse="[object Int32Array]",eoe="[object Uint8Array]",toe="[object Uint8ClampedArray]",roe="[object Uint16Array]",ioe="[object Uint32Array]",Ht={};Ht[I4]=Ht[kse]=Ht[Yse]=Ht[Kse]=Ht[Ose]=Ht[Bse]=Ht[Xse]=Ht[qse]=Ht[Qse]=Ht[Zse]=Ht[Jse]=Ht[Fse]=Ht[Use]=Ht[k4]=Ht[Hse]=Ht[Vse]=Ht[Wse]=Ht[jse]=Ht[eoe]=Ht[toe]=Ht[roe]=Ht[ioe]=!0;Ht[zse]=Ht[R4]=Ht[Gse]=!1;function Qm(e,t,r,i,n,s){var o,a=t&$se,l=t&Ise,c=t&Rse;if(r&&(o=n?r(e,i,n,s):r(e)),o!==void 0)return o;if(!on(e))return e;var h=Bs(e);if(h){if(o=Vne(e),!a)return u4(e,o)}else{var u=a2(e),d=u==R4||u==Nse;if(J_(e))return E4(e,a);if(u==k4||u==I4||d&&!n){if(o=l||d?{}:$4(e),!a)return l?Ene(e,hne(o,e)):Sne(e,une(o,e))}else{if(!Ht[u])return n?e:{};o=bse(e,u,a)}}s||(s=new A4);var f=s.get(e);if(f)return f;s.set(e,o),Lse(e)?e.forEach(function(g){o.add(Qm(g,t,r,g,e,s))}):Ese(e)&&e.forEach(function(g,v){o.set(v,Qm(g,t,r,v,e,s))});var m=c?l?D4:Pne:l?Uf:t2,p=h?void 0:m(e);return Jee(p||e,function(g,v){p&&(v=g,g=e[v]),q_(o,v,Qm(g,t,r,v,e,s))}),o}var O4=Qm,noe=1,soe=4;function ooe(e){return O4(e,noe|soe)}var B4=ooe;function aoe(e,t){return e!=null&&t in Object(e)}var loe=aoe;function coe(e,t,r){t=cd(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var o=o0(t[i]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++i!=n?s:(n=e==null?0:e.length,!!n&&Q_(n)&&e0(o,n)&&(Bs(e)||uf(e)))}var uoe=coe;function doe(e,t){return e!=null&&uoe(e,t,loe)}var hoe=doe;function foe(e){return function(t,r,i){for(var n=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[e?a:++n];if(r(s[l],l,s)===!1)break}return t}}var poe=foe,moe=poe(),goe=moe,voe=function(){return rs.Date.now()},Qy=voe,yoe="Expected a function",xoe=Math.max,boe=Math.min;function woe(e,t,r){var i,n,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(yoe);t=AT(t)||0,on(r)&&(h=!!r.leading,u="maxWait"in r,s=u?xoe(AT(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d);function f(S){var _=i,w=n;return i=n=void 0,c=S,o=e.apply(w,_),o}function m(S){return c=S,a=setTimeout(v,t),h?f(S):o}function p(S){var _=S-l,w=S-c,M=t-_;return u?boe(M,s-w):M}function g(S){var _=S-l,w=S-c;return l===void 0||_>=t||_<0||u&&w>=s}function v(){var S=Qy();if(g(S))return y(S);a=setTimeout(v,p(S))}function y(S){return a=void 0,d&&i?f(S):(i=n=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,i=l=n=a=void 0}function x(){return a===void 0?o:y(Qy())}function A(){var S=Qy(),_=g(S);if(i=arguments,n=this,l=S,_){if(a===void 0)return m(l);if(u)return clearTimeout(a),a=setTimeout(v,t),f(l)}return a===void 0&&(a=setTimeout(v,t)),o}return A.cancel=b,A.flush=x,A}var z4=woe;function Soe(e,t,r){(r!==void 0&&!t0(e[t],r)||r===void 0&&!(t in e))&&X_(e,t,r)}var Kb=Soe;function _oe(e){return Va(e)&&r0(e)}var Aoe=_oe;function Moe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Xb=Moe;function Eoe(e){return sd(e,Uf(e))}var Coe=Eoe;function Toe(e,t,r,i,n,s,o){var a=Xb(e,r),l=Xb(t,r),c=o.get(l);if(c){Kb(e,r,c);return}var h=s?s(a,l,r+"",e,t,o):void 0,u=h===void 0;if(u){var d=Bs(l),f=!d&&J_(l),m=!d&&!f&&g4(l);h=l,d||f||m?Bs(a)?h=a:Aoe(a)?h=u4(a):f?(u=!1,h=E4(l,!0)):m?(u=!1,h=L4(l,!0)):h=[]:_4(l)||uf(l)?(h=a,uf(a)?h=Coe(a):(!on(a)||K_(a))&&(h=$4(l))):u=!1}u&&(o.set(l,h),n(h,l,i,s,o),o.delete(l)),Kb(e,r,h)}var Poe=Toe;function N4(e,t,r,i,n){e!==t&&goe(t,function(s,o){if(n||(n=new A4),on(s))Poe(e,t,o,r,N4,i,n);else{var a=i?i(Xb(e,o),s,o+"",e,t,n):void 0;a===void 0&&(a=s),Kb(e,o,a)}},Uf)}var Doe=N4;function Loe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var $oe=Loe;function Ioe(e,t){return t.length<2?e:x4(e,Qie(t,0,-1))}var Roe=Ioe,koe=yte(function(e,t,r){Doe(e,t,r)}),Kg=koe;function Ooe(e,t){return t=cd(t,e),e=Roe(e,t),e==null||delete e[o0($oe(t))]}var Boe=Ooe;function zoe(e){return _4(e)?void 0:e}var Noe=zoe,Foe=1,Uoe=2,Hoe=4,Voe=w4(function(e,t){var r={};if(e==null)return r;var i=!1;t=a4(t,function(s){return s=cd(s,e),i||(i=s.length>1),s}),sd(e,D4(e),r),i&&(r=O4(r,Foe|Uoe|Hoe,Noe));for(var n=t.length;n--;)Boe(r,t[n]);return r}),qb=Voe;function Woe(e,t,r,i){if(!on(e))return e;t=cd(t,e);for(var n=-1,s=t.length,o=s-1,a=e;a!=null&&++n<s;){var l=o0(t[n]),c=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=o){var h=a[l];c=i?i(h,l,a):void 0,c===void 0&&(c=on(h)?h:e0(t[n+1])?[]:{})}q_(a,l,c),a=a[l]}return e}var joe=Woe;function Goe(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var o=t[i],a=x4(e,o);r(a,o)&&joe(s,cd(o,e),a)}return s}var Yoe=Goe;function Koe(e,t){return Yoe(e,t,function(r,i){return hoe(e,i)})}var Xoe=Koe,qoe=w4(function(e,t){return e==null?{}:Xoe(e,t)}),Qoe=qoe;function F4(e,t){return Object.setPrototypeOf(e,t),e}var Zoe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),Joe=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),eae=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||a0&&"ontouchend"in document,tae=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,rae=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,iae=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},nae=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]};Zoe();var a0=Joe(),Qb=eae(),sae=tae(),Wr=rae(),Xg=iae(),qg=Number(nae());function oae(e){return Array.isArray(e)?e:[e]}function am(e){return a0?e.metaKey:e.ctrlKey}var wt=[],Qg={},ih={},Zm={};function U4(e){wt.includes(e)||wt.push(e)}function Eu(e){delete Qg[e.pointerId];for(let t=0;t<wt.length;t++)if(wt[t].pointerId===e.pointerId){wt.splice(t,1);break}}function Zg(e){if(e.pointerType!=="touch")return;let t=Qg[e.pointerId];t===void 0&&(t={x:0,y:0},Qg[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function Zy(e){let t=e.pointerId===wt[0].pointerId?wt[1]:wt[0];return Qg[t.pointerId]}function H4(e){ih[e.key]=!0,Zm[e.key]=Zm[e.key]===void 0?1:Zm[e.key]+1}function V4(e){if(a0&&ih.Meta)for(let t in ih)ih[t]=!1;else ih[e.key]=!1;Zm={}}function aae(e){e.addEventListener("pointerdown",U4,!0),e.addEventListener("pointerdown",Zg,!0),e.addEventListener("pointermove",Zg,!0),e.addEventListener("pointerup",Eu,!0),e.addEventListener("pointercancel",Eu,!0),e.addEventListener("pointerleave",Eu,!0),window.addEventListener("keydown",H4,!0),window.addEventListener("keyup",V4,!0)}function lae(e){e.removeEventListener("pointerdown",U4,!0),e.removeEventListener("pointerdown",Zg,!0),e.removeEventListener("pointermove",Zg,!0),e.removeEventListener("pointerup",Eu,!0),e.removeEventListener("pointercancel",Eu,!0),e.removeEventListener("pointerleave",Eu,!0),window.removeEventListener("keydown",H4,!0),window.removeEventListener("keyup",V4,!0)}var Wu;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Wu||(Wu={}));var ff;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(ff||(ff={}));var da;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]}e.isEqual=t;function r(i,n,s){return[i[0]+(n[0]-i[0])*s,i[1]+(n[1]-i[1])*s]}e.lerp=r})(da||(da={}));var pi;(e=>{function t(s,o){return s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]}e.isEqual=t;function r(s,o){return[s[0]+o[0],s[1]+o[1],s[2]+o[2]]}e.add=r;function i(s,o){return[s[0]-o[0],s[1]-o[1],s[2]-o[2]]}e.sub=i;function n(s,o,a){return[s[0]+(o[0]-s[0])*a,s[1]+(o[1]-s[1])*a,s[2]+(o[2]-s[2])*a]}e.lerp=n})(pi||(pi={}));var Jg;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,s){return[i[0]+(n[0]-i[0])*s,i[1]+(n[1]-i[1])*s,i[2]+(n[2]-i[2])*s,i[3]+(n[3]-i[3])*s]}e.lerp=r})(Jg||(Jg={}));var Vl;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,s){for(let o=0;o<16;o++)if(n[o]!==s[o])return!1;return!0}e.isEqual=t;function r(n){return n!=null?n:e.identity}e.simplify=r;function i(n,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=n[3]*s[a]+n[7]*s[a+1]+n[11]*s[a+2]+n[15];o[a]=(n[0]*s[a]+n[4]*s[a+1]+n[8]*s[a+2]+n[12])/c,o[a+1]=(n[1]*s[a]+n[5]*s[a+1]+n[9]*s[a+2]+n[13])/c,o[a+2]=(n[2]*s[a]+n[6]*s[a+1]+n[10]*s[a+2]+n[14])/c}return o}e.applyMatrix4=i})(Vl||(Vl={}));var di;(e=>{e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function t(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:1}}e.toRgb255a1=t;function r(o){return{r:o.r,g:o.g,b:o.b}}e.clone=r;function i(o){return o=Math.floor(o),{r:(o>>16&255)/255,g:(o>>8&255)/255,b:(o&255)/255}}e.fromHex=i;function n(o,a){return o.r===a.r&&o.g===a.g&&o.b===a.b}e.equals=n;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l}}e.lerp=s})(di||(di={}));var Cn;(e=>{e.white={...di.white,a:1},e.transparent={...di.white,a:0};function t(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}e.from0to1=t;function r(o,a){return{...di.fromHex(o),a}}e.fromHexAndA=r;function i(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}e.toRgb255a1=i;function n(o,a){return di.equals(o,a)&&o.a===a.a}e.equals=n;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}e.lerp=s})(Cn||(Cn={}));var Zb;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(Zb||(Zb={}));var Jb;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(Jb||(Jb={}));var ew;(e=>e.defaultData={control1:[.5,.05],control2:[.1,.3]})(ew||(ew={}));var tw;(e=>{function t(r,i=.1){return{type:"radial",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[1,1,1],rotation:[0,0,0],position:[r[0]+r[0]*i,0,0]},grid:{count:[2,2,2],size:r.map(n=>n*(1+i)),useCenter:!0}}}e.defaultData=t})(tw||(tw={}));var Ji=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,Ji.prototype),i}}add(e,t){var r,i;return(i=(r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)!=null?i:this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:s}=e,o={...t,[n]:s};return Object.setPrototypeOf(o,Ji.prototype),{data:o,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,Ji.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}throw new Error("illegal arg")}};function c2(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&c2(i)}return Object.freeze(e)}function cae(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var uae=class extends Error{};function ha(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let i=[],n=1/(r+1);for(let s=0;s<r;s++){let o=e+(t-e)*(s+.75+Math.random()*.5)*n;i.push(o)}return i}function ev(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function dae(){return typeof process<"u"}function W4(e,t){for(let r of e)t(r.id,r.data),W4(r.children,t)}function j4(e,t){t(e.id,e.data);for(let r of e.children)j4(r,t)}var Wl=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Wl.prototype)}deepFreeze(){let e=0;for(;e<this.length;)c2(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&j4(r,t)}}traverse(e){W4(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(o=>o.id===e);if(n<0)throw new Error("not expected");let s=i[n];return i=[...i],i[n]={...s,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let s=i,o=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let a=i.findIndex(l=>l.id===o);if(a<0)throw new Error;i=[...i],i[a]={...i[a],children:s}}Object.setPrototypeOf(i,Wl.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let o=t,a=this.childrenArray(o),l={fi:r,id:i,data:n,children:s};return a=[...a,l],a.sort((c,h)=>c.fi-h.fi),e.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(o=>o.id===t);e.localIndex=n,i=[...i];let s=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...s,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let u=t;for(;u!==null;){if(u===void 0)throw new Error;if(u===i)throw new uae("cyclic tree");u=this.parent(u)}}let n=this.parent(i);if(n===void 0)return null;let s=n,o=this.childrenArray(n),a=o.findIndex(u=>u.id===i);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(n,o);n=t,o=c.childrenArray(n);let h=l.fi;return l={...l,fi:r},o=[...o,l],o.sort((u,d)=>u.fi-d.fi),e.localIndex=o.indexOf(l),c=c.modifyArrayBy(n,o),{data:c,actual:e,reverse:{type:9,parent:s,fi:h,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>cae(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return ha(0,r,r);{let n=i[0].fi;return ha(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=i.find(o=>o.fi>n.fi);if(s===void 0){let o=i[i.length-1].fi;return ha(o,o+r,r)}else return ha(n.fi,s.fi,r)}}},rw;(e=>{function t(r,i){if(Array.isArray(r)){let n=i.props,s={},o=[...r],a=!1;if(n)for(let l of Object.keys(n)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=n[l],a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}else{let n=i.props,s={},o={...r},a=!1;if(n)for(let l of Object.keys(n)){s[l]=o[l];let c=n[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}}e.runOp=t})(rw||(rw={}));var Ei=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ei.prototype)}deepFreeze(){let e=0;for(;e<this.length;)c2(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(s=>s.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,Ei.prototype);let t=e;return dae()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}}addOp(e){let{fi:t,id:r,data:i}=e,n=this,s={fi:t,id:r,data:i};return n=[...n,s],n.sort((o,a)=>o.fi-a.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(s=>s.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(a=>a.id===r);if(n===-1)return null;let s=i[n].fi,o={...i[n],fi:t};return i[n]=o,i.sort((a,l)=>a.fi-l.fi),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:s,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return ha(0,t,t);{let i=r[0].fi;return ha(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(s=>s.fi>i.fi);if(n===void 0){let s=r[r.length-1].fi;return ha(s,s+t,t)}else return ha(i.fi,n.fi,t)}}},tv=class{unusedFun(e){}runOp(e){let t=[],r=this,i=0,n={};for(;i<e.path.length;)t.push(r),r=r===void 0?void 0:r[e.path[i]],i+=1;r={...r};for(let[a,l]of Object.entries(e.props)){let c=r[a];n[a]=c,l===void 0?delete r[a]:r[a]=l}for(;i>0;)Object.keys(r).length===0?(r={...t[i-1]},delete r[e.path[i-1]]):r={...t[i-1],[e.path[i-1]]:r},i-=1;let s=Object.setPrototypeOf(r,tv.prototype),o={...e,props:n};return{data:s,actual:e,reverse:o}}},KT;(e=>{function t(i,n){var s;return(s=pf(i,n))!=null?s:i}e.apply=t;function r(i,n){if(n.type===0){let s=mf.zoom(i,n.path);if(s===void 0)return n;if(typeof s=="string"||typeof s=="number"||ev(s))return;if(s&&typeof s=="object"){let o={...n.props};for(let a of Object.keys(s))delete o[a];return{...n,props:o}}else return}else if(n.type===1||n.type===4||n.type===7){let s=mf.zoom(i,[...n.path,n.id]);if(s===void 0)return n;if(typeof s=="string"||typeof s=="number"||ev(s))return;if(s&&typeof s=="object"){let o={...n.data,...s};return{...n,data:o}}else return}else return n}e.filterOp=r})(KT||(KT={}));function G4(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let s=n.id,o=pf(n.data,t[s]);r=r||o!==void 0,o===void 0&&(o=n.data);let a=G4(n.children,t);return a!==void 0?r=!0:a=n.children,{...n,id:s,data:o,children:a}});if(r)return i}function hae(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let s=n.id,o=pf(n.data,t[s]);return r=r||o!==void 0,o===void 0&&(o=n.data),{...n,id:s,data:o}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function pf(e,t){if(t!==void 0)if(e instanceof Wl){let r=G4(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof Ei)return hae(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,s)=>{let o=pf(n,t[s]);return r=r||o!==void 0,o===void 0&&(o=n),o});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(e&&typeof e=="object"){let r={},i=!1;for(let[n,s]of Object.entries(e)){let o=pf(s,t[n]);i=i||o!==void 0,o===void 0&&(o=s),r[n]=o}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else return t!=null?t:e}}var Y4=Symbol(),Hf=Symbol(),Vf=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof X4);){let s=i._path,o=i._current;if(s!==""&&n.splice(0,0,s),i=i._parent,i===null)return;i.update(s,o)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[Hf];r&&r(),delete this._children[e]}}}},fae=class extends Vf{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,rw.runOp(this._current,e),e.path)}},pae=class extends Vf{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Ji.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},K4={get(e,t){if(t===Hf)return()=>{e._parent=null};if(t===Y4)return e._current;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let s=r[t],o=l0(e,t,s);return o!==s?(i===void 0&&(i={},e._children=i),i[t]=o,o):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},mae={...K4,set(e,t,r){var n;let i={type:0,props:{[t]:(n=Mo(r))!=null?n:r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},gae={...K4,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},u2=class extends Vf{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[Hf]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,s=l0(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},vae=class extends Vf{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r,this[Hf]=()=>{this._parent=null}}feedOp(e){let{path:t,...r}=e;this.reportOp(r,this._current.runOp(e),t)}},d2=class extends Vf{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[Hf]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;e(this.data(this._current[r].id),i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,s=l0(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function Jy(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&mf.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var X4=class{constructor(e){this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){Jy(this.ts,t,e),Jy(this.actual,r,e),Jy(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function l0(e,t,r){return r instanceof Wl?new u2(e,t,r):r instanceof Ei?new d2(e,t,r):r instanceof tv?new vae(e,t,r):r instanceof Ji?new Proxy(new pae(e,t,r),gae):r!==null&&typeof r=="object"?ev(r)?r:new Proxy(new fae(e,t,r),mae):r}function q4(e){let t=new X4(e);return[l0(t,"",e),t]}function XT(e,t){let[r,i]=q4(e);return t(r),i.result()}function Mo(e){return e instanceof u2||e instanceof d2?e._current:e!==null&&typeof e=="object"?e[Y4]:e}var mf;(e=>{function t(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}e.equal=t;function r(s,o,a){let l=n(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return o}e.removeOverridden=r;function i(s,o){if((s instanceof Wl||s instanceof u2)&&typeof o=="string"||(s instanceof Ei||s instanceof d2)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object")return s[o]}e.zoomOnce=i;function n(s,o,a=0){for(;a<o.length&&s!==void 0;)s=i(s,o[a]),a+=1;return s}e.zoom=n})(mf||(mf={}));var Q4=class{},qT=class extends Q4{constructor(e){super(),this.id=e}},QT=class extends Q4{constructor(e){super(),this.data=e}},iw;try{iw=new TextDecoder}catch{}var De,Aa,q=0,Bi={},Et,fa,vn=0,bs=0,Qi,fo,Li=[],Dt,ZT={useRecords:!1,mapsAsObjects:!0},Z4=class{},J4=new Z4;J4.name="MessagePack 0xC1";var ju=!1,rv=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(De)return sB(()=>(sw(),this?this.unpack(e,t):rv.prototype.unpack.call(ZT,e,t)));Aa=t>-1?t:e.length,q=0,bs=0,fa=null,Qi=null,De=e;try{Dt=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw De=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof rv){if(Bi=this,this.structures)return Et=this.structures,lm();(!Et||Et.length>0)&&(Et=[])}else Bi=ZT,(!Et||Et.length>0)&&(Et=[]);return lm()}unpackMultiple(e,t){let r,i=0;try{ju=!0;let n=e.length,s=this?this.unpack(e,n):u0.unpack(e,n);if(t){for(t(s);q<n;)if(i=q,t(lm())===!1)return}else{for(r=[s];q<n;)i=q,r.push(lm());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{ju=!1,sw()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function lm(){try{if(!Bi.trusted&&!ju){let t=Et.sharedLength||0;t<Et.length&&(Et.length=t)}let e=dr();if(q==Aa)Et.restoreStructures&&JT(),Et=null,De=null,fo&&(fo=null);else if(q>Aa){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!ju)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Et.restoreStructures&&JT(),sw(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function JT(){for(let e in Et.restoreStructures)Et[e]=Et.restoreStructures[e];Et.restoreStructures=null}function dr(){let e=De[q++];if(e<160)if(e<128){if(e<64)return e;{let t=Et[e&63]||Bi.getStructures&&eB()[e&63];return t?(t.read||(t.read=h2(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,Bi.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[rB()]=dr();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(dr(),dr());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=dr();return t}else if(e<192){let t=e-160;if(bs>=q)return fa.slice(q-vn,(q+=t)-vn);if(bs==0&&Aa<140){let r=t<16?f2(t):tB(t);if(r!=null)return r}return nw(t)}else{let t;switch(e){case 192:return null;case 193:return Qi?(t=dr(),t>0?Qi[1].slice(Qi.position1,Qi.position1+=t):Qi[0].slice(Qi.position0,Qi.position0-=t)):J4;case 194:return!1;case 195:return!0;case 196:return e1(De[q++]);case 197:return t=Dt.getUint16(q),q+=2,e1(t);case 198:return t=Dt.getUint32(q),q+=4,e1(t);case 199:return Xa(De[q++]);case 200:return t=Dt.getUint16(q),q+=2,Xa(t);case 201:return t=Dt.getUint32(q),q+=4,Xa(t);case 202:if(t=Dt.getFloat32(q),Bi.useFloat32>2){let r=p2[(De[q]&127)<<1|De[q+1]>>7];return q+=4,(r*t+(t>0?.5:-.5)>>0)/r}return q+=4,t;case 203:return t=Dt.getFloat64(q),q+=8,t;case 204:return De[q++];case 205:return t=Dt.getUint16(q),q+=2,t;case 206:return t=Dt.getUint32(q),q+=4,t;case 207:return Bi.int64AsNumber?(t=Dt.getUint32(q)*4294967296,t+=Dt.getUint32(q+4)):t=Dt.getBigUint64(q),q+=8,t;case 208:return Dt.getInt8(q++);case 209:return t=Dt.getInt16(q),q+=2,t;case 210:return t=Dt.getInt32(q),q+=4,t;case 211:return Bi.int64AsNumber?(t=Dt.getInt32(q)*4294967296,t+=Dt.getUint32(q+4)):t=Dt.getBigInt64(q),q+=8,t;case 212:if(t=De[q++],t==114)return n3(De[q++]&63);{let r=Li[t];if(r)return r.read?(q++,r.read(dr())):r.noBuffer?(q++,r()):r(De.subarray(q,++q));throw new Error("Unknown extension "+t)}case 213:return t=De[q],t==114?(q++,n3(De[q++]&63,De[q++])):Xa(2);case 214:return Xa(4);case 215:return Xa(8);case 216:return Xa(16);case 217:return t=De[q++],bs>=q?fa.slice(q-vn,(q+=t)-vn):xae(t);case 218:return t=Dt.getUint16(q),q+=2,bs>=q?fa.slice(q-vn,(q+=t)-vn):bae(t);case 219:return t=Dt.getUint32(q),q+=4,bs>=q?fa.slice(q-vn,(q+=t)-vn):wae(t);case 220:return t=Dt.getUint16(q),q+=2,t3(t);case 221:return t=Dt.getUint32(q),q+=4,t3(t);case 222:return t=Dt.getUint16(q),q+=2,r3(t);case 223:return t=Dt.getUint32(q),q+=4,r3(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var yae=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function h2(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>yae.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(dr);return e.highByte===0&&(e.read=e3(t,e.read)),n()}let i={};for(let n=0,s=e.length;n<s;n++){let o=e[n];i[o]=dr()}return i}return r.count=0,e.highByte===0?e3(t,r):r}var e3=(e,t)=>function(){let r=De[q++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=Et[i]||eB()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=h2(n,e)),n.read()};function eB(){let e=sB(()=>(De=null,Bi.getStructures()));return Et=Bi._mergeStructures(e,Et)}var nw=c0,xae=c0,bae=c0,wae=c0;function c0(e){let t;if(e<16&&(t=f2(e)))return t;if(e>64&&iw)return iw.decode(De.subarray(q,q+=e));let r=q+e,i=[];for(t="";q<r;){let n=De[q++];if((n&128)===0)i.push(n);else if((n&224)===192){let s=De[q++]&63;i.push((n&31)<<6|s)}else if((n&240)===224){let s=De[q++]&63,o=De[q++]&63;i.push((n&31)<<12|s<<6|o)}else if((n&248)===240){let s=De[q++]&63,o=De[q++]&63,a=De[q++]&63,l=(n&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=Hr.apply(String,i),i.length=0)}return i.length>0&&(t+=Hr.apply(String,i)),t}function t3(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=dr();return t}function r3(e){if(Bi.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[rB()]=dr();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(dr(),dr());return t}}var Hr=String.fromCharCode;function tB(e){let t=q,r=new Array(e);for(let i=0;i<e;i++){let n=De[q++];if((n&128)>0){q=t;return}r[i]=n}return Hr.apply(String,r)}function f2(e){if(e<4)if(e<2){if(e===0)return"";{let t=De[q++];if((t&128)>1){q-=1;return}return Hr(t)}}else{let t=De[q++],r=De[q++];if((t&128)>0||(r&128)>0){q-=2;return}if(e<3)return Hr(t,r);let i=De[q++];if((i&128)>0){q-=3;return}return Hr(t,r,i)}else{let t=De[q++],r=De[q++],i=De[q++],n=De[q++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){q-=4;return}if(e<6){if(e===4)return Hr(t,r,i,n);{let s=De[q++];if((s&128)>0){q-=5;return}return Hr(t,r,i,n,s)}}else if(e<8){let s=De[q++],o=De[q++];if((s&128)>0||(o&128)>0){q-=6;return}if(e<7)return Hr(t,r,i,n,s,o);let a=De[q++];if((a&128)>0){q-=7;return}return Hr(t,r,i,n,s,o,a)}else{let s=De[q++],o=De[q++],a=De[q++],l=De[q++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){q-=8;return}if(e<10){if(e===8)return Hr(t,r,i,n,s,o,a,l);{let c=De[q++];if((c&128)>0){q-=9;return}return Hr(t,r,i,n,s,o,a,l,c)}}else if(e<12){let c=De[q++],h=De[q++];if((c&128)>0||(h&128)>0){q-=10;return}if(e<11)return Hr(t,r,i,n,s,o,a,l,c,h);let u=De[q++];if((u&128)>0){q-=11;return}return Hr(t,r,i,n,s,o,a,l,c,h,u)}else{let c=De[q++],h=De[q++],u=De[q++],d=De[q++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){q-=12;return}if(e<14){if(e===12)return Hr(t,r,i,n,s,o,a,l,c,h,u,d);{let f=De[q++];if((f&128)>0){q-=13;return}return Hr(t,r,i,n,s,o,a,l,c,h,u,d,f)}}else{let f=De[q++],m=De[q++];if((f&128)>0||(m&128)>0){q-=14;return}if(e<15)return Hr(t,r,i,n,s,o,a,l,c,h,u,d,f,m);let p=De[q++];if((p&128)>0){q-=15;return}return Hr(t,r,i,n,s,o,a,l,c,h,u,d,f,m,p)}}}}}function e1(e){return Bi.copyBuffers?Uint8Array.prototype.slice.call(De,q,q+=e):De.subarray(q,q+=e)}function Xa(e){let t=De[q++];if(Li[t])return Li[t](De.subarray(q,q+=e));throw new Error("Unknown extension type "+t)}var i3=new Array(4096);function rB(){let e=De[q++];if(e>=160&&e<192){if(e=e-160,bs>=q)return fa.slice(q-vn,(q+=e)-vn);if(!(bs==0&&Aa<180))return nw(e)}else return q--,dr();let t=(e<<5^(e>1?Dt.getUint16(q):e>0?De[q]:0))&4095,r=i3[t],i=q,n=q+e-3,s,o=0;if(r&&r.bytes==e){for(;i<n;){if(s=Dt.getUint32(i),s!=r[o++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(s=De[i++],s!=r[o++]){i=1879048192;break}if(i===n)return q=i,r.string;n-=3,i=q}for(r=[],i3[t]=r,r.bytes=e;i<n;)s=Dt.getUint32(i),r.push(s),i+=4;for(n+=3;i<n;)s=De[i++],r.push(s);let a=e<16?f2(e):tB(e);return a!=null?r.string=a:r.string=nw(e)}var n3=(e,t)=>{var r=dr();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=Et[e];return n&&n.isShared&&((Et.restoreStructures||(Et.restoreStructures=[]))[e]=n),Et[e]=r,r.read=h2(r,i),r.read()},iB=typeof self=="object"?self:global;Li[0]=()=>{};Li[0].noBuffer=!0;Li[101]=()=>{let e=dr();return(iB[e[0]]||Error)(e[1])};Li[105]=e=>{let t=Dt.getUint32(q-4);fo||(fo=new Map);let r=De[q],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};fo.set(t,n);let s=dr();return n.used?Object.assign(i,s):(n.target=s,s)};Li[112]=e=>{let t=Dt.getUint32(q-4),r=fo.get(t);return r.used=!0,r.target};Li[115]=()=>new Set(dr());var nB=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");Li[116]=e=>{let t=e[0],r=nB[t];if(!r)throw new Error("Could not find typed array for code "+t);return new iB[r](Uint8Array.prototype.slice.call(e,1).buffer)};Li[120]=()=>{let e=dr();return new RegExp(e[0],e[1])};Li[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=q;q+=t-4,Qi=[dr(),dr()],Qi.position0=0,Qi.position1=0;let i=q;q=r;try{return dr()}finally{q=i}};Li[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function sB(e){let t=Aa,r=q,i=vn,n=bs,s=fa,o=fo,a=Qi,l=new Uint8Array(De.slice(0,Aa)),c=Et,h=Et.slice(0,Et.length),u=Bi,d=ju,f=e();return Aa=t,q=r,vn=i,bs=n,fa=s,fo=o,Qi=a,De=l,ju=d,Et=c,Et.splice(0,Et.length,...h),Bi=u,Dt=new DataView(De.buffer,De.byteOffset,De.byteLength),f}function sw(){De=null,fo=null,Et=null}function Sae(e){e.unpack?Li[e.type]=e.unpack:Li[e.type]=e}var p2=new Array(147);for(let e=0;e<256;e++)p2[e]=+("1e"+Math.floor(45.15-e*.30103));var u0=new rv({useRecords:!1});u0.unpack;u0.unpackMultiple;u0.unpack;var _ae=new Float32Array(1);new Uint8Array(_ae.buffer,0,4);var Jm;try{Jm=new TextEncoder}catch{}var iv,m2,d0=typeof Buffer<"u",t1=d0?Buffer.allocUnsafeSlow:Uint8Array,oB=d0?Buffer:Uint8Array,s3=d0?4294967296:2144337920,ue,mr,re=0,ls,cs=null,Aae=/[\u0080-\uFFFF]/,Od=Symbol("record-id"),aB=class extends rv{constructor(e){super(e),this.offset=0;let t,r,i,n,s,o=0,a=oB.prototype.utf8Write?function(S,_,w){return ue.utf8Write(S,_,w)}:Jm&&Jm.encodeInto?function(S,_){return Jm.encodeInto(S,ue.subarray(_)).written}:!1,l=this;e||(e={});let c=e&&e.sequential,h=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=h?32:64),c&&!e.saveStructures&&(this.structures=[]);let f=u>32||d+u>64,m=u+64,p=u+d+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(S,_){if(ue||(ue=new t1(8192),mr=new DataView(ue.buffer,0,8192),re=0),ls=ue.length-10,ls-re<2048?(ue=new t1(ue.length),mr=new DataView(ue.buffer,0,ue.length),ls=ue.length-10,re=0):re=re+7&2147483640,t=re,s=l.structuredClone?new Map:null,l.bundleStrings?(cs=["",""],ue[re++]=214,ue[re++]=98,cs.position=re-t,re+=4):cs=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let w=r.sharedLength||0;if(w>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let M=0;M<w;M++){let C=r[M];if(!C)continue;let E,$=r.transitions;for(let P=0,D=C.length;P<D;P++){let W=C[P];E=$[W],E||(E=$[W]=Object.create(null)),$=E}$[Od]=M+64}o=w}c||(r.nextId=w+64)}i&&(i=!1),n=r||[];try{if(b(S),cs){mr.setUint32(cs.position+t,re-cs.position-t);let w=cs;cs=null,b(w[0]),b(w[1])}if(l.offset=re,s&&s.idsToInsert){re+=s.idsToInsert.length*6,re>ls&&A(re),l.offset=re;let w=Eae(ue.subarray(t,re),s.idsToInsert);return s=null,w}return _&Cae?(ue.start=t,ue.end=re,ue):ue.subarray(t,re)}finally{if(r){if(y<10&&y++,v>1e4)r.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let w=0,M=g.length;w<M;w++)g[w][Od]=0;g=[]}if(i&&l.saveStructures){let w=r.sharedLength||u;r.length>w&&(r=r.slice(0,w));let M=ue.subarray(t,re);return l.saveStructures(r,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(S)):(o=w,M)}}_&Tae&&(re=t)}};let b=S=>{re>ls&&(ue=A(re));var _=typeof S,w;if(_==="string"){let M=S.length;if(cs&&M>=8&&M<4096){let $=Aae.test(S);cs[$?0:1]+=S,ue[re++]=193,b($?-M:M);return}let C;M<32?C=1:M<256?C=2:M<65536?C=3:C=5;let E=M*3;if(re+E>ls&&(ue=A(re+E)),M<64||!a){let $,P,D,W=re+C;for($=0;$<M;$++)P=S.charCodeAt($),P<128?ue[W++]=P:P<2048?(ue[W++]=P>>6|192,ue[W++]=P&63|128):(P&64512)===55296&&((D=S.charCodeAt($+1))&64512)===56320?(P=65536+((P&1023)<<10)+(D&1023),$++,ue[W++]=P>>18|240,ue[W++]=P>>12&63|128,ue[W++]=P>>6&63|128,ue[W++]=P&63|128):(ue[W++]=P>>12|224,ue[W++]=P>>6&63|128,ue[W++]=P&63|128);w=W-re-C}else w=a(S,re+C,E);w<32?ue[re++]=160|w:w<256?(C<2&&ue.copyWithin(re+2,re+1,re+1+w),ue[re++]=217,ue[re++]=w):w<65536?(C<3&&ue.copyWithin(re+3,re+2,re+2+w),ue[re++]=218,ue[re++]=w>>8,ue[re++]=w&255):(C<5&&ue.copyWithin(re+5,re+3,re+3+w),ue[re++]=219,mr.setUint32(re,w),re+=4),re+=w}else if(_==="number")if(S>>>0===S)S<64?ue[re++]=S:S<256?(ue[re++]=204,ue[re++]=S):S<65536?(ue[re++]=205,ue[re++]=S>>8,ue[re++]=S&255):(ue[re++]=206,mr.setUint32(re,S),re+=4);else if(S>>0===S)S>=-32?ue[re++]=256+S:S>=-128?(ue[re++]=208,ue[re++]=S+256):S>=-32768?(ue[re++]=209,mr.setInt16(re,S),re+=2):(ue[re++]=210,mr.setInt32(re,S),re+=4);else{let M;if((M=this.useFloat32)>0&&S<4294967296&&S>=-2147483648){ue[re++]=202,mr.setFloat32(re,S);let C;if(M<4||(C=S*p2[(ue[re]&127)<<1|ue[re+1]>>7])>>0===C){re+=4;return}else re--}ue[re++]=203,mr.setFloat64(re,S),re+=8}else if(_==="object")if(!S)ue[re++]=192;else{if(s){let C=s.get(S);if(C){if(!C.id){let E=s.idsToInsert||(s.idsToInsert=[]);C.id=E.push(C)}ue[re++]=214,ue[re++]=112,mr.setUint32(re,C.id),re+=4;return}else s.set(S,{offset:re-t})}let M=S.constructor;if(M===Object)x(S,!0);else if(M===Array){w=S.length,w<16?ue[re++]=144|w:w<65536?(ue[re++]=220,ue[re++]=w>>8,ue[re++]=w&255):(ue[re++]=221,mr.setUint32(re,w),re+=4);for(let C=0;C<w;C++)b(S[C])}else if(M===Map){w=S.size,w<16?ue[re++]=128|w:w<65536?(ue[re++]=222,ue[re++]=w>>8,ue[re++]=w&255):(ue[re++]=223,mr.setUint32(re,w),re+=4);for(let[C,E]of S)b(C),b(E)}else{for(let C=0,E=iv.length;C<E;C++){let $=m2[C];if(S instanceof $){let P=iv[C];if(P.write){P.type&&(ue[re++]=212,ue[re++]=P.type,ue[re++]=0),b(P.write.call(this,S));return}let D=ue,W=mr,V=re;ue=null;let H;try{H=P.pack.call(this,S,L=>(ue=D,D=null,re+=L,re>ls&&A(re),{target:ue,targetView:mr,position:re-L}),b)}finally{D&&(ue=D,mr=W,re=V,ls=ue.length-10)}H&&(H.length+re>ls&&A(H.length+re),re=Mae(H,ue,re,P.type));return}}x(S,!S.hasOwnProperty)}}else if(_==="boolean")ue[re++]=S?195:194;else if(_==="bigint"){if(S<BigInt(1)<<BigInt(63)&&S>=-(BigInt(1)<<BigInt(63)))ue[re++]=211,mr.setBigInt64(re,S);else if(S<BigInt(1)<<BigInt(64)&&S>0)ue[re++]=207,mr.setBigUint64(re,S);else if(this.largeBigIntToFloat)ue[re++]=203,mr.setFloat64(re,Number(S));else throw new RangeError(S+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");re+=8}else if(_==="undefined")this.encodeUndefinedAsNil?ue[re++]=192:(ue[re++]=212,ue[re++]=0,ue[re++]=0);else if(_==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+_)},x=this.useRecords===!1?this.variableMapSize?S=>{let _=Object.keys(S),w=_.length;w<16?ue[re++]=128|w:w<65536?(ue[re++]=222,ue[re++]=w>>8,ue[re++]=w&255):(ue[re++]=223,mr.setUint32(re,w),re+=4);let M;for(let C=0;C<w;C++)b(M=_[C]),b(S[M])}:(S,_)=>{ue[re++]=222;let w=re-t;re+=2;let M=0;for(let C in S)(_||S.hasOwnProperty(C))&&(b(C),b(S[C]),M++);ue[w+++t]=M>>8,ue[w+t]=M&255}:S=>{let _=Object.keys(S),w,M=n.transitions||(n.transitions=Object.create(null)),C=0;for(let $=0,P=_.length;$<P;$++){let D=_[$];w=M[D],w||(w=M[D]=Object.create(null),C++),M=w}let E=M[Od];if(E)E>=96&&f?(ue[re++]=((E-=96)&31)+96,ue[re++]=E>>5):ue[re++]=E;else{E=n.nextId,E||(E=64),E<m&&this.shouldShareStructure&&!this.shouldShareStructure(_)?(E=n.nextOwnId,E<p||(E=m),n.nextOwnId=E+1):(E>=p&&(E=m),n.nextId=E+1);let $=_.highByte=E>=96&&f?E-96>>5:-1;M[Od]=E,n[E-64]=_,E<m?(_.isShared=!0,n.sharedLength=E-63,i=!0,$>=0?(ue[re++]=(E&31)+96,ue[re++]=$):ue[re++]=E):($>=0?(ue[re++]=213,ue[re++]=114,ue[re++]=(E&31)+96,ue[re++]=$):(ue[re++]=212,ue[re++]=114,ue[re++]=E),C&&(v+=y*C),g.length>=d&&(g.shift()[Od]=0),g.push(M),b(_))}for(let $=0,P=_.length;$<P;$++)b(S[_[$]])},A=S=>{let _;if(S>16777216){if(S-t>s3)throw new Error("Packed buffer would be larger than maximum buffer size");_=Math.min(s3,Math.round(Math.max((S-t)*(S>67108864?1.25:2),4194304)/4096)*4096)}else _=(Math.max(S-t<<2,ue.length-1)>>12)+1<<12;let w=new t1(_);return mr=new DataView(w.buffer,0,_),ue.copy?ue.copy(w,0,t,S):w.set(ue.slice(t,S)),re-=t,t=0,ls=w.length-10,ue=w}}useBuffer(e){ue=e,mr=new DataView(ue.buffer,ue.byteOffset,ue.byteLength),re=0}};m2=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Z4];iv=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:s,position:o}=t(6);n[o++]=214,n[o++]=255,s.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:n,targetView:s,position:o}=t(10);n[o++]=215,n[o++]=255,s.setUint32(o,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:s,position:o}=t(3);n[o++]=212,n[o++]=255,n[o++]=255}else{let{target:n,targetView:s,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,s.setUint32(o,e.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?o3(e,16,t):a3(d0?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==oB&&this.structuredClone?o3(e,nB.indexOf(r.name),t):a3(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function o3(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:s,position:o}=r(4+n);s[o++]=199,s[o++]=n+1}else if(n+1<65536){var{target:s,position:o}=r(5+n);s[o++]=200,s[o++]=n+1>>8,s[o++]=n+1&255}else{var{target:s,position:o,targetView:a}=r(7+n);s[o++]=201,a.setUint32(o,n+1),o+=4}s[o++]=116,s[o++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function a3(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:s}=t(r+5);i[n++]=198,s.setUint32(n,r),n+=4}i.set(e,n)}function Mae(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function Eae(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((s,o)=>s.offset>o.offset?1:-1);r=t.pop();){let s=r.offset,o=r.id;e.copyWithin(s+i,s,n),i-=6;let a=s+i;e[a++]=214,e[a++]=105,e[a++]=o>>24,e[a++]=o>>16&255,e[a++]=o>>8&255,e[a++]=o&255,n=s}return e}function dd(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");m2.unshift(e.Class),iv.unshift(e)}Sae(e)}var lB=new aB({useRecords:!1});lB.pack;lB.pack;var Cae=512,Tae=1024,l3=new aB({structuredClone:!0});dd({Class:Ji.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Ji.prototype),e}});dd({Class:Ei.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ei.prototype),e}});dd({Class:Wl.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Wl.prototype),e}});dd({Class:qT.prototype.constructor,type:4,write(e){return e.id},read(e){return new qT(e)}});dd({Class:QT.prototype.constructor,type:5,write(e){return e.data},read(e){return new QT(e)}});dd({Class:tv.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,tv.prototype),e}});function Pae(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function ow(e){if(ev(e))return e;if(Array.isArray(e))return e.map(ow);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=ow(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var aw;(e=>{function t(n){return l3.pack(n)}e.serialize=t;function r(n){return l3.unpack(n)}e.deserialize=r;function i(n){return Pae(t(ow(n))).toString()}e.checksum=i})(aw||(aw={}));var lw;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(lw||(lw={}));var cw;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(cw||(cw={}));var uw;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:Cn.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(i==="SpotLight")return{type:i,color:Cn.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:Cn.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(uw||(uw={}));var dw;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(dw||(dw={}));var hw;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(hw||(hw={}));var fw;(e=>e.defaultData={...hw.defaultData,...dw.defaultData,cloner:null,booleanExclude:null})(fw||(fw={}));var cB=(e=>(e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Center=3]="Center",e[e.Justify=4]="Justify",e))(cB||{}),uB=(e=>(e[e.Top=1]="Top",e[e.Center=2]="Center",e[e.Bottom=3]="Bottom",e))(uB||{}),dB=(e=>(e[e.None=1]="None",e[e.Upper=2]="Upper",e[e.Lower=3]="Lower",e))(dB||{}),pw;(e=>e.defaultData={width:100,height:100,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.5,letterSpacing:1,text:"",textTransform:1,color:Cn.fromHexAndA(6974058,1),alpha:1,font:"roboto_regular"})(pw||(pw={}));var hB=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Dae=["wrapping","image"],pl;(e=>{function t(n,s){return n==="light"&&s?r(s):i(n)}e.defaultData=t;function r(n){switch(n){case"basic":return{type:"light",category:"basic",alpha:1,visible:!0,mode:0};case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function i(n){switch(n){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:di.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...di.fromHex(6710886),a:1},colorB:{...di.fromHex(6710886),a:1},colorC:{...di.fromHex(16777215),a:1},colorD:{...di.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:Cn.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Cn.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:Cn.fromHexAndA(0,1),contourColor:Cn.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(pl||(pl={}));var Is;(e=>{function t(l){return!l.layers.some(c=>{if(c.data.type==="texture"&&c.data.projection!==0||c.data.type==="depth"&&!c.data.isWorldSpace||c.data.type==="noise"||c.data.type==="displace")return!0})&&!i(l)}e.isMergable=t;function r(l){let c="";return l.layers.forEach(h=>{Object.entries(h.data).forEach(([u,d])=>{c+=`${u}${d}`,Array.isArray(d)?d.forEach(f=>c+=`${f}`):typeof d=="object"?Object.values(d).forEach(f=>{typeof f=="number"?c+=`${f.toFixed(4)}`:c+=`${f}`}):c+=`${d}`})}),c}e.getHash=r;function i(l){let c=0;for(let h of l.layers)"alpha"in h.data&&h.data.type!=="light"&&h.data.type!=="fresnel"&&(c+=(1-c)*h.data.alpha);return c<1}e.isTransparent=i;function n(){return{layers:new Ei}}e.defaultEmptyData=n;function s(l="layer1",c="layer2"){return o("phong",l,c)}e.defaultData=s;function o(l,c="layer1",h="layer2"){let u=new Ei;return u.push({fi:0,data:pl.defaultData("light",l),id:c}),u.push({fi:1,data:pl.defaultData("color"),id:h}),{layers:u}}e.defaultTwoLayerData=o;function a(l,c="basic",h="layer1",u="layer2"){let d=pl.defaultData("texture");Object.assign(d.texture,{image:l});let f=new Ei;return f.push({fi:0,data:d,id:h}),f.push({fi:1,data:pl.defaultData("light",c),id:u}),{layers:f}}e.defaultTwoLayerTextureData=a})(Is||(Is={}));var nv;(e=>{function t(){return{points:new Ei,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(nv||(nv={}));var mw;(e=>{function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"}e.is2DParametricMesh=t})(mw||(mw={}));var sv;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:nv.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};throw new Error("not implemented")}e.defaultData=t})(sv||(sv={}));var gf;(e=>{e.identity={...Zb.identity,hiddenMatrix:Vl.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,s){return{position:pi.isEqual(n.position,s.position)?null:s.position,rotation:pi.isEqual(n.rotation,s.rotation)?null:s.rotation,scale:pi.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:Vl.isEqual(n.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}e.diff=i})(gf||(gf={}));var Eo;(e=>e.defaultData={states:new Ei,events:new Ei,visible:!0,raycastLock:!1,...gf.identity})(Eo||(Eo={}));var c3;(e=>e.defaultData={type:"Empty",...Eo.defaultData})(c3||(c3={}));var ov;(e=>e.defaultData={type:"Mesh",...Eo.defaultData,...fw.defaultData})(ov||(ov={}));var u3;(e=>e.defaultData={type:"TextFrame",...Eo.defaultData,...pw.defaultData})(u3||(u3={}));var gw;(e=>e.defaultData={...Eo.defaultData,...gf.identity,...ff.defaultData})(gw||(gw={}));var d3;(e=>{function t(r){return{...Eo.defaultData,...uw.defaultData(r)}}e.defaultData=t})(d3||(d3={}));var h3;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Vl.identity,name:"Play Camera",visible:!0,raycastLock:!1,states:new Ei,events:new Ei,...ff.defaultData},e.defaultMeshObject={name:"Rectangle",...Eo.defaultData,...ov.defaultData,geometry:sv.defaultData("RectangleGeometry"),material:Is.defaultTwoLayerData("basic","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Eo.defaultData,...ov.defaultData,geometry:sv.defaultData("BooleanGeometry"),material:Is.defaultTwoLayerData("phong","layer1","layer2")}))(h3||(h3={}));var av;(e=>{function t(i,n){if(n===void 0)return i;let s={...i};return"material"in s&&"material"in n&&n.material&&(s.material=XT(s.material,o=>{if(typeof o!="string")for(let[a,l]of Object.entries(n.material.layers)){let c=o.layers.data(a);c&&Kg(c,l)}}).data),s.materials&&n.materials&&(s.materials=XT(s.materials,o=>{var a,l;for(let c=0;c<s.materials.length;c++){let h=n.materials[c];if(typeof h!="string")for(let[u,d]of Object.entries(h.layers)){let f=(l=(a=o[c])==null?void 0:a.layers)==null?void 0:l.data(u);f&&Kg(f,d)}}}).data),s}e.patchMaterialState=t;function r(i,n){var o,a;if(n===void 0)return i;let s={...i};if(Object.assign(s,gf.merge(s,n)),Wu.is(i.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let l=n;((o=l.orthographic)==null?void 0:o.zoom)!==void 0&&(s.orthographic.zoom=l.orthographic.zoom),((a=l.perspective)==null?void 0:a.zoom)!==void 0&&(s.perspective.zoom=l.perspective.zoom),l.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=l.isUpVectorFlipped),l.targetOffset!==void 0&&(s.targetOffset=l.targetOffset)}else if(i.type==="Mesh")s.geometry={...s.geometry},Object.assign(s.geometry,n.geometry),s=t(s,n);else if(cw.is(i.type)){let l=n;l.intensity!==void 0&&(s.intensity=l.intensity),l.color!==void 0&&(typeof l.color=="string"?s.color=l.color:s.color=di.clone(l.color))}return s}e.patch=r})(av||(av={}));var lv;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3})(lv||(lv={}));var cv;(e=>e.defaultData={orbitControls:lv.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:1,stopMode:"manual",duration:5e3,transparent:!1},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),gameControlObject:null})(cv||(cv={}));var vw;(e=>{function t(){let i={};return i["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},F4(i,Ji.prototype)}e.defaultColors=t;function r(){return{materials:new Ji,images:new Ji,colors:new Ji,audios:new Ji,penumbraSize:[.5,.5,.5]}}e.emptyData=r})(vw||(vw={}));function f3(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,i=t.colorB,n=[[r.r,r.g,r.b,r.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let a=2;a<10;a++)n.push(n[1]),s.push(1);let o={...Qoe(Mo(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,o)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...Mo(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function r1(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function i1(e,t){e.scene.objects.traverse((r,i)=>{"materials"in i?i.materials.forEach(n=>{typeof n!="string"&&t(n)}):"material"in i&&typeof i.material!="string"&&t(i.material)})}function Lae(e){Object.assign(e.scene.publish,{orbitControls:{...lv.defaultData,...Mo(e.scene.publish.orbitControls)}})}function $ae(e){Object.assign(e.scene.publish.settings,{video:{...cv.defaultData.settings.video,...Mo(e.scene.publish.settings.video)}})}function Iae(e){function t(r){if(r.layers){for(let i of Object.values(r.layers))if(i){for(let[n,s]of Object.entries(i))if((hB.includes(n)||typeof s=="boolean")&&delete i[n],n==="texture")for(let[o,a]of Object.entries(s))(Dae.includes(o)||typeof a=="boolean")&&delete s[o]}}}e.scene.objects.traverse((r,i)=>{i.states.forEach(n=>{let s=n;s.material?t(s.material):s.materials&&s.materials.forEach(o=>{t(o)})})})}function Rae(e){e.scene.publish.withBackground=!0}function kae(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1}}function Oae(e){e.scene.objects.traverse((t,r)=>{let i=r.cloner;i&&(i.radial.scale=i.radial.scale.map(n=>n+1),i.linear.scale=i.linear.scale.map(n=>n+1))})}function Bae(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function zae(e){e.scene.objects.traverse((t,r)=>{var n;let i=e.scene.objects.parent(t);r.type==="Mesh"&&(!i||((n=e.scene.objects.data(i).geometry)==null?void 0:n.type)!=="BooleanGeometry")&&(r.booleanExclude=null)})}function p3(e){e.layers===void 0&&Object.assign(e,Is.defaultTwoLayerData("lambert"))}function n1(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let n={...Mo(t),colors:r,steps:i};Object.assign(t,n)}})}function Nae(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function m3(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&n1(i)}):"material"in r&&typeof r.material!="string"&&n1(r.material)}),Object.values(e.shared.materials).forEach(t=>n1(t))}function Fae(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Uae(e){e.shared.audios=F4({},Ji.prototype)}function Hae(e){let t=e.shared.materials;Object.entries(t).forEach(([r,i])=>{if(!i.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"basic",alpha:1,visible:!0,mode:0},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:n})}})}function Vae(e){Object.entries(Mo(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Mo(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function Wae(e){e.scene.publish.settings.web.preload=!1}function g3(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}var v3=19;function jae(e){var r;let t=(r=e.schema)!=null?r:0;t!==v3&&(console.warn("updating from ",t,"to ",v3),t<1&&(i1(e,f3),r1(e,f3),e.schema=1),t<2&&(Lae(e),e.schema=2),t<3&&(Iae(e),e.schema=3),t<4&&(Rae(e),e.schema=4),t<5&&(kae(e),e.schema=5),t<6&&(Oae(e),e.schema=6),t<7&&(Bae(e),e.schema=7),t<8&&(zae(e),e.schema=8),t<9&&(m3(e),e.schema=9),t<10&&(Nae(e),e.schema=10),t<11&&(Fae(e),e.schema=11),t<12&&(m3(e),e.schema=12),t<13&&(Uae(e),e.schema=13),t<14&&(Hae(e),e.schema=14),t<15&&(Vae(e),e.schema=15),t<16&&(Wae(e),e.schema=16),t<17&&(i1(e,g3),r1(e,g3),e.schema=17),t<18&&(i1(e,p3),r1(e,p3),e.schema=18),t<19&&($ae(e),e.schema=19))}var yw;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(yw||(yw={}));var y3;(e=>e.defaultData={object:null,state:null,repeat:!1,cycle:!1,rewind:!1,easing:4,delay:0,delayDirection:"start-once",duration:1e3})(y3||(y3={}));var x3;(e=>(e.defaultData={type:12,trigger:"mouseDown",interaction:"play",volume:.5,delay:0,loop:0},e.isPlayable=t=>t.type===12&&t.interaction==="play",e.isPausable=t=>t.type===12&&t.interaction!=="play"))(x3||(x3={}));var xw;(e=>{function t(r){return r.type===0||r.type===1||r.type===5||r.type===6}e.is=t})(xw||(xw={}));function bw(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},o={},a=e[0].morphTargetsRelative,l=new at,c=0;for(let h=0;h<e.length;++h){let u=e[h],d=0;if(r!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData),t){let f;if(r)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}if(r){let h=0,u=[];for(let d=0;d<e.length;++d){let f=e[d].index;for(let m=0;m<f.count;++m)u.push(f.getX(m)+h);h+=e[d].attributes.position.count}l.setIndex(u)}for(let h in s){let u=b3(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(let h in o){let u=o[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){let f=[];for(let p=0;p<o[h].length;++p)f.push(o[h][p][d]);let m=b3(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(m)}}return l}function b3(e){let t,r,i,n=0;for(let a=0;a<e.length;++a){let l=e[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),o=0;for(let a=0;a<e.length;++a)s.set(e[a].array,o),o+=e[a].array.length;return new ft(s,r,i)}var s1={type:"change"},w3={type:"changeZoom"},Gae={type:"changePan"},Cc={type:"start"},Bd={type:"end"},o1=new Yt,Yae=new K,Kae=2*Math.PI,Xae=1e-8,qae=.01,S3=2,a1=.125,_3=2,l1=1,c1=1,u1=.1,fB=class extends ki{constructor(e,t,r=!1){super(),this.object=e,this.domElement=t,this.isExport=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,dn.DOLLY_ROTATE,dn.PAN],this.offset=new T,this.eye=new T,this.lastPosition=new T,this.lastQuaternion=new Yt,this.current=new K,this.overShoot=new K,this.overRatio=new K,this.spherical=new uT,this.sphericalDelta=new uT,this.panOffset=new T,this.panLeftV=new T,this.panUpV=new T,this.panV=new T,this.rotateStart=new K,this.rotateEnd=new K,this.rotateDelta=new K,this.panStart=new K,this.panEnd=new K,this.panDelta=new K,this.dollyStart=new K,this.dollyEnd=new K,this.dollyDelta=new K,this.rotationRangeFactor=new K,this.panRangeFactor=new K,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isFirstHover=!0,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.update=()=>{let i=this.object.position;this.offset.copy(i).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(o1.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(o1),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-a1),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),i.copy(this.target).add(this.offset);let n=this.spherical.phi%Kae;return this.eye.copy(this.offset).normalize(),this.object.up.copy(zt.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),n>0&&n>Math.PI||n<0&&n>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-a1,this.sphericalDelta.phi*=1-a1):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>qae||8*(1-this.lastQuaternion.dot(this.object.quaternion))>Xae?(this.dispatchEvent(s1),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(this.isPointerDown=!0,wt.length===1&&(this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)),i.pointerType==="touch"||i.pointerType==="pen"?this.onPointerDownTouch(i):this.onPointerDownMouse(i))},this.onPointerMove=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i))},this.onPointerUp=i=>{this.isPointerDown=!1,wt.length===0&&(this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)),this.dispatchEvent(Bd),this.state=-1},this.onPointerDownMouse=i=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[i.button]:n=this.mouseButtonsPlay[i.button],n){case 0:if(i.altKey===!0&&!i.shiftKey&&!am(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(am(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(am(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(Cc)},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}},this.onPointerDownTouch=i=>{switch(this.touches[wt.length-1]){case dn.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case dn.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case dn.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case dn.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(Cc)},this.onPointerMoveTouch=i=>{switch(this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=z4(()=>this.dispatchEvent(Bd),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||(this.isExport===!1&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(Cc),this.handleMouseWheel(i),this.dispatchEndDebounced())},this.onGesture=i=>{if(this.enabled!==!1)if(i.preventDefault(),i.type==="gesturechange"){if(this.enableZoom===!1)return;this.dispatchEvent(Cc),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update()}else this.dispatchEvent(Bd)},this.onContextMenu=i=>{this.enabled!==!1&&i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key)},this.onKeyUp=()=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(wt[0]))},this.onPointerHover=i=>{if(!(i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot)){if(window.clearTimeout(this.timerHover),this.isPointerDown=!0,this.isFirstHover){let n={clientX:window.innerWidth/2,clientY:window.innerHeight/2};this.hoverRotatePanMode===2?this.handleMouseDownPan(n):this.hoverRotatePanMode===1&&this.handleMouseDownRotate(n),this.isFirstHover=!1}this.hoverRotatePanMode===2?this.handleMouseMovePan(i,u1):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,u1),this.timerHover=window.setTimeout(()=>{this.isPointerDown=!1},30)}},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.connect(),this.update()}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.isUpVectorFlipped=this.isUpVectorFlipped0,this.object.updateProjectionMatrix(),this.dispatchEvent(s1),this.isFirstHover=!0,this.update(),this.state=-1}resetTo(e,t,r,i=!1){this.target.copy(e),this.object.position.copy(t),this.object.zoom=r,this.object.isUpVectorFlipped=i,this.object.updateProjectionMatrix(),this.dispatchEvent(s1),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.isFirstHover=!0,this.hoverRotatePanMode!==0&&this.domElement.addEventListener("pointermove",this.onPointerHover),u1=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,S3=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(o1.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Wo(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Wo(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Wo(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=Wo(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=dn.ROTATE),e.panTouches===1&&(this.touches[0]=dn.PAN),e.orbitTouches===2&&(this.touches[1]=dn.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=dn.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=dn.ROTATE),e.panTouches===3&&(this.touches[2]=dn.PAN)}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),Qb||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchend",this.onTouchEnd)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),Qb||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,s,o,a){this.overShoot.set(0,0);let l,c,h;e instanceof T?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),h=!0):(l=e.theta,c=e.phi,this.current.set(Wo(this.spherical.theta),Wo(this.spherical.phi)),h=!1),r===0&&(this.current.x+=l,this.current.y+=c),(t===3||t===2)&&(!h&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x),i===n&&(l=0)),(t===3||t===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y),s===o&&(c=0)),h||(this.overShoot.x=Wo(this.overShoot.x),this.overShoot.y=Wo(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=A3(Math.abs(this.overRatio.x)),this.overRatio.y=A3(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&(c*=1-this.overRatio.y)):r===2&&(!h&&(this.overRatio.x>.002||this.overRatio.y>.002)||h&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=this.overShoot.x*.05,c=this.overShoot.y*.05,h?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):h?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof T?(e.x=l,e.y=c):(e.theta=l,e.phi=c)}setEnableDampingSpeed(e){this.enableDamping=e,l1=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*S3}getZoomScale(){return Math.pow(.95,_3)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrix),this.panUp(2*t*n/r.clientHeight,this.object.matrix)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix));this.dispatchEvent(Gae)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(w3)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(w3)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Cc),this.dollyOut(e),this.dispatchEvent(Bd)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Cc),this.dollyIn(e),this.dispatchEvent(Bd)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){Xg&&qg<15.5&&!Wr?(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)):this.rotateDelta.set(e.movementX,e.movementY),this.rotateDelta.multiplyScalar(l1*t).rotateAround(Yae,-this.object.angleOffsetFromUp);let r=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/r.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/r.clientHeight),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){Xg&&qg<15.5&&!Wr?(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)):this.panDelta.set(e.movementX,e.movementY),this.panDelta.multiplyScalar(c1*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(sae===!1&&am(e)===!1&&Qae(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(c1),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(wt.length===2){let e=.5*(wt[0].pageX+wt[1].pageX),t=.5*(wt[0].pageY+wt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(wt[0].pageX,wt[0].pageY)}handleTouchStartPan(){if(wt.length===2){let e=.5*(wt[0].pageX+wt[1].pageX),t=.5*(wt[0].pageY+wt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(wt[0].pageX,wt[0].pageY)}handleTouchStartDolly(){let e=wt[0].pageX-wt[1].pageX,t=wt[0].pageY-wt[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(wt.length===2){let r=Zy(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==wt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(l1);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(wt.length===2){let t=Zy(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==wt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(c1),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=Zy(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,_3)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function Wo(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function A3(e){return 1-Math.pow(1-e,4)}function Qae(e){return e.wheelDeltaY===0||e.deltaY===0?a0&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var d1={type:"change"},Zae={type:"lock"},Jae={type:"unlock"},ele=new T,tle=new T,Nn=new T,qa=new T,M3=new T,h1=new We,E3=new We,rle=new We,ile=new We,zd=new Yt,nle=new Yt,C3=new T(0,1,0),f1=new T(1,1,1),sle=1,ole=.025,ale=16e-6,lle=12,cle=20,ni=new Pn,fn=new zr,ww=class extends ki{constructor(e,t,r,i,n,s){var l,c,h,u,d,f,m,p,g,v,y,b,x,A,S;if(super(),this.object=t,this.domElement=r,this.bvh=i,this.cameraFollow=n,this.camera=s,this.enableDamping=!0,this.position0=new T,this.rotation0=new _n(0,0,0,"XYZ"),this.scale0=new T,this.hiddenMatrix0=new We,this.target0=new T,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new _n(0,0,0,"YXZ"),this.position0Cam=new T,this.quat0Cam=new Yt,this.scale0Cam=new T,this.hiddenMatrix0Cam=new We,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.collider={radius:40,segment:new Pn(new T(0,-40,0),new T(0,40,0)),matrix:new We},this.euler=new _n(0,0,0,"YXZ"),this.eulerDelta=new T,this.lastQuaternion=new Yt,this.lastPosition=new T,this.lastCameraQuaternion=new Yt,this.lastCameraPosition=new T,this.PI_2=Math.PI/2,this.prevMouse=new K,this.velocityTarget=new T,this.velocity=new T,this.directionXZ=new T,this.rotVelocityStick=new T,this.rotVelocityTarget=new T,this.rotVelocity=new T,this.rotDirection=new T,this.parentY=new T,this.objectRot={x:0,y:0},this.firstPointerId=-1,this.actionStates={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.onObject=!1,this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new We,this.objectToTarget=new T,this.objectToTarget0=new T,this.deltaPos=new T,this.deltaPosXZ=new T,this.objectToCamXZ=new T,this.objectToCamXZ0=new T,this.targetToCamera=new T,this.targetToCamera0=new T,this.cameraPolarAxis0=new T,this.targetPos=new T,this.targetQuat=new Yt,this.lerpFactorPos=new T().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.dummyTarget=new zt,this.parentMatrixWorld=new We,this.parentWorldQuat=new Yt,this.parentWorldQuatInv=new Yt,this.parentWorldScale=new T,this.objXZQuat=new Yt,this.objXZQuatInv=new Yt,this.objXZRotMat=new We,this.physLoopPerFrame=1,this.isFirstPerson=!1,this.onPointerDown=_=>{_.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=_.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Wr&&(!Xg||qg>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(_.clientX,_.clientY))},this.onPointerUp=_=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),_.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=_=>{if(_.pointerId!==this.firstPointerId)return;let w=_.clientX-this.prevMouse.x,M=_.clientY-this.prevMouse.y;this.prevMouse.set(_.clientX,_.clientY),_.pointerType==="mouse"&&this.rotBy!=="keys"&&(Xg&&qg<15.5&&!Wr?(this.eulerDelta.y=-w*this.mouseOrbitSensitivity,this.eulerDelta.x=-M*this.mouseOrbitSensitivity):(this.eulerDelta.y=-_.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-_.movementY*this.mouseOrbitSensitivity)),_.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-w*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-M*this.mouseOrbitSensitivity*5),this.dispatchEvent(d1)},this.onPointerlockChange=_=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Zae),ww.isLocked=!0):(this.dispatchEvent(Jae),ww.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=_=>{_.preventDefault();for(let w of this.keyAssignments)if(_.key.toUpperCase()===w[1]||_.key===w[1]){this.actionStates[w[0]]=1;break}this.dispatchEvent(d1)},this.onKeyUp=_=>{for(let w of this.keyAssignments)if(_.key.toUpperCase()===w[1]||_.key===w[1]||_.code.slice(3,_.code.length).toUpperCase()===w[1]){this.actionStates[w[0]]=0;break}},t.objectType==="CombinedCamera"&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.matrix.premultiply(this.object.hiddenMatrix),this.object.hiddenMatrix.identity(),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation),this.objectRot.y=this.object.rotation.y,this.isFirstPerson===!1){let _=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,_,0)}if(this.dummyTarget.matrixAutoUpdate=!1,this.dummyTarget.position.copy(this.object.position),this.dummyTarget.rotation.copy(this.object.rotation),this.dummyTarget.updateMatrix(),this.parentMatrixWorld.multiplyMatrices(this.object.matrixWorld,this.object.matrix.clone().invert()),this.parentMatrixWorld.decompose(Nn,this.parentWorldQuat,this.parentWorldScale),this.parentWorldQuatInv.copy(this.parentWorldQuat).invert(),this.parentY.set(0,1,0).applyQuaternion(this.parentWorldQuat),this.isFirstPerson){let _=this.object;this.target0.copy(_.getTarget()),this.zoom0=_.zoom}else this.cameraFollow===!0&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom);if(this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),(l=this.camera.parent)!=null&&l.parent?this.camera.hiddenMatrix.copy(this.camera.parent.matrixWorld).invert():this.camera.hiddenMatrix.identity(),(c=this.object.parent)!=null&&c.parent&&(this.camera.hiddenMatrix.multiply(this.parentMatrixWorld),this.camera.matrixWorld.premultiply(this.parentMatrixWorld.clone().invert())),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let _=new T(0,0,-1).applyQuaternion(this.camera.quaternion),w=new T().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(w),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let M;if(Math.abs(_.y)<1e-6){w.y=0,_.y=0;let E=w.projectOnVector(_);this.targetToCamera0.copy(E).negate(),M=this.camera.position.clone().add(E)}else{let E=_.multiplyScalar(w.y/_.y);this.targetToCamera0.copy(E).negate(),M=E.clone().add(this.camera.position)}this.objectToTarget0.subVectors(M,this.object.position);let C=new _n().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-C.x,C.x=0,C.z=0,C.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(C)}if(this.isObjectCamera=this.object.objectType==="CombinedCamera",this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=(h=e.rotByTouch)!=null?h:"joystick",this.rotBy=(u=e.rotBy)!=null?u:"keys",this.rotationMode=(d=e.rotationMode)!=null?d:"normal",this.moveMode=(f=e.moveMode)!=null?f:"walk",this.collisionEnabled=e.collisionEnabled,this.speedTranslate=((m=e.speedTranslate)!=null?m:250)*sle,this.speedOrbit=((p=e.speedRotate)!=null?p:100)*ole,this.mouseOrbitSensitivity=((g=e.speedRotate)!=null?g:100)*ale,this.keyAssignments=e.keyAssignments.map(_=>{let w=[_[0],_[1]];return w[1]==="\u25B2"?w[1]="ArrowUp":w[1]==="\u25C0"?w[1]="ArrowLeft":w[1]==="\u25BC"?w[1]="ArrowDown":w[1]==="\u25B6"?w[1]="ArrowRight":w[1]==="\u21E7"?w[1]="Shift":w[1]==="\u21B5"?w[1]="Enter":w[1]==="Space"?w[1]=" ":w[1]==="\u2318"?w[1]="Meta":w[1]==="Ctrl"?w[1]="Control":w[1]==="Esc"&&(w[1]="Escape"),w}),e.rotBy==="mouse"){let _;_=this.keyAssignments.findIndex(w=>w[0]==="rotNegX"),_!==-1&&(this.keyAssignments[_][1]=""),_=this.keyAssignments.findIndex(w=>w[0]==="rotPosX"),_!==-1&&(this.keyAssignments[_][1]=""),_=this.keyAssignments.findIndex(w=>w[0]==="rotPosY"),_!==-1&&(this.keyAssignments[_][1]=""),_=this.keyAssignments.findIndex(w=>w[0]==="rotNegY"),_!==-1&&(this.keyAssignments[_][1]="")}this.lerpFactorPosStart=1-.02**(1/(((v=e.delayPos[0])!=null?v:.3)*60)),this.lerpFactorPosEnd=1-.02**(1/(((y=e.delayPos[1])!=null?y:.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(((b=e.delayRot[0])!=null?b:.3)*60)),this.lerpFactorRotEnd=1-.02**(1/(((x=e.delayRot[1])!=null?x:.3)*60)),this.lerpFactorPosCamera=1-.02**(1/(((A=e.delayPosCamera)!=null?A:.3)*60)),this.lerpFactorRotCamera=1-.02**(1/(((S=e.delayRotCamera)!=null?S:.3)*60)),this.gravity=e.gravity*lle,this.jumpPower=e.jumpPower*cle,this.resetYPosition=e.resetYPosition,this.orientMode=e.autoOrientMove?e.orientMode:"none",e.collider.type==="capsule"?(this.collider.radius=e.collider.radius,this.collider.segment.start.y=e.collider.height/2-e.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y):e.collider.type==="sphere"&&(this.collider.radius=e.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0);let o=new T().fromArray(e.collider.position),a=new Yt().setFromEuler(new _n().fromArray([...e.collider.rotation,"XYZ"]));this.collider.matrix.compose(o,a,f1),e.cameraXAxis!==void 0&&(this.cameraXAxis=e.cameraXAxis,this.cameraYAxis=e.cameraYAxis,this.minPolarAngle=e.cameraRotXLimits[0],this.maxPolarAngle=e.cameraRotXLimits[1],this.minAzimuthAngleRel=e.cameraRotYLimits[0],this.maxAzimuthAngleRel=e.cameraRotYLimits[1])}reset(e=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),e===!0){if(this.object.rotation.reorder("YXZ"),this.isFirstPerson===!1){let t=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,t,0)}this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.dummyTarget.position.copy(this.object.position),this.dummyTarget.rotation.copy(this.object.rotation),this.dummyTarget.updateMatrix(),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}this.isObjectCamera||this.object.updateMatrix(),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(d1)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect()}resetTo(e,t,r){}update(e){if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;let t=e/1e3,r=t*60;if(this.moveMode==="walk"&&this.collisionEnabled&&(this.actionStates.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.actionStates.jump=0,this.onObject=!1),this.velocityTarget.y+=this.onObject?0:this.gravity*r),this.moveMode==="fly"&&(this.velocityTarget.y=(this.actionStates.movePosY-this.actionStates.moveNegY)*this.speedTranslate),this.directionXZ.z=this.actionStates.movePosZ-this.actionStates.moveNegZ,this.directionXZ.x=this.actionStates.movePosX-this.actionStates.moveNegX,this.directionXZ.normalize(),this.actionStates.moveNegZ||this.actionStates.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.actionStates.moveNegX||this.actionStates.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**r),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**r),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**r),this.orientMode!=="none"&&this.isFirstPerson===!1){let i=qa.copy(this.velocity);i.y=0,this.deltaPos.set(0,this.velocity.y*t,i.length()*t*-1)}else this.deltaPos.copy(this.velocity).multiplyScalar(t);if(this.deltaPos.applyQuaternion(this.object.quaternion),this.deltaPosXZ.copy(this.deltaPos),this.deltaPosXZ.y=0,this.rotDirection.y=Number(this.actionStates.rotPosY)-Number(this.actionStates.rotNegY),this.rotDirection.x=Number(this.actionStates.rotPosX)-Number(this.actionStates.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.actionStates.rotPosX||this.actionStates.rotNegX)||this.rotationMode==="steer"&&(this.actionStates.rotPosX||this.actionStates.rotNegX)&&(this.actionStates.movePosZ||this.actionStates.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.actionStates.rotPosY||this.actionStates.rotNegY)||this.rotationMode==="steer"&&(this.actionStates.rotPosY||this.actionStates.rotNegY)&&(this.actionStates.movePosZ||this.actionStates.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(t),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**r):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**r),this.euler.x+=this.rotVelocity.x*t,this.euler.y+=this.rotVelocity.y*t,this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){let i=Nn,n=qa.copy(this.directionXZ).applyQuaternion(this.parentWorldQuat);n.x*=-1,this.camera.getWorldDirection(i);let s=M3.copy(this.parentY).multiplyScalar(i.dot(this.parentY));if(i.sub(s),this.dummyTarget.rotation.y=i.angleTo(n)*(i.cross(n).y>0?-1:1),this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(C3,this.euler.y-this.euler0.y);let o=qa.copy(this.objectToCamXZ).normalize(),a=this.deltaPosXZ.sub(Nn.copy(o).multiplyScalar(this.deltaPosXZ.dot(o))).cross(o).y;this.euler.y-=Math.atan2(a,this.objectToCamXZ.length())}}this.cameraFollow===!0&&this.moveMode==="walk"&&this.isFirstPerson===!1?this.cameraXAxis==="Limit"?this.euler.x=vt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=vt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):(this.cameraXAxis==="Limit"||this.isFirstPerson||this.cameraFollow===!0)&&(this.euler.x=vt.clamp(this.euler.x,-this.PI_2,this.PI_2)),(this.isFirstPerson||this.moveMode!=="walk")&&(this.dummyTarget.rotation.x=this.euler.x),(this.isFirstPerson||this.orientMode==="none")&&(this.dummyTarget.rotation.y=this.euler.y),this.dummyTarget.rotation.x=vt.clamp(this.dummyTarget.rotation.x,-this.PI_2,this.PI_2),this.objectRot.x=this.euler.x,this.objectRot.y=this.euler.y,this.object.quaternion.copy(this.dummyTarget.quaternion),this.physLoopPerFrame=this.onObject?1:5,this.deltaPos.divideScalar(this.physLoopPerFrame);for(let i=0;i<this.physLoopPerFrame;i++)this.dummyTarget.position.add(this.deltaPos),this.collisionEnabled&&this.collisionAdjustment(t/this.physLoopPerFrame);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.position.lerp(this.dummyTarget.position,1-(1-.5)**r),this.isFirstPerson===!1&&this.object.quaternion.multiply(this.objXZQuat),this.isObjectCamera||this.object.updateMatrix(),this.isFirstPerson===!1&&this.object.quaternion.multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let i=this.objectToTarget.add(this.object.position),n=this.targetToCamera.add(i);h1.lookAt(n,i,C3).setPosition(n),h1.decompose(this.targetPos,this.targetQuat,Nn),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**r),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**r),this.camera.updateMatrix(),this.camera.matrixWorldNeedsUpdate=!0,this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=vt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=vt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&8*(1-this.lastQuaternion.dot(this.object.quaternion))<this.threshEndRotate&&(!this.camera||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode!=="walk"||this.onObject===!0||this.collisionEnabled===!1)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=zd.setFromAxisAngle(this.parentY,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?vt.clamp(this.objectRot.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.objectRot.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=vt.clamp(this.objectRot.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=vt.clamp(this.objectRot.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Nn.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=nle.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}collisionAdjustment(e){var n;let t=ele.set(0,0,0);this.dummyTarget.updateMatrix();let r=h1.multiplyMatrices(this.parentMatrixWorld,this.dummyTarget.matrix).multiply(this.objXZRotMat).multiply(this.collider.matrix).decompose(Nn,zd,qa).compose(Nn,zd,f1);this.bvh.dynamic.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;fn.makeEmpty();let o=ile.copy(s.matrixWorld).decompose(Nn,zd,qa).compose(Nn,zd,f1),a=E3.copy(o).invert(),l=rle.copy(E3).multiply(r);ni.copy(this.collider.segment),ni.start.applyMatrix4(l),ni.end.applyMatrix4(l);let c=tle.copy(this.dummyTarget.position).applyMatrix4(a);fn.expandByPoint(ni.start),fn.expandByPoint(ni.end),fn.min.addScalar(-this.collider.radius),fn.max.addScalar(this.collider.radius),s.boundsTree.shapecast({intersectsBounds:h=>h.intersectsBox(fn),intersectsTriangle:h=>{let u=Nn,d=qa,f=h.closestPointToSegment(ni,u,d);if(f<this.collider.radius){let m=this.collider.radius-f,p=d.sub(u).normalize(),g=M3.copy(c);g.addScaledVector(p,m);let v=g.applyMatrix4(o).sub(this.dummyTarget.position);t.add(v),ni.start.addScaledVector(p,m),ni.end.addScaledVector(p,m)}}})}),fn.makeEmpty(),ni.copy(this.collider.segment),ni.start.applyMatrix4(r),ni.end.applyMatrix4(r),fn.expandByPoint(ni.start),fn.expandByPoint(ni.end),fn.min.addScalar(-this.collider.radius),fn.max.addScalar(this.collider.radius),(n=this.bvh.static)==null||n.shapecast({intersectsBounds:s=>s.intersectsBox(fn),intersectsTriangle:s=>{let o=Nn,a=qa,l=s.closestPointToSegment(ni,o,a);if(l<this.collider.radius){let c=this.collider.radius-l,h=a.sub(o).normalize();t.addScaledVector(h,c),ni.start.addScaledVector(h,c),ni.end.addScaledVector(h,c)}}}),t.applyQuaternion(this.parentWorldQuatInv),t.divide(this.parentWorldScale),this.onObject=t.y>Math.abs(e*this.velocity.y*.25);let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.dummyTarget.position.add(t)}},pB=ww;pB.isLocked=!1;var ule=class extends QO{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new Ha({color:65280,linewidth:10}),t=new T(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new T(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new T().addVectors(t,r.multiplyScalar(i)),s=new at;return s.setFromPoints([t,n]),new jg(s,e)}},Jn=class extends st{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},dle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var o,a,l,c,h;let r=Object.assign({},(o=t==null?void 0:t.parameters)!=null?o:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),i=r.width/2,n=(a=r.radiusTop)!=null?a:i,s=(l=r.radiusBottom)!=null?l:i;return n===s?(n=i,s=i):n>s?(n=i,s=s*i/n):(n=n*i/s,s=i),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((c=r.height)!=null?c:r.width),depth:Math.abs((h=r.depth)!=null?h:r.width),radiusTop:n,radiusBottom:s})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:h,cornerRadius:u,cornerSegments:d,hollow:f}=e.parameters,m;return u||f?m=new mB(c,h,i,n,s,o,a,l*Math.PI/180,u,u,d,f):m=new F_(c,h,i,n,s,o,a,l*Math.PI/180),m.scale(1,1,r/t),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function jo(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function T3(e){return new K(e.y,-e.x)}var mB=class extends at{constructor(e,t,r,i,n,s,o,a,l,c,h,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],m=[],p=[],g=[],v=0,y=r/2,b=new T,x=new T;d&&e==0&&(e=l),d&&t==0&&(t=c);let A=new K(e,y),S=new K(t,-y),_=null,w=null,M=null,C=null,E=A.clone().sub(S),$=0,P=0,D=0;u>0&&($=Math.min(e,t)*(1-u),P=e-$,D=t-$);let W=A.clone();W.x-=$;let V=Math.PI-E.angle(),H=E.angle(),L=Math.tan(H/2),O=Math.tan(V/2),k=L+O,j=u?k:O,F=u?k:L;if(l=Math.min(l,(e-P)/j,E.length()/k),c=Math.min(c,(t-D)/F,E.length()/k),l>0){let ee=l/L;_=A.clone().sub(new K(ee,l)),u&&(M=_.clone(),M.x-=$-k*l),A.sub(E.clone().setLength(ee))}if(c>0){let ee=c/O;w=S.clone().sub(new K(ee,-c)),S.add(E.clone().setLength(ee)),u&&(C=w.clone(),C.x-=$-k*c,W.sub(E.clone().setLength(ee)))}E=A.clone().sub(S);let Y=E.length()<.5,X=[];for(let ee=0;ee<=i;ee++){let te=[],Q=ee/i,de=Q*a+o,le=new K(Math.sin(de),Math.cos(de));C&&w?(Z(te,Q,le,V,c,C,-1,!0),Z(te,Q,le,H,c,w,-1,!1)):w?(U(te,le,w.x,0,-1),Z(te,Q,le,H,c,w,-1,!1)):s||U(te,le,t,D,-1);let ce=T3(E).normalize();if(jo(ce,le,b),!Y)for(let ge=0;ge<=n;ge++){let fe=ge/n,Fe=E.clone().multiplyScalar(fe).add(S);jo(Fe,le,x),m.push(x.x,x.y,x.z),p.push(b.x,b.y,b.z),g.push(Q,.5+x.y/r),te.push(v++)}if(M&&_?(Z(te,Q,le,V,l,_,1,!1),Z(te,Q,le,H,l,M,1,!0)):_?(Z(te,Q,le,V,l,_,1,!1),U(te,le,_.x,0,1)):s||U(te,le,e,P,1),u&&!Y){let ge=T3(E).multiplyScalar(-1).normalize();jo(ge,le,b);for(let fe=0;fe<=n;fe++){let Fe=fe/n,Ae=E.clone().multiplyScalar(-Fe).add(W);jo(Ae,le,x),m.push(x.x,x.y,x.z),p.push(b.x,b.y,b.z),g.push(Q,.5+x.y/r),te.push(v++)}}u&&!s&&te.push(te[0]),X.push(te)}for(let ee=0;ee<X.length-1;ee++)for(let te=0;te<X[0].length-1;te++){if(s&&u&&te==n)continue;let Q=X[ee][te],de=X[ee+1][te],le=X[ee+1][te+1],ce=X[ee][te+1],ge=m[le*3+0],fe=m[le*3+2];f.push(Q,de,ce),(ge!=0||fe!=0)&&f.push(de,le,ce)}a<Math.PI*2&&(ne(-1,X[0],o),ne(1,X[X.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new $e(m,3)),this.setAttribute("normal",new $e(p,3)),this.setAttribute("uv",new $e(g,2));function Z(ee,te,Q,de,le,ce,ge,fe){for(let Fe=0;Fe<h+1;Fe++){let Ae=Fe/h,Ee=ge<0?Ae:1-Ae;fe&&(Ee-=1),Ee*=de;let ke=new K(Math.sin(Ee),Math.cos(Ee)*ge),Ue=ke.clone().multiplyScalar(le).add(ce);jo(Ue,Q,x),m.push(x.x,x.y,x.z),jo(ke,Q,b),p.push(b.x,b.y,b.z),g.push(te,.5+x.y/r),ee.push(v++)}}function U(ee,te,Q,de,le){let ce=new T,ge=new K,fe=[Q,de];le<0&&fe.reverse();for(let Fe of fe)ge.set(Fe,y*le),jo(ge,te,ce),m.push(ce.x,ce.y,ce.z),p.push(0,le,0),g.push(.5,.5),ee.push(v++)}function ne(ee,te,Q){let de=new K(Math.sin(Q),Math.cos(Q)),le=new K(-Math.cos(Q),Math.sin(Q)),ce=new T,ge=ee<0?(Ae,Ee,ke)=>f.push(Ae,Ee,ke):(Ae,Ee,ke)=>f.push(Ae,ke,Ee),fe=new K((e+t+P+D)/4,0);jo(fe,de,ce),m.push(ce.x,ce.y,ce.z),p.push(le.x,0,le.y),g.push(.5,.5);let Fe=v++;for(let Ae of te){let Ee=m.slice(Ae*3,Ae*3+3);m.push(...Ee),p.push(le.x,0,le.y);let ke=g.slice(Ae*2,Ae*2+2);g.push(...ke),v++}for(let Ae=Fe+1;Ae<v-1;Ae++)ge(Fe,Ae,Ae+1);ge(Fe,v-1,Fe+1)}}},hle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:u}=e.parameters,d;return c>0||h>0||l<360?d=new mB(0,t/2,i,n,s,o,a,l*Math.PI/180,c,h,u,0,!0):d=new FO(t/2,i,n,s,o),d.scale(1,1,r/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},fle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=e.parameters,c;return a==0?c=new $a(t,r,i,n,s,o):c=new ple(t,r,i,n,s,o,a,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},p1=Math.PI/2,ple=class extends at{constructor(e=1,t=1,r=1,i=1,n=1,s=1,o=0,a=4){super(),this.type="BoxBufferGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,e/2,t/2,r/2);let c=[],h=[],u=[],d=[],f=0,m=0;p("z","y","x",-1,-1,r,t,e,s,n,0),p("z","y","x",1,-1,r,t,-e,s,n,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,n,4),p("x","y","z",-1,-1,e,t,-r,i,n,5),o>0&&(g("z","y","x",-1,-1,1,r,t,e,s,0),g("z","y","x",1,-1,-1,r,t,e,s,1),g("z","y","x",-1,1,-1,r,t,e,s,1),g("z","y","x",1,1,1,r,t,e,s,0),g("x","y","z",-1,-1,-1,e,t,r,i,0),g("x","y","z",1,-1,1,e,t,r,i,1),g("x","y","z",-1,1,1,e,t,r,i,0),g("x","y","z",1,1,-1,e,t,r,i,1),g("y","x","z",-1,-1,1,t,e,r,n,0),g("y","x","z",1,-1,-1,t,e,r,n,1),g("y","x","z",1,1,1,t,e,r,n,1),g("y","x","z",-1,1,-1,t,e,r,n,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new $e(h,3)),this.setAttribute("normal",new $e(u,3)),this.setAttribute("uv",new $e(d,2));function p(y,b,x,A,S,_,w,M,C,E,$){let P=(_-2*o)/C,D=(w-2*o)/E,W=_/2-o,V=w/2-o,H=M/2,L=C+1,O=E+1,k=0,j=0,F=new T;for(let Y=0;Y<O;Y++){let X=Y*D-V;for(let Z=0;Z<L;Z++){let U=Z*P-W;F[y]=U*A,F[b]=X*S,F[x]=H,h.push(F.x,F.y,F.z),F[y]=0,F[b]=0,F[x]=M>0?1:-1,u.push(F.x,F.y,F.z),d.push(Z/C),d.push(1-Y/E),k+=1}}for(let Y=0;Y<E;Y++)for(let X=0;X<C;X++){let Z=f+X+L*Y,U=f+X+L*(Y+1),ne=f+(X+1)+L*(Y+1),ee=f+(X+1)+L*Y;c.push(Z,U,ee),c.push(U,ne,ee),j+=6}l.addGroup(m,j,$),m+=j,f+=k}function g(y,b,x,A,S,_,w,M,C,E,$){let P=(w-2*o)/E,D=w/2-o,W=M/2-o,V=C/2,H=E+1,L=0,O=0,k=new T,j=new T;for(let F=0;F<a+1;F++){let Y=F/a*p1,X=Math.sin(Y)*o,Z=(1-Math.cos(Y))*o,U=Math.sin(Y),ne=Math.cos(Y);k[b]=(W+X)*S,k[x]=(V-Z)*_,j[y]=0,j[b]=U*Math.sign(k[b]),j[x]=ne*Math.sign(k[x]);for(let ee=0;ee<H;ee++){let te=ee*P-D;k[y]=te*A,h.push(k.x,k.y,k.z),u.push(j.x,j.y,j.z),d.push(ee/E),d.push(0),L+=1}}for(let F=0;F<a;F++)for(let Y=0;Y<E;Y++){let X=f+Y+H*F,Z=f+Y+H*(F+1),U=f+(Y+1)+H*(F+1),ne=f+(Y+1)+H*F;c.push(X,Z,ne),c.push(Z,U,ne),O+=6}l.addGroup(m,O,$),m+=O,f+=L}function v(y,b,x){let A=new T,S=new T(e/2,t/2,r/2);S.subScalar(o);let _=[],w=y*b*x>0?(C,E,$)=>c.push(C,E,$):(C,E,$)=>c.push(C,$,E);for(let C=0;C<=a;C++){let E=[],$=p1*(1-C/a),P=Math.cos($),D=Math.sin($),W=0;for(let V=0;V<=C;V++){let H=Math.cos(W),L=Math.sin(W);A.x=P*H,A.y=D,A.z=P*L;let O=S.clone().addScaledVector(A,o);h.push(y*O.x,b*O.y,x*O.z),u.push(y*A.x,b*A.y,x*A.z),d.push(0,0),E.push(f++),W+=p1/C}_.push(E)}let M=_.length-1;for(let C=0;C<M;C++){let E=_[C],$=_[C+1],P=E.length-1;w(E[0],$[1],$[0]);for(let D=1;D<=P;D++)w(E[D-1],E[D],$[D]),w(E[D],$[D+1],$[D])}}}},g2=class extends at{constructor(e=[],t=[],r="",i=1,n=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),h(),this.setAttribute("position",new $e(o,3)),this.setAttribute("normal",new $e(l,3)),this.setAttribute("uv",new $e(a,2));return;function c(){var H;n=Math.min(1-1e-5,n),n==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],d=new T,f=d.clone(),m=new An,p=n*i,g=i-p,v=s+1,y=new T,b=(L,O)=>y.subVectors(L,O).normalize(),x=(L,O)=>Array(L).fill(void 0).map(O),A=x(e.length/3,(L,O)=>new T().fromArray(e,O*3).setLength(i)),S=[],_=1e6;for(let L=0;L<A.length;L++){let O=A[L],k=[],j,F,Y,X=1e10,Z=-1;for(;(Z=t.indexOf(L,Z+1))!=-1;){let te=Z-Z%3;j=t[te+(Z+1)%3],F=t[te+(Z+2)%3],Y=O.distanceToSquared(A[j]),X=Math.min(X,Y),k.push([j,F,Y])}X+=1e-6;let U=[],ne=0,ee=k.length;for(let te=0;te<ee;te++){[j,F,Y]=k[ne];let Q=((H=S[j])==null?void 0:H.includes(L))==!0;Y<=X&&U.push(j+ +Q*_),ne=k.findIndex(de=>de[0]==F)}S.push(U)}let w=[];{let L=0,O=0,k,j,F=u==3;for(let Y=0;Y<=s;Y++){k=Y*(Y+1)/2,j=(Y+1)*(Y+2)/2;for(let X=0;X<s-Y;X++)[L,O]=[k+X+Y+2,j+X+Y+3],w.push(k,j,...F?[O,k]:[L,j],O,L),[k,j]=[L,O];w.push(k,j,k+s+2)}}let M=d.clone(),C=d.clone(),E=d.clone(),$=d.clone(),P=d.clone(),D=[],W=x(A.length,()=>x(u,()=>d.clone()));for(let L=0;L<A.length;L++){d.copy(A[L]).normalize(),M.copy(d).multiplyScalar(g);let O=S[L];for(let U=0;U<O.length;U++){let ne=O[U],ee=O[(U+1)%u];m.setFromPointsAndIndices(A,L,ne%_,ee%_),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(M,W[L][U])}let k=[],j=[],F=[],Y=new T;s==0&&[...W[L]].reduce((U,ne)=>U.add(ne),Y).multiplyScalar(1/u);for(let U=0;U<u;U++){let ne=[],ee=(U-1+u)%u,te=W[L][ee],Q=W[L][U];d.copy(te).sub(M),f.copy(Q).sub(M);let de=M.angleTo(d),le=d.angleTo(f),ce=Math.cos(de)*p;s==0?C.copy(Y):C.copy(M).setLength(g+ce),j.push(ce);let ge=[C,te,Q];for(let fe=0;fe<2;fe++){let Fe=ge[fe],Ae=ge[fe+1];$.subVectors(Fe,M),P.subVectors(Ae,M),E.crossVectors($,P).normalize();for(let Ee=0;Ee<v;Ee++){let ke=[de,le][fe]*Ee/v;d.copy($).applyAxisAngle(E,ke).add(M),k.push(d.clone()),fe&&(b(d,M),ne.push([Ee==0?Fe:d.clone(),y.clone()]))}fe&&(b(Ae,M),ne.push([Ae,y.clone()]))}F.push(ne)}D.push(F);let X=2*v,Z=2;for(let U=0;U<u;U++){let ne=X*U,ee=X*((U+1)%u),te=[k[ne]];for(let de=1;de<v;de++){$=k[ne+de],P=k[ee+de],te.push($);for(let le=1,ce=de-Z+1;le<=ce;le++)d.lerpVectors($,P,le/(ce+1)),d.sub(M).setLength(j[U]).add(M),te.push(d.clone());te.push(P)}for(let de=0;de<v;de++)te.push(k[de+v+ne]);te.push(k[ee+v]);let Q=w.map(de=>te[de]);o.push(...Q.map(de=>[de.x,de.y,de.z]).flat()),l.push(...Q.map(de=>(b(de,M),[y.x,y.y,y.z])).flat())}}let V=[];for(let L=0;L<S.length;L++)for(let O=0;O<u;O++){let k=S[L][O];if(k<_){let j=S[k].findIndex(X=>X%_==L),F=D[L][O],Y=D[k][j];for(let X=0;X<v;X++){let Z=F[X],U=Y[v-X],ne=F[X+1],ee=Y[v-(X+1)];[Z,U,ne,ne,U,ee].forEach(te=>{o.push(te[0].x,te[0].y,te[0].z),l.push(te[1].x,te[1].y,te[1].z)})}V.push(F[0][0],Y[v][0],F[v][0],Y[0][0])}}for(;V.length;){let L,O,k,j;[L,O]=V.splice(0,2);let F=[L];for(;L!=O;)F.push(O),k=V.indexOf(O),j=k%2,O=V.splice(k-j,2)[1-j];y.subVectors(F[0],F[1]).cross(d.subVectors(F[0],F[2])).normalize();let Y=y.dot(F[0])<0;Y&&y.negate();for(let X=1;X<=F.length-2;X++)[F[X+ +Y],F[X+1-+Y],F[0]].forEach(Z=>{o.push(Z.x,Z.y,Z.z),l.push(y.x,y.y,y.z)})}}function h(){let u=new T;for(let S=0;S<o.length;S+=3){u.x=o[S+0],u.y=o[S+1],u.z=o[S+2];let _=x(u)/2/Math.PI+.5,w=A(u)/Math.PI+.5;a.push(_,1-w)}let d=new T,f=new T,m=new T,p=new T,g=new K,v=new K,y=new K,b=(S,_,w,M)=>{M<0&&S.x===1&&(a[_]=S.x-1),w.x===0&&w.z===0&&(a[_]=M/2/Math.PI+.5)};for(let S=0,_=0;S<o.length;S+=9,_+=6){d.set(o[S+0],o[S+1],o[S+2]),f.set(o[S+3],o[S+4],o[S+5]),m.set(o[S+6],o[S+7],o[S+8]),g.set(a[_+0],a[_+1]),v.set(a[_+2],a[_+3]),y.set(a[_+4],a[_+5]),p.copy(d).add(f).add(m).divideScalar(3);let w=x(p);b(g,_+0,d,w),b(v,_+2,f,w),b(y,_+4,m,w)}for(let S=0;S<a.length;S+=6){let _=a[S+0],w=a[S+2],M=a[S+4],C=Math.max(_,w,M),E=Math.min(_,w,M);C>.9&&E<.1&&(_<.2&&(a[S+0]+=1),w<.2&&(a[S+2]+=1),M<.2&&(a[S+4]+=1))}function x(S){return Math.atan2(S.z,-S.x)}function A(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}}static fromJSON(e){return new g2(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},mle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:o}=e.parameters,a=n===0&&s!==0?new gB(t*.5,s,o):new UO(t*.5,n);return a.scale(1,r/t,i/t),Object.assign(a,{userData:{...e,type:"DodecahedronGeometry"}})}},gB=class extends g2{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,e,t,r),this.type=a}static fromJSON(e){return new gB(e.radius,e.corner,e.cornerSides)}},Nd=1e-12,v2=class{constructor(e){this.position=new K,this.startPosition=new K,this.uuid=vt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new v2(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Sw=class extends v2{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Sw(this.parent).copy(this)}},Cu=class extends v2{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Sw(this),new Sw(this))}static create(e,t){let r=new Cu(e,new K(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new Cu(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new K,t=new K){let[r,i]=this.computeTangents();return r&&i&&(P3(r,e),P3(i,t)),[e,t]}computeTangent(e=new K){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new K){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function P3(e,t=new K){let r=e.length();return t.set(-e.y/r,e.x/r)}var y2=e=>e,hd=new K,h0=new K,gle=new K,vle=new K,yle=new K,xle=new K,vB=new T,yB=new T;function ble(e){let t=new K;t.addVectors(e.v0,hd.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new K;return r.addVectors(e.v2,h0.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new As(e.v0,t,r,e.v2)}function nh(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function wle(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Sle(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function xB(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),s=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-s*s)/(2*n*i))}function _le(e,t,r){return L3(e,t)&&L3(t,r)&&_w(e.position,t.position,r.position)}function _w(e,t,r){return hd.copy(t).sub(e).cross(h0.copy(r).sub(e))===0}function Ale(e,t,r,i,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,a=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(e.y-t.y)/s,c=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return i.set(a+l,o+c),n.set(a-l,o-c),[i,n]}function Mle(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function Ele(e,t,r,i,n,s){let o=t.x-e.x,a=t.y-e.y,l=r.x-e.x,c=r.y-e.y,h=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return xB(t,e,r)>Math.PI&&(h*=-1),nh(c,a)?u=(a+c)*(i/h-.5)*8/3/(o-l):u=(o+l)*(i/h-.5)*8/3/(c-a),n.set(t.x-u*a,t.y+u*o),s.set(r.x+u*c,r.y-u*l),[n,s]}function D3(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function L3(e,t){return _w(e.position,e.controls[1].position,t.position)&&_w(e.position,t.controls[0].position,t.position)}function Cle(e,t,r,i,n=.5){let s=hd.subVectors(t,e).multiplyScalar(n).add(e),o=h0.subVectors(r,t).multiplyScalar(n).add(t),a=gle.subVectors(i,r).multiplyScalar(n).add(r),l=s,c=vle.subVectors(o,s).multiplyScalar(n).add(s),h=yle.subVectors(a,o).multiplyScalar(n).add(o),u=a,d=xle.subVectors(h,c).multiplyScalar(n).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,i.x,i.y]}function Tle(e,t,r=12,i=!0){let n=yB.set(0,0,0),s,o=0;for(let a=0;a<t.length;a++){let l=y2(t[a]),c=hd,h=Cl(l,r);for(let u=0;u<=h;u++)if(l instanceof As||l instanceof Hl||l instanceof $s){if(l.getPoint(u/h,c),n.set(c.x,c.y,0),s!==void 0&&Sle(s,n))continue;s===void 0&&(s=vB),s.copy(n),e.setXYZ(o,n.x,n.y,n.z),o++}}return i&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),e}function Ple(e,t,r,i=12,n=!0){let s=yB.set(0,0,0),o=0,a=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let c,h=y2(t[l]),u=hd,d=Cl(h,i);a.push(d);for(let f=0;f<=d;f++)if(h instanceof As||h instanceof Hl||h instanceof $s){if(h.getPoint(f/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=vB:(e.setXYZ(o,c.x,c.y,c.z),o++,e.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return n&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),a}function $3(e,t=12,r=!1){let i=[];for(let n=0,s=e.length;n<s;n++){let o=e[n],a=0;if(r&&o.roundedCurveCorner!==void 0){let l=Cl(o.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=Cl(o.curveAfter,t)),i.push(a)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=Cl(e[0].roundedCurveCorner,t)*.5),i}function Cl(e,t=12){return e&&e instanceof Xv?t*2:e&&(e instanceof $s||e instanceof zO)?1:e&&e instanceof N_?t*e.points.length:t}function Dle(e,t,r=12,i=!0){let n,s=0;for(let o=0;o<t.length;o++){let a=y2(t[o]),l=Cl(a,r),c=hd;for(let h=0;h<=l;h++)if(a instanceof As||a instanceof Hl||a instanceof $s){if(a.getPoint(h/l,c),n!==void 0&&wle(n,c,Nd))continue;n===void 0&&(n=h0),n.copy(c),e.push(c.x,c.y),s++}}return nh(e[0],e[e.length-2],Nd)&&nh(e[1],e[e.length-1],Nd)&&(e.pop(),e.pop()),i&&s>1&&!(nh(e[s-1],e[1],Nd)&&nh(e[s-2],e[0],Nd))&&(e.push(e[0],e[1]),s++),e}var m1=new K,Lle=new K,$le=new K,Ile=new K,Rle=new K,kle=new K,xr=class extends El{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.eventDispatcher=new ki,this.plane=new wn(new T(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=vt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new xr;return i.isClosed=e.isClosed,i.points=e.points.map(n=>Cu.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>xr.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,s=this.shapeHoles.length;n<s;n++){let o=this.shapeHoles[n],a=o.points.length,l=o.getPointIndexById(e);if(l<0)i+=a;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=e-t;if(s<=n.points.length-1)return n.points[s];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=m1.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];s.position.multiply(r),s.controls[0].position.multiply(r),s.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update(!1)}createPoint(e,t=0,r=vt.generateUUID()){let i;e instanceof K?i=e:i=new K(e,t);let n=new Cu(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(e=!0){for(let t=0,r=this.shapeHoles.length;t<r;t++)this.shapeHoles[t].update(!1);this._update(e)}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return Tle(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=$3(this.points,e,!1),this.roundedCurveDivisions=$3(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return Ple(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),Dle(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=Cl(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=i.reduce((o,a)=>o+a,0));for(let o=0,a=i.length;o<a;o++){let l=i[o];if(s<r+l)return[o,(s-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,o=s[e];if(D3(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(m1.set(r.x,r.y))/l}let a=0;for(let l=0;l<e;l++)a+=s[l];return(t-a)/o}dispose(){this.eventDispatcher=null}_applyCurveForPoint(e,t){D3(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(e=!0){var r,i,n;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let s=0,o=this.points.length;s<o;s++){let a=this.points[s];if(s===0)this.moveTo(a.position.x,a.position.y);else{let l=this.points[s-1];this._applyCurveForPoint(a,l)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let s=this.points[0],o=this.points[this.points.length-1];this._applyCurveForPoint(s,o)}if(this.points.length>2){let s=0;for(let o=0,a=this.points.length;o<a;o++){let l=this.points[o],c=(r=this.points[o-1])!=null?r:this.points[this.points.length-1],h=(i=this.points[o+1])!=null?i:this.points[0],u=l.roundness,d=c&&h&&_le(c,l,h);if(!l.controlsMoved()&&u>0&&!d){let f=l.curveBefore,m=l.curveAfter;if(f===void 0||m===void 0)continue;let p=l.roundedCurveBefore,g=l.roundedCurveAfter,v=f.getLength(),y=m.getLength(),b=Math.min(u,v*.499),x=Math.min(u,y*.499),A=Math.min(b,x),S=1-A/v,_=A/y,w=f.getPointAt(S,m1),M=m.getPointAt(_,Lle);this._subSplitCurve(f,p,S,w,void 0),this._subSplitCurve(m,g,_,void 0,M);let C;if(this.useCubicForRoundedCorners){let E=xB(w,l.position,M)/2,$=Math.tan(E)*w.distanceTo(l.position),[P,D]=Ale(w,M,$,$le,Ile),W=Mle(P,D,l.position),[V,H]=Ele(W,w,M,$,Rle,kle);C=new As(w.clone(),V.clone(),H.clone(),M.clone())}else C=new Hl(w.clone(),l.position.clone(),M.clone());l.roundedCurveCorner=C,this.roundedCurves.splice(o+s,0,C),s++}}}e&&((n=this.eventDispatcher)==null||n.dispatchEvent({type:"update"}))}_subSplitCurve(e,t,r,i,n){if(e instanceof $s)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let s=e,o=t,a=s.getUtoTmapping(r,0),l=Cle(s.v0,s.v1,s.v2,s.v3,a);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),n!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return t}clone(){let e=new xr(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,s=e.points[n+0],o=e.points[n+1],a=e.points[n+2],l=e.points[n+3],c=e.points[n+4],h=e.points[n+5],u=e.points[n+6],d=new Cu(vt.generateUUID(),new K(s,o));d.controls[0].position.set(a,l),d.controls[1].position.set(c,h),d.roundness=u,this.points.push(d)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new xr;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof As&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],s,o;for(s=0,o=i.length;s<o;s++)i[s]instanceof Hl&&(i[s]=ble(i[s]));for(s=0,o=i.length;s<o;s++){let c=i[s],h=s>0?i[s-1]:null,u;c instanceof As?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof $s&&(u=this.createPoint(c.v1)),u!==void 0&&(h!==null&&t(u,h),n.push(u))}let a=i[i.length-1],l=!1;return a instanceof As?a.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(a.v2),l=!0):a instanceof $s&&a.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof El&&(this.shapeHoles=e.holes.map(i=>{let n=new xr;return n.fromShape(i),n})),this.update(),this}},Aw=Math.PI*2;function g1({x:e,y:t},r,i,n,s){return{x:e*r+n,y:t*i+s}}function Ole(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:s+o*r,y:o-s*r},{x:s,y:o}]}function I3(e,t,r,i){let n=e*i-t*r<0?-1:1,s=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(s)}function Ble(e,t,r,i,n,s,o,a,l,c){let h=Math.pow(n,2),u=Math.pow(s,2),d=Math.pow(o,2),f=Math.pow(a,2),m=h*u-h*f-u*d;m<0&&(m=0),m/=h*f+u*d,m=Math.sqrt(m)*(l===c?-1:1);let p=m*n/s*a,g=m*-s/n*o,v=p+(e+r)/2,y=g+(t+i)/2,b=(o-p)/n,x=(a-g)/s,A=(-o-p)/n,S=(-a-g)/s,_=I3(1,0,b,x),w=I3(b,x,A,S);return!c&&w>0&&(w-=Aw),c&&w<0&&(w+=Aw),{centerx:v,centery:y,ang1:_,ang2:w}}function zle({px:e,py:t,cx:r,cy:i,rx:n,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(n===0||s===0)return[];let c=(e-r)/2,h=(t-i)/2;if(c===0&&h===0)return[];n=Math.abs(n),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(n,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(n*=Math.sqrt(u),s*=Math.sqrt(u));let d=Ble(e,t,r,i,n,s,c,h,o,a),{ang1:f,ang2:m}=d,{centerx:p,centery:g}=d,v=Math.abs(m)/(Aw/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);m/=y;for(let b=0;b<y;b++)l.push(Ole(f,m)),f+=m;return l.map(b=>{let{x,y:A}=g1(b[0],n,s,p,g),{x:S,y:_}=g1(b[1],n,s,p,g),{x:w,y:M}=g1(b[2],n,s,p,g);return{x1:x,y1:A,x2:S,y2:_,x:w,y:M}})}var hr;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(hr||(hr={}));var Kr;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Kr||(Kr={}));function Qe(e,t){if(!e)throw t||"Assertion Failed!"}var Xe=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){Qe(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?n<s?r.t-t.t+(t.t-i.t)*(n/(n+s)):r.t-i.t+(i.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,r,i){Qe(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?(r.t-i.t)*n+(r.t-t.t)*s:0},e.transEval=function(t,r,i){Qe(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?n<s?r.s-t.s+(t.s-i.s)*(n/(n+s)):r.s-i.s+(i.s-t.s)*(s/(n+s)):0},e.transSign=function(t,r,i){Qe(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?(r.s-i.s)*n+(r.s-t.s)*s:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,s){var o,a,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(o=e.edgeEval(t,i,r),a=e.edgeEval(i,r,n),o+a<0&&(o=-o,a=-a),s.s=e.interpolate(o,i.s,a,r.s)):(o=e.edgeSign(t,i,r),a=-e.edgeSign(t,n,r),o+a<0&&(o=-o,a=-a),s.s=e.interpolate(o,i.s,a,n.s)):s.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(o=e.transEval(t,i,r),a=e.transEval(i,r,n),o+a<0&&(o=-o,a=-a),s.t=e.interpolate(o,i.t,a,r.t)):(o=e.transSign(t,i,r),a=-e.transSign(t,n,r),o+a<0&&(o=-o,a=-a),s.t=e.interpolate(o,i.t,a,n.t)):s.t=(i.t+r.t)/2},e}(),Fd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),cm=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),Uc=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),R3=function(){function e(){var t=new Uc,r=new Fd,i=new cm(0),n=new cm(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new cm(0),i=new cm(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;Qe(n,"Vertex can't be null!");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r;var o=r;do o.Org=n,o=o.Onext;while(o!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;Qe(n,"Face can't be null");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var o=r;do o.Lface=n,o=o.Lnext;while(o!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var s=t.prev,o=t.next;o.prev=s,s.next=o},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var s=t.prev,o=t.next;o.prev=s,s.next=o},e.prototype.makeEdge=function(){var t=new Uc,r=new Uc,i=new Fd,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var s=new Uc;this.makeVertex_(s,r,t.Org),t.Org.anEdge=t}if(!i){var o=new Fd;this.makeFace_(o,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new Fd;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new Uc;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),s=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,r),n.Org=t.Dst,s.Org=r.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!i){var o=new Fd;this.makeFace_(o,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,s,o,a;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=r);o=t.prev,a=t.next,a.prev=o,o.next=a},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,s,o,a,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,o=i.Org;n=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(r),l=this.countFaceVerts_(s.Lface),a+l-2<=t&&Xe.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&Xe.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===o);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,s,o,a,l,c;for(s=t,s=t;(n=s.next)!==t;s=n){Qe(n.prev===s),l=n.anEdge;do Qe(l.Sym!==l),Qe(l.Sym.Sym===l),Qe(l.Lnext.Onext.Sym===l),Qe(l.Onext.Sym.Lnext===l),Qe(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(Qe(n.prev===s&&n.anEdge===null),a=r,a=r;(o=a.next)!==r;a=o){Qe(o.prev===a),l=o.anEdge;do Qe(l.Sym!==l),Qe(l.Sym.Sym===l),Qe(l.Lnext.Onext.Sym===l),Qe(l.Onext.Sym.Lnext===l),Qe(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Qe(o.prev===a&&o.anEdge===null),c=i,c=i;(l=c.next)!==i;c=l)Qe(l.Sym.next===c.Sym),Qe(l.Sym!==l),Qe(l.Sym.Sym===l),Qe(l.Org!==null),Qe(l.Dst!==null),Qe(l.Lnext.Onext.Sym===l),Qe(l.Onext.Sym.Lnext===l);Qe(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),k3=function(){function e(){this.handle=null}return e}(),O3=function(){function e(){this.key=null,this.node=0}return e}(),Nle=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new k3,this.handles[i]=new O3;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,s,o;for(n=r[t].handle;;){if(o=t<<1,o<this.size&&this.leq(i[r[o+1].handle].key,i[r[o].handle].key)&&++o,Qe(o<=this.max),s=r[o].handle,o>this.size||this.leq(i[n].key,i[s].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=o}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,s,o;for(n=r[t].handle;;){if(o=t>>1,s=r[o].handle,o===0||this.leq(i[s].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=o}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new k3;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new O3}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;Qe(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),v1=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),B3=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),Fle=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new B3,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new B3;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Ule=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,s=r.eUp,o=i.eUp;if(s.Dst===n)return o.Dst===n?Xe.vertLeq(s.Org,o.Org)?Xe.edgeSign(o.Dst,s.Org,o.Org)<=0:Xe.edgeSign(s.Dst,o.Org,s.Org)>=0:Xe.edgeSign(o.Dst,n,o.Org)<=0;if(o.Dst===n)return Xe.edgeSign(s.Dst,n,s.Org)>=0;var a=Xe.edgeEval(s.Dst,n,s.Org),l=Xe.edgeEval(o.Dst,n,o.Org);return a>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&Qe(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){Qe(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new v1;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case hr.ODD:return(r&1)!==0;case hr.NONZERO:return r!==0;case hr.POSITIVE:return r>0;case hr.NEGATIVE:return r<0;case hr.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,s=null,o=r,a=r.eUp;o!==i;){if(o.fixUpperEdge=!1,s=e.regionBelow(o),n=s.eUp,n.Org!=a.Org){if(!s.fixUpperEdge){e.finishRegion(t,o);break}n=t.mesh.connect(a.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}a.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(a,n)),e.finishRegion(t,o),a=s.eUp,o=s}return a},e.addRightEdges=function(t,r,i,n,s,o){var a,l,c,h,u=!0;c=i;do Qe(Xe.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,r,c.Sym),c=c.Onext;while(c!==n);for(s===null&&(s=e.regionBelow(r).eUp.Rprev),l=r,h=s;a=e.regionBelow(l),c=a.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(h.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=e.isWindingInside(t,a.windingNumber),l.dirty=!0,!u&&e.checkForRightSplice(t,l)&&(e.addWinding(c,h),e.deleteRegion(t,l),t.mesh.delete(h)),u=!1,l=a,h=c;l.dirty=!0,Qe(l.windingNumber-c.winding===a.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=Xe.vertL1dist(r,t),s=Xe.vertL1dist(i,t),o=.5*s/(n+s),a=.5*n/(n+s);t.coords[0]+=o*r.coords[0]+a*i.coords[0],t.coords[1]+=o*r.coords[1]+a*i.coords[1],t.coords[2]+=o*r.coords[2]+a*i.coords[2]},e.getIntersectData=function(t,r,i,n,s,o){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,s,o)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp;if(Xe.vertLeq(n.Org,s.Org)){if(Xe.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;Xe.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),r.dirty=i.dirty=!0)}else{if(Xe.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,o;if(Qe(!Xe.vertEq(n.Dst,s.Dst)),Xe.vertLeq(n.Dst,s.Dst)){if(Xe.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,o=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,o),o.Lface.inside=r.inside}else{if(Xe.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;r.dirty=i.dirty=!0,o=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),o.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,o=n.Org,a=s.Org,l=n.Dst,c=s.Dst,h,u,d=new Uc,f,m;if(Qe(!Xe.vertEq(c,l)),Qe(Xe.edgeSign(l,t.event,o)<=0),Qe(Xe.edgeSign(c,t.event,a)>=0),Qe(o!==t.event&&a!==t.event),Qe(!r.fixUpperEdge&&!i.fixUpperEdge),o===a||(h=Math.min(o.t,l.t),u=Math.max(a.t,c.t),h>u))return!1;if(Xe.vertLeq(o,a)){if(Xe.edgeSign(c,o,a)>0)return!1}else if(Xe.edgeSign(l,a,o)<0)return!1;return e.debugEvent(t),Xe.intersect(l,o,c,a,d),Qe(Math.min(o.t,l.t)<=d.t),Qe(d.t<=Math.max(a.t,c.t)),Qe(Math.min(c.s,l.s)<=d.s),Qe(d.s<=Math.max(a.s,o.s)),Xe.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),f=Xe.vertLeq(o,a)?o:a,Xe.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),Xe.vertEq(d,o)||Xe.vertEq(d,a)?(e.checkForRightSplice(t,r),!1):!Xe.vertEq(l,t.event)&&Xe.edgeSign(l,t.event,d)>=0||!Xe.vertEq(c,t.event)&&Xe.edgeSign(c,t.event,d)<=0?c===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),i=r,r=e.topRightRegion(r),m=e.regionBelow(r).eUp.Rprev,i.eUp=s.Oprev,s=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,s.Onext,n.Rprev,m,!0),!0):(Xe.edgeSign(l,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),Xe.edgeSign(c,t.event,d)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=d.s,n.Org.t=d.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,o,l,a,c),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,s;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,s=i.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionBelow(r),s=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,s=i.Onext,o=e.regionBelow(r),a=r.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&e.checkForIntersect(t,r),Xe.vertEq(a.Org,t.event)&&(t.mesh.splice(s.Oprev,a),r=e.topLeftRegion(t,r),s=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),o),c=!0),Xe.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,o,null),c=!0),c){e.addRightEdges(t,r,i.Onext,s,s,!0);return}Xe.vertLeq(l.Org,a.Org)?n=l.Oprev:n=a,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,s,o,a,l;if(n=r.eUp,Xe.vertEq(n.Org,i)){Qe(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!Xe.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}Qe(!1),r=e.topRightRegion(r),l=e.regionBelow(r),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(Qe(s!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=s.Oprev),t.mesh.splice(i.anEdge,o),Xe.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,r,o.Onext,a,s,!0)},e.connectLeftVertex=function(t,r){var i,n,s,o,a,l,c=new v1;if(c.eUp=r.anEdge.Sym,i=t.dict.search(c).key,n=e.regionBelow(i),!!n){if(o=i.eUp,a=n.eUp,Xe.edgeSign(o.Dst,r,o.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(s=Xe.vertLeq(a.Dst,o.Dst)?i:n,i.inside||s.fixUpperEdge){if(s===i)l=t.mesh.connect(r.anEdge.Sym,o.Lnext);else{var h=t.mesh.connect(a.Dnext,r.anEdge);l=h.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);Qe(n!==null);var s=e.regionBelow(n),o=s.eUp,a=e.finishLeftRegions(t,s,null);a.Onext===o?e.connectRightVertex(t,n,a):e.addRightEdges(t,n,a.Onext,o,o,!0)},e.addSentinel=function(t,r,i,n){var s=new v1,o=t.mesh.makeEdge();o.Org.s=i,o.Org.t=n,o.Dst.s=r,o.Dst.t=n,t.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new Fle(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,s=t.bmax[0]+r,o=t.bmin[1]-i,a=t.bmax[1]+i;e.addSentinel(t,n,s,o),e.addSentinel(t,n,s,a)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(Qe(r.fixUpperEdge),Qe(++i===1)),Qe(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,s=t.mesh.eHead;for(r=s.next;r!==s;r=i)i=r.next,n=r.Lnext,Xe.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,s=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)s++;for(s+=8,r=t.pq=new Nle(s,Xe.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,s;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,s=i.anEdge,Qe(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!Xe.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Hle=function(){function e(){this.mesh=new R3,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=hr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,s,o,a,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],m=[null,null,null],p=this.mesh.vHead;r=p.next;for(var g=0;g<3;++g)s=r.coords[g],c[g]=s,m[g]=r,l[g]=s,f[g]=r;for(r=p.next;r!==p;r=r.next)for(var v=0;v<3;++v)s=r.coords[v],s<c[v]&&(c[v]=s,m[v]=r),s>l[v]&&(l[v]=s,f[v]=r);var y=0;if(l[1]-c[1]>l[0]-c[0]&&(y=1),l[2]-c[2]>l[y]-c[y]&&(y=2),c[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(a=0,i=m[y],n=f[y],h[0]=i.coords[0]-n.coords[0],h[1]=i.coords[1]-n.coords[1],h[2]=i.coords[2]-n.coords[2],r=p.next;r!==p;r=r.next)u[0]=r.coords[0]-n.coords[0],u[1]=r.coords[1]-n.coords[1],u[2]=r.coords[2]-n.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>a&&(a=o,t[0]=d[0],t[1]=d[1],t[2]=d[2]);a<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(h)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,s=0,o=t.next;o!==t;o=o.next)if(n=o.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==o.anEdge);if(s<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,s=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),s=!0),i=this.sUnit,n=this.tUnit;var o=this.longAxis_(r);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,n[o]=0,n[(o+1)%3]=0,n[(o+2)%3]=r[o]>0?1:-1;for(var a=t.next;a!==t;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,n);s&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Xe.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Xe.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var s=void 0;i.Lnext!==n;)if(Xe.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(Xe.edgeGoesLeft(n.Lnext)||Xe.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(Xe.edgeGoesRight(i.Lprev)||Xe.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=t.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?r:-r:i?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var s,o=0,a=0,l;i>3&&t.mergeConvexFaces(i);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var h=t.fHead.next;h!==t.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,r===Kr.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*n,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=t.vHead.next;c!==t.vHead;c=c.next)if(c.n!==-1){var u=c.n*n;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],n>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=t.fHead.next;h!==t.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(r===Kr.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var m=l;m<i;++m)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){n=i=a.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){o=0,n=i=a.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==n);this.elements[h++]=s,this.elements[h++]=o,s+=o}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new R3),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,s,o){if(t===void 0&&(t=hr.ODD),r===void 0&&(r=Kr.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Ule.computeInterior(this,o);var a=this.mesh;return r===Kr.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),r===Kr.BOUNDARY_CONTOURS?this.outputContours_(a,n):this.outputPolymesh_(a,r,i,n),!0},e}();function sh(e){var t=e.windingRule,r=t===void 0?hr.ODD:t,i=e.elementType,n=i===void 0?Kr.POLYGONS:i,s=e.polySize,o=s===void 0?3:s,a=e.vertexSize,l=a===void 0?2:a,c=e.normal,h=c===void 0?[0,0,1]:c,u=e.contours,d=u===void 0?[]:u,f=e.strict,m=f===void 0?!0:f,p=e.debug,g=p===void 0?!1:p;if(!d&&m)throw new Error("Contours can't be empty");if(d){var v=new Hle;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(r,n,o,l,h,m),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}hr.ODD;hr.NONZERO;hr.POSITIVE;hr.NEGATIVE;hr.ABS_GEQ_TWO;Kr.POLYGONS;Kr.CONNECTED_POLYGONS;Kr.BOUNDARY_CONTOURS;var bB=class extends at{constructor(e,t=12,r={}){var d,f,m;super(),this.type="ShapeGeometry",this.windingRule=hr.ODD,this.elementType=Kr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:hr.ODD,elementType:Kr.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(p=>p.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let p=0,g=i.length/2;p<g;p++){let v=p*2,y=i[v+0],b=i[v+1];if(l!==void 0&&y!==l&&(o=!1),c!==void 0&&b!==c&&(a=!1),l=y,c=b,!o&&!a)break}!o&&!a&&(s=sh({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let h=(d=s==null?void 0:s.vertexCount)!=null?d:1,u=(f=s==null?void 0:s.elementCount)!=null?f:1;if(this._positionAttribute=new ft(new Float32Array(h*3),3),this._normalAttribute=new ft(new Float32Array(h*3),3),this._uvAttribute=new ft(new Float32Array(h*2),2),this._indexAttribute=new ft(new Uint32Array(u*3),1),s){let p=1/0,g=-1/0,v=1/0,y=-1/0;for(let A=0,S=h;A<S;A++){let _=A*2,w=s.vertices[_+0],M=s.vertices[_+1];w<p&&(p=w),w>g&&(g=w),M<v&&(v=M),M>y&&(y=M)}let b=g-p,x=y-v;for(let A=0,S=h;A<S;A++){let _=A*2,w=s.vertices[_+0],M=s.vertices[_+1],C=(w-p)/b,E=(M-v)/x;this._positionAttribute.setXYZ(A,w,M,0),this._normalAttribute.setXYZ(A,0,0,1),this._uvAttribute.setXY(A,C,E)}for(let A=0,S=u;A<S;A++){let _=A*3,w=s.elements[_+0],M=s.elements[_+1],C=s.elements[_+2];this._indexAttribute.setX(_+0,w),this._indexAttribute.setX(_+1,M),this._indexAttribute.setX(_+2,C)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((m=s==null?void 0:s.elementCount)!=null?m:1)*3)}clone(){let e=new bB(this._shape,this._curveSegments);return e.userData=B4(this.userData),e}},Mw=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*Mw.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let r=e*Mw.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(i,s*n,3*e);s+=3*e;let a=new Float32Array(i,s*n,3*e);s+=3*e;let l=new Float32Array(i,s*n,2*e);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=o,this.normals=a,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},wB=Mw;wB.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var y1=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),SB=class extends at{constructor(e,t,r=0,i=12,n=3){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=r,this._curveSegments=i,this._bevelSegmentsInput=n,r<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(r,t/2-1e-12),this._bevelSegments=Math.floor(n));let s=this._shape.extractShapePointsToFlatArray([],i),o=this._shape.shapeHoles.map(A=>{let S=A.extractShapePointsToFlatArray([],i),_=[];for(let w=S.length-1;w>=1;w-=2){let M=S[w-1],C=S[w-0];_.push(M,C)}return _}),a=sh({windingRule:hr.ODD,elementType:Kr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]}),l=sh({windingRule:hr.ODD,elementType:Kr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...o]});if(!a)throw new Error("error generating geometry");let c=a.elementCount;if(l){a.elementCount+=l.elementCount;for(let A=0;A<l.elements.length;A++){let S=l.elements[A],_=A%2===0?a.vertexCount:0;a.elements.push(S+_)}for(let A=0;A<l.vertexIndices.length;A++){let S=l.vertexIndices[A],_=a.vertexCount;a.vertexIndices.push(S+_)}for(let A=0;A<l.vertices.length;A++){let S=l.vertices[A];a.vertices.push(S)}}let h=1/0,u=-1/0,d=1/0,f=-1/0;for(let A=0,S=a.vertexCount;A<S;A++){let _=A*2,w=a.vertices[_+0],M=a.vertices[_+1];w<h&&(h=w),w>u&&(u=w),M<d&&(d=M),M>f&&(f=M)}this._minX=h,this._minY=d,this._width=u-h,this._height=f-d;let m=a.vertexCount*2*(2+this._bevelSegments);this._buffer=new wB(m);let p=[],g=[];for(let A=a.elementCount-1;A>=0;A--){let S=A>=c,_=A*2,w=a.elements[_+0],M=a.elements[_+1],C=w+M,E={start:w,count:M,normals:[],continuous:[],concave:[]},$=w,P=C-1,D=w+1,W=this._shape.roundedCurves.length;do{let O=$-w,k=a.vertices[P*2+0],j=a.vertices[P*2+1],F=a.vertices[$*2+0],Y=a.vertices[$*2+1],X=a.vertices[D*2+0],Z=a.vertices[D*2+1],U=F-k,ne=Y-j,ee=Math.sqrt(U*U+ne*ne);U/=ee,ne/=ee;let te=F-X,Q=Y-Z,de=Math.sqrt(te*te+Q*Q);te/=de,Q/=de,E.normals[O*2+0]=-Q,E.normals[O*2+1]=te,E.concave[O]=U*Q-ne*te>0;let le=a.vertexIndices[$];if(Array.isArray(le))E.continuous[O]=!1;else{let[ce,ge]=this._shape.getCurveIndexFromVertexId(le-1,!0);if(ge>0&&ge<1)E.continuous[O]=!0;else{let fe=ge===1?ce+1:ce-1;fe=(fe+W)%W;let Fe=ge===1?0:1,Ae=this._shape.roundedCurves[ce].getTangent(ge),Ee=this._shape.roundedCurves[fe].getTangent(Fe);E.continuous[O]=Ae.dot(Ee)>.95}}S&&(E.normals[O*2+0]*=-1,E.normals[O*2+1]*=-1),[P,$,D]=[$,D,D+1],D>=C&&(D-=M)}while(D!==w+1);let V=[];V.push({bevelI:0,angle:0,size:0,boundary:{vertices:a.vertices.slice(w*2,C*2),vertexCount:M,vertexIndices:new Array(M).fill(!0).map((O,k)=>[k,k]),elements:[0,M],elementCount:1,mesh:null},reverseMap:[],insetPoints:a.vertices.slice(w*2,C*2)});for(let O=1;O<=this._bevelSegments;O++){let k=O/this._bevelSegments*Math.PI/2,j=(1-Math.cos(k))*this._bevelSize,F=[],Y=[],X=0;for(let U=0;U<M;U++){let ne=U*2,ee=(U-1+M)%M*2,te=a.vertices[E.start*2+ne+0],Q=a.vertices[E.start*2+ne+1],de=-E.normals[ee+0]*j,le=-E.normals[ee+1]*j,ce=-E.normals[ne+0]*j,ge=-E.normals[ne+1]*j;if(E.concave[U]||!E.concave[U]&&S){let fe=Math.atan2(le,de),Fe=Math.atan2(ge,ce);Fe>fe&&(Fe-=Math.PI*2);let Ae=Fe-fe;if(E.continuous[U]||S){let Ee=fe+Ae/2,ke=Math.cos(Ee)*j,Ue=Math.sin(Ee)*j;F[2*X+0]=te+ke*(S?-1:1),F[2*X+1]=Q+Ue*(S?-1:1),Y[X]=U,X++}else{let Ee=Math.max(1,Math.floor(i/4*Math.abs(Ae)/Math.PI));for(let ke=0;ke<=Ee;ke++){let Ue=fe+Ae*(ke/Ee),ot=Math.cos(Ue)*j,N=Math.sin(Ue)*j;F[2*X+0]=te+ot,F[2*X+1]=Q+N,Y[X]=U,X++}}}else F[2*X+0]=te+de,F[2*X+1]=Q+le,Y[X]=U,X++,F[2*X+0]=te,F[2*X+1]=Q,Y[X]=U,X++,F[2*X+0]=te+ce,F[2*X+1]=Q+ge,Y[X]=U,X++}let Z=sh({windingRule:hr.POSITIVE,elementType:Kr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[F],edgeCreateCallback:U=>{let ne=U.Org.idx,ee=Y[ne],te=Y[(ne+1)%Y.length];U.idx=[ee,te],U.Sym.idx=[te,ee]},vertexIdCallback:U=>{let ne=U.Lprev.idx;return[ne?ne[1]:0,U.idx[0]]}});if(!Z)throw console.log("Error"),new Error(`error generating bevel geometry for ${O}'th loop`);if(!Z.vertexCount)break;for(let U=0;U<Z.vertexIndices.length;U++){let[ne,ee]=Z.vertexIndices[U];if(ne===ee)continue;let te=ee;ee<ne&&(te+=M);for(let Q=ne;Q<te;Q++){let de=Q%M,le=(Q+1)%M;if(!E.continuous[de]||!E.continuous[le]){Z.vertexIndices[U]=[ne,de],Z.vertexIndices.splice(U+1,0,[le,ee]),Z.vertices.splice((U+1)*2,0,Z.vertices[U*2],Z.vertices[U*2+1]);break}}}V.push({bevelI:O,angle:k,size:j,boundary:Z,reverseMap:Y,insetPoints:F})}let H=(O,k,j)=>{let F=0,Y=O.boundary.vertexIndices.length;for(;F<Y&&j(O.boundary.vertexIndices[k]);)k=(k+1)%Y,F++;return F},L=p.length;for(let O=1;O<V.length;O++){let k=V[O-1],j=V[O],F=k.boundary.vertexIndices.length,Y=j.boundary.vertexIndices.length;if(!F||!Y)break;let X=E.concave.length,Z=0,U=y1(Z,M);for(;!k.boundary.vertexIndices.filter(U).length||!j.boundary.vertexIndices.filter(U).length;)Z++,U=y1(Z,M);let ne=k.boundary.vertexIndices.findIndex(U),ee=j.boundary.vertexIndices.findIndex(U);do ne=(ne+1)%F;while(U(k.boundary.vertexIndices[ne]));do ee=(ee+1)%Y;while(U(j.boundary.vertexIndices[ee]));Z=(Z+1)%M;let te=Z,Q=this.buildBevelVert(E,k,(ne-1+F)%F),de=this.buildBevelVert(E,j,(ee-1+Y)%Y),le=Q,ce=de,ge,fe,Fe=!1;do{U=y1(Z,M);let Ae=H(k,ne,U),Ee=H(j,ee,U),ke=Fe;if(Fe=!1,Ae&&!Ee){for(let Ue=0;Ue<Ae;Ue++)ge=this.buildBevelVert(E,k,(ne+Ue)%F,Ue/(Ae-1)),p.push(le.topN,ge.topP,ce.topN),p.push(ge.bottomP,le.bottomN,ce.bottomN),le=ge;Fe=!0}else if(!Ae&&Ee)for(let Ue=0;Ue<Ee;Ue++)fe=this.buildBevelVert(E,j,(ee+Ue)%Y,Ue/(Ee-1)),p.push(ce.topN,le.topP,fe.topP),p.push(le.bottomP,ce.bottomN,fe.bottomP),ce=fe;else if(Ae&&Ee)if(ge=this.buildBevelVert(E,k,ne,0),fe=this.buildBevelVert(E,j,ee,0),ke?(p.push(le.topN,fe.topP,ce.topN),p.push(le.topN,ge.topP,fe.topP),p.push(fe.bottomP,le.bottomN,ce.bottomN),p.push(fe.bottomP,ge.bottomP,le.bottomN)):(p.push(ce.topN,le.topN,ge.topP),p.push(ce.topN,ge.topP,fe.topP),p.push(ge.bottomP,le.bottomN,ce.bottomN),p.push(ge.bottomP,ce.bottomN,fe.bottomP)),le=ge,ce=fe,Ae===Ee)for(let Ue=1;Ue<Ae;Ue++)ge=this.buildBevelVert(E,k,(ne+Ue)%F,Ue/(Ae-1)),fe=this.buildBevelVert(E,j,(ee+Ue)%Y,Ue/(Ee-1)),p.push(le.topN,ge.topP,ce.topN),p.push(ce.topN,ge.topP,fe.topP),p.push(ge.bottomP,le.bottomN,ce.bottomN),p.push(ge.bottomP,ce.bottomN,fe.bottomP),le=ge,ce=fe;else if(Ae>Ee){let Ue=Ae/Ee,ot=0;for(let N=1;N<Ae;N++)ge=this.buildBevelVert(E,k,(ne+N)%F,N/(Ae-1)),p.push(le.topN,ge.topP,ce.topN),p.push(ge.bottomP,le.bottomN,ce.bottomN),le=ge,N>(ot+1)*Ue&&(ot++,fe=this.buildBevelVert(E,j,(ee+ot)%Y,ot/(Ee-1)),p.push(ce.topN,ge.topP,fe.topP),p.push(ge.bottomP,ce.bottomN,fe.bottomP),ce=fe)}else{let Ue=Ee/Ae,ot=0;for(let N=1;N<Ee;N++)fe=this.buildBevelVert(E,j,(ee+N)%Y,N/(Ee-1)),p.push(ce.topN,ge.topP,fe.topP),p.push(ge.bottomP,ce.bottomN,fe.bottomP),ce=fe,N>(ot+1)*Ue&&(ot++,ge=this.buildBevelVert(E,k,(ne+ot)%F,ot/(Ae-1)),p.push(le.topN,ge.topP,ce.topN),p.push(ge.bottomP,le.bottomN,ce.bottomN),le=ge)}ne=(ne+Ae)%F,ee=(ee+Ee)%Y,Z=(Z+1)%X}while(Z!==te)}{let O=V[0];for(let k=0,j=O.boundary.vertexCount;k<j;k++){let F=this.buildBevelVert(E,O,k),Y=this.buildBevelVert(E,O,(k+1)%j);p.push(Y.topP,F.topN,F.bottomN),p.push(Y.topP,F.bottomN,Y.bottomP)}}if(S){let O=[];for(let k=p.length-1;k>=L+2;k-=3){let j=p[k-2],F=p[k-1],Y=p[k-0];O.push(Y,F,j)}p.splice(L,p.length-L,...O)}if(S){let O=[];for(let k=V[V.length-1].boundary.vertices.length-1;k>=1;k-=2){let j=V[V.length-1].boundary.vertices[k-1],F=V[V.length-1].boundary.vertices[k-0];O.push(j,F)}g.push(O)}if(!S){let O=V[V.length-1],k=sh({windingRule:V.length>1?hr.POSITIVE:hr.ODD,elementType:Kr.POLYGONS,vertexSize:2,strict:!0,contours:[O.insetPoints,...g]});if(!k)throw new Error("Error generating geometry for surface");o.length===0&&Object.assign(this,{capStartIndex:p.length});for(let j=0;j<k.elementCount*3;j+=3){let F=this.buildSurfaceVert(k,k.elements[j+0]),Y=this.buildSurfaceVert(k,k.elements[j+1]),X=this.buildSurfaceVert(k,k.elements[j+2]);p.push(F.top,Y.top,X.top),p.push(X.bottom,Y.bottom,F.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new ft(Uint32Array.from(p),1),y=new ft(this._buffer.positions,3),b=new ft(this._buffer.normals,3),x=new ft(this._buffer.uvs,2);y.needsUpdate=!0,b.needsUpdate=!0,x.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",b),this.setAttribute("uv",x),this.setIndex(v)}buildSurfaceVert(e,t){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let i=e.vertices[t*2+0],n=e.vertices[t*2+1],s=(i-this._minX)/this._width,o=(n-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,h={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=n,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=n,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[r]=h,h}buildBevelVert(e,t,r,i=1){let n=`${t.bevelI}:${r}`;if(n in this.vertexCache)return this.vertexCache[n];let[s,o]=t.boundary.vertexIndices[r],a,l,c,h;s!==o?(l=s,a=o,h=!1,c=e.continuous[l]&&e.continuous[a]):(a=s,l=(a-1+e.count)%e.count,h=e.concave[a]&&t.bevelI>0,c=e.continuous[a]||h);let u=Math.cos(t.angle),d=Math.sin(t.angle),f=r*2,m=a*2,p=l*2,g=t.boundary.vertices[f+0],v=t.boundary.vertices[f+1],y=(1-d)*this._bevelSize,b=(g-this._minX)/this._width,x=(v-this._minY)/this._height,A=e.normals[m+0],S=e.normals[m+1],_=e.normals[p+0],w=e.normals[p+1];if(h){let P=_-A,D=w-S;A=A+P*(1-i),S=S+D*(1-i);let W=Math.sqrt(A*A+S*S);A/=W,S/=W}let M=this._buffer.get(c?2:4),C=M*3,E=M*2,$={i:r,fi:a,topP:M+0,topN:M+0,bottomP:M+1,bottomN:M+1};return this._buffer.positions[C+0]=g,this._buffer.positions[C+1]=v,this._buffer.positions[C+2]=this._depth-y,this._buffer.normals[C+0]=A*u,this._buffer.normals[C+1]=S*u,this._buffer.normals[C+2]=d,this._buffer.uvs[E+0]=b,this._buffer.uvs[E+1]=x,this._buffer.positions[C+3]=g,this._buffer.positions[C+4]=v,this._buffer.positions[C+5]=y,this._buffer.normals[C+3]=A*u,this._buffer.normals[C+4]=S*u,this._buffer.normals[C+5]=-d,this._buffer.uvs[E+2]=x,this._buffer.uvs[E+3]=b,c||(M+=2,C+=6,E+=4,$.topP=M+0,$.bottomP=M+1,this._buffer.positions[C+0]=g,this._buffer.positions[C+1]=v,this._buffer.positions[C+2]=this._depth-y,this._buffer.normals[C+0]=_*u,this._buffer.normals[C+1]=w*u,this._buffer.normals[C+2]=d,this._buffer.uvs[E+0]=b,this._buffer.uvs[E+1]=x,this._buffer.positions[C+3]=g,this._buffer.positions[C+4]=v,this._buffer.positions[C+5]=y,this._buffer.normals[C+3]=_*u,this._buffer.normals[C+4]=w*u,this._buffer.normals[C+5]=-d,this._buffer.uvs[E+2]=x,this._buffer.uvs[E+3]=b),this.vertexCache[n]=$,$}clone(){let e=new SB(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=B4(this.userData),e}},ka=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var c,h,u,d,f,m,p;let r=Object.assign({},(c=t==null?void 0:t.parameters)!=null?c:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs((h=r.height)!=null?h:r.width),s=Math.abs((u=r.depth)!=null?u:0),o=(d=e.shape)!=null?d:t==null?void 0:t.shape,a=(f=o==null?void 0:o.roundness)!=null?f:r.roundness;o!==void 0&&(o instanceof xr?(o.width!==i||o.height!==n)&&o.applySize(i,n):o=new xr(i,n).fromJSON(o),((m=e.parameters)==null?void 0:m.roundness)!==void 0&&((p=e.parameters)==null?void 0:p.roundness)>0&&o.update(!1));let l=o!=null?o:new xr(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:s,roundness:a}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:s}=e.parameters;e.shape.roundness=s;let o;return t<=0?o=new bB(e.shape,n):o=new SB(e.shape,t,r,n,i),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},_B=Math.PI*2,Vle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof xr?e.shape:new xr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c=e.shape,h=t*.5,u=r*.5,d=Wle(c,h,u,n*Math.PI/180,i,s);c.isClosed=!0,c.update();let f=ka.create({shape:c,parameters:{subdivisions:d,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function Wle(e,t,r,i,n,s){if(i>=_B)return n>30||n%4===0?(Gle(e,t,r,s),Math.round(n/4)):z3(e,i,n,t,r,s);let o={x:0,y:r},a=i+Math.PI*.5,l={x:Math.cos(a)*t,y:Math.sin(a)*r},c=zle({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%c.length===0?jle(e,o.x,o.y,c,n,t,r,s):z3(e,i,n,t,r,s)}function jle(e,t,r,i,n,s,o,a){let l=Math.round(n/i.length);e.addPoint(Tu(t,r));for(let c=0,h=i.length;c<h;c++){let u=i[c],d=e.points[c],f=Tu(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),e.addPoint(f)}return a>0?AB(e,s,o,a):e.addPoint(Tu(0,0)),l}function z3(e,t,r,i,n,s){let o=-t/r;for(let a=0;a<=r;a++){let l=o*a,c=Math.sin(l)*i,h=Math.cos(l)*n;e.addPoint(Tu(c,h))}return t<_B?s>0?AB(e,i,n,s):e.addPoint(Tu(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&MB(e,i,n,s)),1}function Gle(e,t,r,i=0,n=0,s=0){let o=.5522847498,a=t*o,l=r*o;e.addPoint(um(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(um(n,s+r,n-a,s+r,n+a,s+r)),e.addPoint(um(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(um(n,s-r,n+a,s-r,n-a,s-r)),i>0&&MB(e,t,r,i)}function Tu(e,t){return new Cu(vt.generateUUID(),new K(e,t))}function um(e,t,r,i,n,s){let o=Tu(e,t);return o.controls[0].position.set(r,i),o.controls[1].position.set(n,s),o}function AB(e,t,r,i){EB(e,t,r,i).forEach(n=>e.addPoint(n))}function MB(e,t,r,i){let n=EB(e,t,r,i),s=new xr;n.forEach(o=>s.addPoint(o)),s.isClosed=!0,e.shapeHoles.push(s)}function EB(e,t,r,i){let n=i*t/100,s=n*(Math.abs(r)/Math.abs(t)),o=new K(n/t,s/r),a=e.points.map(l=>{let c=l.clone();return c.uuid=vt.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),a}var Yle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var a,l,c;let r=Object.assign({},(a=t==null?void 0:t.parameters)!=null?a:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs((l=r.height)!=null?l:i),s=Math.abs((c=r.depth)!=null?c:i),o=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:s,radius:o,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=e.parameters,d=new CB(!1,t,r,i,n,s,o,a,l,c,h,u);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},CB=class extends at{constructor(e=!0,t=1,r=1,i=1,n=1,s=1,o=1,a=1,l=1,c=1,h=1,u=1){super();let d=e&&s===1;d&&(u=0),h>100&&(h=100);let f=()=>new T,m=new T,p=f(),g=f(),v=f(),y,b,x,A,S,_,w,M,C=f(),E=f(),$=f(),P=f(),D=f(),W=f(),V=f(),H=f(),L=r-2*a+.001,O=L/s,k=Math.ceil(o*s),j=k+1,F=L/k,Y=-L/2,X=c+1,Z=2*Math.PI/c,U=Math.PI/2/u,ne=.01,ee=Math.min((1-h/100)*a,a-ne),te=a-ee,Q=0,de=2,le=u*de+de,ce=X*le/de,ge=ce+X*j,fe=X*(j+le),[Fe,Ae,Ee]=[3,3,2].map(Se=>Array(fe*Se).fill(0)),ke=[],Ue=n-a;function ot(Se,_e){let G=Math.PI/2;_=_e*F,M=2*Math.PI*(_%O)/O+G,_+=Y,w=Math.sin(M)*Ue,S=Math.cos(M)*Ue,e?Se.set(S,w,_):Se.set(S,_,w)}ot(m,-1e-10),ot(p,0),C.copy(m),ot(m,1);let N=m.distanceTo(p),R=te+ee,se=N*k+2*R,pe=ee,xe=se-R;for(let Se=0;Se<=k;Se++){ot(g,Se),H.subVectors(g,C).normalize(),C.copy(g),W.copy(g).setComponent(+e+1,0).normalize(),V.crossVectors(H,W).normalize();let _e=Se===0,G=Se===k,Me=_e?3*Math.PI/2:U,be=_e?pe:xe,Je=_e?X:ge,Ie=_e?0:fe-X,rt=H.clone().multiplyScalar(_e?-te:te).add(g),ye=H.clone().multiplyScalar(_e?-1:1).normalize();for(let Ke=0;Ke<X;Ke++){let Pe=Ke*Z;if(E.addVectors(m.copy(W).multiplyScalar(a*Math.cos(Pe)),p.copy(V).multiplyScalar(a*Math.sin(Pe))),$.copy(E).normalize(),_e||G){d||(Q=Ie+Ke,[0,1,2].forEach(Te=>{Fe[Q*3+Te]=rt.getComponent(Te),Ae[Q*3+Te]=ye.getComponent(Te)}),Ee[Q*2]=+G,Ee[Q*2+1]=Ke/c),p.copy($).multiplyScalar(ee),v.addVectors(g,p);for(let Te=0;Te<u;Te++){let Ge=Te*U+Me;P.addVectors(m.copy(H).multiplyScalar(te*Math.sin(Ge)),p.copy($).multiplyScalar(te*Math.cos(Ge))),D.copy(P).normalize(),p.addVectors(v,P),P.normalize(),Q=Je+Te*X+Ke,[0,1,2].forEach(St=>{Fe[Q*3+St]=p.getComponent(St),Ae[Q*3+St]=D.getComponent(St)});let it=+_e+Math.sin(Ge);Ee[Q*2]=(be+te*it)/se,Ee[Q*2+1]=Ke/c}}p.addVectors(g,E),Q=ce+Se*X+Ke,[0,1,2].forEach(Te=>{Fe[Q*3+Te]=p.getComponent(Te),Ae[Q*3+Te]=$.getComponent(Te)}),Ee[Q*2]=(R+Se*N)/se,Ee[Q*2+1]=Ke/c}}let Ce=j+2*u+de,tt=1,[oe,Ye]=d?[tt,tt+j-1]:[0,Ce-1];for(let Se=oe;Se<=Ye-1;Se++){let _e=d&&Se===Ye-1;for(let G=0;G<X-1;G++)y=Se*X+G,b=y+1,x=(_e?G:y)+X,A=(_e?G+1:b)+X,Se===0?ke.push(b,A,x):Se===Ce-2?ke.push(y,b,x):ke.push(y,b,x,b,A,x)}this.setIndex(ke),this.setAttribute("position",new $e(Fe,3)),this.setAttribute("normal",new $e(Ae,3)),this.setAttribute("uv",new $e(Ee,2))}},Kle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:o}=e.parameters,a=n===0&&s!==0?new TB(t*.5,s,o):new jO(t*.5,n);return a.scale(1,r/t,i/t),Object.assign(a,{userData:{...e,type:"IcosahedronGeometry"}})}},TB=class extends g2{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(n,s,o,e,t,r),this.type=o}static fromJSON(e){return new TB(e.radius,e.corner,e.cornerSides)}},Xle=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s,o,a;((n=(i=e.parameters)==null?void 0:i.points)!=null?n:[]).forEach(l=>{Array.isArray(l)&&(l.x=l[0],l.y=l[1])});let r=Object.assign({},(s=t==null?void 0:t.parameters)!=null?s:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((o=r.height)!=null?o:r.width),depth:Math.abs((a=r.depth)!=null?a:r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new El;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new NO(n.extractPoints(i).shape,r);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},us=new We,x1=new zt,dm=new T,uv=class extends ki{constructor(){super(),this.uuid=vt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new hi().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let s=0,o=n.vertexNormals.length;s<o;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return us.makeRotationX(e),this.applyMatrix4(us),this}rotateY(e){return us.makeRotationY(e),this.applyMatrix4(us),this}rotateZ(e){return us.makeRotationZ(e),this.applyMatrix4(us),this}translate(e,t,r){return us.makeTranslation(e,t,r),this.applyMatrix4(us),this}scale(e,t,r){return us.makeScale(e,t,r),this.applyMatrix4(us),this}lookAt(e){return x1.lookAt(e),x1.updateMatrix(),this.applyMatrix4(x1.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<n.count;u++)t.vertices.push(new T().fromBufferAttribute(n,u)),o!==void 0&&t.colors.push(new st().fromBufferAttribute(o,u));function c(u,d,f,m){let p=o===void 0?[]:[t.colors[u].clone(),t.colors[d].clone(),t.colors[f].clone()],g=s===void 0?[]:[new T().fromBufferAttribute(s,u),new T().fromBufferAttribute(s,d),new T().fromBufferAttribute(s,f)],v=new Ew(u,d,f,g,p,m);t.faces.push(v),a!==void 0&&t.faceVertexUvs[0].push([new K().fromBufferAttribute(a,u),new K().fromBufferAttribute(a,d),new K().fromBufferAttribute(a,f)]),l!==void 0&&t.faceVertexUvs[1].push([new K().fromBufferAttribute(l,u),new K().fromBufferAttribute(l,d),new K().fromBufferAttribute(l,f)])}let h=e.groups;if(h.length>0)for(let u=0;u<h.length;u++){let d=h[u],f=d.start,m=d.count;for(let p=f,g=f+m;p<g;p+=3)r!==void 0?c(r.getX(p),r.getX(p+1),r.getX(p+2),d.materialIndex):c(p,p+1,p+2,d.materialIndex)}else if(r!==void 0)for(let u=0;u<r.count;u+=3)c(r.getX(u),r.getX(u+1),r.getX(u+2));else for(let u=0;u<n.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dm).negate(),this.translate(dm.x,dm.y,dm.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new We;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new T,t=new T;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=this.vertices[n.a],o=this.vertices[n.b],a=this.vertices[n.c];e.subVectors(a,o),t.subVectors(s,o),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new T;if(e){let r=new T,i=new T;for(let n=0,s=this.faces.length;n<s;n++){let o=this.faces[n],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];r.subVectors(c,l),i.subVectors(a,l),r.cross(i),t[o.a].add(r),t[o.b].add(r),t[o.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,s=i.vertexNormals.length;n<s;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new uv;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new T,c={a:new T,b:new T,c:new T};n.push(l),s.push(c)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let o=this.faces[n],a=i.faceNormals[n],l=i.vertexNormals[n];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,s=this.vertices,o=e.vertices,a=this.faces,l=e.faces,c=this.colors,h=e.colors;t!==void 0&&(i=new hi().getNormalMatrix(t));for(let u=0,d=o.length;u<d;u++){let f=o[u].clone();t!==void 0&&f.applyMatrix4(t),s.push(f)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let f=l[u],m,p,g=f.vertexNormals,v=f.vertexColors,y=new Ew(f.a+n,f.b+n,f.c+n);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let b=0,x=g.length;b<x;b++)m=g[b].clone(),i!==void 0&&m.applyMatrix3(i).normalize(),y.vertexNormals.push(m);y.color.copy(f.color);for(let b=0,x=v.length;b<x;b++)p=v[b],y.vertexColors.push(p.clone());y.materialIndex=f.materialIndex+r,a.push(y)}for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let y=0,b=g.length;y<b;y++)v.push(g[y].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],h=Math.round(c.x*n)+"_"+Math.round(c.y*n)+"_"+Math.round(c.z*n);t[h]===void 0?(t[h]=a,r.push(this.vertices[a]),i[a]=r.length-1):i[a]=i[t[h]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-r.length;return this.vertices=r,o}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new T(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;function r(a,l){return a.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,o;i&&i.length===t&&(s=[]),n&&n.length===t&&(o=[]);for(let a=0;a<t;a++){let l=e[a]._id;s&&s.push(i[l]),o&&o.push(n[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let m in f)f[m]!==void 0&&(e[m]=f[m]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let m=this.vertices[f];t.push(m.x,m.y,m.z)}let r=[],i=[],n={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let m=this.faces[f],p=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,y=m.normal.length()>0,b=m.vertexNormals.length>0,x=m.color.r!==1||m.color.g!==1||m.color.b!==1,A=m.vertexColors.length>0,S=0;if(S=c(S,0,0),S=c(S,1,p),S=c(S,2,g),S=c(S,3,v),S=c(S,4,y),S=c(S,5,b),S=c(S,6,x),S=c(S,7,A),r.push(S),r.push(m.a,m.b,m.c),r.push(m.materialIndex),v){let _=this.faceVertexUvs[0][f];r.push(d(_[0]),d(_[1]),d(_[2]))}if(y&&r.push(h(m.normal)),b){let _=m.vertexNormals;r.push(h(_[0]),h(_[1]),h(_[2]))}if(x&&r.push(u(m.color)),A){let _=m.vertexColors;r.push(u(_[0]),u(_[1]),u(_[2]))}}function c(f,m,p){return p?f|1<<m:f&~(1<<m)}function h(f){let m=f.x.toString()+f.y.toString()+f.z.toString();return n[m]!==void 0||(n[m]=i.length/3,i.push(f.x,f.y,f.z)),n[m]}function u(f){let m=f.r.toString()+f.g.toString()+f.b.toString();return o[m]!==void 0||(o[m]=s.length,s.push(f.getHex())),o[m]}function d(f){let m=f.x.toString()+f.y.toString();return l[m]!==void 0||(l[m]=a.length/2,a.push(f.x,f.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),a.length>0&&(e.data.uvs=[a]),e.data.faces=r,e}clone(){return new uv().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let u=0,d=t.length;u<d;u++)this.vertices.push(t[u].clone());let r=e.colors;for(let u=0,d=r.length;u<d;u++)this.colors.push(r[u].clone());let i=e.faces;for(let u=0,d=i.length;u<d;u++)this.faces.push(i[u].clone());for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let y=0,b=g.length;y<b;y++){let x=g[y];v.push(x.clone())}this.faceVertexUvs[u].push(v)}}let n=e.morphTargets;for(let u=0,d=n.length;u<d;u++){let f={};if(f.name=n[u].name,n[u].vertices!==void 0){f.vertices=[];for(let m=0,p=n[u].vertices.length;m<p;m++)f.vertices.push(n[u].vertices[m].clone())}if(n[u].normals!==void 0){f.normals=[];for(let m=0,p=n[u].normals.length;m<p;m++)f.normals.push(n[u].normals[m].clone())}this.morphTargets.push(f)}let s=e.morphNormals;for(let u=0,d=s.length;u<d;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let m=0,p=s[u].vertexNormals.length;m<p;m++){let g=s[u].vertexNormals[m],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let m=0,p=s[u].faceNormals.length;m<p;m++)f.faceNormals.push(s[u].faceNormals[m].clone())}this.morphNormals.push(f)}let o=e.skinWeights;for(let u=0,d=o.length;u<d;u++)this.skinWeights.push(o[u].clone());let a=e.skinIndices;for(let u=0,d=a.length;u<d;u++)this.skinIndices.push(a[u].clone());let l=e.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new qle().fromGeometry(this),t=new at,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new ft(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",new ft(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",new ft(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new ft(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new ft(i,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],s=e.morphTargets[i];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new $e(l.data.length*3,3);c.name=l.name,n.push(c.copyVector3sArray(l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new $e(e.skinIndices.length*4,4);t.setAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let i=new $e(e.skinWeights.length*4,4);t.setAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new at,r=e.geometry;if(e.isPoints||e.isLine){let i=new $e(r.vertices.length*3,3),n=new $e(r.colors.length*3,3);if(t.setAttribute("position",i.copyVector3sArray(r.vertices)),t.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let s=new $e(r.lineDistances.length,1);t.setAttribute("lineDistance",s.copyArray(r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};uv.prototype.isGeometry=!0;var qle=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,s=e.faces;for(i=0;i<s.length;i++){let o=s[i];o.materialIndex!==n&&(n=o.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,o=e.morphTargets,a=o.length,l;if(a>0){l=[];for(let g=0;g<a;g++)l[g]={name:o[g].name,data:[]};this.morphTargets.position=l}let c=e.morphNormals,h=c.length,u;if(h>0){u=[];for(let g=0;g<h;g++)u[g]={name:c[g].name,data:[]};this.morphTargets.normal=u}let d=e.skinIndices,f=e.skinWeights,m=d.length===r.length,p=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(r[v.a],r[v.b],r[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let x=v.normal;this.normals.push(x,x,x)}let b=v.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let x=v.color;this.colors.push(x,x,x)}if(n===!0){let x=i[0][g];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new K,new K,new K))}if(s===!0){let x=i[1][g];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new K,new K,new K))}for(let x=0;x<a;x++){let A=o[x].vertices;l[x].data.push(A[v.a],A[v.b],A[v.c])}for(let x=0;x<h;x++){let A=c[x].vertexNormals[g];u[x].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),p&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},Ew=class{constructor(e,t,r,i,n,s=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new T,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new st,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},Qle=["a","b","c"];function Zle(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function b1(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),s=i+"_"+n;return r.get(s)}function w1(e,t,r,i,n,s){let o=Math.min(e,t),a=Math.max(e,t),l=o+"_"+a,c;if(i.has(l))c=i.get(l);else{let h=r[o],u=r[a];c={a:h,b:u,newEdge:null,faces:[]},i.set(l,c)}c.faces.push(n),s[e].edges.push(c),s[t].edges.push(c)}function Jle(e,t,r,i){let n,s,o;for(n=0,s=e.length;n<s;n++)r[n]={edges:[]};for(n=0,s=t.length;n<s;n++)o=t[n],w1(o.a,o.b,e,i,o,r),w1(o.b,o.c,e,i,o,r),w1(o.c,o.a,e,i,o,r)}function hm(e,t,r,i,n){e.push(new Ew(t,r,i,void 0,void 0,n))}function Tc(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function fm(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var ece=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof at?e=new uv().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new T,r,i,n,s,o,a=e.vertices,l=e.faces,c=e.faceVertexUvs[0],h=c!==void 0&&c.length>0,u=[],d=new Map;Jle(a,l,u,d);let f=[],m,p,g,v,y,b,x;for(let ne of Array.from(d.keys())){for(p=d.get(ne),g=new T,y=3/8,b=1/8,x=p.faces.length,x!=2&&(y=.5,b=0,x!=1),g.addVectors(p.a,p.b).multiplyScalar(y),t.set(0,0,0),s=0;s<x;s++){for(v=p.faces[s],o=0;o<3&&(m=a[Zle(v,Qle[o])],!(m!==p.a&&m!==p.b));o++);m&&t.add(m)}t.multiplyScalar(b),g.add(t),p.newEdge=f.length,f.push(g)}let A,S,_,w,M,C,E,$=[];for(i=0,n=a.length;i<n;i++){for(C=a[i],M=u[i].edges,r=M.length,r==3?A=3/16:r>3&&(A=3/(8*r)),S=1-r*Number(A),_=A,r<=2&&(r==2?(S=3/4,_=1/8):r==1||r==0),E=C.clone().multiplyScalar(S),t.set(0,0,0),s=0;s<r;s++)w=M[s],m=w.a!==C?w.a:w.b,t.add(m);t.multiplyScalar(Number(_)),E.add(t),$.push(E)}let P=$.concat(f),D=$.length,W,V,H,L=[],O=[],k,j,F,Y,X=new K,Z=new K,U=new K;for(i=0,n=l.length;i<n;i++)v=l[i],W=Number(b1(v.a,v.b,d).newEdge)+D,V=Number(b1(v.b,v.c,d).newEdge)+D,H=Number(b1(v.c,v.a,d).newEdge)+D,hm(L,W,V,H,v.materialIndex),hm(L,v.a,W,H,v.materialIndex),hm(L,v.b,V,W,v.materialIndex),hm(L,v.c,H,V,v.materialIndex),h&&(k=c[i],j=k[0],F=k[1],Y=k[2],X.set(Tc(j.x,F.x),Tc(j.y,F.y)),Z.set(Tc(F.x,Y.x),Tc(F.y,Y.y)),U.set(Tc(j.x,Y.x),Tc(j.y,Y.y)),fm(O,X,Z,U),fm(O,j,X,U),fm(O,F,Z,X),fm(O,Y,U,Z));e.vertices=P,e.faces=L,h&&(e.faceVertexUvs[0]=O)}},Pr=new T,tce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var s,o;let r=(o=(s=e.geometry)!=null?s:t==null?void 0:t.geometry)!=null?o:new at().copy(new $a(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(Pr),i={width:Pr.x,height:Pr.y,depth:Pr.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){var l;let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,s=(l=e.geometry)!=null?l:new at().copy(new $a(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(Pr)):Pr.set(o.width,o.height,o.depth),(t!==Pr.x||r!==Pr.y||i!==Pr.z)&&s.scale(Pr.x===0?1:t/Pr.x,Pr.y===0?1:r/Pr.y,Pr.z===0?1:i/Pr.z);let a=s.originalGeometry;return n>0?(a===void 0||(o==null?void 0:o.subdivisions)!==n)&&(a===void 0&&(a=s),s=new ece(n).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new XO(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(Pr);let s=100/Pr.x;Object.assign(n.parameters,{width:100,height:Pr.y*s,depth:Pr.z*s}),t(this.build(n))})}},rce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof xr?e.shape:new xr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=e.parameters,l=e.shape,c=t*.5,h=r*.5,u=0,d=0,f=2*Math.PI/i;for(let p=0;p<i;p++){let g=f*p,v=u+Math.sin(g)*c,y=d+Math.cos(g)*h;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let p=0,g=l.points.length;p<g;p++)l.points[p].roundness=n;l.roundness=n,l.update();let m=ka.create({shape:l,parameters:{roundness:n,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},ice=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=e.parameters,c=new sce(t*.5,r,n,s,o,a,l);return c.scale(1,1,i/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}};function Ud(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function S1(e,t,r,i,n,s){let o=t.clone().sub(e),a=r.clone().sub(e),l=o.angleTo(a);if(o.normalize(),a.normalize(),i===n){let c=o.add(a).normalize();s.copy(e).addScaledVector(c,i/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(e),s.addScaledVector(o,n/Math.sin(c)),s.addScaledVector(a,i/Math.sin(c))}}function nce(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var sce=class extends at{constructor(e=.5,t=1,r=4,i=1,n=!1,s=0,o=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),o=Math.floor(o);let a=[],l=[],c=[],h=[],u=0,d=t/2,f=Math.PI/r,m=e*Math.cos(Math.PI/r),p=2*Math.PI/r,g=(r-2)*Math.PI/r,v=Math.PI-g,y=new T(0,-d,0),b=new T(0,d,0),x=new K(e,-d),A=new K(m,-d),S=new K(0,b.y).sub(A),_=new K(0,b.y).sub(x),w=new K(S.y,-S.x).normalize(),M=new K(_.y,-_.x).normalize(),C=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-S.angle())/2)-1e-8;s=Math.min(s,C);let E;{let H=new T(w.x,w.y,0),L=new T(Math.cos(p)*H.x,H.y,Math.sin(p)*H.x);E=H.angleTo(L)}let $=s/Math.tan((Math.PI-S.angle())/2),P=s/Math.tan((Math.PI-E)/2),D=new T;if(!n){l.push(y.x,y.y,y.z),c.push(0,-1,0),h.push(0,0);let H=u++,L=[],O=x.clone(),k=$/Math.cos(Math.PI/r);O.x-=k;for(let j=0;j<r;j++){let F=j/r*Math.PI*2+f,Y=new K(Math.sin(F),Math.cos(F));Ud(O,Y,D),l.push(D.x,D.y,D.z),c.push(0,-1,0),h.push(0,0),L.push(u++)}for(let j=0;j<L.length;j++)a.push(L[j],H,L[(j+1)%L.length])}{let H=new T,L=new T,O=new T,k=new T,j=new T,F=new T;for(let Y=0;Y<r;Y++){let X=Y/r*Math.PI*2+f,Z=(Y+.5)/r*Math.PI*2+f,U=(Y+1)/r*Math.PI*2+f,ne=new K(Math.sin(X),Math.cos(X)),ee=new K(Math.sin(Z),Math.cos(Z)),te=new K(Math.sin(U),Math.cos(U));Ud(x,ne,L),Ud(x,te,O),Ud(w,ee,H),S1(b,L,O,P,P,k),l.push(k.x,k.y,k.z),S1(L,b,O,P,$,j),l.push(j.x,j.y,j.z),S1(O,L,b,$,P,F),l.push(F.x,F.y,F.z),c.push(H.x,H.y,H.z),c.push(H.x,H.y,H.z),c.push(H.x,H.y,H.z),h.push(0,0),h.push(0,0),h.push(0,0);let Q=u++,de=u++,le=u++;if(a.push(Q,de,le),s>0){{let fe=L.clone().add(O).multiplyScalar(.5),Fe=b.clone().sub(fe).normalize(),Ae=y.clone().sub(fe).normalize().add(Fe).normalize().multiplyScalar(-1),Ee=F.clone().sub(j);W(fe,Ee,Ae,S.angle())}let ce,ge;{let fe=new T;Ud(M,te,fe);let Fe=F.clone().add(k).multiplyScalar(.5);Fe=nce(Fe,O,b);let Ae=F.clone().sub(k);[ce,ge]=W(Fe,Ae,fe,E,k.y)}{let fe=ce,Fe=fe.clone().setY(0).normalize(),Ae=new T(0,-1,0),Ee=Fe.clone().cross(Ae);V(fe,Fe,Ae,Ee)}{let fe=S.angle(),Fe=Math.PI-fe,Ae=b.clone();Ae.y-=s/Math.sin(fe-Math.PI/2);let Ee=new T,ke=[];for(let ot=0;ot<o;ot++){let N=[],R=Math.PI/2-Fe*ot/o,se=Math.cos(R),pe=Math.sin(R),xe=Z;for(let Ce=0;Ce<=ot;Ce++){let tt=Math.cos(xe),oe=Math.sin(xe);H.x=se*oe,H.y=pe,H.z=se*tt,Ee.copy(Ae).addScaledVector(H,s),l.push(Ee.x,Ee.y,Ee.z),c.push(H.x,H.y,H.z),h.push(0,0),N.push(u++),xe+=Math.PI*2/ot/r}ke.push(N)}ge.reverse(),ke.push(ge);let Ue=ke.length-1;for(let ot=0;ot<Ue;ot++){let N=ke[ot],R=ke[ot+1],se=N.length-1;a.push(R[1],N[0],R[0]);for(let pe=1;pe<=se;pe++)a.push(N[pe],N[pe-1],R[pe]),a.push(R[pe+1],N[pe],R[pe])}}}}}this.setIndex(a),this.setAttribute("position",new $e(l,3)),this.setAttribute("normal",new $e(c,3)),this.setAttribute("uv",new $e(h,2));function W(H,L,O,k,j){let F=-k/2,Y=(Math.PI-k)/2,X=L.clone().normalize().cross(O);H.addScaledVector(O,-s/Math.sin(Y));let Z=new T,U=new T,ne=1,ee=u,te=[];for(let Q=0;Q<=o;Q++){let de=F+Q/o*k;U.set(0,0,0),U.addScaledVector(X,Math.sin(de)),U.addScaledVector(O,Math.cos(de));for(let le=0;le<=ne;le++){let ce=le/ne-.5;if(Z.copy(H),Z.addScaledVector(L,ce),Z.addScaledVector(U,s),j!=null){let ge=Math.max(0,Z.y-j);Z.addScaledVector(L,-ge/L.y)}l.push(Z.x,Z.y,Z.z),c.push(U.x,U.y,U.z),h.push(0,0),le===0&&te.push(u),u++}}for(let Q=0;Q<o;Q++)for(let de=0;de<ne;de++){let le=ee+de+(ne+1)*Q,ce=le+(ne+1),ge=ce+1,fe=le+1;a.push(le,ce,fe),a.push(ce,ge,fe)}return[H.clone().addScaledVector(L,.5),te]}function V(H,L,O,k){let j=Math.PI/2,F=_.angle()-j,Y=[],X=new T,Z=new T;for(let ne=0;ne<=o;ne++){let ee=[],te=ne/o;for(let Q=0;Q<=ne;Q++){let de=((ne?Q/ne:0)-.5)*v,le=Math.cos(de),ce=Math.sin(de),ge=Math.atan(Math.tan(F)*le),fe=(j+ge)*te,Fe=Math.cos(fe),Ae=Math.sin(fe);X.set(0,0,0),X.addScaledVector(L,Ae*le),X.addScaledVector(O,Fe),X.addScaledVector(k,Ae*ce),Z.copy(H).addScaledVector(X,s),l.push(Z.x,Z.y,Z.z),c.push(X.x,X.y,X.z),h.push(0,0),ee.push(u++)}Y.push(ee)}let U=Y.length-1;for(let ne=0;ne<U;ne++){let ee=Y[ne],te=Y[ne+1],Q=ee.length-1;a.push(ee[0],te[1],te[0]);for(let de=1;de<=Q;de++)a.push(ee[de-1],ee[de],te[de]),a.push(ee[de],te[de+1],te[de])}}}},oce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,s,o,a;let r=Object.assign({},(n=t==null?void 0:t.parameters)!=null?n:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((s=t==null?void 0:t.ui)!=null?s:{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof xr?e.shape:new xr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((o=r.height)!=null?o:r.width),depth:Math.abs((a=r.depth)!=null?a:0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c={x:r*.5,y:i*.5},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(x,A,S){return A>r&&S>i?Math.min(x*r/A,x*i/S):A>r?x*r/A:S>i?x*i/S:x}let f=[];f[0]=n[0]===0?0:d(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:d(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:d(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:d(n[3],n[3]+n[0],n[3]+n[2]);let m=h.x,p=u.x,g=u.y,v=h.y;t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(p,v)),t.addPoint(t.createPoint(m,v)),t.isClosed=!0;let y=!0;for(let x=0,A=t.points.length;x<A;x++)t.points[x].roundness=f[x],x>0&&f[x]!==f[x-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=s!==1,t.update();let b=ka.create({shape:t,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(b,{userData:{...e,type:"RectangleGeometry"}})}},ace=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=e.parameters,h=new H_(.5*t,n,s,o,a,l,c);return h.scale(1,r/t,i/t),Object.assign(h,{userData:{...e,type:"SphereGeometry"}})}},lce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,s=new Yv(t,r,i,n);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},cce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:s,cornerSegments:o}=e.parameters,a=new uce(t,r,i,n,s,o);return Object.assign(a,{userData:{...e,type:"BackdropGeometry"}})}},uce=class extends at{constructor(e=1,t=1,r=1,i=90,n=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;n==0&&(s=1),s=Math.max(1,Math.floor(s)),n=Math.min(n,100),i=Math.min(180-c,i),i*=Math.PI/180;let h=[],u=Math.PI/2,d=(ne=0,ee=0,te=0)=>new T(ne,ee,te),f=d(),m=d(),[p,g,v]=[t/2,e/2,r/2],y=-g,b=+g,[x,A,S]=[d(y,-p,+v),d(y,-p,-v),d(y,+p,-v)],_=(ne,ee=!1)=>Math.sin(ne-Math.PI/(1+ +ee)),w=(ne,ee=!1)=>Math.cos(ne-Math.PI/(1+ +ee));S.y=Math.sin(i)*t-p;let M=Math.cos(i)*t-v,C=x.z-c;i<=u?(S.z=Math.min(M,C),S.z==C&&(S.y-=(M-C)/Math.tan(u-i))):A.z=Math.min(A.z-M-v,x.z-c),f.subVectors(x,A),m.subVectors(S,A);let E=Math.min(f.length(),m.length())*n/100,$=E*Math.tan(i/2),P=E/Math.cos(i/2),D=f.clone().normalize().add(m.normalize()).setLength(P).add(A);f.set(0,_(i,!0),w(i,!0)),h.push([S,f.clone()]);let W=(Math.PI-i)/s;for(let ne=0;ne<=s;ne++){let ee=u+i+ne*W;f.set(0,Math.sin(ee)*$,Math.cos(ee)*$),f.add(D),m.set(0,_(ee),w(ee)),h.push([f.clone(),m.clone()])}h.push([x,d(0,1,0)]);let V=Math.sin(W/2)*$*2,H=h.length-1,L=h[0][0].distanceTo(h[1][0]),O=h[H-1][0].distanceTo(h[H][0]),k=L+V*s+O;h[0].push(1);for(let ne=0;ne<=s;ne++)h[ne+1].push(1-(L+ne*V)/k);h[H].push(0);let[j,F,Y]=h[0],X,Z,U;for(let ne=1;ne<h.length;ne++)[X,Z,U]=h[ne],o.push(y,j.y,j.z,y,X.y,X.z,b,j.y,j.z,b,j.y,j.z,y,X.y,X.z,b,X.y,X.z),a.push(0,F.y,F.z,0,Z.y,Z.z,0,F.y,F.z,0,F.y,F.z,0,Z.y,Z.z,0,Z.y,Z.z),l.push(0,Y,0,U,1,Y,1,Y,0,U,1,U),[j,F,Y]=[X,Z,U];this.setAttribute("position",new $e(o,3)),this.setAttribute("normal",new $e(a,3)),this.setAttribute("uv",new $e(l,2))}},dce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof xr?e.shape:new xr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h=e.shape,u=t*.5,d=r*.5,f=0,m=0,p=o*Math.PI/360/n,g=Math.PI/2*3*-1,v=u*i/100,y=d*i/100;if(n===3&&i===50){p=2*Math.PI/n;for(let x=0;x<n;x++){let A=p*x,S=f+Math.sin(A)*u,_=m+Math.cos(A)*d;h.addPoint(h.createPoint(S,_))}}else for(let x=0;x<n;x++){let A=f+Math.cos(g)*u,S=m+Math.sin(g)*d;h.addPoint(h.createPoint(A,S)),g+=p,A=f+Math.cos(g)*v,S=m+Math.sin(g)*y,h.addPoint(h.createPoint(A,S)),g+=p}h.isClosed=!0;for(let x=0,A=h.points.length;x<A;x++)h.points[x].roundness=s;h.roundness=s,h.update();let b=ka.create({shape:h,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(b,{userData:{...e,type:"StarGeometry"}})}},PB=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new Yv(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},hce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var o,a,l;let r=Object.assign({},(o=t==null?void 0:t.parameters)!=null?o:{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs((a=r.height)!=null?a:r.width),s=Math.abs((l=r.depth)!=null?l:r.width*.25);return{parameters:Object.assign(r,{width:i,height:n,depth:s})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=e.parameters,c=fce(t,r,i,t*.5,o,s,0,0,n,a,l);return c.scale(1,r/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}};function fce(e,t,r,i,n,s,o,a,l,c,h){return[t,r]=[r,t],o=t/2,n/=2*Math.PI,n==1&&(c=0),new CB(!0,e,t,r,i,n,s,o,a,l,c,h)}var pce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s,o;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width),depth:Math.abs((s=r.depth)!=null?s:r.width),tube:(o=r.tube)!=null?o:r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:s,q:o}=e.parameters,a=t*.5;a!==r&&(a-=r);let l=new YO(a,r,i,n,s,o);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},mce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,s;let r=Object.assign({},(i=t==null?void 0:t.parameters)!=null?i:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof xr?e.shape:new xr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((n=r.height)!=null?n:r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs((s=r.depth)!=null?s:0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=e.parameters,l=e.shape,c=t*.5,h=r*.5;a?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=i;l.roundness=i,l.update();let u=ka.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...e,type:"TriangleGeometry"}})}},DB,LB=new Promise(e=>{DB=e}),N3=!1;async function gce(){if(N3)return;let e="https://unpkg.com/@splinetool/modelling-wasm@0.9.109/build",[t,r]=await Promise.all([fO(()=>import("./process.5e26a63c.js"),[]),fetch(`${e}/process.wasm`).then(n=>n.arrayBuffer())]),i=await t.default({wasmBinary:r});DB(i),N3=!0}function Ai(e,t){return t.color(e)}var Oa=e=>"isEntity"in e,Ir=e=>"isAbstractMesh"in e,Er=e=>e!==null&&e.objectType==="BooleanObject",vce=e=>e.objectType==="CombinedCamera",yce=e=>Oa(e)&&(e.objectType==="LightDirectional"||e.objectType==="LightSpot"||e.objectType==="LightPoint"),$B=e=>e.objectType==="EmptyObject",IB=e=>"objectHelper"in e;function RB(e,t){var i;let r=!1;t.position&&(e.position.fromArray(t.position),r=!0),t.rotation&&(e.rotation.fromArray(t.rotation),r=!0),t.scale&&(r=!0,e.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&"hiddenMatrix"in e&&(r=!0,e.hiddenMatrix.fromArray((i=t.hiddenMatrix)!=null?i:Vl.identity)),r&&(e.updateMatrix(),Er(e.parent)&&Ir(e)&&e.invalidateDownstreamBooleanData(!0).recomputeBoolean()),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&e.updateWorldMatrix(!1,!0),e.objectType==="CombinedCamera"&&(t.isUpVectorFlipped!==void 0&&(e.isUpVectorFlipped=t.isUpVectorFlipped),e.updateUp())}function xce(e,t){RB(e,t),t.name!==void 0&&(e.name=t.name),t.visible!==void 0&&(e.visible=t.visible)}function bce(e,t,r){xce(e,t),t.color!==void 0&&(e.color=Ai(t.color,r)),t.intensity!==void 0&&(e.intensity=t.intensity),t.shadows!==void 0&&!(e instanceof Fb)&&(e.castShadow=t.shadows),e.shadow&&!(e instanceof Fb)&&t.depth!==void 0&&(e.shadow.camera.far=t.depth,e.shadow.needsUpdate=!0)}function wce(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var kB=e=>class extends e{hasEntityChild(){return this.children.some(t=>Oa(t))}isDescendantOf(t){t instanceof zt&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new We().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),Oa(t)?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let i=0;i<t.children.length;i++){let n=t.children[i];this.add(n.clone())}return this}},Pc=new zr,ps=new T,ms=new T,Pu=new We,OB=[new T(-1,1,1),new T(-1,-1,1),new T(1,-1,1),new T(1,1,1),new T(-1,1,-1),new T(-1,-1,-1),new T(1,-1,-1),new T(1,1,-1)],Sce=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],_ce=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]];function Ace(e,t,r=0,i=t.count){let n=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let h=r;h<i;h++){let u=t.getX(h),d=t.getY(h),f=t.getZ(h);u<n&&(n=u),d<s&&(s=d),f<o&&(o=f),u>a&&(a=u),d>l&&(l=d),f>c&&(c=f)}return e.min.set(n,s,o),e.max.set(a,l,c),e}var F3=(e,t,r)=>{var i;if(Ir(e)){let n=e.geometry.userData.parameters,s=e.geometry.getAttribute("position");e.geometry.userData.type==="SubdivGeometry"?ps.copy(e.originalGeometry.boundingSphere.center):s!==void 0&&(Ace(Pc,s,e.geometry.drawRange.start,e.geometry.drawRange.count<1/0?e.geometry.drawRange.count:s.count),Pc.getCenter(ps)),e.forceComputeSize?Pc.getSize(ms).multiplyScalar(.5):ms.set(n.width,n.height,(i=n.depth)!=null?i:0).multiplyScalar(.5)}else if(IB(e)&&e.objectHelper.visible){let n=e.geometryHelper.getAttribute("position");Pc.setFromArray(n.array),Pc.getCenter(ps),Pc.getSize(ms).multiplyScalar(.5)}else ps.setScalar(0),ms.setScalar(0);Pu.copy(t).multiply(e.matrixWorld),ms.x===0&&ms.y===0&&ms.z===0?r.push(new T(ps.x,ps.y,ps.z).applyMatrix4(Pu)):OB.forEach(n=>{r.push(n.clone().multiply(ms).add(ps).applyMatrix4(Pu))})},U3=class extends zr{constructor(){super(...arguments),this.matrix=new We,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new We().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{n.visible&&F3(n,t,i)}):F3(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Pu.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(ms).multiplyScalar(.5),this.getCenter(ps),Pu.copy(this.matrix).setPosition(ps),this.vertices=OB.map(e=>e.clone().multiply(ms).applyMatrix4(Pu))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Sce.map(([e,t])=>new Pn(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new T))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=_ce.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},so=e=>"isEntity"in e,Mce=e=>"isAbstractMesh"in e,fd=e=>class extends kB(e){constructor(){super(...arguments),this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new We,this._singleBBox=new U3,this._recursiveBBox=new U3,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors(t=>{so(t)&&(t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0)}),this.traverseEntity(t=>{t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0})}traverseEntity(t){t(this);for(let r of this.children)so(r)&&r.traverseEntity(t)}traverseVisibleEntity(t){t(this);for(let r of this.children)so(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),r===!0)for(let i of t.children)so(i)&&this.add(i.clone());return this}keepChildrenMatrixWorld(){let t=new We,r=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),t.copy(this.matrixWorld).invert(),t.multiply(r);for(let i of this.children)so(i)&&i.hiddenMatrix.premultiply(t)}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return qb(r,t)}fromObjectTransformState(t){return t.position&&this.position.fromArray(t.position),t.rotation&&this.rotation.fromArray(t.rotation),t.scale&&this.scale.fromArray(t.scale),t.hiddenMatrix&&this.hiddenMatrix.fromArray(t.hiddenMatrix),this.updateMatrix(),this}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return qb(r,t)}fromState(t,r){return t.name&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.type!=="OrthographicCamera"&&t.type!=="PerspectiveCamera"&&(this.matrixAutoUpdate=!1),t.visible!==void 0&&(this.visible=t.visible),this.fromObjectTransformState(t),this}},Ece=class extends zt{},Cce=class extends Ece{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!0}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return!0}get isLight(){return!1}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){return this.object.geometry}get material(){return this.object.material}},H3=class extends zt{constructor(e,t={}){super(),this.object=e;let r=e.recursiveBBox.getSize(new T),i=.1;this.parameters=tw.defaultData(r.toArray(),i),Kg(this.parameters,t),this.update(),this.setHideBase(this.parameters.hideBase)}setHideBase(e){this.parameters.hideBase=e}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach(e=>e.updateMatrix())}_updateCount(){let e=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(let t=0,r=e-this.children.length;t<r;++t){let i=new Cce(this.object);i.visible=!0,this.add(i),this.parameters.hideBase&&this.setHideBase(!0)}else for(let t=0,r=this.children.length-e;t<r;++t)this.remove(this.children[0])}_updateRadial(e){let t=e.radial,r=t.start*vt.DEG2RAD,i=t.end*vt.DEG2RAD,n=r-i,s=new _n(t.rotation[0]*vt.DEG2RAD,t.rotation[1]*vt.DEG2RAD,t.rotation[2]*vt.DEG2RAD),o;switch(t.axis){case"z":o=new T(0,0,1);break;case"y":o=new T(0,1,0);break;default:case"x":o=new T(1,0,0);break}for(let[a,l]of this.children.entries()){l.scale.x=t.scale[0],l.scale.y=t.scale[1],l.scale.z=t.scale[2],l.position.setScalar(0);let c=n/e.count*a-r;switch(t.axis){case"x":l.rotation.set(0,c,0);break;case"y":l.rotation.set(0,0,c);break;case"z":l.rotation.set(c,0,0);break}l.translateOnAxis(o,t.radius),l.position.x+=t.position[0],l.position.y+=t.position[1],l.position.z+=t.position[2],t.alignment===!0?(l.rotation.x+=s.x,l.rotation.y+=s.y,l.rotation.z+=s.z):l.rotation.copy(s)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new _n(t.rotation[0]*vt.DEG2RAD,t.rotation[1]*vt.DEG2RAD,t.rotation[2]*vt.DEG2RAD);for(let[i,n]of this.children.entries())n.scale.x=1+(t.scale[0]-1)*i,n.scale.y=1+(t.scale[1]-1)*i,n.scale.z=1+(t.scale[2]-1)*i,n.rotation.x=r.x*i,n.rotation.y=r.y*i,n.rotation.z=r.z*i,n.position.x=t.position[0]*i,n.position.y=t.position[1]*i,n.position.z=t.position[2]*i}_updateGrid(e){let t=0,r=e.grid;if(r.useCenter===!0){let i={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},n=new T(r.size[0]*(r.count[0]-i.x)*.5,r.size[1]*(r.count[1]-i.y)*.5,r.size[2]*(r.count[2]-i.z)*.5);for(let s=0;s<r.count[0];s++)for(let o=0;o<r.count[1];o++)for(let a=0;a<r.count[2];a++){let l=this.children[t++];l.scale.setScalar(1),l.rotation.set(0,0,0),l.position.x=r.size[0]*s-n.x,l.position.y=r.size[1]*o-n.y,l.position.z=r.size[2]*a-n.z}}else for(let i=0;i<r.count[0];i++)for(let n=0;n<r.count[1];n++)for(let s=0;s<r.count[2];s++){let o=this.children[t++];o.scale.setScalar(1),o.rotation.set(0,0,0),o.position.x=r.size[0]*i,o.position.y=-r.size[1]*n,o.position.z=-r.size[2]*s}}fromClonerState(e){return e.hideBase!==void 0&&this.setHideBase(e.hideBase),Kg(this.parameters,e),this.update(),this}},V3=class{constructor(e){e=e!=null?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Wa=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=vt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t!=null?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r!=null?r:{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r!=null?r:{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t!=null?t:this.getType(e,t);let i=e.getNodeData(r!=null?r:this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,s){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof Wa&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},Tce=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},zi=new Tce,Nt=class extends Wa{constructor(e,t){super(e),this.scope="",t=t!=null?t:{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t!=null?t:this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=vt.generateUUID()),r=e.getUUID(r!=null?r:this.getUUID(),!n);let s=e.getNodeData(r),o=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return s.name=s.name||super.build(e,t,r),s.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||s.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let a=this.getTemp(e,r);if(a)return e.format(a,o,t);{a=super.generate(e,t,r,s.output,i);let l=this.generate(e,o,r);return e.addNodeCode(a+" = "+l+";"),e.format(a,o,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r!=null?r:this.uuid,e.getTempVar(r,i!=null?i:this.getType(e),n,this.getLabel()).name}},un=class extends Nt{constructor(e,t){t=t!=null?t:{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let o=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(o.fragment.name,i,t))}},yn=class extends un{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof K?e:new K(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},mn=class extends un{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof T?e:new T(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},ol=class extends un{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Jn?e:new Jn(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},Pce=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,W3=/[a-z_0-9]+/gi,je=class extends Nt{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;s=W3.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let h=l[c],u=h[0],d=this.isMethod?!this.getInputByName(u):!0,f=u;if(this.keywords[u]||this.useKeywords&&d&&zi.containsKeyword(u)){let m=this.keywords[u];if(!m){let p=zi.getKeywordData(u);p.cache&&(m=e.keywords[u]),m=m||zi.getKeyword(u,e),p.cache&&(e.keywords[u]=m)}f=m.build(e)}u!==f&&a[h.index+o-1]!=="."&&(a=a.substring(0,h.index+o)+f+a.substring(h.index+u.length+o),o+=f.length-u.length),this.getIncludeByName(f)===void 0&&zi.contains(f)&&e.include(zi.get(f))}return t==="source"?a:this.isMethod?(this.isInterface||e.include(this,void 0,a),this.name):e.format("( "+a+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t!=null?t:[],this.extensions=r!=null?r:{},this.keywords=i!=null?i:{},this.isMethod){let n=Pce.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(W3);if(s){let o=0;for(;o<s.length;){let a=s[o++],l;a==="in"||a==="out"||a==="inout"?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},Dce=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,BB=class extends Nt{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||BB.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let s,o,a="",l=Dce.exec(e);this.useDefine=n!=null?n:this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},$t=BB;$t.PI="PI",$t.PI2="PI2",$t.RECIPROCAL_PI="RECIPROCAL_PI",$t.RECIPROCAL_PI2="RECIPROCAL_PI2",$t.LOG2="LOG2",$t.EPSILON="EPSILON";var Lce=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),$ce=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),zB=class extends Nt{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Lce.exec(e);if(t){let r=t[2],i;for(;i=$ce.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},x2=class extends Nt{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e!=null?e:0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};zi.addKeyword("uv",function(){return new x2});zi.addKeyword("uv2",function(){return new x2(1)});var Hc=class extends Nt{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t!=null?t:Hc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case ks:return["Linear"];case ht:return["sRGB"];default:return[]}}generate(e,t){var o;let r=this.input.build(e,"v4"),i=this.getType(e),n=Hc.Nodes[this.method],s=e.include(n);if(s===Hc.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((o=n.inputs)==null?void 0:o.length)===2){let a=this.factor.build(e,"f");return e.format(s+"( "+r+", "+a+" )",i,t)}else return e.format(s+"( "+r+" )",i,t)}fromEncoding(e){let t=Hc.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=Hc.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Ms=Hc;Ms.Nodes={LinearToLinear:new je(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new je(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new je(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Ms.LINEAR_TO_LINEAR="LinearToLinear",Ms.SRGB_TO_LINEAR="sRGBToLinear",Ms.LINEAR_TO_SRGB="LinearTosRGB";var Gt=class extends je{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},pa=class extends un{constructor(e=new Ti,t,r,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t!=null?t:new x2,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var c;if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s,o;this.project?s="texture2DProj":s=n?"tex2DBias":"tex2D",n?o=s+"( "+r+", "+i+", "+n+" )":o=s+"( "+r+", "+i+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(a),this.colorSpace=(c=this.colorSpace)!=null?c:new Ms(new Gt("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,t)}},ze=class extends un{constructor(e){super("f"),this.nodeType="Float",this.value=e!=null?e:0}generateReadonly(e,t,r,i,n,s){return e.format(this.value+(this.value%1?"":".0"),i,t)}},j3=class extends Nt{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t!=null?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let s=this.value,o=s.build(e,t)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],h=this.inputs[l]||this.inputs[c.name];a.push(h.build(e,e.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return e.format(o,i,t)}},NB=class extends Nt{constructor(e,t,r=NB.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},Es=NB;Es.ADD="+",Es.SUB="-",Es.MUL="*",Es.DIV="/";var Lt=class extends Nt{constructor(e,t=Lt.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Lt.MIX:case Lt.CLAMP:case Lt.REFRACT:case Lt.SMOOTHSTEP:case Lt.FACEFORWARD:return 3;case Lt.MIN:case Lt.MAX:case Lt.MOD:case Lt.STEP:case Lt.REFLECT:case Lt.DISTANCE:case Lt.DOT:case Lt.CROSS:case Lt.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Lt.LENGTH:case Lt.DISTANCE:case Lt.DOT:return"f";case Lt.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,a=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case Lt.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Lt.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Lt.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Lt.STEP:r=this.a.build(e,s===1?"f":l),i=this.b.build(e,l);break;case Lt.MIN:case Lt.MAX:case Lt.MOD:r=this.a.build(e,l),i=this.b.build(e,o===1?"f":l);break;case Lt.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case Lt.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,a===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let h=[];h.push(r),i&&h.push(i),n&&h.push(n);let u=this.getNumInputs(e);if(h.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${h.length}.`);return e.format(this.method+"( "+h.join(", ")+" )",c,t)}},nt=Lt;nt.RAD="radians",nt.DEG="degrees",nt.EXP="exp",nt.EXP2="exp2",nt.LOG="log",nt.LOG2="log2",nt.SQRT="sqrt",nt.INV_SQRT="inversesqrt",nt.FLOOR="floor",nt.CEIL="ceil",nt.NORMALIZE="normalize",nt.FRACT="fract",nt.SATURATE="saturate",nt.SIN="sin",nt.COS="cos",nt.TAN="tan",nt.ASIN="asin",nt.ACOS="acos",nt.ARCTAN="atan",nt.ABS="abs",nt.SIGN="sign",nt.LENGTH="length",nt.NEGATE="negate",nt.INVERT="invert",nt.MIN="min",nt.MAX="max",nt.MOD="mod",nt.STEP="step",nt.REFLECT="reflect",nt.DISTANCE="distance",nt.DOT="dot",nt.CROSS="cross",nt.POW="pow",nt.MIX="mix",nt.CLAMP="clamp",nt.REFRACT="refract",nt.SMOOTHSTEP="smoothstep",nt.FACEFORWARD="faceforward";var oh=class extends Nt{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){var a,l,c,h;let n=new j3(oh.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=(a=this.colorSpaceTL)!=null?a:new Ms(new Gt("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=(l=this.colorSpaceTR)!=null?l:new Ms(new Gt("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=(c=this.colorSpaceBL)!=null?c:new Ms(new Gt("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=(h=this.colorSpaceBR)!=null?h:new Ms(new Gt("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new Gt(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Gt(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Gt(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Gt(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let o=new Gt("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=n,o}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new j3(oh.Nodes.roughnessToMip,[i]),s=new nt(n,oh.Nodes.m0,oh.Nodes.cubeUV_maxMipLevel,nt.CLAMP),o=new nt(s,nt.FLOOR),a=new nt(s,nt.FRACT),l=this.bilinearCubeUV(e,this.value,r,o),c=this.bilinearCubeUV(e,this.value,r,new Es(o,new ze(1).setReadonly(!0),Es.ADD)),h=new nt(l,c,a,nt.MIX);return e.format(h.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},Cw=oh;Cw.Nodes=function(){let e=new zB(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new $t("float cubeUV_maxMipLevel 8.0",!0),r=new $t("float cubeUV_minMipLevel 4.0",!0),i=new $t("float cubeUV_maxTileSize 256.0",!0),n=new $t("float cubeUV_minTileSize 16.0",!0),s=new je(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new je(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new je(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,o,t,r,i,n]);a.useKeywords=!1;let l=new $t("float r0 1.0",!0),c=new $t("float v0 0.339",!0),h=new $t("float m0 -2.0",!0),u=new $t("float r1 0.8",!0),d=new $t("float v1 0.276",!0),f=new $t("float m1 -1.0",!0),m=new $t("float r4 0.4",!0),p=new $t("float v4 0.046",!0),g=new $t("float m4 2.0",!0),v=new $t("float r5 0.305",!0),y=new $t("float v5 0.016",!0),b=new $t("float m5 3.0",!0),x=new $t("float r6 0.21",!0),A=new $t("float v6 0.0038",!0),S=new $t("float m6 4.0",!0),_=[l,c,h,u,d,f,m,p,g,v,y,b,x,A,S],w=new je(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,_);return{bilinearCubeUV:a,roughnessToMip:w,m0:h,cubeUV_maxMipLevel:t}}();var Vc=class extends Nt{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e!=null?e:Vc.VIEW}getShared(){return this.scope===Vc.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let s;switch(this.scope){case Vc.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case Vc.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case Vc.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}},Ui=Vc;Ui.LOCAL="local",Ui.WORLD="world",Ui.VIEW="view",Ui.NORMAL="normal";zi.addKeyword("viewNormal",function(){return new Ui(Ui.VIEW)});zi.addKeyword("localNormal",function(){return new Ui(Ui.NORMAL)});zi.addKeyword("worldNormal",function(){return new Ui(Ui.WORLD)});var eo=class extends Nt{constructor(e){super("v3"),this.nodeType="Position",this.scope=e!=null?e:eo.LOCAL}getType(){switch(this.scope){case eo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case eo.LOCAL:case eo.WORLD:return!1}return!0}generate(e,t,r,i,n){let s;switch(this.scope){case eo.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case eo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case eo.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case eo.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}},qn=eo;qn.LOCAL="local",qn.WORLD="world",qn.VIEW="view",qn.PROJECTION="projection";zi.addKeyword("position",function(){return new qn});zi.addKeyword("worldPosition",function(){return new qn(qn.WORLD)});zi.addKeyword("viewPosition",function(){return new qn(qn.VIEW)});var hs=class extends Nt{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e!=null?e:hs.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case hs.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case hs.VECTOR:{let n=new Ui(Ui.VIEW),s=e.context.roughness,o=n.build(e,"v3"),a=new qn(qn.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${c}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${h};`),i="reflectVec"):i=h;break}case hs.CUBE:{let n=new hs(hs.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case hs.SPHERE:{let n=new hs(hs.VECTOR).build(e,"v3"),s="normalize( ( viewMatrix * vec4( "+n+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),i="reflectSphereVec"):i=s;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},Du=hs;Du.CUBE="cube",Du.SPHERE="sphere",Du.VECTOR="vector";var Ice=class extends Nt{constructor(e=new pa,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Cw(this.value,t!=null?t:new Du(Du.VECTOR),r),this.irradianceNode=new Cw(this.value,new Ui(Ui.WORLD),new ze(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Rce=class extends un{constructor(e=new I_,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t!=null?t:new Du,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l,c;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+r+", "+i+", "+n+" )":s="texCube( "+r+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},a=this.getType(e);return e.addContext(o),this.colorSpace=(c=this.colorSpace)!=null?c:new Ms(new Gt("",a)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,a),e.removeContext(),e.format(s,a,t)}},G3=["x","y","z","w"],kce=["float","vec2","vec3","vec4"],Oce={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Bce={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},zce=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let s=0;s<i.length;s++)i[s].src&&(n+=i[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.material=e,this.renderer=t,this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e!=null?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t!=null?t:this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t!=null?t:this.shader]+=e+`
`}clearNodeCode(e){e=e!=null?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t!=null?t:this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t!=null?t:this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",s=""){let o=this.getVars(i),a=o[e];if(!a){let l=o.length;a={name:r||"node"+n+l+(s?"_"+s:""),type:t},o.push(a),o[e]=a}return a}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t!=null?t:"";let r="";for(let i=0,n=e.length;i<n;++i){let s=e[i],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?r+=t+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:r+=t+" "+c+" "+a+`;
`}return r}getVars(e){return this.inputs.vars[e!=null?e:this.shader]}getNodeData(e){let t=e instanceof Wa?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,s){if(t.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new V3({type:t,size:r.size,name:i||"nodeUA"+a+(s?"_"+s:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new V3({type:t,name:i||"nodeU"+a+(s?"_"+s:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var s;let i;if(e=typeof e=="string"?zi.get(e):e,this.context.include===!1)return e.name;e instanceof je?i=this.includes.functions:e instanceof $t?i=this.includes.consts:e instanceof zB&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let o=n[e.name];if(o||(o=n[e.name]={node:e,deps:[]},n.push(o),o.src=e.build(this,"source")),e instanceof je&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(s=e.includes)==null?void 0:s.length)){let a=0;do this.include(e.includes[a++],t);while(a<e.includes.length)}return r&&(o.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return kce[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case Nl:case Fl:return new Rce(r);case Of:return new Ice(new pa(r));default:return new pa(r)}else{if(r.isVector2)return new yn(r);if(r.isVector3)return new mn(r);if(r.isVector4)return new ol(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Oce[e]||e}getFormatByType(e){return Bce[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return G3[e]}getIndexByElement(e){return G3.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=ks,t===ks&&this.context.gamma&&(t=ht),t}},fr=class extends un{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof Jn?e:new Jn(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let o=e.getNodeData(r),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(o.fragment.name,i,t))}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},Ot=class extends un{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e!=null?e:0)}generateReadonly(e,t,r,i,n,s){return e.format(this.value.toString(),i,t)}},FB=class extends Wa{constructor(){super("basic"),this.nodeType="Basic",this.color=new fr(5855577),this.shadingAlpha=new ze(1),this.shadingBlend=new Ot(0)}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(rd.merge([we.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new fr(5855577)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",r.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),n?s.push(n.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${r.result};`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} );`):s.push("gl_FragColor = vec4("+r.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}},Hd=class extends un{constructor(e){super("b"),this.nodeType="Bool",this.value=e!=null?e:!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},UB=class extends un{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e!=null?e:new hi}generateReadonly(e,t,r,i,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},il=class extends un{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},nl=class extends un{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof ct?new Array(e).fill(t):new Array(e).fill(new ct(0))}},b2=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e))(b2||{}),Mn=function(){let e=new je(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new je(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new $t("float F3 0.3333333"),t.keywords.G3=new $t("float G3 0.1666667");let r=new je(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),i=new je("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new je("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new je(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,n]),o=new je("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new je("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new je(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new je(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new $t(`int NUM_OCTAVES ${5}`);let h=new je("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new je(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,n,h]);return{simplex:t,simplexFractal:r,simplexAshima:s,fbm:c,perlin:u}}(),HB=class extends Nt{constructor(e,t,r,i,n,s,o,a,l,c,h,u){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.alpha=h,this.noiseType=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(b2)[this.noiseType.value],o=new je(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Mn.simplex,Mn.simplexFractal,Mn.simplexAshima,Mn.fbm,Mn.perlin]),a=e.include(o),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(a+"("+l.join(",")+")",this.getType(e),t)}};HB.numOctaves=5;var Nce=class extends Wa{constructor(){super("phong"),this.nodeType="Phong",this.color=new fr(5855577),this.specular=new fr(1118481),this.shininess=new ze(30),this.shadingAlpha=new ze(1),this.shadingBlend=new Ot(0)}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(rd.merge([we.fog,we.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Jt.penumbraSize}),this.color===void 0&&(this.color=new fr(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];c.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},VB=class extends Nt{constructor(e,t,r,i,n,s,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(VB.Nodes.fresnel),i=[];return i.push(this.color.build(e,"c")),i.push(this.bias.build(e,"f")),i.push(this.scale.build(e,"f")),i.push(this.intensity.build(e,"f")),i.push(this.factor.build(e,"f")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},WB=VB;WB.Nodes=function(){return{fresnel:new je(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var jB=class extends Nt{constructor(e,t,r,i,n,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(jB.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},GB=jB;GB.Nodes=function(){let e=new je(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Mn.simplex]);return{rainbow:new je(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[e])}}();var YB=class extends Nt{constructor(e,t,r,i,n,s,o,a,l,c,h,u,d,f,m,p){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=h,this.resolution=u,this.normalMap=d,this.depthMap=f,this.pixelRatio=m,this.alpha=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.firstTime){let r=this.outlineWidth.build(e,"f"),i=this.resolution.build(e,"v2"),n=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(r,"uniform float"),e.addVertexParsVariable(i,"uniform vec2"),e.addVertexParsVariable(n,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float");let o=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexFinalCode(`
                vID = randomColor.r;
                if (${n}) {
                    vec4 ${o}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${o}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${o}_offset = normalize(${o}_clipNormal.xy) / ${i} * (${r} / 2.0) * ${o}_clipPosition.w * 2.0 * ${s};
                    ${o}_clipPosition.xy += ${o}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${o}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(YB.Nodes.outline),i=[];return i.push(this.outlineColor.build(e,"c")),i.push(this.contourColor.build(e,"c")),i.push(this.outlineWidth.build(e,"f")),i.push(this.contourWidth.build(e,"f")),i.push(this.contourThreshold.build(e,"f")),i.push(this.outlineThreshold.build(e,"f")),i.push(this.contourFrequency.build(e,"f")),i.push(this.outlineSmoothing.build(e,"f")),i.push(this.contourDirection.build(e,"v3")),i.push(this.positionalLines.build(e,"b")),i.push(this.resolution.build(e,"v2")),i.push(this.normalMap.getTexture(e,"t")),i.push(this.depthMap.getTexture(e,"t")),i.push(this.pixelRatio.build(e,"f")),i.push(this.compensation.build(e,"b")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},KB=YB;KB.Nodes=function(){let e=new je(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new je(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[e])}}();var XB=class extends Nt{constructor(e,t,r,i,n,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(XB.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},qB=XB;qB.Nodes=function(){let e=new je(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),t=new je(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[e]),r=new je(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new je(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),n=new je(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[i,t]),s=new je(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[n,r]);return{transmission:new je(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var ah=class extends Nt{constructor(e,t,r,i,n,s,o,a,l,c,h){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new je(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[ah.Nodes.vectorLinearWorldSpaceDepth,ah.Nodes.vectorLinearObjectSpaceDepth,ah.Nodes.vectorSphericalObjectSpaceDepth,ah.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(n+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},QB=ah;QB.Nodes=function(){let e=new je(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new je(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new je(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new je(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var Y3=class extends Nt{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Tw=(e=>(e.NOISE="noise",e.MAP="map",e))(Tw||{}),ZB=class extends Nt{constructor(e,t,r,i,n){super("v3"),this.displacementTypeIndex=new Ot(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(Tw)[this.displacementTypeIndex.value]==="map"&&(this.mat=new UB(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=i,this.noiseFunctionIndex=n}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(Tw)[this.displacementTypeIndex.value]){case"map":{r=e.include(ZB.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(b2)[this.noiseFunctionIndex.value],s=new je(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=new je(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Mn.simplex,Mn.simplexFractal,Mn.simplexAshima,Mn.fbm,Mn.perlin]),a=new je(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);r=e.include(a),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},JB=ZB;JB.Nodes=function(){let e=new je(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new je(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new je(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var ez=class extends Nt{constructor(e,t,r,i,n,s,o,a){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=s,this.angle=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(ez.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},tz=ez;tz.Nodes=function(){return{gradient:new je(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var eg=class extends Nt{constructor(e,t,r,i,n,s,o,a,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=s,this.size=o,this.mat=a,this.alpha=l,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(eg.Nodes.cylindrical);break;case 2:i=e.include(eg.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new je(`
		vec3 ${r}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${r}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);i=e.include(o);break;default:i=e.include(eg.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){e.addVertexParsCode(`varying vec2 ${r}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${r}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode(`${r}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}},rz=eg;rz.Nodes=function(){let e=new je(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new je(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),r=new je(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:e,spherical:t,uv:r}}();var iz=class extends Nt{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let r=e.include(iz.Nodes.customNormal),i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.alpha.build(e,"f")),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nz=iz;nz.Nodes=function(){return{customNormal:new je(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();var Jt={normalRenderTarget:new pa,normalRenderTargetDepth:new pa,transmissionRenderTarget:new pa,transmissionSize:new yn(2048,2048),transmissionRenderTargetDepth:new pa,pixelRatioNode:new ze(1),resolution:new yn,penumbraSize:new il(5,.5)};for(let e of Object.values(Jt))e.isRenderGlobal=!0;var Fce=class extends Wa{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new fr(5855577),this.emissive=new fr(0),this.emissiveIntensity=new ze(1),this.shadingAlpha=new ze(1),this.shadingBlend=new Ot(0)}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(rd.merge([we.fog,we.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Jt.penumbraSize}),this.color===void 0&&(this.color=new fr(5855577)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&c.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Uce=class extends Wa{constructor(){super("standard"),this.nodeType="Standard",this.color=new fr(5855577),this.roughness=new ze(.3),this.metalness=new ze(0),this.reflectivity=new ze(.5),this.shadingAlpha=new ze(1),this.shadingBlend=new Ot(0)}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(rd.merge([we.fog,we.lights])),we.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Jt.penumbraSize});let r={gamma:!0};this.color===void 0&&(this.color=new fr(5855577)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let i=this.color.flow(e,"c",{slot:"color",context:r}),n=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;",`uniform float penumbraSize[${5}];`,"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let u=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	float roughnessFactor = "+n.result+";",s.code,"	float metalnessFactor = "+s.result+";"),c&&u.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),u.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?u.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):u.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),u.push("#include <lights_fragment_begin>"),u.push("#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},Hce=class extends Wa{constructor(){super("toon"),this.nodeType="Toon",this.color=new fr(5855577),this.specular=new fr(1118481),this.shininess=new ze(30),this.shadingAlpha=new ze(1),this.shadingBlend=new Ot(0)}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(rd.merge([we.fog,we.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Jt.penumbraSize}),this.color===void 0&&(this.color=new fr(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode([`uniform float penumbraSize[${5}];`,"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}};function Vce(e,t){switch(e.type){case"fresnel":return Gce(e,t);case"gradient":return Yce(e);case"depth":return Kce(e);case"normal":return Xce(e);case"noise":return qce(e,t);case"rainbow":return Qce(e);case"toon":return Zce(e,t);case"outline":return Jce(e,t);case"transmission":return eue(e);case"color":return jce(e,t)}}function Wce(e){return{type:e.type}}function Hs(e){let{alpha:t,mode:r}=e;return{...Wce(e),alpha:t,mode:r}}function jce(e,t){return{...Hs(e),color:Ai(e.color,t)}}function Gce(e,t){let{bias:r,scale:i,intensity:n,factor:s,color:o}=e;return{...Hs(e),color:Ai(o,t),bias:r,scale:i,intensity:n,factor:s}}function Yce(e){let{gradientType:t,smooth:r,colors:i,steps:n,angle:s,offset:o,morph:a}=e;return{...Hs(e),gradientType:t,smooth:r,colors:i.map(l=>new ct(l[0],l[1],l[2],l[3])),num:i.length,steps:n,offset:new K(...o),morph:new K(...a),angle:s}}function Kce(e){let{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:h}=e;return{...Hs(e),gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:new T(...o),direction:a?new T(...a):new T(1,0,0),colors:l.map(u=>u!==void 0?new ct(u[0],u[1],u[2],u[3]):new ct(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function Xce(e){let{cnormal:t}=e;return{...Hs(e),cnormal:new T(t[0],t[1],t[2])}}function qce(e,t){return{...Hs(e),scale:e.scale,move:e.move,fA:new K(...e.fA),fB:new K(...e.fB),size:new T(...e.size),distortion:new K(...e.distortion),colorA:Ai(e.colorA,t),colorB:Ai(e.colorB,t),colorC:Ai(e.colorC,t),colorD:Ai(e.colorD,t),noiseType:e.noiseType}}function Qce(e){return{...Hs(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new T(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new T(...e.offset)}}function Zce(e,t){return{...Hs(e),positioning:e.positioning,colors:e.colors.map(r=>new ct(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new T(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:Ai(e.shadowColor,t),offset:new T(...e.offset)}}function Jce(e,t){return{...Hs(e),outlineColor:Ai(e.outlineColor,t),contourColor:Ai(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:e.contourDirection,positionalLines:e.positionalLines,compensation:e.compensation}}function eue(e,t){return{...Hs(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}var dv=class extends Jn{},_1=new Map,Th={url:"head",time:0,data:null,next:null,prev:null},hu={url:"tail",time:1/0,data:null,next:null,prev:null};Th.next=hu;hu.prev=Th;var K3=0;function tue(e){if(typeof e=="string")return e;let t=Date.now(),r=_1.get(e);return r===void 0?(r={url:URL.createObjectURL(new Blob([e])),data:e,time:t,next:null,prev:null},_1.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=hu.prev,r.next=hu,hu.prev.next=r,hu.prev=r,t-K3>1e3*10&&(K3=t+1e3,setTimeout(()=>{let i=Date.now(),n=Th.next;for(;n.time<i-1e3*10;)URL.revokeObjectURL(n.url),_1.delete(n.data),n=n.next,n.prev=Th,Th.next=n},900)),r.url}var sz=class{constructor(e,t){this.data=e,this.onImageLoad=t,this.loaded=!1,this.updateSrc(e.data)}updateSrc(e){typeof document>"u"||(this.dispose(),this.loaded=!1,this.img=new Image,this.img.src=tue(e),this.img.onload=()=>{this.loaded=!0;let t=[1e3,1001,1002];for(let r of t){let i=this[r];i&&(i.image=this.img,i.needsUpdate=!0)}this.onImageLoad&&this.onImageLoad()})}getTexture(e){let t=this[e];if(t)return t;{let r=new Ti(this.img,void 0,e,e);return this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}dispose(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}},Pw=class extends sz{},w2=class extends un{},oz={noise:["noiseType"],texture:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},az={depth:["colors"]};function rue(e,t,r){var s,o;let i=oz[e.type],n=az[e.type];if(n!==void 0){let a=e.color;if(n.includes(t)){let l=(o=(s=a[t])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function lz(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,s=e;if("image"in s){let o=s.image,a=t.image(o),l=i;l instanceof Pw||l.image.dispose(),l.image=a}if("wrapping"in s){let o=i;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=r.uniforms[`f${r.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return n}function iue(e,t,r,i){let n=!1;for(let[s,o]of Object.entries(e)){if(!s||o===void 0||pz(s,r,i))continue;r.visible=i.visible;let a=r.uniforms[`f${r.id}_${s}`];if(!!a&&!(a instanceof w2))switch(n=n||rue(r,s,o),a.constructor){case fr:if(typeof o=="string"){let l=t.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof dv?a.value=new Jn(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case ol:if(typeof o=="string"){let l=t.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof dv?a.value=new Jn(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case yn:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case mn:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case pa:{lz(o,t,r);break}case nl:{a.value=o.map(l=>new ct(...l));break}default:{a.value=o;break}}}return n}var cz=class extends Nt{constructor(e,t,r){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(cz.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},uz=cz;uz.Nodes=function(){return{matcap:new je(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var X3=class extends w2{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},nue=class extends w2{constructor(e){super("v3"),this.image=e,this._value=new T}get value(){return this._value.x=this.image.img.width,this._value.y=this.image.img.height,this._value}},dz=class extends Nt{constructor(e,t,r,i,n,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(dz.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},hz=dz;hz.Nodes=function(){let e=new je(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new je(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new je(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new je(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new je(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new je(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Mn.simplex,e,r,n])}}();function q3(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var sue=class extends UB{constructor(e,t){super(new hi),this.repeat=e,this.offset=t,q3(this.value,e,t)}updateMatrix(){q3(this.value,this.repeat,this.offset)}},Tl=class{constructor(e,t,r,i){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let n in i)this.uniforms[`f${this.id}_${n}`]=i[n];for(let n in r)pz(n,this,r)}get type(){return this.data.type}static create(e,t,r,i){var n,s,o,a,l,c,h,u,d,f,m;if(r.type==="light")return fu.createLigherLayer(e,t,r,i);if(r.type==="texture"){let p=i.image(r.texture.image),g=new X3(p,r.texture.wrapping),v=new nue(p),y=new sue(r.texture.repeat,r.texture.offset),b=new ze(r.crop?1:0),x=new Ot((n=r.projection)!=null?n:0),A=new Ot((s=["x","y","z"].indexOf(r.axis))!=null?s:0),S=new Ot((o=r.side)!=null?o:0),_=new yn(r.size?new K(r.size[0],r.size[1]):new K(100,100)),w=new ze((a=r.alpha)!=null?a:1),M=new Ot((l=r.mode)!=null?l:0),C=new rz(g,v,b,x,A,S,_,y,w,M),E=new Gt(C.calpha,"f");return new ai(e,t,r,{texture:g,textureSize:v,crop:b,projection:x,axis:A,side:S,size:_,mat:y,alpha:w,mode:M},C,M,E)}else if(r.type==="matcap"){let p=i.image(r.texture.image),g=new X3(p,r.texture.wrapping),v=new ze((c=r.alpha)!=null?c:1),y=new Ot((h=r.mode)!=null?h:0),b=new uz(g,v,y),x=new Gt(b.calpha,"f");return new ai(e,t,r,{texture:g,alpha:v,mode:y},b,y,x)}else if(r.type==="displace")if(r.displacementType==="noise"){let p=new mn(new T(...r.offset)),g=new ze((u=r.scale)!=null?u:10),v=new ze((d=r.intensity)!=null?d:8),y=new ze((f=r.movement)!=null?f:1),b=new Ot((m=r.noiseType)!=null?m:0),x=new JB(v,y,p,g,b);return new fz(e,t,r,{offset:p,scale:g,intensity:v,movement:y,noiseType:b},x)}else throw new Error;else return lue(e,t,r,i)}updateByOp(e,t,r){let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props?!0:iue(i.props,r,this,t)}else if(i.path[0]==="texture")return"texture"in t?lz(i.props,r,this):!0;return!1}dispose(){}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},ai=class extends Tl{constructor(e,t,r,i,n,s,o){super(e,t,r,i),this.color=n,this.mode=s,this.alpha=o}},fz=class extends Tl{constructor(e,t,r,i,n){super(e,t,r,i),this.position=n}},fu=class extends Tl{constructor(e,t,r,i,n){super(e,t,r,n),this.data=r,this.node=i}static createLigherLayer(e,t,r,i){var l,c,h,u,d,f,m,p;let n,s=new ze(r.alpha),o=new Ot(r.mode),a;if(r.category==="lambert"){n=new Fce;let g=new fr((l=i.color(r.emissive))!=null?l:0);a={emissive:g},n.emissive=g}else if(r.category==="phong"){n=new Nce;let g=new ze((c=r.shininess)!=null?c:30),v=new fr((h=i.color(r.specular))!=null?h:1118481);a={shininess:g,specular:v},n.shininess=g,n.specular=v}else if(r.category==="toon"){n=new Hce;let g=new ze((u=r.shininess)!=null?u:30),v=new fr((d=i.color(r.specular))!=null?d:1118481);a={shininess:g,specular:v},n.shininess=g,n.specular=v}else if(r.category==="physical"){n=new Uce;let g=new ze((f=r.roughness)!=null?f:.3),v=new ze((m=r.metalness)!=null?m:0),y=new ze((p=r.reflectivity)!=null?p:.5);a={roughness:g,metalness:v,reflectivity:y},n.roughness=g,n.metalness=v,n.reflectivity=y}else n=new FB,a={};return n.alpha=new ze(1),n.shadingAlpha=s,n.shadingBlend=o,a.alpha=n.shadingAlpha,a.mode=n.shadingBlend,new fu(e,t,r,n,a)}};function oue(e){let t=e instanceof Tl?e.type:e;return t==="texture"||t==="displace_map"||t==="matcap"}function aue(e,t,r,i){var n,s,o,a,l,c,h,u,d,f,m,p,g,v,y,b,x,A,S,_,w,M,C,E,$,P,D,W,V,H,L,O,k,j,F,Y,X,Z,U,ne,ee,te,Q,de,le,ce,ge,fe,Fe,Ae,Ee,ke,Ue,ot,N,R,se,pe,xe,Ce,tt,oe,Ye,Se,_e,G,Me,be,Je,Ie,rt,ye,Ke;switch(e.type){case"color":{let Pe=new fr((n=i.color)!=null?n:5855577),Te=new ze((s=i.alpha)!=null?s:1),Ge=new Gt("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");Ge.keywords.alpha=Te;let it=new Ot((o=i.mode)!=null?o:0);return Pe.alpha=Te,new ai(t,r,e,{color:Pe,alpha:Te,mode:it},Pe,it,Ge)}case"fresnel":{let Pe=new fr((a=i.color)!=null?a:16777215),Te=new ze((l=i.bias)!=null?l:.1),Ge=new ze((c=i.scale)!=null?c:1),it=new ze((h=i.intensity)!=null?h:2),St=new ze((u=i.factor)!=null?u:1),Zt=new ze((d=i.alpha)!=null?d:1),Ct=new Ot((f=i.mode)!=null?f:0),Ft=new WB(Pe,Te,Ge,it,St,Zt,Ct),Rt=new Gt(Ft.calpha,"f");return new ai(t,r,e,{color:Pe,bias:Te,scale:Ge,intensity:it,factor:St,alpha:Zt,mode:Ct},Ft,Ct,Rt)}case"rainbow":{let Pe=new ze((m=i.filmThickness)!=null?m:30),Te=new ze((p=i.movement)!=null?p:0),Ge=new mn((g=i.wavelengths)!=null?g:new T(0,0,0)),it=new ze((v=i.noiseStrength)!=null?v:0),St=new ze((y=i.noiseScale)!=null?y:1),Zt=new mn((b=i.offset)!=null?b:new T(0,0,0)),Ct=new ze((x=i.alpha)!=null?x:1),Ft=new GB(Pe,Te,Ge,it,St,Zt,Ct),Rt=new Gt(Ft.calpha,"f"),Ut=new Ot((A=i.mode)!=null?A:0);return new ai(t,r,e,{filmThickness:Pe,movement:Te,wavelengths:Ge,noiseStrength:it,noiseScale:St,offset:Zt,alpha:Ct,mode:Ut},Ft,Ut,Rt)}case"transmission":{let Pe=new ze((S=i.thickness)!=null?S:10),Te=new ze((_=i.ior)!=null?_:1.5),Ge=new ze((w=i.roughness)!=null?w:.5),it=Jt.transmissionSize,St=Jt.transmissionRenderTarget,Zt=Jt.transmissionRenderTargetDepth,Ct=window.innerWidth,Ft=window.innerHeight,Rt=Ct>=Ft?new yn(Ft/Ct,1):new yn(1,Ct/Ft),Ut=new ze((M=i.alpha)!=null?M:1),Nr=new qB(Pe,Te,Ge,it,St,Zt,Rt,Ut),Gi=new Gt(Nr.calpha,"f"),vi=new Ot((C=i.mode)!=null?C:0);return new ai(t,r,e,{thickness:Pe,ior:Te,roughness:Ge,aspectRatio:Rt,alpha:Ut,mode:vi},Nr,vi,Gi)}case"toon":{let Pe=new Ot((E=i.positioning)!=null?E:0),Te;i.colors?Te=new nl(i.colors.length,i.colors):(Te=new nl(10,new ct(0,0,0,1)),Te.value[1]=new ct(1,1,1,1));let Ge;i.steps?Ge=new il(i.steps.length,i.steps):(Ge=new il(10,1),Ge.value[0]=0);let it=new mn(($=i.source)!=null?$:new T(0,0,0)),St=new Hd((P=i.isWorldSpace)!=null?P:!0),Zt=new ze((D=i.noiseStrength)!=null?D:0),Ct=new ze((W=i.noiseScale)!=null?W:1),Ft=new ol(i.shadowColor),Rt=new mn((V=i.offset)!=null?V:new T(0,0,0)),Ut=new ze((H=i.alpha)!=null?H:1),Nr=new hz(Pe,Te,Ge,it,St,Zt,Ct,Ft,Rt,Ut),Gi=new Gt(Nr.calpha,"f"),vi=new Ot((L=i.mode)!=null?L:0);return new ai(t,r,e,{positioning:Pe,colors:Te,steps:Ge,source:it,isWorldSpace:St,noiseStrength:Zt,noiseScale:Ct,shadowColor:Ft,offset:Rt,alpha:Ut,mode:vi},Nr,vi,Gi)}case"outline":{let Pe=new fr((O=i.outlineColor)!=null?O:16777215),Te=new fr((k=i.contourColor)!=null?k:16777215),Ge=new ze((j=i.outlineWidth)!=null?j:.1),it=new ze((F=i.contourWidth)!=null?F:.1),St=new ze((Y=i.outlineThreshold)!=null?Y:.1),Zt=new ze((X=i.contourThreshold)!=null?X:.1),Ct=new ze((Z=i.outlineSmoothing)!=null?Z:.1),Ft=new ze((U=i.contourFrequency)!=null?U:.1),Rt=new mn((ne=i.contourDirections)!=null?ne:new T(0,1,0)),Ut=new Hd((ee=i.positionalLines)!=null?ee:!1),Nr=new Hd((te=i.compensation)!=null?te:!0),Gi=Jt.normalRenderTarget,vi=Jt.normalRenderTargetDepth,B=Jt.pixelRatioNode,J=Jt.resolution,ae=new ze((Q=i.alpha)!=null?Q:1),ie=new KB(Pe,Te,Ge,it,St,Zt,Ct,Ft,Rt,Ut,Nr,J,Gi,vi,B,ae),he=new Gt(ie.calpha,"f"),qe=new Ot((de=i.mode)!=null?de:0);return new ai(t,r,e,{outlineColor:Pe,contourColor:Te,outlineWidth:Ge,contourWidth:it,outlineThreshold:St,contourThreshold:Zt,outlineSmoothing:Ct,contourFrequency:Ft,contourDirection:Rt,positionalLines:Ut,compensation:Nr,alpha:ae,mode:qe},ie,qe,he)}case"depth":{let Pe=new Ot((le=i.gradientType)!=null?le:0),Te=new Hd((ce=i.smooth)!=null?ce:!1),Ge=new ze((ge=i.near)!=null?ge:50),it=new ze((fe=i.far)!=null?fe:200),St=new ze((Fe=i.isVector)!=null?Fe:1),Zt=new ze((Ae=i.isWorldSpace)!=null?Ae:0),Ct=new mn((Ee=i.origin)!=null?Ee:new T),Ft=new mn((ke=i.direction)!=null?ke:new T),Rt;i.colors?Rt=new nl(i.colors.length,i.colors):(Rt=new nl(2,new ct(0,0,0,1)),Rt.value[1]=new ct(1,1,1,1));let Ut;i.steps?Ut=new il(i.steps.length,i.steps):(Ut=new il(2,1),Ut.value[0]=0);let Nr=new ze((Ue=i.alpha)!=null?Ue:1),Gi=new Ot((ot=i.mode)!=null?ot:0),vi=new QB(Pe,Te,Ge,it,St,Zt,Ct,Ft,Rt,Ut,Nr),B=new Gt(vi.calpha,"f");return new ai(t,r,e,{gradientType:Pe,smooth:Te,near:Ge,far:it,isVector:St,isWorldSpace:Zt,origin:Ct,direction:Ft,colors:Rt,steps:Ut,alpha:Nr,mode:Gi},vi,Gi,B)}case"noise":{let Pe=new ze((N=i.scale)!=null?N:1),Te=new mn((R=i.size)!=null?R:new T(100,100,100)),Ge=new ze((se=i.move)!=null?se:1),it=new yn((pe=i.fA)!=null?pe:new K(1.7,9.2)),St=new yn((xe=i.fB)!=null?xe:new K(8.3,2.8)),Zt=new yn((Ce=i.distortion)!=null?Ce:new K(1,1)),Ct=new ol(i.colorA),Ft=new ol(i.colorB),Rt=new ol(i.colorC),Ut=new ol(i.colorD),Nr=new ze((tt=i.alpha)!=null?tt:1),Gi=new Ot((oe=i.mode)!=null?oe:0),vi=new Ot((Ye=i.noiseType)!=null?Ye:0),B=new HB(Pe,Te,Ge,it,St,Zt,Ct,Ft,Rt,Ut,Nr,vi),J=new Gt(B.calpha,"f");return new ai(t,r,e,{scale:Pe,size:Te,move:Ge,fA:it,fB:St,distortion:Zt,colorA:Ct,colorB:Ft,colorC:Rt,colorD:Ut,alpha:Nr,mode:Gi,noiseType:vi},B,Gi,J)}case"normal":{let Pe=new mn((Se=i.cnormal)!=null?Se:new T(1,1,1)),Te=new ze((_e=i.alpha)!=null?_e:1),Ge=new Ot((G=i.mode)!=null?G:0),it=new nz(Pe,Te),St=new Gt("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return St.keywords.alpha=Te,new ai(t,r,e,{cnormal:Pe,alpha:Te,mode:Ge},it,Ge,St)}case"gradient":{let Pe=new Ot((Me=i.gradientType)!=null?Me:0),Te=new Hd((be=i.smooth)!=null?be:!1),Ge;i.colors?Ge=new nl(i.colors.length,i.colors):(Ge=new nl(10,new ct(0,0,0,1)),Ge.value[1]=new ct(1,1,1,1));let it;i.steps?it=new il(i.steps.length,i.steps):(it=new il(10,1),it.value[0]=0);let St=new yn((Je=i.offset)!=null?Je:new K(0,0)),Zt=new yn((Ie=i.morph)!=null?Ie:new K(0,0)),Ct=new ze((rt=i.angle)!=null?rt:0),Ft=new ze((ye=i.alpha)!=null?ye:1),Rt=new Ot((Ke=i.mode)!=null?Ke:0),Ut=new tz(Pe,Te,Ge,it,St,Zt,Ct,Ft),Nr=new Gt(Ut.calpha,"f");return new ai(t,r,e,{gradientType:Pe,smooth:Te,colors:Ge,steps:it,offset:St,morph:Zt,angle:Ct,alpha:Ft,mode:Rt},Ut,Rt,Nr)}default:{let Pe=new fr(1,0,0,1),Te=new ze(1),Ge=new Gt("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");Ge.keywords.alpha=Te;let it=new Ot(0);return Pe.alpha=Te,new ai(t,r,e,{color:Pe,alpha:Te,mode:it},Pe,it,Ge)}}}function lue(e,t,r,i){let n=Vce(r,i);return aue(r,e,t,n)}function pz(e,t,r){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=r.alpha*(r.visible?1:0),r.type==="outline"&&e=="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=r.compensation&&r.visible)}return i}}var Gu=class extends kr{constructor(e,t){super(void 0),this.data=e,this.layerIdGen=0,this.type="NodeMaterial",this.uniformsBackup={},this.fog=!0,this.updaters=[],this.dithering=!0,this.vertexColors=!0,this.onBeforeCompile=this._onBeforeCompile,this.transparent=!0,this.reset(e,t)}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.data.category}reset(e,t){var i,n;let r=(i=e.layers)!=null?i:Is.defaultTwoLayerData("phong").layers;this.layers=r.map(s=>Tl.create(this.layerIdGen++,s.id,s.data,t)),this.layers.reverse(),this.name=(n=e.name)!=null?n:"Untitled Material",this.onUpdate(t)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof fu),this.lightLayer===void 0&&(this.lightLayer=new fu(0,"",pl.defaultData("light","basic"),new FB,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(e,t,r){if(this.data=t,e.path[0]==="layers"){let i=e.path[1];if(i===void 0){if(this.layers.reverse(),e.type===4){let n=Tl.create(this.layerIdGen++,e.id,e.data,r);this.layers.splice(e.localIndex,0,n)}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose();else if(e.type===6){let n=this.layers.findIndex(o=>o.uuid===e.id),s=this.layers[n];this.layers.splice(n,1),this.layers.splice(e.localIndex,0,s)}this.layers.reverse(),this.onUpdate(r)}else{let n=this.layers.find(s=>s.uuid===i);if(n){let s=t.layers.data(i);if(n.updateByOp({...e,path:e.path.slice(2)},s,r)){let o=Tl.create(this.layerIdGen++,i,s,r);this.layers.splice(this.layers.findIndex(a=>a.uuid===i),1,o),this.onUpdate(r)}}}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof ai),t=this.layers.findIndex(r=>r instanceof fu);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];n instanceof ai&&(r=new Y3(r,n.color,n.alpha,n.mode))}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new Gt("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof fu);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];i instanceof ai&&(e=new Y3(e,i.color,i.alpha,i.mode))}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof fz);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new Es(t,e[r].position,Es.ADD),t=new Es(t,new ze(.5).setReadonly(!0),Es.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,s)=>Math.min(Math.max(i,n),s);for(let i of this.layers)if(i.type==="displace"){this.uniformsBackup[`f${i.id}_intensity`]=i.uniforms[`f${i.id}_intensity`].value;let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}restoreClampedUniforms(){for(let e of this.layers)e.type==="displace"&&(e.uniforms[`f${e.id}_intensity`].value=this.uniformsBackup[`f${e.id}_intensity`])}customProgramCacheKey(){var t,r;let e="[";for(let{data:i}of this.data.layers)if(i.type==="light")e+=`"${i.category.toUpperCase()}",`;else{let n=((t=oz[i.type])!=null?t:[]).map(a=>i[a]),s=((r=az[i.type])!=null?r:[]).map(a=>{var l,c;return(c=(l=i[a])==null?void 0:l.length)!=null?c:0}),o=[...n,...s];o.length?e+=`["${i.type}", "${o.join('","')}"],`:e+=`"${i.type}",`}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(e){var r;e=e!=null?e:{};let t=(r=e.builder)!=null?r:new zce;return this.lights=this.lightLayer.data.category!=="basic",t.setMaterial(this,e.renderer),t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.transparent=t.requires.transparent||this.blending>wl,this}dispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Gu.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){e===!0&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}});var cue=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

vec2 vogelDiskSample(int sample_index, int sample_count, float angle)
{
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sample_index) + 0.5f) / sqrt(float(sample_count));
  float theta = float(sample_index) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// NOTE: For now we aren't using this screen-space noise. But we should enable
// it again once we do some sort of temporal AA. Then we could potentially lower
// the number of samples needed and still get a pretty smooth result.
// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos)
{
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, ${5} - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

vec4 shadowmod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 shadowperm(vec4 x){return shadowmod289(((x * 34.0) + 1.0) * x);}
float shadowNoise(vec3 p){
            vec3 a = floor(p);
            vec3 d = p - a;
            d = d * d * (3.0 - 2.0 * d);
            vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
            vec4 k1 = shadowperm(b.xyxy);
            vec4 k2 = shadowperm(k1.xyxy + b.zzww);
            vec4 c = k2 + a.zzzz;
            vec4 k3 = shadowperm(c);
            vec4 k4 = shadowperm(c + 1.0);
            vec4 o1 = fract(k3 * (1.0 / 41.0));
            vec4 o2 = fract(k4 * (1.0 / 41.0));
            vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
            vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
            return o4.y * d.y + o4.x * (1.0 - d.y);
        }

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;
    float temporalOffset = shadowNoise(floor(vWPosition * 10.));

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    //float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        float temporalOffset = shadowNoise(floor(vWPosition * 10.));
        float temporalAngle  = temporalOffset * PI2;


        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,uue=lt.lights_fragment_begin,due=lt.shadowmask_pars_fragment,Q3=!1,hue=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},fue=(e="medium")=>{if(Q3)return;Q3=!0;let t=hue(e);lt.shadowmap_pars_fragment=cue(t);let r=uue.slice();r=r.replace("getShadow( spotShadowMap[ i ]",`getShadow( UNROLLED_LOOP_INDEX + ${3}, spotShadowMap[ i ]`),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),lt.lights_fragment_begin=r;let i=due.slice();i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),lt.shadowmask_pars_fragment=i},pue=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,mue=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,A1=new kr({vertexShader:pue,fragmentShader:mue,uniforms:{depthContrast:{value:1}}});function gue(e){var s,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position)return;let t=new Map,r=e.geometry.attributes.position.array,i=e.geometry.attributes.normal.array,n=new Float32Array(r.length);for(let a=0;a<r.length;a+=3){let l=`${r[a]}_${r[a+1]}_${r[a+2]}`,c=new T(i[a],i[a+1],i[a+2]);t.has(l)?(s=t.get(l))==null||s.normals.push(c):t.set(l,{normals:[c],result:new T})}t.forEach((a,l)=>{for(let c of a.normals)a.result.add(c);a.result.divideScalar(a.normals.length)});for(let a=0;a<r.length;a+=3){let l=`${r[a]}_${r[a+1]}_${r[a+2]}`,c=(o=t.get(l))==null?void 0:o.result;c&&(n[a]=c.x,n[a+1]=c.y,n[a+2]=c.z)}e.geometry.setAttribute("extrudeNormal",new $e(n,3))}function vue(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new T;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new $e(r,3))}function f0(e){if(e.objectType!=="TextFrame"){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Gu)||e.material.getLayersOfType("outline").length===0)return;e.objectType==="Mesh2D"?vue(e):gue(e)}}function p0(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[vt.seededRandom(i),vt.seededRandom(i+1e4),vt.seededRandom(i+2e4)];for(let s=0;s<t.length;s++)r[s]=n[s%3];e.geometry.setAttribute("randomColor",new ft(r,3))}var $i=class extends fd(fi){constructor(e,t){super(e,t),this.isAbstractMesh=!0,this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new We,this.booleanExclude=null,Array.isArray(t)&&e.groups.length===0&&e.addGroup(0,e.getAttribute("position").count,0)}get isGroup(){var e;return((e=this._cloner)==null?void 0:e.parameters.hideBase)===!0}get isMesh(){return!this.isGroup}set isMesh(e){}get cloner(){return this._cloner}set cloner(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e}updateGeometry(e){let t=this.geometry,r=wz[t.userData.type],i=this.objectType==="NonParametric"?Object.assign({},t.userData,{geometry:t}):t.userData,n=r.build(r.normalizeInputs(e,i)),s=t.uuid;this.geometry.dispose(),this.geometry=n,this.geometry.uuid=s,this.geometry.computeBoundingSphere(),f0(this),t.getAttribute("randomColor")&&p0(this)}clone(e){let t=this.objectType==="NonParametric"?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,r=Dw(t),i=this.material;return new this.constructor(r,i).copy(this,e)}copy(e,t=!0){return super.copy(e,t),e.cloner&&(this.cloner=new H3(e,e.cloner.parameters),this.add(this.cloner)),this}setFromClonerState(e){e===null?this.cloner=void 0:(this.cloner===void 0&&(this.cloner=new H3(this)),this.cloner.fromClonerState(e))}fromState(e,t){var r,i,n;return super.fromState(e),e.type==="Mesh"&&(this.setFromClonerState(e.cloner),this.castShadow=(r=e.castShadow)!=null?r:!0,this.receiveShadow=(i=e.receiveShadow)!=null?i:!0,this.booleanExclude=(n=e.booleanExclude)!=null?n:null),this}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Zo.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Er(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)Ir(e)&&(e.freeBooleanPointer(),Er(e)&&e.invalidateUpstreamBooleanData())}},yue=new T(0,0,1),Z3=new T,J3=new T,eP=new hi,mz=class extends $i{constructor(e=ka.create({}),t){var r;super(e,t),this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new ki,this._onShapeUpdate=()=>{this.updateGeometry({}),this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()},this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=e.userData.shape,(r=this.shape.eventDispatcher)==null||r.addEventListener("update",this._onShapeUpdate)}fromState(e){return super.fromState(e),this.shape.update(),this}setHelperVisibility(){}updateGeometry(e){if(super.updateGeometry(e),"userData"in this.geometry){let t=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:t})}}setShape(e){var t,r;this.shape&&((t=this.shape.eventDispatcher)==null||t.removeEventListener("update",this._onShapeUpdate)),this.shape=e,(r=this.shape.eventDispatcher)==null||r.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),eP.getNormalMatrix(this.matrixWorld),Z3.copy(yue).applyMatrix3(eP).normalize(),J3.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(Z3,J3)}clone(e){let t=this.shape.clone(),r=this.material,i=this.geometry.userData,n=ka.create(Object.assign({},i,{shape:t})),s=new mz(n,r).copy(this,e);return s.shape=t,t.update(),s}raycast(e,t){$i.prototype.raycast.call(this,e,t)}};function gz(e,t){return xue(e)}function xue(e){let t={parameters:e,type:e.type};if(e.type==="VectorGeometry"){let i=xr.createFromState(e.shape,e.width,e.height);t.shape=i}else e.type==="NonParametricGeometry"&&(e.data.groups&&e.data.groups.forEach(i=>{var n;return i.materialIndex=Math.max((n=i.materialIndex)!=null?n:0,0)}),t.geometry=new XO().parse(e));let r;try{r=Dw(t)}catch(i){console.error(i)}if(!r){let i=xr.createFromState(nv.defaultData(),100,100);t.shape=i,r=Dw(t)}return r}var et;LB.then(e=>{et=e});var tP=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),rP=new Uint32Array([0,1,2,3]),iP=new Uint8Array([4]),Yn=class{static build(e,t,r,i,n){var c,h;let s,o,a,l=(h=(c=e==null?void 0:e.phongAngle)!=null?c:t==null?void 0:t.phongAngle)!=null?h:35;if(i===!1&&(l=-1),e.positionWASM!==void 0){r&&r!==0&&(et.free_bvh(r),et.free_subdivision_surface(r));try{s=Yn.allocate(e,n)}catch(u){console.error(u,e),s=Yn.allocate({positionWASM:tP,indexWASM:rP,verticesPerFaceWASM:iP},n)}et.set_destination_refinement_level(s,0),o=Yn.buildLevel(s,!0,l)}else s=r,e.phongAngle!==void 0&&(o=Yn.buildLevel(s,!0,l));return e.subdivisions!==void 0&&(et.set_destination_refinement_level(s,e.subdivisions),e.subdivisions>0?a=Yn.buildLevel(s,!1,l):a=null),{subdivPointer:s,originalGeometry:o,subdividedGeometry:a}}static primitiveToQuads(e,t){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r=e.shape!==void 0?t.geometry:gz(e),i,n,s,o;({positions:i,triIndices:o}=S2(r.getAttribute("position"),r.getIndex()));let a;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let l=e.radialSegments*e.heightSegments*3*2,c=l+e.radialSegments*3;a=[l,c]}return{indices:n,verticesPerFace:s}=vz(i,o,r,a),{positions:i,indices:n,verticesPerFace:s}}static allocate(e,t){var b;let r,i,n,s=[],o=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=tP,i=rP,n=iP);let a=r.length,l=i.length,c=n.length,h=r.length+s.length+o.length,u=i.length+n.length,d=h*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,m=et._malloc(d),p=new Float32Array(et.HEAPF32.buffer,m,h),g=new Uint32Array(et.HEAPU32.buffer,m+f,u);p.set(r,0),p.set(s,r.length),p.set(o,r.length+s.length),g.set(i,0),g.set(n,i.length);let v;(b=e==null?void 0:e.scaleBaked)!=null&&b.some(x=>x!==1)&&(v=new We().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let y=v?et.alloc_subdivision_surface2(m,a,m+f,l,m+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c,v.elements):et.alloc_subdivision_surface(m,a,m+f,l,m+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return et._free(m),y}static buildLevel(e,t,r,i,n){let s=n?et.get_mesh_data2(e,t?et.Level.CONTROL:et.Level.REFINED,r,n.elements):et.get_mesh_data(e,t?et.Level.CONTROL:et.Level.REFINED,r),o=8,a=et.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,h=et.HEAPU32[a[c]>>2],u=et.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=et.HEAPU32[a[c]>>2],f=et.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let m=et.HEAPU32[a[c]>>2],p=et.HEAPU32.subarray(m>>2,(m>>2)+l[c]);c++;let g=et.HEAPU32[a[c]>>2],v=et.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,i===void 0){let y=new at;if(y.setIndex(new _h(v,1)),y.setAttribute("position",new $e(u,3)),y.setAttribute("normal",new $e(f,3)),t){y.setAttribute("faceMap",new _h(p,1));let b=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new ft(b,4))}return et.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,et.free_mesh_data(s)}static buildControlCageWireframe(e,t,r){let i=et.get_wireframe_data_for_base_level(e),n=4,s=et.HEAPU32.subarray(i>>2,(i>>2)+n),o=s.subarray(2,2+2),a=0,l=et.HEAPU32[s[a]>>2],c=et.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let h=et.HEAPU32[s[a]>>2],u=et.HEAPU32.subarray(h>>2,(h>>2)+o[a]);if(t===void 0){let d=new at;d.setAttribute("position",new $e(c,3));let f=new Float32Array(c.length);for(let m=0,p=c.length;m<p;)f[m++]=r.r,f[m++]=r.g,f[m++]=r.b;return d.setAttribute("color",new ft(f,3)),d.setIndex(new _h(u,1)),et.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,et.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||et.set_destination_refinement_level(e,t);let n=r?et.get_topological_data2(e,i?et.Level.CONTROL:et.Level.REFINED,r.elements):et.get_topological_data(e,i?et.Level.CONTROL:et.Level.REFINED),s=6,o=et.HEAPU32.subarray(n>>2,(n>>2)+s),a=o.subarray(3,3+3),l=0,c=et.HEAPU32[o[l]>>2],h=new Float32Array(et.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=et.HEAPU32[o[l]>>2],d=new Uint32Array(et.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=et.HEAPU32[o[l]>>2],m=new Uint8Array(et.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return et.free_topological_data(n),{positions:h,indices:d,verticesPerFace:m}}},nP=["getX","getY","getZ"];function S2(e,t){let r={},i=t?t.count:e.count,n=0,s=[],o=[],a=1e4;for(let c=0;c<i;c++){let h=t?t.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(e[nP[d]](h)*a)},`;if(u in r)s.push(r[u]);else{for(let d=0;d<3;d++)o.push(e[nP[d]](h));r[u]=n,s.push(n),n++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var pm=new T,M1=new T,E1=new T,C1=new T;function vz(e,t,r,i){var o;let n=[],s=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let a=r.userData.shape.extractShapePointsToFlatArray([]),l=0;for(let h=0;h<a.length;h+=2)l+=(a[h]-a[(h===0?a.length:h)-2])*(a[h+1]+a[(h===0?a.length:h)-1]);e.length=0;let c=0;if(l<0)for(let h=0;h<a.length;h+=2)e.push(a[h],a[h+1],0),n.push(c++);else for(let h=a.length-2;h>=0;h-=2)e.push(a[h],a[h+1],0),n.push(c++);return s.push(c),{indices:n,verticesPerFace:s}}for(let a=0,l=(o=r.capStartIndex)!=null?o:t.length;a<l;)if(t[a+1]===t[a+3]&&t[a+2]===t[a+5]||t[a+0]===t[a+3]&&t[a+2]===t[a+4]){pm.set(e[t[a]*3],e[t[a]*3+1],e[t[a]*3+2]),M1.set(e[t[a+1]*3],e[t[a+1]*3+1],e[t[a+1]*3+2]),E1.set(e[t[a+4]*3],e[t[a+4]*3+1],e[t[a+4]*3+2]),C1.set(e[t[a+5]*3],e[t[a+5]*3+1],e[t[a+5]*3+2]),M1.sub(pm).normalize(),E1.sub(pm).normalize(),C1.sub(pm).normalize();let c=M1.cross(E1).dot(C1);Math.abs(c)>.005||i&&i.some((h,u)=>u%2===1?!1:a>=i[u]&&a<i[u+1])?(n.push(t[a],t[a+1],t[a+2]),s.push(3),a+=3):(n.push(t[a],t[a+1],t[a+4],t[a+5]),s.push(4),a+=6)}else n.push(t[a],t[a+1],t[a+2]),s.push(3),a+=3;if(r.capStartIndex!==void 0){let a=[],l=[],c=0,h=new Float32Array([r.userData.parameters.depth])[0];for(let u=0,d=0;u<e.length;u+=3,d++)e[u+2]===0&&(a.push(d),c++),e[u+2]===h&&l.push(d);if(r.userData.parameters.extrudeBevelSize===0){let u=l[0];l[0]=l[1],l[1]=u}a.reverse(),n.push(...a,...l),s.push(c,c)}return{indices:n,verticesPerFace:s}}var Zo={};pG(Zo,{calcBoolean:()=>Aue,calcBooleanTopological:()=>_ue,freeMeshSet:()=>Cue,getMeshSet:()=>Mue,transformMeshSet:()=>Eue});var yz,bue=new Promise(e=>{yz=e}),sP=!1;async function wue(){if(sP)return;let e="https://unpkg.com/@splinetool/boolean-wasm@0.9.109/build",[t,r]=await Promise.all([fO(()=>import("./boolean.1f3172d1.js"),[]),fetch(`${e}/boolean.wasm`).then(n=>n.arrayBuffer())]),i=await t.default({wasmBinary:r});yz(i),sP=!0}var mt,Lu;bue.then(e=>mt=e);function Sue(e,t,r){let i,{positions:n,triIndices:s}=S2(e.getAttribute("position"),e.getIndex()),o;if(t&&r){let{indices:a,verticesPerFace:l}=vz(n,s,e);o=l.length,i=[];for(let c=0,h=0;c<o;c++){i.push(l[c]);for(let u=0;u<l[c];u++)i.push(a[h++])}}else{let a=s.length;i=Array(a+a/3),o=0;for(let l=0,c=0;c<i.length;)i[c++]=3,o++,i[c++]=s[l++],i[c++]=s[l++],i[c++]=s[l++]}return{positions:n,faceIndices:i,nFaces:o}}function xz(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,s=mt._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(mt.HEAPU32.buffer,s,t):new Float32Array(mt.HEAPF32.buffer,s,t)).set(e,0),s}function bz(e){switch(e){case 0:return mt.OP.UNION;case 1:return mt.OP.INTERSECTION;case 2:return mt.OP.A_MINUS_B;case 3:return mt.OP.B_MINUS_A;case 4:return mt.OP.SYMMETRIC_DIFFERENCE;case 5:return mt.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function _ue(e,t){Lu===void 0&&(Lu=mt.init_csg());let r=xz(e),i=mt.csg_calc_topological(Lu,r,e.length,bz(t));mt._free(r);let n=6,s=mt.HEAPU32.subarray(i>>2,(i>>2)+n),o=s.subarray(3,3+3),a=0,l=mt.HEAPU32[s[a]>>2],c=new Float32Array(mt.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let h=mt.HEAPU32[s[a]>>2],u=new Uint32Array(mt.HEAPU32.subarray(h>>2,(h>>2)+o[a]));a++;let d=mt.HEAPU32[s[a]>>2],f=new Uint8Array(mt.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return mt.free_mesh_data(i),{positions:c,indices:u,verticesPerFace:f}}function Aue(e,t,r,i){Lu===void 0&&(Lu=mt.init_csg());let n=xz(e),s=mt.csg_calc(Lu,n,e.length,i,bz(t));mt._free(n);let o=5,a=mt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,h=mt.HEAPU32[a[c]>>2],u=mt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=mt.HEAPU32[a[c]>>2],f=mt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let m=l[c];r.setAttribute("position",new $e(u,3)),r.setAttribute("normal",new $e(f,3));let p=mt.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new ts),r.boundingSphere.center.set(p[0],p[1],p[2]),r.boundingSphere.radius=(p[3]**2+p[4]**2+p[5]**2)**.5,r.userData.parameters={width:p[3]*2,height:p[4]*2,depth:p[5]*2},mt.free_mesh_data(s),m}function Mue(e,t,r){if(mt===void 0)return-1;let i,n,s;if(t&&e.userData.positions!==void 0){let p=e.userData;s=p.verticesPerFace.length,i=p.positions,n=Array(p.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<p.verticesPerFace.length;g++){n[y++]=p.verticesPerFace[g];for(let b=0;b<p.verticesPerFace[g];b++)n[y++]=p.indices[v++]}}else({positions:i,faceIndices:n,nFaces:s}=Sue(e,t,r));let o=i.length,a=n.length,l=i.length,c=n.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=mt._malloc(h),f=new Float32Array(mt.HEAPF32.buffer,d,l),m=new Uint32Array(mt.HEAPU32.buffer,d+u,c);return f.set(i,0),m.set(n,0),mt.get_csg_mesh(d,o,d+u,a,s)}function Eue(e,t){mt.transform_csg_mesh(e,t.elements)}function Cue(e){mt.free_csg_mesh(e)}var wz={ConeGeometry:hle,CubeGeometry:fle,CylinderGeometry:dle,DodecahedronGeometry:mle,EllipseGeometry:Vle,HelixGeometry:Yle,IcosahedronGeometry:Kle,LatheGeometry:Xle,NonParametricGeometry:tce,PolygonGeometry:rce,PyramidGeometry:ice,RectangleGeometry:oce,SphereGeometry:ace,PlaneGeometry:lce,BackdropGeometry:cce,StarGeometry:dce,TextFrameGeometry:PB,TorusGeometry:hce,TorusKnotGeometry:pce,TriangleGeometry:mce,VectorGeometry:ka},Dw=e=>wz[e.type].create(e),oP=new We;function aP(e){let t=!1;return e.scene.objects.traverse((r,i)=>{var n;((n=i.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var Tue=class extends $i{constructor(e=new at,t){super(e,t),this.booleanOp=2,this.phongAngle=35,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.objectType="BooleanObject",this.castShadow=!0,this.receiveShadow=!0,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}reInit(){this.objectType="BooleanObject",this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1)return;for(let n=0;n<this.children.length;n++){let s=this.children[n];Er(s)&&s.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let s=this.children[n];if(Mce(s)&&s.booleanExclude===!1&&((i=s.geometry.attributes.position)==null?void 0:i.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if(s.geometry.index&&s.geometry.index.count/3<15e5&&(s.booleanMeshSetAddress=Zo.getMeshSet(s.geometry,e===!0,t)),s.booleanMeshSetAddress===-1)return;Zo.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else Er(s)&&s.needsTransformForDownstream===!0?(Zo.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(oP.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),Zo.transformMeshSet(s.booleanMeshSetAddress,oP),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setDrawRange(0,0);return}if(e===!0)return Zo.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new at,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Zo.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,f0(this),p0(this)}updateGeometry(e){let t=e.parameters;t.operation!==void 0&&(this.booleanOp=t.operation),t.phongAngle!==void 0&&(this.phongAngle=t.phongAngle),this.invalidateDownstreamBooleanData().recomputeBoolean()}},Wf=e=>{var t;return t=class extends e{constructor(){super(...arguments),this.isObjectHelper=!0}},t.geometryHelper=new $a(30,30,30),t},mm=new zf,T1=new ts,lP=new We,jf=(e,t,r,i,n=!1)=>{let s=t,o=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),T1.copy(s.boundingSphere),T1.applyMatrix4(o),r.ray.intersectsSphere(T1)===!1||(lP.copy(o).invert(),mm.copy(r.ray).applyMatrix4(lP),s.boundingBox!==null&&mm.intersectsBox(s.boundingBox)===!1))return;let a,l,c,h,u=s.index,d=s.attributes.position,f=s.drawRange,m,p;if(n===!1){let v=Math.max(0,f.start),y=Math.min(u.count,f.start+f.count);for(m=v,p=y;m<p;m+=3)if(l=u.getX(m),c=u.getX(m+1),h=u.getX(m+2),a=g(e,r,mm,d,l,c,h),a){a.faceIndex=Math.floor(m/3),i.push(a);return}}else{let v=s.attributes.position,y=new T,b=new T,x=new T,A=new T,S=2,_=1/((e.scale.x+e.scale.y+e.scale.z)/3),w=_*_,M=Math.max(0,f.start),C=Math.min(v.count,f.start+f.count);for(let E=M,$=C-1;E<$;E+=S){if(y.fromBufferAttribute(v,E),b.fromBufferAttribute(v,E+1),mm.distanceSqToSegment(y,b,A,x)>w)continue;A.applyMatrix4(e.matrixWorld);let P=r.ray.origin.distanceTo(A);P<r.near||P>r.far||i.push({distance:P,point:x.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(v,y,b,x,A,S,_){let w=new T,M=new T,C=new T,E=new T,$=new T;if(w.fromBufferAttribute(x,A),M.fromBufferAttribute(x,S),C.fromBufferAttribute(x,_),b.intersectTriangle(w,M,C,!1,E)===null)return null;$.copy(E),$.applyMatrix4(v.matrixWorld);let P=y.ray.origin.distanceTo($);return P<y.near||P>y.far?null:{faceIndex:1,distance:P,point:$.clone(),object:v}}},gm=new T,pn=new id,Pue=class extends Ff{constructor(e){let t=new at,r=new Ha({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},o=new st(15711266),a=new st(15711266),l=new st(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,d,f){h(u,f),h(d,f)}function h(u,d){i.push(0,0,0),n.push(d.r,d.g,d.b),s[u]===void 0&&(s[u]=[]),s[u].push(i.length/3-1)}t.setAttribute("position",new $e(i,3)),t.setAttribute("color",new $e(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;pn.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Fn("n1",t,e,pn,-r,-i,n),Fn("n2",t,e,pn,r,-i,n),Fn("n3",t,e,pn,-r,i,n),Fn("n4",t,e,pn,r,i,n);let s=n;Fn("f1",t,e,pn,-r,-i,s),Fn("f2",t,e,pn,r,-i,s),Fn("f3",t,e,pn,-r,i,s),Fn("f4",t,e,pn,r,i,s);let o=s,a=.5;Fn("u1",t,e,pn,r*.7*a,i*1.1,o),Fn("u2",t,e,pn,-r*.7*a,i*1.1,o),Fn("u3",t,e,pn,0,i*(1.1+.9*a),o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Fn(e,t,r,i,n,s,o){gm.set(n,s,o).unproject(i);let a=t[e];if(a!==void 0){let l=r.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],gm.x,gm.y,gm.z)}}var Due=class extends Wf(Pue){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){jf(this.object,this.geometry,e,t,!0)}},Sz=class extends Wf(hJ){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){jf(this.object,Sz.geometryHelper,e,t)}},_z=class extends Wf(fJ){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){jf(this.object,_z.geometryHelper,e,t)}update(){}},Az=class extends Wf(dJ){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){jf(this.object,Az.geometryHelper,e,t)}},Lw=class extends Wf(uJ){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){jf(this.object,Lw.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=Lw._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},Mz=Lw;Mz._vector=new T;var Gf=(e,t)=>class extends e{constructor(){super(...arguments),this.objectHelper=new t(this)}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}fromLightState(r,i){if(this.objectType==="LightDirectional"||this.objectType==="LightPoint"||this.objectType==="LightSpot"){let n=this;r.color!==void 0&&(n.color=Ai(r.color,i)),r.intensity!==void 0&&(n.intensity=r.intensity),r.depth!==void 0&&(n.shadow.camera.far=r.depth,n.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}return this}},Dc=new T,P1=new T,jl=class extends Gf(fd(id),Due){constructor(e=window.innerWidth,t=window.innerHeight,r=45,i,n=1e5){super(),this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=ff.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=e,this.height=t,this.orthoCamera=new k_(e*-.5,e*.5,t*.5,t*-.5,i!=null?i:-5e4,n),this.perspCamera=new ui(r,e/t,i!=null?i:50,n),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic()}static createFromState(e,t){let r=new jl().fromState(t);return r.objectHelper.update(),r.uuid=e,r}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(Dc),this.targetOffset=Dc.distanceTo(e)}getTarget(e=new T){return this.getWorldDirection(P1),this.getWorldPosition(Dc),P1.multiplyScalar(this.targetOffset),e.copy(Dc).add(P1),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(Dc),Dc.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new Yt),t=new T(0,0,1).applyQuaternion(e),r=new T().copy(zt.DefaultUp);this.isUpVectorFlipped&&r.negate(),r.applyQuaternion(e);let i=new T().copy(zt.DefaultUp).projectOnPlane(t),n=new T().crossVectors(i,r).dot(t)>=0?1:-1;this.angleOffsetFromUp=i.angleTo(r)*n}getViewFrontToObject(e){let t=e.getWorldPosition(new T),r=e.getWorldDirection(new T).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToObject(e){let t=e.getWorldPosition(new T),r=this.getWorldDirection(new T).multiplyScalar(this.targetOffset);return{position:t.clone().sub(r),target:t}}setViewplaneSize(e,t){this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5,this.aspect=e/t,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,s):this.orthoCamera.setViewOffset(e,t,r,i,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return qb(t,e)}fromCameraState(e){let{orthographic:t,perspective:r}=e;return e.type!==void 0&&(this.cameraType=e.type),e.far!==void 0&&(this.far=e.far),t!==void 0&&(t.near!==void 0&&(this.orthoCamera.near=t.near),t.zoom!==void 0&&(this.orthoCamera.zoom=t.zoom)),r!==void 0&&(r.near!==void 0&&(this.perspCamera.near=r.near),r.fov!==void 0&&(this.perspCamera.fov=r.fov),r.zoom!==void 0&&(this.perspCamera.zoom=r.zoom)),e.type==="PerspectiveCamera"?(this.zoom=this.perspCamera.zoom,this.fov=this.perspCamera.fov,this.near=this.perspCamera.near):(this.near=this.orthoCamera.near,this.zoom=this.orthoCamera.zoom),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}fromState(e){return super.fromState(e),this.fromCameraState(e),this}},$w=class extends Gf(fd(rh),_z){constructor(){super(...arguments),this.objectType="EmptyObject"}static createFromState(e,t){let r=new $w().fromState(t);return r.uuid=e,r.objectHelper.update(),r}},Ez=class extends Gf(fd(oJ),Sz){constructor(...e){super(...e),this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let t=this.shadow.camera;t.top=1250,t.bottom=-1250,t.right=1250,t.left=-1250,t.near=-1e4,t.far=2500;let r=new ua(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let i=new Ez().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ua&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ua&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ua&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}fromDirectionalLightState(e,t){let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;return super.fromLightState(e,t),e.size!==void 0&&wce(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),r&&this.update(),this}fromState(e,t){return super.fromState(e),this.fromDirectionalLightState(e,t),this}},Cz=class extends Gf(fd(nJ),Az){constructor(...e){super(...e),this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let t=this.shadow.camera;t.fov=90,t.aspect=1,t.near=100,t.far=2500;let r=new T(-t.far+this.position.x,-t.far+this.position.y,-t.far+this.position.z),i=new T(t.far+this.position.x,t.far+this.position.y,t.far+this.position.z),n=new zr(r,i),s=new im(n,new st(16755200));s.visible=!1,this._gizmos.shadowmap=s,this.update()}static createFromState(e,t,r){let i=new Cz().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof im&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof im&&(t.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let e in this._gizmos){let t=this._gizmos[e];if(t instanceof im){let r=this.shadow.camera,i=new T(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new T(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}fromPointLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromPointLightState(e,t),this}},cP=new T,uP=new T,dP=new Yt,Tz=class extends Gf(fd(rJ),Mz){constructor(...e){super(...e),this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let t=this.shadow.camera;t.fov=vt.RAD2DEG*2*this.angle,t.aspect=1,t.near=100,t.far=2500;let r=new ua(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let i=new Tz().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ua&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ua&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ua&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),uP.setFromMatrixPosition(this.matrixWorld),dP.setFromRotationMatrix(this.matrixWorld),cP.copy(this.up).applyQuaternion(dP).negate().multiplyScalar(this.distance),this.target.position.copy(uP).add(cP),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}fromSpotLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromSpotLightState(e,t),this}},hP=e=>e.tagName==="VIDEO",Pz=class{static resize(e,t,r){let i=e/t,n;if(!r.image)return;let s=r.image;hP(s)?n=s.videoWidth/s.videoHeight:n=s.width/s.height,i>n&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1*n/i):r.repeat.set(1,1*n/i)),i<n&&(r.imageType=="WEBCAM"?r.repeat.set(1*i/n*-1,1):r.repeat.set(1*i/n,1)),i==n&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1):r.repeat.set(1,1))}static resizeTextureLayer(e,t,r){let i=e/t,n=r.image!==void 0?r.image.width/r.image.height:1,s;i>n?s={x:1,y:n/i}:i<n?s={x:i/n,y:1}:s={x:1,y:1},r.repeat.set(s.x,s.y),r.updateMatrix()}static resizeTextureLayers(e,t,r){let i=r.layers;for(let n=0;n<i.length;n++){let s=i[n];oue(s)&&Pz.resizeTextureLayer(e,t,s.uniforms[`f${s.id}_texture`].value)}}static resizeComplex(e,t,r,i){let n=e/t,s,o=r.image;hP(o)?s=o.videoWidth/o.videoHeight:s=o.width/o.height,i.geometry.type.includes("Shape")?(n>s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*-1,1/t*s/n):r.repeat.set(1/e,1/t*s/n)),n<s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*n/s*-1,1/t):r.repeat.set(1/e*n/s,1/t)),n==s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*-1,1/t):r.repeat.set(1/e,1/t))):(n>s&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1*s/n):r.repeat.set(1,1*s/n)),n<s&&(r.imageType=="WEBCAM"?r.repeat.set(1*n/s*-1,1):r.repeat.set(1*n/s,1)),n==s&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1):r.repeat.set(1,1)))}},Lue=class extends $i{constructor(e,t){super(e,t),this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(e){super.updateGeometry(e),this.material.layers&&Pz.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}},Dz=class extends $i{constructor(e,t){super(e,t),this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}},$ue=class extends Dz{constructor(e,t){super(e,t),this.objectType="NonParametric"}},Iue=class extends Qv{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new Gg(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(o){let a;try{a=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(o.substring(65,o.length-2))}let l=n.parse(a);t&&t(l)},r,i)}parse(e){return new Rue(e)}},Rue=class{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){let r=[],i=kue(e,t,this.data);for(let n=0,s=i.length;n<s;n++)r.push(...i[n].toShapes());return r}};function kue(e,t,r){let i=Array.from(e),n=t/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,o=[],a=0,l=0;for(let c=0;c<i.length;c++){let h=i[c];if(h===`
`)a=0,l-=s;else{let u=Oue(h,n,a,l,r);a+=u.offsetX,o.push(u.path)}}return o}function Oue(e,t,r,i,n){let s=n.glyphs[e]||n.glyphs["?"];if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+n.familyName+".");return}let o=new pJ,a,l,c,h,u,d,f,m;if(s.o){let p=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,v=p.length;g<v;)switch(p[g++]){case"m":a=p[g++]*t+r,l=p[g++]*t+i,o.moveTo(a,l);break;case"l":a=p[g++]*t+r,l=p[g++]*t+i,o.lineTo(a,l);break;case"q":c=p[g++]*t+r,h=p[g++]*t+i,u=p[g++]*t+r,d=p[g++]*t+i,o.quadraticCurveTo(u,d,c,h);break;case"b":c=p[g++]*t+r,h=p[g++]*t+i,u=p[g++]*t+r,d=p[g++]*t+i,f=p[g++]*t+r,m=p[g++]*t+i,o.bezierCurveTo(u,d,f,m,c,h);break}}return{offsetX:s.ha*t,path:o}}var _r=class extends fi{constructor({char:e,originalChar:t,fontFamily:r,letterSpacing:i,fontSize:n,LOD:s=16},o=new Uu({color:0,opacity:1,visible:!0,transparent:!0,side:_i})){let a=_r.loadChar(e,r,s);super(a.geometry,o),this.char=e,this.originalChar=t!=null?t:e,this.fontFamily=r,this.letterSpacing=i,this.fontSize=n,this.LOD=s,this.resolution=a.resolution,this.glyphsHa=a.glyphsHa,this.localPosition=new K,this.charSize=0,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}static get FONTS_PATH(){return _r._fontPath}static set FONTS_PATH(e){_r._fontPath=e}updatePosition(e,t){this.localPosition.copy(e);let r=new T(this.localPosition.x,-this.localPosition.y,0);this.position.copy(r).add(t)}updateFontSize(e){let t=e/this.resolution;this.fontSize=e,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*t*this.letterSpacing}updateFontFamily(e){if(this.fontFamily===e)return;this.fontFamily=e;let t=_r.loadChar(this.char,e,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateChar(e){if(this.char===e)return;this.char=e;let t=_r.loadChar(e,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateLetterSpacing(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.updateFontSize(this.fontSize))}updateLOD(e){if(this.LOD===e)return;this.LOD=e;let t=_r.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}clone(){let e={char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD};return new _r(e).copy(this)}static loadFont(e){return new Promise(function(t,r){_r.fontCache[e]?t(_r.fontCache[e]):new Iue().load(_r.FONTS_PATH+e+".json",i=>{_r.fontCache[e]=i,t(i)},void 0,r)})}static loadChar(e,t,r){if(_r.charCache[e]){if(_r.charCache[e][r]&&_r.charCache[e][r].fontFamily===t)return _r.charCache[e][r]}else _r.charCache[e]={};let i=_r.fontCache[t],n=i.generateShapes(e,1);return _r.charCache[e][r]={geometry:new GO(n,r),fontFamily:t,resolution:i.data.resolution,glyphsHa:i.data.glyphs[e].ha},_r.charCache[e][r]}},ra=_r;ra.charCache={},ra.fontCache={},ra._fontPath="/_assets/_fonts/";var vm=new K,Iw=class{constructor(e,t,r){this.message=[],this.endLine=!0,this.yLinePos=e,this.lineHeight=t,this.maxCharSize=r,this.nextChar3DPos=new K(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=1}addChar3D(e,t,r=this.message.length){this.message.splice(r,0,e),e.fontSize>this.maxCharSize?(this.maxCharSize=e.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate(t)):(e.updatePosition(this.nextChar3DPos,t),this.nextChar3DPos.x+=e.charSize)}deleteChar3D(e=this.message.length-1){let t=this.message[e];if(t)return this.message.splice(e,1),this.nextChar3DPos.x-=t.charSize,t}isEndLine(e){this.endLine=e}fullUpdate(e,t=0){this.nextChar3DPos.x=0;for(let r=t,i=this.message.length;r<i;r+=1)this.message[r].updatePosition(this.nextChar3DPos,e),this.nextChar3DPos.x+=this.message[r].charSize}checkOverFlow(e){let t,r=this.message.length-1;if(r<=0)return!1;for(;r>=0;){if(this.message[r].char!==" "){t=this.message[r];break}r-=1}return!!(r>=0&&t&&t.localPosition.x+t.charSize>e)}containSpaceOverFlow(e=this.message.length-1){for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}containSpace(e=this.message.length-1){if(this.endLine)return!0;for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}popWord(e=this.message.length-1){let t=[],r=!0,i;for(i=e;i>=0;i-=1)if(this.message[i].char===" "){r=!1,t.length===0&&(i-=1,t.splice(0,0,this.message[i]));break}else t.splice(0,0,this.message[i]);return r?t=[]:this.message.splice(i+1,t.length),t}getWord(e=0,t=1){let r=[],i=e;for(i=e;;i+=t){if(!this.message[i]||this.message[i].char===" "){r.length===0&&this.message[i]&&(r.push(this.message[i]),this.message.splice(i,1));break}t>0?(r.push(this.message[i]),this.message.splice(i,1),i-=t):(r.splice(0,0,this.message[i]),this.message.splice(i,1))}return r}getWordAtIndex(e){let t=[];for(let r=e;r<this.message.length&&this.message[r].char!==" ";r++)t.push(this.message[r]);for(let r=e-1;r>=0&&this.message[r].char!==" ";r--)t.splice(0,0,this.message[r]);return t}wordSize(e=0,t=-1){let r=0,i=e;for(;i>=0&&i<this.message.length;){if(this.message[i].char===" "){r===0&&(r=this.message[i].charSize);break}r+=this.message[i].charSize,i+=t}return(i<0||i>=this.message.length)&&!this.endLine?this.message[e]?this.message[e].charSize:999999999:r===0?999999999:r}spaceLeft(e){return e-this.nextChar3DPos.x}popChar(e=this.message.length-1){return this.nextChar3DPos.x-=this.message[e].charSize,this.message.splice(e,1)}isEmpty(){return!this.message.length}updateNextCharPosY(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}updateYLinePos(e){this.yLinePos=e,this.updateNextCharPosY()}updatelineHeight(e){this.lineHeight=e,this.updateNextCharPosY()}updateFontSize(e,t=0,r=this.message.length-1){for(let i=t;i<=r;i+=1)this.message[i].updateFontSize(e);this.maxCharSize=e,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}countSpaces(){let e=0;for(let t=0;t<this.message.length;t++)this.message[t].char===" "&&(e+=1);return e}alignText(e,t,r,i,n){switch(r){case 1:this.leftAlign(e,n);break;case 3:this.centerAlign(this.spaceLeft(t),e,n);break;case 2:this.rightAlign(this.spaceLeft(t),e,n);break;case 4:this.justifyAlign(this.spaceLeft(t),e,n);break}}offsetCharacters(e,t,r){vm.set(t,r);let i=this.message.length;for(let n=0;n<i;n++)this.message[n].updatePosition(this.message[n].localPosition.add(vm),e)}leftAlign(e,t){this.align=1,this.offsetCharacters(e,0,t)}centerAlign(e,t,r){this.align=3,this.offsetCharacters(t,e/2,r)}rightAlign(e,t,r){this.align=2,this.offsetCharacters(t,e,r)}justifyAlign(e,t,r){if(this.align=4,this.endLine){this.offsetCharacters(t,0,r);return}let i=this.countSpaces();if(i===0){this.offsetCharacters(t,0,r);return}let n=e/i,s=0;for(let o=0;o<this.message.length;o++)this.message[o].char===" "&&(s+=n),vm.set(s,r),this.message[o].updatePosition(this.message[o].localPosition.add(vm),t)}clone(){let e=new Iw(this.yLinePos,this.lineHeight,this.maxCharSize);e.nextChar3DPos=this.nextChar3DPos.clone(),e.align=this.align,e.endLine=this.endLine;for(let t=0;t<this.message.length;t++)e.message.push(this.message[t].clone());return e}},Lz=class extends $i{constructor(e){super(e,new Uu({transparent:!0,opacity:1,visible:!1,side:_i})),this.objectType="TextFrame",this.charContainer=new zt,this.add(this.charContainer),this.material.visible=!1,this._geometryUserData=e.userData,this.userData.textFrame={hexColor:null,opacity:1,visible:!0,text:"",fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:1,horizontalAlignment:1,verticalAlignment:1,LOD:16,maxLineSize:this._geometryUserData.parameters.width,textOrigin:new T(this._geometryUserData.parameters.width*-.5,this._geometryUserData.parameters.height*.5,0),textLines:[]},this.createTextLine()}static createFromState(e,t,r){let i=PB.create({parameters:{width:t.width,height:t.height}}),n=new Lz(i).fromState(t,r);return n.uuid=e,n}async updateText(e){this.clearText();let t=this.userData.textFrame,r=t.fontFamily;await ra.loadFont(r),t.text=e;let i=t.textOrigin,n=new Uu({visible:t.visible,transparent:!0,side:_i}),s=e.split(`
`),o=0;this.userData.textFrame.textLines=s.map((a,l)=>{let c=new Iw(o,t.lineHeight,t.fontSize);return c.message=a.split("").map(h=>{let u={char:h,fontFamily:r,letterSpacing:t.letterSpacing,fontSize:t.fontSize,LOD:16},d=n.clone();d.color=t.hexColor,d.opacity=t.opacity;let f=new ra(u,d);return c.addChar3D(f,i),this.charContainer.add(f),f}),o+=c.maxCharSize*c.lineHeight,c}),this.textFullUpdate(),this.checkOverFlow()}clearText(){let e=this.userData.textFrame.textLines;for(;this.charContainer.children.length;){let t=this.charContainer.children[0];this.charContainer.remove(t)}for(;e.length;)e.pop()}raycast(e,t){let r=[];if(super.raycast(e,r),r.length>0){t.push(r[0]);return}let i=[];for(let n=0,s=this.charContainer.children.length;n<s;++n)if(this.charContainer.children[n]instanceof ra&&(e.intersectObject(this.charContainer.children[n],!1,i),i.length>0)){i[0].object=this,t.push(i[0]);return}}updateGeometry(e){var l,c,h,u;let t=this.userData,r=this.geometry.userData,i=r.parameters.width,n=r.parameters.height,s=(c=(l=e.parameters)==null?void 0:l.width)!=null?c:i,o=(u=(h=e.parameters)==null?void 0:h.height)!=null?u:n,a=t.textFrame;super.updateGeometry(e),a.maxLineSize=s,a.textOrigin.set(-.5*s,.5*o,0),o!==n?(this.checkOverFlow(),this.checkCapacity()):s!==i&&(i<s?this.checkCapacity():i>s&&this.checkOverFlow())}checkOverFlow(e=0){let t=this.userData,r=t.textFrame.textOrigin,i=t.textFrame.textLines;for(let n=e;n<i.length;n++){i[n].updateYLinePos(this.getNewLinePosition(n)),i[n].fullUpdate(r);let s=[];for(;i[n].checkOverFlow(t.textFrame.maxLineSize);)i[n].containSpaceOverFlow()?s.unshift(i[n].getWord(i[n].message.length-1,-1)):s.unshift(i[n].popChar());if(s.length>0){i[n+1]===void 0?(i[n].isEndLine(!1),this.createTextLine()):i[n].endLine&&(this.createTextLine(n+1),i[n].isEndLine(!1),i[n+1].isEndLine(!0));let o=0;for(let a=0;a<s.length;a+=1)for(let l=0;l<s[a].length;l+=1)i[n+1].addChar3D(s[a][l],r,o),o+=1;i[n+1].fullUpdate(r)}i[n].fullUpdate(r)}this.textFullUpdate(e)}checkCapacity(e=0){let t=this.userData,r=t.textFrame.textOrigin,i=t.textFrame.maxLineSize,n=t.textFrame.textLines;for(let s=e;s<n.length;s+=1)if(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(r),!!n[s-1])for(;!n[s-1].endLine;){let o,a=n[s-1].spaceLeft(i);if(n[s].wordSize(0,1)<=a){n[s].containSpace()?o=n[s].getWord(0,1):o=n[s].popChar(0);for(let l=0;l<o.length;l+=1)o[l]&&n[s-1].addChar3D(o[l],r)}else{n[s].isEmpty()?(n[s].endLine&&n[s-1].isEndLine(!0),n.splice(s,1),s-=1):(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(r));break}}this.textFullUpdate(e)}createTextLine(e=this.userData.textFrame.textLines.length){let t=this.userData.textFrame;t.textLines.splice(e,0,new Iw(this.getNewLinePosition(e),t.lineHeight,t.fontSize))}textFullUpdate(e=0){let t=this.userData.textFrame,r=t.textLines,i=this.getVerticalAlignmentOffSet();for(let n=e;n<r.length;n++)r[n].updateYLinePos(this.getNewLinePosition(n)),r[n].fullUpdate(t.textOrigin),r[n].alignText(t.textOrigin,t.maxLineSize,t.horizontalAlignment,t.verticalAlignment,i)}getVerticalAlignmentOffSet(){switch(this.userData.textFrame.verticalAlignment){case 1:return 0;case 2:return this.getRemainingVerticalSpace()/2;case 3:return this.getRemainingVerticalSpace();default:return 0}}getRemainingVerticalSpace(){let e=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(e.length)}getNewLinePosition(e){let t=this.userData.textFrame.textLines,r=0;for(let i=0;i<e;i+=1)r+=t[i].maxCharSize*t[i].lineHeight;return r}updateColor(e){var i;let t=this.userData;t.textFrame.hexColor=e;let r=t.textFrame.textLines;for(let n=0;n<r.length;n++){let s=r[n].message;for(let o=0;o<s.length;o++){let a=s[o].material;(i=a.color)!=null&&i.isColor&&(a.color=e)}}}updateOpacity(e){let t=this.userData;t.textFrame.opacity=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++){let o=n[s].material;o.opacity=e}}}updateVisible(e){let t=this.userData;t.textFrame.visible=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++){let o=n[s].material;o.visible=e}}}async updateFontFamily(e){await ra.loadFont(e);let t=this.userData.textFrame,r=t.textLines;t.fontFamily=e;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)n[s].updateFontFamily(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateFontSize(e){let t=this.userData.textFrame,r=t.textLines,i=t.fontSize;t.fontSize=e;for(let n=0;n<r.length;n++)r[n].updateFontSize(e);this.textFullUpdate(),e>i?this.checkOverFlow():e<i&&this.checkCapacity()}async updateTextTransform(e){let t=this.userData.textFrame;await ra.loadFont(t.fontFamily);let r=t.textLines;switch(t.textTransform=e,e){case 2:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].char.toUpperCase())}break;case 3:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].char.toLowerCase())}break;default:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].originalChar)}}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLetterSpacing(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.letterSpacing=e;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)n[s].updateLetterSpacing(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLOD(e){let t=this.userData;t.textFrame.LOD=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLineHeight(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.lineHeight=e;for(let i=0;i<r.length;i++)r[i].updatelineHeight(e);this.textFullUpdate()}updateVerticalAlignment(e){let t=this.userData;t.textFrame.verticalAlignment=e,this.textFullUpdate()}updateHorizontalAlignment(e){let t=this.userData;t.textFrame.horizontalAlignment=e,this.textFullUpdate()}fromTextFrameData(e,t){if(e.color!==void 0){let r=Ai(e.color,t);this.updateColor(r),this.updateOpacity(r.a)}e.alpha!==void 0&&this.updateOpacity(e.alpha),e.font!==void 0&&this.updateFontFamily(e.font),e.horizontalAlign!==void 0&&this.updateHorizontalAlignment(e.horizontalAlign),e.verticalAlign!==void 0&&this.updateVerticalAlignment(e.verticalAlign),e.textTransform!==void 0&&this.updateTextTransform(e.textTransform),e.fontSize!==void 0&&this.updateFontSize(e.fontSize),e.lineHeight!==void 0&&this.updateLineHeight(e.lineHeight),e.letterSpacing!==void 0&&this.updateLetterSpacing(e.letterSpacing),e.text!==void 0&&e.text!==""&&this.updateText(e.text),(e.width!==void 0||e.height!==void 0)&&this.updateGeometry({parameters:{width:e.width,height:e.height}})}fromState(e,t){return super.fromState(e),this.fromTextFrameData(e,t),this}},tg=Lz;tg.VerticalAlign=uB,tg.HorizontalAlign=cB,tg.TextTransform=dB;var Rw=class extends Gu{},Bue=mO(gG()),fP=new Map;function zue(e){if(typeof e=="string")return e;let t=fP.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},fP.set(e,t)),t.url}var rg=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._isStarted=!1,this.onEnd=()=>{this._loop>1?this.loopsRemaining===1/0?this.play():this.loopsRemaining>1?(this.play(),this.loopsRemaining--):this._isStarted=!1:this._isStarted=!1};let n;typeof e=="string"?n={src:e}:n={src:zue(e),format:"wav"},this.sound=new Bue.Howl(n),this.sound.on("end",this.onEnd),this._src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get src(){return this._src}get isStarted(){return this._isStarted}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._isStarted=!0,this.delay?(this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)):this.sound.play()}pause(){this._isStarted=!1,this.sound.pause(),this.clearFade(),this.clearDelay()}stop(){this._isStarted=!1,this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay()}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},$z=class{constructor(e,t={}){if(this.deletedMaterial=new Rw(Is.defaultTwoLayerData("basic"),this),this.deletedImage=new Pw(yw.emptyImage),this.materials={},this.images={},this.colors={},this.audios={},this.penumbraSize=[],this.onImageLoad=()=>{this._onImageLoad&&this._onImageLoad()},t.images)for(let[r,i]of Object.entries(t.images))this.addImage(r,i);if(t.audios)for(let[r,i]of Object.entries(t.audios))this.addAudio(r,i.data);this.reset(e)}setOnImageLoad(e){this._onImageLoad=e}reset(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,new Rw(r,this));for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.data);this.penumbraSize=e.penumbraSize}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].dispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return(t=this.materials[e])!=null?t:this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):new Gu(e,this)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.images[e].updateSrc(t.data),!0):(this.images[e]=new Pw(t,this.onImageLoad),!1)}deleteImage(e){this.images[e]&&delete this.images[e]}getDefaultImage(){return this.images.image_0}getImage(e){var t;return(t=this.images[e])!=null?t:this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):new sz(e,this.onImageLoad)}getImages(){return this.images}addColor(e,t){return this.colors[e]?("a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new dv(t.r,t.g,t.b,t.a):this.colors[e]=new dv(t.r,t.g,t.b,1),!1)}updateColor(e,t){var r,i,n,s;if(this.colors[e]){let o=this.colors[e];return this.colors[e].r=(r=t.r)!=null?r:o.r,this.colors[e].g=(i=t.g)!=null?i:o.g,this.colors[e].b=(n=t.b)!=null?n:o.b,this.colors[e].a=(s=t.a)!=null?s:o.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new Jn(0,0,0,0))}else return"a"in e?new Jn(e.r,e.g,e.b,e.a):new Jn(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof rg)return t;{let r=new rg({src:t});return this.audios[e]=r,r}}deleteAudio(e){this.audios[e]&&delete this.audios[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._onImageLoad=void 0,Object.values(this.audios).forEach(e=>{e instanceof rg&&e.dispose()}),this.audios={}}};new $z(vw.emptyData());var D1=new WeakMap,Nue=class extends Qv{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){let n=new Gg(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{let o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,o).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){for(let a in t.attributeTypes){let l=t.attributeTypes[a];l.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[a]=l.name)}let r=JSON.stringify(t);if(D1.has(e)){let a=D1.get(e);if(a.key===r)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,n=this.workerNextTaskID++,s=e.byteLength,o=this._getWorker(n,s).then(a=>(i=a,new Promise((l,c)=>{i._callbacks[n]={resolve:l,reject:c},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),D1.set(e,{key:r,promise:o}),o}_createGeometry(e){let t=new at;e.index&&t.setIndex(new ft(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r],n=i.name,s=i.array,o=i.itemSize;t.setAttribute(n,new ft(s,o))}return t}_loadLibrary(e,t){let r=new Gg(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,n)=>{r.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let n=Fue.toString(),s=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){let s=n.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function Fue(){let e,t;onmessage=function(o){let a=o.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise(function(h){e.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(e)});break;case"decode":let l=a.buffer,c=a.taskConfig;t.then(h=>{let u=h.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let m=r(u,d,f,c),p=m.attributes.map(g=>g.array.buffer);m.index&&p.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},p)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{u.destroy(f),u.destroy(d)}});break}};function r(o,a,l,c){let h=c.attributeIDs,u=c.attributeTypes,d,f,m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeBufferToMesh(l,d);else if(m===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let p={index:null,attributes:[]};for(let g in h){let v=self[u[g]],y,b;if(c.useUniqueIDs)b=h[g],y=a.GetAttributeByUniqueId(d,b);else{if(b=a.GetAttributeId(d,o[h[g]]),b===-1)continue;y=a.GetAttribute(d,b)}p.attributes.push(n(o,a,d,g,v,y))}return m===o.TRIANGULAR_MESH&&(p.index=i(o,a,d)),o.destroy(d),p}function i(o,a,l){let c=l.num_faces()*3,h=c*4,u=o._malloc(h);a.GetTrianglesUInt32Array(l,h,u);let d=new Uint32Array(o.HEAPF32.buffer,u,c).slice();return o._free(u),{array:d,itemSize:1}}function n(o,a,l,c,h,u){let d=u.num_components(),f=l.num_points()*d,m=f*h.BYTES_PER_ELEMENT,p=s(o,h),g=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,u,p,m,g);let v=new h(o.HEAPF32.buffer,g,f).slice();return o._free(g),{name:c,array:v,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var ma;function Uue(){return ma||(ma=new Nue,ma.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),ma.decoderPending}async function Hue(e){if(ma){let t={attributeIDs:ma.defaultAttributeIDs,attributeTypes:ma.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await ma.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([i,n])=>({name:i,itemSize:n.itemSize,array:n.array}))}}return null}async function Vue(e,t){let[r,i]=q4(aw.deserialize(new Uint8Array(e)));jae(r);let n=[];r.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&n.push(o)}),n.length&&await Uue();for(let s of n){let o=await Hue(Mo(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:h})=>{a[l]={array:c,itemSize:h,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return t&&t(r),i.result().data}var Iz={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},_2={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Wue=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],hv={CSS:{},springs:{}};function Cs(e,t,r){return Math.min(Math.max(e,t),r)}function Ph(e,t){return e.indexOf(t)>-1}function L1(e,t){return e.apply(null,t)}var Ze={arr:function(e){return Array.isArray(e)},obj:function(e){return Ph(Object.prototype.toString.call(e),"Object")},pth:function(e){return Ze.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||Ze.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Ze.hex(e)||Ze.rgb(e)||Ze.hsl(e)},key:function(e){return!Iz.hasOwnProperty(e)&&!_2.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Rz(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function kz(e,t){var r=Rz(e),i=Cs(Ze.und(r[0])?1:r[0],.1,100),n=Cs(Ze.und(r[1])?100:r[1],.1,100),s=Cs(Ze.und(r[2])?10:r[2],.1,100),o=Cs(Ze.und(r[3])?0:r[3],.1,100),a=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),c=l<1?a*Math.sqrt(1-l*l):0,h=1,u=l<1?(l*a+-o)/c:-o+a;function d(m){var p=t?t*m/1e3:m;return l<1?p=Math.exp(-p*l*a)*(h*Math.cos(c*p)+u*Math.sin(c*p)):p=(h+u*p)*Math.exp(-p*a),m===0||m===1?m:1-p}function f(){var m=hv.springs[e];if(m)return m;for(var p=1/6,g=0,v=0;;)if(g+=p,d(g)===1){if(v++,v>=16)break}else v=0;var y=g*p*1e3;return hv.springs[e]=y,y}return t?d:f}function jue(e){return e===void 0&&(e=10),function(t){return Math.ceil(Cs(t,1e-6,1)*e)*(1/e)}}var Gue=function(){var e=11,t=1/(e-1);function r(h,u){return 1-3*u+3*h}function i(h,u){return 3*u-6*h}function n(h){return 3*h}function s(h,u,d){return((r(u,d)*h+i(u,d))*h+n(u))*h}function o(h,u,d){return 3*r(u,d)*h*h+2*i(u,d)*h+n(u)}function a(h,u,d,f,m){var p,g,v=0;do g=u+(d-u)/2,p=s(g,f,m)-h,p>0?d=g:u=g;while(Math.abs(p)>1e-7&&++v<10);return g}function l(h,u,d,f){for(var m=0;m<4;++m){var p=o(u,d,f);if(p===0)return u;var g=s(u,d,f)-h;u-=g/p}return u}function c(h,u,d,f){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var m=new Float32Array(e);if(h!==u||d!==f)for(var p=0;p<e;++p)m[p]=s(p*t,h,d);function g(v){for(var y=0,b=1,x=e-1;b!==x&&m[b]<=v;++b)y+=t;--b;var A=(v-m[b])/(m[b+1]-m[b]),S=y+A*t,_=o(S,h,d);return _>=.001?l(v,S,h,d):_===0?S:a(v,y,y+t,h,d)}return function(v){return h===u&&d===f||v===0||v===1?v:s(g(v),u,f)}}return c}(),Oz=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=Cs(i,1,10),o=Cs(n,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,o){return function(a){return 1-n(s,o)(1-a)}},e["easeInOut"+i]=function(s,o){return function(a){return a<.5?n(s,o)(a*2)/2:1-n(s,o)(a*-2+2)/2}}}),e}();function A2(e,t){if(Ze.fnc(e))return e;var r=e.split("(")[0],i=Oz[r],n=Rz(e);switch(r){case"spring":return kz(e,t);case"cubicBezier":return L1(Gue,n);case"steps":return L1(jue,n);default:return L1(i,n)}}function Bz(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function m0(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&n.push(o)}return n}function g0(e){return e.reduce(function(t,r){return t.concat(Ze.arr(r)?g0(r):r)},[])}function pP(e){return Ze.arr(e)?e:(Ze.str(e)&&(e=Bz(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function M2(e,t){return e.some(function(r){return r===t})}function E2(e){var t={};for(var r in e)t[r]=e[r];return t}function kw(e,t){var r=E2(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function v0(e,t){var r=E2(e);for(var i in t)r[i]=Ze.und(e[i])?t[i]:e[i];return r}function Yue(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function Kue(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(a,l,c,h){return l+l+c+c+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+s+","+o+",1)"}function Xue(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function o(d,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?d+(f-d)*6*m:m<1/2?f:m<2/3?d+(f-d)*(2/3-m)*6:d}var a,l,c;if(i==0)a=l=c=n;else{var h=n<.5?n*(1+i):n+i-n*i,u=2*n-h;a=o(u,h,r+1/3),l=o(u,h,r),c=o(u,h,r-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function que(e){if(Ze.rgb(e))return Yue(e);if(Ze.hex(e))return Kue(e);if(Ze.hsl(e))return Xue(e)}function po(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Que(e){if(Ph(e,"translate")||e==="perspective")return"px";if(Ph(e,"rotate")||Ph(e,"skew"))return"deg"}function Ow(e,t){return Ze.fnc(e)?e(t.target,t.id,t.total):e}function Ts(e,t){return e.getAttribute(t)}function C2(e,t,r){var i=po(t);if(M2([r,"deg","rad","turn"],i))return t;var n=hv.CSS[t+r];if(!Ze.und(n))return n;var s=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+r;var l=s/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(t);return hv.CSS[t+r]=c,c}function zz(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?C2(e,n,r):n}}function T2(e,t){if(Ze.dom(e)&&!Ze.inp(e)&&(Ts(e,t)||Ze.svg(e)&&e[t]))return"attribute";if(Ze.dom(e)&&M2(Wue,t))return"transform";if(Ze.dom(e)&&t!=="transform"&&zz(e,t))return"css";if(e[t]!=null)return"object"}function Nz(e){if(Ze.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function Zue(e,t,r,i){var n=Ph(t,"scale")?1:0+Que(t),s=Nz(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?C2(e,s,i):s}function P2(e,t,r,i){switch(T2(e,t)){case"transform":return Zue(e,t,i,r);case"css":return zz(e,t,r);case"attribute":return Ts(e,t);default:return e[t]||0}}function D2(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=po(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function Fz(e,t){if(Ze.col(e))return que(e);if(/\s/g.test(e))return e;var r=po(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function L2(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Jue(e){return Math.PI*2*Ts(e,"r")}function ede(e){return Ts(e,"width")*2+Ts(e,"height")*2}function tde(e){return L2({x:Ts(e,"x1"),y:Ts(e,"y1")},{x:Ts(e,"x2"),y:Ts(e,"y2")})}function Uz(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=L2(i,s)),i=s}return r}function rde(e){var t=e.points;return Uz(e)+L2(t.getItem(t.numberOfItems-1),t.getItem(0))}function Hz(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Jue(e);case"rect":return ede(e);case"line":return tde(e);case"polyline":return Uz(e);case"polygon":return rde(e)}}function ide(e){var t=Hz(e);return e.setAttribute("stroke-dasharray",t),t}function nde(e){for(var t=e.parentNode;Ze.svg(t)&&Ze.svg(t.parentNode);)t=t.parentNode;return t}function Vz(e,t){var r=t||{},i=r.el||nde(e),n=i.getBoundingClientRect(),s=Ts(i,"viewBox"),o=n.width,a=n.height,l=r.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function sde(e,t){var r=Ze.str(e)?Bz(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:Vz(r),totalLength:Hz(r)*(i/100)}}}function ode(e,t){function r(a){a===void 0&&(a=0);var l=t+a>=1?t+a:0;return e.el.getPointAtLength(l)}var i=Vz(e.el,e.svg),n=r(),s=r(-1),o=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function mP(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Fz(Ze.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:Ze.str(e)||t?i.split(r):[]}}function Wz(e){var t=e?g0(Ze.arr(e)?e.map(pP):pP(e)):[];return m0(t,function(r,i,n){return n.indexOf(r)===i})}function jz(e){var t=Wz(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:Nz(r)}}})}function ade(e,t){var r=E2(t);if(/^spring/.test(r.easing)&&(r.duration=kz(r.easing)),Ze.arr(e)){var i=e.length,n=i===2&&!Ze.obj(e[0]);n?e={value:e}:Ze.fnc(t.duration)||(r.duration=t.duration/i)}var s=Ze.arr(e)?e:[e];return s.map(function(o,a){var l=Ze.obj(o)&&!Ze.pth(o)?o:{value:o};return Ze.und(l.delay)&&(l.delay=a?0:t.delay),Ze.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return v0(o,r)})}function lde(e){for(var t=m0(g0(e.map(function(s){return Object.keys(s)})),function(s){return Ze.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),r={},i=function(s){var o=t[s];r[o]=e.map(function(a){var l={};for(var c in a)Ze.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},n=0;n<t.length;n++)i(n);return r}function cde(e,t){var r=[],i=t.keyframes;i&&(t=v0(lde(i),t));for(var n in t)Ze.key(n)&&r.push({name:n,tweens:ade(t[n],e)});return r}function ude(e,t){var r={};for(var i in e){var n=Ow(e[i],t);Ze.arr(n)&&(n=n.map(function(s){return Ow(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function dde(e,t){var r;return e.tweens.map(function(i){var n=ude(i,t),s=n.value,o=Ze.arr(s)?s[1]:s,a=po(o),l=P2(t.target,e.name,a,t),c=r?r.to.original:l,h=Ze.arr(s)?s[0]:c,u=po(h)||po(l),d=a||u;return Ze.und(o)&&(o=c),n.from=mP(h,d),n.to=mP(D2(o,h),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=A2(n.easing,n.duration),n.isPath=Ze.pth(s),n.isColor=Ze.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var Gz={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function Yz(e,t){var r=jz(e);r.forEach(function(i){for(var n in t){var s=Ow(t[n],i),o=i.target,a=po(s),l=P2(o,n,a,i),c=a||po(l),h=D2(Fz(s,c),l),u=T2(o,n);Gz[u](o,n,h,i.transforms,!0)}})}function hde(e,t){var r=T2(e.target,t.name);if(r){var i=dde(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function fde(e,t){return m0(g0(e.map(function(r){return t.map(function(i){return hde(r,i)})})),function(r){return!Ze.und(r)})}function Kz(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var gP=0;function pde(e){var t=kw(Iz,e),r=kw(_2,e),i=cde(r,e),n=jz(e.targets),s=fde(n,i),o=Kz(s,r),a=gP;return gP++,v0(t,{id:a,children:[],animatables:n,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var Ni=[],vP=[],ig,mde=function(){function e(){ig=requestAnimationFrame(t)}function t(r){var i=Ni.length;if(i){for(var n=0;n<i;){var s=Ni[n];if(!s.paused)s.tick(r);else{var o=Ni.indexOf(s);o>-1&&(Ni.splice(o,1),i=Ni.length)}n++}e()}else ig=cancelAnimationFrame(ig)}return e}();function gde(){document.hidden?(Ni.forEach(function(e){return e.pause()}),vP=Ni.slice(0),Cr.running=Ni=[]):vP.forEach(function(e){return e.play()})}typeof document<"u"&&document.addEventListener("visibilitychange",gde);function Cr(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,o=null;function a(y){var b=window.Promise&&new Promise(function(x){return o=x});return y.finished=b,b}var l=pde(e);a(l);function c(){var y=l.direction;y!=="alternate"&&(l.direction=y!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(b){return b.reversed=l.reversed})}function h(y){return l.reversed?l.duration-y:y}function u(){t=0,r=h(l.currentTime)*(1/Cr.speed)}function d(y,b){b&&b.seek(y-b.timelineOffset)}function f(y){if(l.reversePlayback)for(var b=s;b--;)d(y,n[b]);else for(var x=0;x<s;x++)d(y,n[x])}function m(y){var b=0,x=l.animations,A=x.length;for(l.reversePlayback===!0&&l.rewind===!1&&(y=l.duration+l.delay-l.endDelay-y);b<A;){var S=x[b],_=S.animatable,w=S.tweens,M=w.length-1,C=w[M];M&&(C=m0(w,function(U){return y<U.end})[0]||C);for(var E=Cs(y-C.start-C.delay,0,C.duration)/C.duration,$=isNaN(E)?1:C.easing(E),P=C.to.strings,D=C.round,W=[],V=C.to.numbers.length,H=void 0,L=0;L<V;L++){var O=void 0;if(l.reversePlayback===!0&&l.rewind===!1)var j=C.to.numbers[L],k=C.from.numbers[L]||0;else var k=C.to.numbers[L],j=C.from.numbers[L]||0;C.isPath?O=ode(C.value,$*k):O=j+$*(k-j),D&&(C.isColor&&L>2||(O=Math.round(O*D)/D)),W.push(O)}var F=P.length;if(!F)H=W[0];else{H=P[0];for(var Y=0;Y<F;Y++){P[Y];var X=P[Y+1],Z=W[Y];isNaN(Z)||(X?H+=Z+X:H+=Z+" ")}}Gz[S.type](_.target,S.property,H,_.transforms),S.currentValue=H,b++}}function p(y){l[y]&&!l.passThrough&&l[y](l)}function g(){l.remaining&&l.remaining!==!0&&l.remaining--}function v(y){var b=l.duration,x=l.delay,A=b-l.endDelay,S=h(y);l.progress=Cs(S/b*100,0,100),l.reversePlayback=S<l.currentTime,n&&f(S),!l.began&&l.currentTime>=0&&(l.began=!0,p("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,p("loopBegin")),S<=x&&l.currentTime!==0&&(m(0),p("change")),(S>=A&&l.currentTime!==b||!b)&&(m(b),p("change")),S>x&&S<A?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,p("changeBegin")),p("change"),m(S)):l.changeBegan?(l.changeCompleted=!0,l.changeBegan=!1,p("change"),p("changeComplete")):l.began&&S>A&&(p("change"),p("changeComplete")),l.currentTime=Cs(S,0,b),l.began&&p("update"),y>=b&&(r=0,g(),l.remaining?(t=i,p("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&c()):(l.paused=!0,l.completed||(l.completed=!0,p("loopComplete"),p("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var y=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=y==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var b=s;b--;)l.children[b].reset();(l.reversed&&l.loop!==!0||y==="alternate"&&l.loop===1)&&l.remaining++,m(l.reversed?l.duration:0)},l.set=function(y,b){return Yz(y,b),l},l.tick=function(y){i=y,t||(t=i),v((i+(r-t))*Cr.speed)},l.seek=function(y){v(h(y))},l.pause=function(){l.paused=!0,u()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,Ni.push(l),u(),ig||mde())},l.reverse=function(){c(),l.completed=!l.reversed,u()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function yP(e,t){for(var r=t.length;r--;)M2(e,t[r].animatable.target)&&t.splice(r,1)}function vde(e){for(var t=Wz(e),r=Ni.length;r--;){var i=Ni[r],n=i.animations,s=i.children;yP(t,n);for(var o=s.length;o--;){var a=s[o],l=a.animations;yP(t,l),!l.length&&!a.children.length&&s.splice(o,1)}!n.length&&!s.length&&i.pause()}}function yde(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?A2(t.easing):null,n=t.grid,s=t.axis,o=t.from||0,a=o==="first",l=o==="center",c=o==="last",h=Ze.arr(e),u=parseFloat(h?e[0]:e),d=h?parseFloat(e[1]):0,f=po(h?e[1]:e)||0,m=t.start||0+(h?u:0),p=[],g=0;return function(v,y,b){if(a&&(o=0),l&&(o=(b-1)/2),c&&(o=b-1),!p.length){for(var x=0;x<b;x++){if(!n)p.push(Math.abs(o-x));else{var A=l?(n[0]-1)/2:o%n[0],S=l?(n[1]-1)/2:Math.floor(o/n[0]),_=x%n[0],w=Math.floor(x/n[0]),M=A-_,C=S-w,E=Math.sqrt(M*M+C*C);s==="x"&&(E=-M),s==="y"&&(E=-C),p.push(E)}g=Math.max.apply(Math,p)}i&&(p=p.map(function(P){return i(P/g)*g})),r==="reverse"&&(p=p.map(function(P){return s?P<0?P*-1:-P:Math.abs(g-P)}))}var $=h?(d-u)/g:u;return m+$*(Math.round(p[y]*100)/100)+f}}function xde(e){e===void 0&&(e={});var t=Cr(e);return t.duration=0,t.add=function(r,i){var n=Ni.indexOf(t),s=t.children;n>-1&&Ni.splice(n,1);function o(d){d.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=v0(r,kw(_2,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Ze.und(i)?c:D2(i,c),o(t),l.rewind=t.rewind,t.seek(l.timelineOffset);var h=Cr(l);o(h),s.push(h);var u=Kz(s,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Cr.version="3.2.0";Cr.speed=1;Cr.running=Ni;Cr.remove=vde;Cr.get=P2;Cr.set=Yz;Cr.convertPx=C2;Cr.path=sde;Cr.setDashoffset=ide;Cr.stagger=yde;Cr.timeline=xde;Cr.easing=A2;Cr.penner=Oz;Cr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var bde=Cr;function wde(e,t,r){var n,s;let i=e.cameraType==="OrthographicCamera"?(n=t.orthographic)==null?void 0:n.zoom:(s=t.perspective)==null?void 0:s.zoom;if(i!==void 0){let o=e.zoom;o!==i&&r.push({change:a=>{e.zoom=vt.lerp(o,i,a),e.updateProjectionMatrix()}})}if(t.targetOffset!==void 0){let o=e.targetOffset,a=t.targetOffset;o!==a&&r.push({change:l=>{e.targetOffset=vt.lerp(o,a,l)}})}}function Sde(e,t,r){if(t.width!==void 0&&t.height!==void 0&&t.depth!==void 0){let{width:i,height:n,depth:s}=e.geometry.userData.parameters,o=[i,n,s],a=[t.width,t.height,t.depth];!pi.isEqual(o,a)&&!Er(e)&&r.push({change:l=>{let[c,h,u]=pi.lerp(o,a,l);e.updateGeometry({parameters:{width:c,height:h,depth:u}}),e.invalidateDownstreamBooleanData()}})}}function _de(e,t,r,i){if(t.intensity!==void 0){let n=e.intensity,s=t.intensity;n!==s&&r.push({change:o=>{e.intensity=vt.lerp(n,s,o)}})}if(t.color!==void 0){let n=e.color.clone(),s=typeof t.color=="string"?i.getColor(t.color):t.color;if(!di.equals(n,s)){let o=n.clone();e.color=o,r.push({change:a=>{let{r:l,g:c,b:h}=di.lerp(n,s,a);o.setRGB(l,c,h)}})}}}function Ade(e,t,r,i){var o,a;let n=0,s=e.layers[n];for(;s;){let l=t.layers.data(s.uuid);if(l&&((o=s.visible)!=null?o:!0)&&((a=l.visible)!=null?a:!0)){let c=s.getNames().filter(h=>!hB.some(u=>h.includes(u)));for(let h of c)try{let u=s.getValue(h);if(h==="steps")Dde(s,l,h,r);else if(h==="colors")Lde(s,l,h,r);else if(typeof u=="number")Mde(s,l,h,r);else{if(typeof u=="boolean")continue;"isVector2"in u?Ede(s,l,h,r):"isVector3"in u?Cde(s,l,h,r):"isColorA"in u?Pde(s,l,h,r,i):"isColor"in u?Tde(s,l,h,r,i):"isTexture"in u&&$de(s,l,h,r)}}catch(u){console.error(`animateMaterial: unexpected material layer for ${h}`,u)}}n+=1,s=e.layers[n]}}function Mde(e,t,r,i){if(!e.hasValue(r)||!(r in t))return;let n=e.getValue(r),s=t[r];n!==s&&i.push({change:o=>{e.setValue(r,vt.lerp(n,s,o))}})}function Ede(e,t,r,i){if(!e.hasValue(r)||!(r in t))return;let n=e.getValue(r),s=n.toArray(),o=t[r];da.isEqual(s,o)||i.push({change:a=>{n.fromArray(da.lerp(s,o,a))}})}function Cde(e,t,r,i){if(!e.hasValue(r)||!(r in t))return;let n=e.getValue(r),s=n.toArray(),o=t[r];pi.isEqual(s,o)||i.push({change:a=>{n.fromArray(pi.lerp(s,o,a))}})}function Tde(e,t,r,i,n){if(!e.hasValue(r)||!(r in t))return;let s=e.getValue(r).clone(),o=t[r],a=typeof o=="string"?n.getColor(o):o;if(di.equals(s,a))return;let l=s.clone();e.setValue(r,l),i.push({change:c=>{let{r:h,g:u,b:d}=di.lerp(s,a,c);l.setRGB(h,u,d)}})}function Pde(e,t,r,i,n){if(!e.hasValue(r)||!(r in t))return;let s=e.getValue(r).clone(),o=t[r],a=typeof o=="string"?n.getColor(o):o;if(Cn.equals(s,a))return;let l=s.clone();e.setValue(r,l),i.push({change:c=>{let{r:h,g:u,b:d,a:f}=Cn.lerp(s,a,c);l.setRGBA(h,u,d,f)}})}function Dde(e,t,r="steps",i){if(!e.hasValue(r)||!(r in t))return;let n=[...e.getValue(r)],s=t[r];for(let o=0;o<n.length;++o){let a=n[o],l=s[o];a!==l&&i.push({change:c=>{n[o]=vt.lerp(a,l,c),e.setValue("steps",n)}})}}function Lde(e,t,r="colors",i){if(!e.hasValue(r)||!(r in t))return;let n=e.getValue(r),s=t[r];for(let o=0;o<n.length;++o){let a=n[o].toArray(),l=s[o];Jg.isEqual(a,l)||i.push({change:c=>{n[o].fromArray(Jg.lerp(a,l,c))}})}}function $de(e,t,r="texture",i){if(!e.hasValue(r)||!(r in t))return;let n=e.getNode("mat"),s=t[r],o=n.repeat,a=n.offset,l=s.repeat,c=s.offset;(!da.isEqual(o,l)||!da.isEqual(a,c))&&i.push({change:h=>{n.repeat=da.lerp(o,l,h),n.offset=da.lerp(a,c,h),n.updateMatrix()}})}function Ide(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let h=1-i;return r.w=h*e.w+i*t.w,r.x=h*e.x+i*t.x,r.y=h*e.y+i*t.y,r.z=h*e.z+i*t.z,r.normalize(),r}let o=Math.sqrt(s),a=Math.atan2(o,n),l=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;return r.w=e.w*l+t.w*c,r.x=e.x*l+t.x*c,r.y=e.y*l+t.y*c,r.z=e.z*l+t.z*c,r}function Rde(e,t,r=0){let i=Array.isArray(e.material)?e.material[r]:e.material,n;return"materials"in t?n=t.materials[r]:"material"in t&&(n=t.material),[i,n]}var Bw=new T,zw=new T,xP=new Yt,kde=new _n,Ode=new We;function Bde(e,t,r,i){if(r.position!==void 0){let n=e.position.toArray(),s=r.position;pi.isEqual(n,s)||i.push({change:o=>{e.position.fromArray(pi.lerp(n,s,o)),e.updateMatrix(),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}if(r.scale!==void 0){let n=e.scale.toArray(),s=r.scale;pi.isEqual(n,s)||i.push({change:o=>{e.scale.fromArray(pi.lerp(n,s,o)),e.updateMatrix(),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}zde(e,t,r,i),Nde(e,r,i)}function zde(e,t,r,i){if(r.rotation===void 0)return;let n=Bw.setFromEuler(e.rotation).toArray(),s=r.rotation;if(!pi.isEqual(n,s))if(pi.sub(r.rotation,t?t.rotation:e.rotation).every(o=>Math.abs(o)<2*Math.PI)){let o=e.quaternion.clone(),a=new Yt().setFromEuler(kde.set(r.rotation[0],r.rotation[1],r.rotation[2]));i.push({change:l=>{Ide(o,a,e.quaternion,l),e.updateMatrix(),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}else i.push({change:o=>{e.rotation.setFromVector3(zw.fromArray(pi.lerp(n,s,o))),e.updateMatrix(),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}function Nde(e,t,r){if(t.hiddenMatrix!==void 0&&!Vl.isEqual(e.hiddenMatrix.toArray(),t.hiddenMatrix)){let i=new T,n=new Yt,s=new T;e.hiddenMatrix.decompose(i,n,s);let o=new T,a=new Yt,l=new T;Ode.fromArray(t.hiddenMatrix).decompose(o,a,l),r.push({change:c=>{xP.slerpQuaternions(n,a,c),Bw.lerpVectors(i,o,c),zw.lerpVectors(s,l,c),e.hiddenMatrix.compose(Bw,xP,zw),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0)}})}}function Fde(e,t,r,i){let n=[];if((e.visible||Er(e.parent))&&Bde(e,t==null?void 0:t.objectState,r.objectState,n),Ir(e)){if((e.visible||Er(e.parent))&&"geometry"in r.objectState&&Sde(e,r.objectState.geometry,n),e.visible&&("material"in r.objectState||"materials"in r.objectState)){let[s,o]=Rde(e,r.objectState,0);s&&o&&typeof o!="string"&&Ade(s,o,n,i)}}else e.visible&&yce(e)?_de(e,r.objectState,n,i):vce(e)&&wde(e,r.objectState,n);return n.length?{change:s=>{n.forEach(o=>{o.change&&o.change(s)})}}:void 0}function Ude(e,t,r){switch(e){case 0:return"cubicBezier( 0, 0, 1, 1 )";case 1:return"cubicBezier( .25, .1, .25, 1 )";case 2:return"cubicBezier( .42, 0, 1, 1 )";case 3:return"cubicBezier( 0, 0, .58, 1 )";case 4:return"cubicBezier( .42, 0, .58, 1 )";case 5:let{control1:i,control2:n}=t!=null?t:{...ew.defaultData};return`cubicBezier( ${i[0]}, ${i[1]}, ${n[0]}, ${n[1]} )`;case 6:let{mass:s,stiffness:o,damping:a,velocity:l}=r!=null?r:{...Jb.defaultData};return`spring( ${s}, ${o}, ${a}, ${l} )`}}var Hde=class{constructor(e,t){this.object=e,this.sharedAssets=t,this.uuid=vt.generateUUID(),this.states=[],this.events={},this.animatingState=0,this._scrollCounter=null}get fromState(){return this._fromState}get animation(){return this._animation}start(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0,this._scrollCounter=null),this.states.length>1&&(this.states[0].execute(this.object,this.sharedAssets),this._toState=this.states[0],this._fromState=void 0)}end(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0),this.states.length>1&&this.states[0].execute(this.object,this.sharedAssets),this._toState=void 0,this._fromState=void 0}seek(e,t,r,i){var n;this._scrollCounter===null&&(this.animate(e,i),this._scrollCounter=0),this._scrollCounter+=t,this._scrollCounter=Math.min(Math.max(this._scrollCounter,0),r),(n=this._animation)==null||n.seek(this._scrollCounter/r*(i.duration?i.duration:1))}animate(e,t){var r,i,n,s,o,a,l;if(this._fromState===e&&((r=this._animation)==null?void 0:r.reversed)){let c=(n=(i=this._animation)==null?void 0:i.currentTime)!=null?n:0;(s=this._animation)==null||s.reset(),(o=this._animation)==null||o.seek(c),(a=this._animation)==null||a.play()}else if(this._toState!==e){this._animation!==void 0&&this._animation.pause(),this.animatingState=0,this._fromState=this._toState,this._toState=e;let c=Fde(this.object,this._fromState,e,this.sharedAssets);if(!c)return;let h={t:0};this._animation=bde({autoplay:!1,loop:t.repeat?!0:t.cycle?1:!1,direction:t.cycle?"alternate":"normal",rewind:t.rewind,delay:t.startDelay,endDelay:t.endDelay,duration:t.duration,easing:Ude(t.easing,t.cubicControls,t.springParameters),targets:h,t:1,change:()=>{c.change&&c.change(h.t),this.object.dispatchEvent({type:"stateChanged"})},loopBegin:u=>{if(this.animatingState===0){this.animatingState=1;return}u.reversed?(this._toState=this._fromState,this._fromState=e):(this._fromState=this._toState,this._toState=e)}}),t.autoplay?t.startOnceDelay>0?setTimeout(()=>{var u;return(u=this._animation)==null?void 0:u.play()},t.startOnceDelay):(l=this._animation)==null||l.play():this._animation.finished.then(()=>{this.animatingState=0})}}emitEvent(e){var t;if(e==="keyDown"||e==="keyUp"||e==="mouseDown"||e==="mouseUp"||e==="mouseHover"||e==="scroll"||e==="start"){let r=this.events[e];if(r){for(let i of r)if("targets"in i)for(let{object:n,state:s,params:o}of i.targets)(t=n.interaction)==null||t.animate(s,o)}}}emitEventReverse(e){if(e==="keyDown"||e==="keyUp"||e==="mouseDown"||e==="mouseUp"||e==="mouseHover"||e==="scroll"||e==="start"){let t=this.events[e];if(t){for(let r of t)if("targets"in r)for(let{object:i,params:n}of r.targets){let s=i.interaction;(s==null?void 0:s._fromState)!==void 0&&s.animate(s._fromState,n)}}}}},Xz=class{static create(e,t){var r,i,n,s,o,a;if(e.object){let l=t.find(e.object);if(l!=null&&l.interaction){let c=e.state?l.interaction.states.find(h=>h.uuid===e.state):l.interaction.states[0];if(c){let h=(r=e.delay)!=null?r:0,u={cycle:(i=e.cycle)!=null?i:!1,rewind:(n=e.rewind)!=null?n:!1,repeat:(s=e.repeat)!=null?s:!1,duration:(o=e.duration)!=null?o:1e3,startOnceDelay:e.delayDirection==="start-once"?h:0,startDelay:e.delayDirection==="start"||!e.delayDirection?h:0,endDelay:e.delayDirection==="end"||!e.delayDirection?h:0,easing:(a=e.easing)!=null?a:4,autoplay:!0};if(e.easing===5){let d=e;u.cubicControls={control1:[...d.control1],control2:[...d.control2]}}if(e.easing===6){let d=e;u.springParameters={mass:d.mass,stiffness:d.stiffness,damping:d.damping,velocity:d.velocity}}return new Xz(l,c,u)}}}}constructor(e,t,r){this.object=e,this.state=t,this.params=r}},Zl=class{constructor(e){this.raycastState=e,this.domEventsNeeded=[]}init(){}dispose(){}},$1=new T,bP=new wn,wP=new We,qz=class{constructor(){this.type="follow"}static dispatch(e,t,r){bP.setFromNormalAndCoplanarPoint(t,e.getWorldPosition($1)),r.ray.intersectPlane(bP,$1),e.position.copy($1),e.parent!==null&&e.position.applyMatrix4(wP.copy(e.parent.matrixWorld).invert()),e.position.applyMatrix4(wP.copy(e.hiddenMatrix).invert()),e.updateMatrix(),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.dispatchEvent({type:"stateChanged"})}},Vde=class extends Zl{constructor(){super(...arguments),this.objects=[],this.onTouchMove=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleFollowEvent())},this.onMouseMove=e=>{this.raycastState.updateRaycaster(e),this.handleFollowEvent()}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(r=>{var i,n;!((n=(i=r.interaction)==null?void 0:i.events.follow)!=null&&n.length)||this.objects.push(r)}),this.domEventsNeeded=[],this.objects.length&&(Wr?(this.domEventsNeeded.push("touchstart","touchmove"),t.addEventListener("touchstart",this.onTouchMove),t.addEventListener("touchmove",this.onTouchMove)):(this.domEventsNeeded.push("pointermove"),t.addEventListener("pointermove",this.onMouseMove)))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],Wr?(e.removeEventListener("touchstart",this.onTouchMove),e.removeEventListener("touchmove",this.onTouchMove)):e.removeEventListener("pointermove",this.onMouseMove),this.domEventsNeeded=[]}handleFollowEvent(){let{normal:e,raycaster:t}=this.raycastState;this.objects.forEach(r=>qz.dispatch(r,e,t))}},I1=new T,SP=new wn,Qz=class{constructor(e){this.data=e,this.type="lookAt"}static dispatch(e,t,r){var n,s,o;if(!((s=(n=e==null?void 0:e.interaction)==null?void 0:n.events.lookAt)!=null&&s.length)||!t||!r)return;let i=e.interaction.events.lookAt[0].data.distance;SP.set(t,-i),r.ray.intersectPlane(SP,I1),e.lookAt(I1),e.updateMatrix(),(o=e.interaction.animation)==null||o.finished.then(()=>{e.lookAt(I1),e.updateMatrix(),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0)}),Ir(e)&&Er(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.dispatchEvent({type:"stateChanged"})}},Wde=class extends Zl{constructor(){super(...arguments),this.objects=[],this.onTouchMove=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this._handleLookAtEvent())},this.onMouseMove=e=>{this.raycastState.updateRaycaster(e),this._handleLookAtEvent()}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(r=>{var i,n;!((n=(i=r.interaction)==null?void 0:i.events.lookAt)!=null&&n.length)||this.objects.push(r)}),this.domEventsNeeded=[],this.objects.length&&(Wr?(this.domEventsNeeded.push("touchstart","touchmove"),t.addEventListener("touchstart",this.onTouchMove),t.addEventListener("touchmove",this.onTouchMove)):(this.domEventsNeeded.push("pointermove"),t.addEventListener("pointermove",this.onMouseMove)))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],Wr?(e.removeEventListener("touchstart",this.onTouchMove),e.removeEventListener("touchmove",this.onTouchMove)):e.removeEventListener("pointermove",this.onMouseMove),this.domEventsNeeded=[]}_handleLookAtEvent(){let{normal:e,raycaster:t}=this.raycastState;this.objects.forEach(r=>{Qz.dispatch(r,e,t)})}},Zz=class{constructor(){this.type="start",this.targets=[]}static dispatch(e){var t,r;!((r=(t=e.interaction)==null?void 0:t.events.start)!=null&&r.length)||(e.dispatchEvent({type:"beginEvent",typeEvent:"start"}),e.interaction.events.start.forEach(i=>{i.targets.forEach(({object:n,state:s,params:o})=>{var a;return(a=n.interaction)==null?void 0:a.animate(s,o)})}))}},jde=class extends Zl{constructor(){super(...arguments),this.objects=[]}init(){let{scene:e}=this.raycastState;this.objects=[],e.traverseEntity(t=>{var r,i;!((i=(r=t.interaction)==null?void 0:r.events.start)!=null&&i.length)||this.objects.push(t)}),this.objects.forEach(t=>{Zz.dispatch(t)})}dispose(){this.objects=[]}},Jz=class{constructor(e){this.data=e,this.type="scroll",this.targets=[]}static dispatch(e,t){var i,n;if(!((n=(i=e.interaction)==null?void 0:i.events.scroll)!=null&&n.length))return;e.dispatchEvent({type:"beginEvent",typeEvent:"scroll"});let r=t>0?1:-1;e.interaction.events.scroll.forEach(s=>{s.targets.forEach(({object:o,state:a,params:l})=>{var h;let c={...l,autoplay:!1};(h=o.interaction)==null||h.seek(a,r,s.data.steps,c)})})}},Gde=class extends Zl{constructor(){super(...arguments),this.objects=[],this.onWheel=e=>{this.objects.forEach(t=>{Jz.dispatch(t,e.deltaY)})}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(r=>{var i,n;!((n=(i=r.interaction)==null?void 0:i.events.scroll)!=null&&n.length)||this.objects.push(r)}),this.domEventsNeeded=[],this.objects.length&&(this.domEventsNeeded.push("wheel"),t.addEventListener("wheel",this.onWheel))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],e.removeEventListener("wheel",this.onWheel),this.domEventsNeeded=[]}};function Yde(e,t){return e.distance-t.distance}function eN(e,t,r){if(Oa(t)&&t.visible&&!t.raycastLock)t.raycast(e,r);else return;for(let i of t.children)eN(e,i,r)}function $2(e,t,r){if(!r.some(n=>y0(e,n)!==void 0))return[];let i=[];return t.children.forEach(n=>eN(e,n,i)),i.sort(Yde),i}function I2(e,t){var i,n,s,o;let r=[];if(e.length){let a=e[0].object;Oa(a)&&((n=(i=a.interaction)==null?void 0:i.events[t])==null?void 0:n.length)&&r.push(a);let l=a.parent;for(;l;)$B(l)&&((o=(s=l.interaction)==null?void 0:s.events[t])==null?void 0:o.length)&&r.push(l),l=l.parent}return r}function y0(e,t){if(Ir(t)){if(!t.raycastLock&&t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if($B(t))return tN(e,t)}function tN(e,t){if(Ir(t)&&!t.raycastLock&&t.visible){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children)if(Oa(r)){let i=tN(e,r);if(i)return i}}function Kde(e){if(e.style.transform!==""){let t=getComputedStyle(e).getPropertyValue("transform");if(t!=="none"){let r=t.replace("matrix(","").split(",");return{x:parseFloat(r[0]),y:parseFloat(r[3])}}}return{x:1,y:1}}function rN(e){let t=e.getViewport(new ct),r=Kde(e.domElement);return{left:t.x*r.x,top:t.y*r.y,width:t.z*r.x,height:t.w*r.y}}var Xde=class{constructor(e,t,r,i){this.renderer=e,this.scene=t,this.camera=r,this.stopRaycast=i,this.raycaster=new ule,this.normal=new T,this.raycasterNeedsUpdate=!0,this.domElement=e.domElement,this.domRect=this.domElement.getBoundingClientRect(),this.viewRect=rN(e)}getPointer(e,t){let r=this.domRect,i=this.viewRect,n=r.height-i.height,s=(e-i.left-r.left)*(r.width/i.width),o=(t-n+i.top-r.top)*(r.height/i.height);return{x:s/r.width*2-1,y:-(o/r.height)*2+1}}updateRaycaster(e){if(this.raycasterNeedsUpdate){let{clientX:t,clientY:r}=Wr?e.touches[0]:e;this.raycaster.setFromCamera(this.getPointer(t,r),this.camera),this.camera.getWorldDirection(this.normal),this.normal.negate(),this.raycasterNeedsUpdate=!1}}},Nw=class{constructor(){this.type="mouseHover",this.targets=[]}static dispatchEnter(e){var t,r;!((r=(t=e.interaction)==null?void 0:t.events.mouseHover)!=null&&r.length)||(e.dispatchEvent({type:"beginEvent",typeEvent:"mouseHover"}),e.interaction.events.mouseHover.forEach(i=>{i.targets.forEach(({object:n,state:s,params:o})=>{var a;(a=n.interaction)==null||a.animate(s,o)})}))}static dispatchLeave(e){var t,r;!((r=(t=e.interaction)==null?void 0:t.events.mouseHover)!=null&&r.length)||(e.dispatchEvent({type:"beginEvent",typeEvent:"mouseHover"}),e.interaction.events.mouseHover.forEach(i=>{i.targets.forEach(({object:n,params:s})=>{let o=n.interaction;(o==null?void 0:o.fromState)!==void 0&&o.animate(o.fromState,s)})}))}},qde=class extends Zl{constructor(){super(...arguments),this.objects=[],this._prevObjects=[],this.onTouchStart=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleMouseHoverEvent())},this.onTouchEnd=e=>{this.handleMouseHoverEvent(!0)},this.onTouchMove=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleMouseHoverEvent())},this.onMouseMove=e=>{this.raycastState.updateRaycaster(e),this.handleMouseHoverEvent()}}init(){let{scene:e,domElement:t}=this.raycastState;this.objects=[],e.traverseEntity(r=>{var i,n;!r.visible||!((n=(i=r.interaction)==null?void 0:i.events.mouseHover)!=null&&n.length)||this.objects.push(r)}),this.domEventsNeeded=[],this.objects.length&&(Wr?(this.domEventsNeeded.push("touchstart","touchend","touchmove"),t.addEventListener("touchstart",this.onTouchStart),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchmove",this.onTouchMove)):(this.domEventsNeeded.push("pointermove"),t.addEventListener("pointermove",this.onMouseMove)))}dispose(){let{domElement:e}=this.raycastState;this.objects=[],Wr?(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchmove",this.onTouchMove)):e.removeEventListener("pointermove",this.onMouseMove),this.domEventsNeeded=[]}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:i,scene:n}=this.raycastState;if(r){let s=$2(i,n,this.objects);t=I2(s,"mouseHover")}else this.objects.forEach(s=>{y0(i,s)&&t.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{t.includes(r)||Nw.dispatchLeave(r)}),t.length&&t.forEach(r=>{Nw.dispatchEnter(r)}),this._prevObjects=t}},Qde="text/plain",Zde="us-ascii",_P=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),Jde=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:i,data:n,hash:s}=r.groups,o=i.split(";");s=t?"":s;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),c=[...o.map(h=>{let[u,d=""]=h.split("=").map(f=>f.trim());return u==="charset"&&(d=d.toLowerCase(),d===Zde)?"":`${u}${d?`=${d}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&l!==Qde)&&c.unshift(l),`data:${c.join(";")},${a?n.trim():n}${s?`#${s}`:""}`};function ehe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Jde(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),t.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,a="";for(;;){let l=s.exec(i.pathname);if(!l)break;let c=l[0],h=l.index;a+=i.pathname.slice(o,h).replace(/\/{2,}/g,"/"),a+=c,o=h+c.length}a+=i.pathname.slice(o,i.pathname.length).replace(/\/{2,}/g,"/"),i.pathname=a}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),o=s[s.length-1];_P(o,t.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...i.searchParams.keys()])_P(s,t.removeQueryParameters)&&i.searchParams.delete(s);if(t.removeQueryParameters===!0&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let n=e;return e=i.toString(),!t.removeSingleSlash&&i.pathname==="/"&&!n.endsWith("/")&&i.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var lh=class{constructor(e,t){this.type=e,this.data=t,this.targets=[],this.enable=!1}static create(e){if(e.type===0)return new lh("mouseDown",e);if(e.type===1)return new lh("mouseUp",e);if(e.type===5)return e.key?new lh("keyDown",e):void 0;if(e.type===6)return e.key?new lh("keyUp",e):void 0}dispatch(){if(this.data.toggle){this.enable=!this.enable;for(let{object:e,state:t,params:r}of this.targets){let i=e.interaction;if(i!==void 0){let n={...r,cycle:!1,rewind:!1,repeat:!1};this.enable?i.animate(t,n):i.fromState!==void 0&&i.animate(i.fromState,n)}}}else this.targets.forEach(({object:e,state:t,params:r})=>{var i;(i=e.interaction)==null||i.animate(t,r)});if(this.data.url){let e=this.data.url.startsWith("mailto:")?this.data.url:ehe(this.data.url);Qb?window.location.assign(e):window.open(e,"_blank")}}},the=class extends Zl{constructor(){super(...arguments),this.map={},this.onTouchStart=e=>{e.touches.length===1&&(this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseDown"))},this.onTouchEnd=e=>{this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseUp")},this.onMouseDown=e=>{this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseDown")},this.onMouseUp=e=>{this.raycastState.updateRaycaster(e),this.handleMouseEvent("mouseUp")},this.onKeyDown=e=>{this.handleKeyEvent(e,"keyDown")},this.onKeyUp=e=>{this.handleKeyEvent(e,"keyUp")}}init(){var r,i,n,s,o,a;let{scene:e,domElement:t}=this.raycastState;this.map={},e.traverseEntity(l=>{!l.interaction||l.visible&&["mouseDown","mouseUp","keyDown","keyUp"].forEach(c=>{var h,u;(u=(h=l.interaction)==null?void 0:h.events[c])!=null&&u.length&&(this.map[c]?this.map[c].push(l):this.map[c]=[l])})}),this.domEventsNeeded=[],Wr?((r=this.map.mouseDown)!=null&&r.length&&(this.domEventsNeeded.push("touchstart"),t.addEventListener("touchstart",this.onTouchStart)),(i=this.map.mouseUp)!=null&&i.length&&(this.domEventsNeeded.push("touchend"),t.addEventListener("touchend",this.onTouchEnd))):((n=this.map.mouseDown)!=null&&n.length&&(this.domEventsNeeded.push("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(s=this.map.mouseUp)!=null&&s.length&&(this.domEventsNeeded.push("pointerup"),t.addEventListener("pointerup",this.onMouseUp))),(o=this.map.keyDown)!=null&&o.length&&(this.domEventsNeeded.push("keydown"),document.addEventListener("keydown",this.onKeyDown)),(a=this.map.keyUp)!=null&&a.length&&(this.domEventsNeeded.push("keyup"),document.addEventListener("keyup",this.onKeyUp))}dispose(){let{domElement:e}=this.raycastState;this.map={},Wr?(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd)):(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.domEventsNeeded=[]}handleMouseEvent(e){var n;let{stopRaycast:t,raycaster:r,scene:i}=this.raycastState;if(t){let s=this.map[e];if(s!=null&&s.length){let o=$2(r,i,s);I2(o,e).forEach(a=>{var l,c;a.dispatchEvent({type:"beginEvent",typeEvent:e}),(c=(l=a.interaction)==null?void 0:l.events[e])==null||c.forEach(h=>{h.dispatch()})})}}else(n=this.map[e])==null||n.forEach(s=>{var o,a;y0(r,s)&&(s.dispatchEvent({type:"beginEvent",typeEvent:e}),(a=(o=s.interaction)==null?void 0:o.events[e])==null||a.forEach(l=>{l.dispatch()}))})}handleKeyEvent(e,t){var r;(r=this.map[t])==null||r.forEach(i=>{var n,s;i.dispatchEvent({type:"beginEvent",typeEvent:t}),(s=(n=i.interaction)==null?void 0:n.events[t])==null||s.forEach(o=>{"key"in o.data&&o.data.key===e.key&&o.dispatch()})})}},Fw;(e=>(e.isPlayable=t=>t.type==="audio"&&t.data.interaction==="play",e.create=function(t,r,i,n){if(!((r.trigger==="keyDown"||r.trigger==="keyUp")&&r.key===void 0))if(r.interaction==="play"){if(r.audio){let s=new oo(t,r,i);return oo.cache.set(t,s),s}}else return new rhe(r,n)}))(Fw||(Fw={}));var oo=class{constructor(e,t,r){this.id=e,this.type="audio";let{audio:i,volume:n,delay:s,loop:o}=t,a=typeof i=="string"?r.getAudio(i).src:i.data;this.audioPlayer=new rg({src:a,volume:n,delay:s,loop:o}),this.data=t}dispatch(){this.data.toggle==="stop"?this.audioPlayer.isStarted?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.isStarted?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.dispose()}};oo.cache=new Map;var rhe=class{constructor(e,t){this.type="audio",this.data=e,this.scene=t}dispatch(){this.data.object?this.data.audioEvent?this.pauseAudio(this.data.audioEvent):this.pauseAudiosByObject(this.data.object):this.pauseAudios()}pauseAudio(e){let t=oo.cache.get(e),r=this.data.interaction;!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[r](),this.disposeDelay()},this.data.delay)):t.audioPlayer[r]())}pauseAudiosByObject(e){var i,n;let t=(n=(i=this.scene.find(e))==null?void 0:i.interaction)==null?void 0:n.events.audio,r=this.data.interaction;if(t)if(this.data.delay>0)this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{for(let s of t)s instanceof oo&&s.audioPlayer[r]();this.disposeDelay()},this.data.delay);else for(let s of t)s instanceof oo&&s.audioPlayer[r]()}pauseAudios(){let e=this.data.interaction;if(this.data.delay>0)this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{for(let t of oo.cache.values())t.audioPlayer[e]();this.disposeDelay()},this.data.delay);else for(let t of oo.cache.values())t.audioPlayer[e]()}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ihe=class extends Zl{constructor(){super(...arguments),this.heldKeys={},this.map={},this.startMap={},this.onStartMouseDown=()=>{var e;(e=this.startMap.mouseDown)==null||e.forEach(t=>t.dispatch()),this.raycastState.domElement.removeEventListener(Wr?"touchstart":"pointerdown",this.onStartAny)},this.onStartKeyDown=()=>{var e;(e=this.startMap.keyDown)==null||e.forEach(t=>t.dispatch()),document.removeEventListener("keydown",this.onStartAny)},this.onStartAny=()=>{var e;(e=this.startMap.any)==null||e.forEach(t=>t.dispatch()),this.raycastState.domElement.removeEventListener(Wr?"touchstart":"pointerdown",this.onStartAny),document.removeEventListener("keydown",this.onStartAny)},this.onMouseEvent=(e,t)=>{let r=this.map[t];if(r!=null&&r.length){let{stopRaycast:i,raycaster:n,scene:s}=this.raycastState;if(this.raycastState.updateRaycaster(e),i){let o=$2(n,s,r);I2(o,"audio").forEach(a=>this.dispatch(a,t))}else r.forEach(o=>{y0(n,o)&&this.dispatch(o,t)})}},this.onMouseDown=e=>{this.onMouseEvent(e,"mouseDown")},this.onMouseUp=e=>{this.onMouseEvent(e,"mouseUp")},this.onKeyDown=e=>{var r;let t=this.heldKeys[e.key];(r=this.map.keyDown)==null||r.forEach(i=>{t||this.dispatch(i,"keyDown",e.key)}),this.heldKeys[e.key]=!0},this.onKeyUp=e=>{var t;(t=this.map.keyUp)==null||t.forEach(r=>this.dispatch(r,"keyUp",e.key))},this.releaseHeldKey=e=>{delete this.heldKeys[e.key]}}init(){var r,i,n,s,o,a,l,c,h,u,d,f;let{scene:e,domElement:t}=this.raycastState;this.map={},this.startMap={},this.heldKeys={},e.traverseEntity(m=>{var p;!((p=m.interaction)!=null&&p.events.audio)||m.interaction.events.audio.forEach(g=>{var v;g.data.trigger==="start"&&((v=this.startMap[g.data.after])!=null&&v.length?this.startMap[g.data.after].push(g):this.startMap[g.data.after]=[g]),m.visible&&["mouseDown","mouseUp"].forEach(y=>{var b;g.data.trigger===y&&((b=this.map[y])!=null&&b.length?this.map[y].push(m):this.map[y]=[m])}),["keyDown","keyUp"].forEach(y=>{var b;g.data.trigger===y&&((b=this.map[y])!=null&&b.length?this.map[y].push(m):this.map[y]=[m])})})}),this.domEventsNeeded=[],Wr?((r=this.startMap.mouseDown)!=null&&r.length&&t.addEventListener("touchstart",this.onStartMouseDown,{once:!0}),(i=this.startMap.any)!=null&&i.length&&t.addEventListener("touchstart",this.onStartAny,{once:!0}),(n=this.map.mouseDown)!=null&&n.length&&(this.domEventsNeeded.push("touchstart"),t.addEventListener("touchstart",this.onMouseDown)),(s=this.map.mouseUp)!=null&&s.length&&(this.domEventsNeeded.push("touchend"),t.addEventListener("touchend",this.onMouseUp))):((o=this.startMap.mouseDown)!=null&&o.length&&t.addEventListener("pointerdown",this.onStartMouseDown,{once:!0}),(a=this.startMap.any)!=null&&a.length&&t.addEventListener("pointerdown",this.onStartAny,{once:!0}),(l=this.map.mouseDown)!=null&&l.length&&(this.domEventsNeeded.push("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(c=this.map.mouseUp)!=null&&c.length&&(this.domEventsNeeded.push("pointerup"),t.addEventListener("pointerup",this.onMouseUp))),(h=this.startMap.keyDown)!=null&&h.length&&document.addEventListener("keydown",this.onStartKeyDown,{once:!0}),(u=this.startMap.any)!=null&&u.length&&document.addEventListener("keydown",this.onStartAny,{once:!0}),(d=this.map.keyDown)!=null&&d.length&&(this.domEventsNeeded.push("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(f=this.map.keyUp)!=null&&f.length&&(this.domEventsNeeded.push("keyup"),document.addEventListener("keyup",this.onKeyUp))}dispose(){let{scene:e,domElement:t}=this.raycastState;e.traverseEntity(r=>{var i;!((i=r.interaction)!=null&&i.events.audio)||r.interaction.events.audio.forEach(n=>{n.dispose()})}),this.map={},this.startMap={},this.heldKeys={},oo.cache.clear(),Wr?(t.removeEventListener("touchstart",this.onStartMouseDown),t.removeEventListener("touchstart",this.onStartAny),t.removeEventListener("touchstart",this.onMouseDown),t.removeEventListener("touchend",this.onMouseUp)):(t.removeEventListener("pointerdown",this.onStartMouseDown),t.removeEventListener("pointerdown",this.onStartAny),t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("keyDown",this.onStartKeyDown),t.removeEventListener("keyDown",this.onStartAny),t.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.releaseHeldKey),t.removeEventListener("keyup",this.onKeyUp),this.domEventsNeeded=[]}dispatch(e,t,r){var n;let i=(n=e.interaction)==null?void 0:n.events.audio;if(i)if(t==="keyDown"||t==="keyUp")for(let s of i)s.data.trigger===t&&s.data.key===r&&s.dispatch();else for(let s of i)s.data.trigger===t&&s.dispatch()}};function nhe(e,t,r,i){let n,{type:s}=t;return s===10?n=new qz:xw.is(t)?n=lh.create(t):s===9?n=new Qz(t):s===2?n=new Nw:s===11?n=new Jz(t):s===7?n=new Zz:s===12?n=Fw.create(e,t,r,i):s===13&&(n={type:"gameControl"}),n}function she(e,t,r){let i=[];e.objects.traverse((n,s)=>{let o=t.find(n);if(delete o.interaction,s.states===void 0)return;let a=new Hde(o,r),l=a.states;l.push(Uw.create(n,s));for(let h of s.states){let u=av.patch(s,h.data);l.push(Uw.create(h.id,u))}let c=a.events;if(s.events)for(let{id:h,data:u}of s.events){let d=nhe(h,u,r,t);if(!d)continue;let f=d.type;c[f]?c[f].push(d):c[f]=[d],"targets"in u&&i.push([u,d])}(l.length>0||Object.keys(c).length>0)&&(o.interaction=a)});for(let[n,s]of i)if("targets"in n&&"targets"in s)for(let{data:o}of n.targets){let a=Xz.create(o,t);a&&s.targets.push(a)}}function AP(e,t,r){typeof t!="string"&&e.reset(t,r)}function ohe(e,t,r,i,n=!1){if(!n&&t.states.length===0)return;let s=r===null?t:av.patch(t,t.states.data(r));if(RB(e,s),e instanceof $i&&s.type==="Mesh"){if(e instanceof k2?e.buildFromStore(s.geometry):e.updateGeometry({parameters:s.geometry}),e.freeBooleanPointer(),Er(e.parent)&&e.parent.invalidateDownstreamBooleanData().recomputeBoolean(),"material"in s){if(e.material instanceof Array)return;AP(e.material,s.material,i)}else if("materials"in s){if(!(e.material instanceof Array))return;var o=0;for(let a of s.materials)AP(e.material[o],a,i),o++}}else if(s.type==="DirectionalLight")e.fromDirectionalLightState(s,i);else if(s.type==="PointLight")e.fromPointLightState(s,i);else if(s.type==="SpotLight")e.fromSpotLightState(s,i);else if(e instanceof jl&&Wu.is(s.type)){let a=s;e.setZoom("PerspectiveCamera",a.perspective.zoom),e.setZoom("OrthographicCamera",a.orthographic.zoom),e.isUpVectorFlipped=a.isUpVectorFlipped,e.targetOffset=a.targetOffset,e.fov=a.perspective.fov}}var Uw=class{constructor(e){this.objectState=e,this.uuid=vt.generateUUID()}static create(e,t){let r=new Uw(t);return r.uuid=e,r}execute(e,t){ohe(e,this.objectState,null,t,!0)}},MP=["touchstart","touchend","touchmove","pointerdown","pointerup","pointermove"],ahe=class{constructor(e,t,r,i,n,s){this.preventScroll=n,this.app=s,this.isEnable=!1,this.splineEvents={},this.handlers=[],this.onResetRaycaster=()=>{this.raycastState.raycasterNeedsUpdate=!0},this.begin=o=>{var l;if(!o.typeEvent||!o.target)return;let a=(l=this.splineEvents[o.typeEvent])==null?void 0:l[o.target.uuid];if(a){let{domElement:c}=this.raycastState;c.dispatchEvent(a)}},this.change=()=>{this.app.requestRender()},this.onTouchMovePreventScroll=o=>{(o.touches.length>1||this.preventScroll)&&o.preventDefault()},this.onMouseWheelPreventScroll=o=>{this.preventScroll&&o.preventDefault()},this.raycastState=new Xde(e,t,r,i),this.handlers=[new jde(this.raycastState),new the(this.raycastState),new qde(this.raycastState),new Gde(this.raycastState),new Vde(this.raycastState),new Wde(this.raycastState),new ihe(this.raycastState)],this.domElement=e.domElement}activate(){let{scene:e,domElement:t}=this.raycastState;this.isEnable=!0,e.traverseEntity(r=>{!r.interaction||(r.addEventListener("beginEvent",this.begin),r.addEventListener("stateChanged",this.change),r.interaction.start(),["start","keyDown","keyUp","mouseDown","mouseUp","mouseHover","scroll"].forEach(i=>this.addDOMCustomEvent(i,r)))}),this.handlers.forEach(r=>r.init()),MP.forEach(r=>{this.handlers.some(i=>i.domEventsNeeded.includes(r))&&t.addEventListener(r,this.onResetRaycaster)}),this.resize(),this.domElement.addEventListener("wheel",this.onMouseWheelPreventScroll),this.domElement.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:e,domElement:t}=this.raycastState;this.isEnable=!1,e.traverseEntity(r=>{!r.interaction||(r.removeEventListener("beginEvent",this.begin),r.removeEventListener("stateChanged",this.change),r.interaction.end())}),this.handlers.forEach(r=>r.dispose()),MP.forEach(r=>{t.removeEventListener(r,this.onResetRaycaster)}),this.domElement.removeEventListener("touchmove",this.onTouchMovePreventScroll),this.domElement.removeEventListener("wheel",this.onMouseWheelPreventScroll)}reset(){this.deactivate(),this.activate()}resize(){let{domElement:e,renderer:t}=this.raycastState;this.raycastState.domRect=e.getBoundingClientRect(),this.raycastState.viewRect=rN(t)}addDOMCustomEvent(e,t){let r=new CustomEvent(e,{bubbles:!0});Object.defineProperty(r,"target",{writable:!1,value:{id:t.uuid,name:t.name}}),this.splineEvents[e]?this.splineEvents[e][t.uuid]=r:this.splineEvents[e]={[t.uuid]:r}}},lhe=class{constructor(e,t,r,i,n){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=new K().copy(r),this._editorSize=new K().copy(i),this._aspect=t.aspect,this._fov=n!=null?n:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewportForImageExport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,i=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(r/e,i/t),this._renderer.setViewport(0,0,e,t)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,i=this._editorSize.y,n=0,s=0,o=e,a=t;e<r&&(n=(r-e)*.5,n=-n,o=r),t<i&&(s=(i-t)*.5,s=-s,a=i),this._aspect=o/a,this._renderer.setViewport(n,s,o,a)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let e=this._frameSize.y,t=this._editorSize.y,r=this._fov;if(e>t){let i=che(e,1080,2160,1,15)/100;r*=e/t,r*=1-i}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}};function che(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var uhe=Math.pow(2,-24),ym=class{constructor(){}};function ws(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function EP(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function CP(e,t){t.set(e)}function TP(e,t,r){let i,n;for(let s=0;s<3;s++){let o=s+3;i=e[s],n=t[s],r[s]=i<n?i:n,i=e[o],n=t[o],r[o]=i>n?i:n}}function xm(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],s=t[e+2*i+1],o=n-s,a=n+s;o<r[i]&&(r[i]=o),a>r[i+3]&&(r[i+3]=a)}}function Vd(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function dhe(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new ft(n,1));for(let s=0;s<r;s++)n[s]=s}}function hhe(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,s)=>n-s);for(let n=0;n<i.length-1;n++){let s=i[n],o=i[n+1];t.push({offset:s/3,count:(o-s)/3})}return t}function R1(e,t,r,i,n=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0,u=1/0,d=1/0,f=1/0,m=-1/0,p=-1/0,g=-1/0,v=n!==null;for(let y=t*6,b=(t+r)*6;y<b;y+=6){let x=e[y+0],A=e[y+1],S=x-A,_=x+A;S<s&&(s=S),_>l&&(l=_),v&&x<u&&(u=x),v&&x>m&&(m=x);let w=e[y+2],M=e[y+3],C=w-M,E=w+M;C<o&&(o=C),E>c&&(c=E),v&&w<d&&(d=w),v&&w>p&&(p=w);let $=e[y+4],P=e[y+5],D=$-P,W=$+P;D<a&&(a=D),W>h&&(h=W),v&&$<f&&(f=$),v&&$>g&&(g=$)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=h,v&&(n[0]=u,n[1]=d,n[2]=f,n[3]=m,n[4]=p,n[5]=g)}function fhe(e,t,r,i){let n=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let h=t*6,u=(t+r)*6;h<u;h+=6){let d=e[h+0];d<n&&(n=d),d>a&&(a=d);let f=e[h+2];f<s&&(s=f),f>l&&(l=f);let m=e[h+4];m<o&&(o=m),m>c&&(c=m)}i[0]=n,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function phe(e,t,r,i,n){let s=r,o=r+i-1,a=n.pos,l=n.axis*2;for(;;){for(;s<=o&&t[s*6+l]<a;)s++;for(;s<=o&&t[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let h=e[s*3+c];e[s*3+c]=e[o*3+c],e[o*3+c]=h;let u=t[s*6+c*2+0];t[s*6+c*2+0]=t[o*6+c*2+0],t[o*6+c*2+0]=u;let d=t[s*6+c*2+1];t[s*6+c*2+1]=t[o*6+c*2+1],t[o*6+c*2+1]=d}s++,o--}else return s}}var to=32,mhe=(e,t)=>e.candidate-t.candidate,Go=new Array(to).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),bm=new Float32Array(6);function ghe(e,t,r,i,n,s){let o=-1,a=0;if(s===0)o=EP(t),o!==-1&&(a=(t[o]+t[o+3])/2);else if(s===1)o=EP(e),o!==-1&&(a=vhe(r,i,n,o));else if(s===2){let l=Vd(e),c=1.25*n,h=i*6,u=(i+n)*6;for(let d=0;d<3;d++){let f=t[d],m=(t[d+3]-f)/to;if(n<to/4){let p=[...Go];p.length=n;let g=0;for(let y=h;y<u;y+=6,g++){let b=p[g];b.candidate=r[y+2*d],b.count=0;let{bounds:x,leftCacheBounds:A,rightCacheBounds:S}=b;for(let _=0;_<3;_++)S[_]=1/0,S[_+3]=-1/0,A[_]=1/0,A[_+3]=-1/0,x[_]=1/0,x[_+3]=-1/0;xm(y,r,x)}p.sort(mhe);let v=n;for(let y=0;y<v;y++){let b=p[y];for(;y+1<v&&p[y+1].candidate===b.candidate;)p.splice(y+1,1),v--}for(let y=h;y<u;y+=6){let b=r[y+2*d];for(let x=0;x<v;x++){let A=p[x];b>=A.candidate?xm(y,r,A.rightCacheBounds):(xm(y,r,A.leftCacheBounds),A.count++)}}for(let y=0;y<v;y++){let b=p[y],x=b.count,A=n-b.count,S=b.leftCacheBounds,_=b.rightCacheBounds,w=0;x!==0&&(w=Vd(S)/l);let M=0;A!==0&&(M=Vd(_)/l);let C=1+1.25*(w*x+M*A);C<c&&(o=d,c=C,a=b.candidate)}}else{for(let v=0;v<to;v++){let y=Go[v];y.count=0,y.candidate=f+m+v*m;let b=y.bounds;for(let x=0;x<3;x++)b[x]=1/0,b[x+3]=-1/0}for(let v=h;v<u;v+=6){let y=~~((r[v+2*d]-f)/m);y>=to&&(y=to-1);let b=Go[y];b.count++,xm(v,r,b.bounds)}let p=Go[to-1];CP(p.bounds,p.rightCacheBounds);for(let v=to-2;v>=0;v--){let y=Go[v],b=Go[v+1];TP(y.bounds,b.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<to-1;v++){let y=Go[v],b=y.count,x=y.bounds,A=Go[v+1].rightCacheBounds;b!==0&&(g===0?CP(x,bm):TP(x,bm,bm)),g+=b;let S=0,_=0;g!==0&&(S=Vd(bm)/l);let w=n-g;w!==0&&(_=Vd(A)/l);let M=1+1.25*(S*g+_*w);M<c&&(o=d,c=M,a=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function vhe(e,t,r,i){let n=0;for(let s=t,o=t+r;s<o;s++)n+=e[s*6+i*2];return n/r}function yhe(e,t){let r=e.attributes.position,i=r.array,n=e.index.array,s=n.length/3,o=new Float32Array(s*6),a=r.offset||0,l=3;r.isInterleavedBufferAttribute&&(l=r.data.stride);for(let c=0;c<s;c++){let h=c*3,u=c*6,d=n[h+0]*l+a,f=n[h+1]*l+a,m=n[h+2]*l+a;for(let p=0;p<3;p++){let g=i[d+p],v=i[f+p],y=i[m+p],b=g;v<b&&(b=v),y<b&&(b=y);let x=g;v>x&&(x=v),y>x&&(x=y);let A=(x-b)/2,S=p*2;o[u+S+0]=b+A,o[u+S+1]=A+(Math.abs(b)+A)*uhe,b<t[p]&&(t[p]=b),x>t[p+3]&&(t[p+3]=x)}}return o}function xhe(e,t){function r(v){d&&d(v/f)}function i(v,y,b,x=null,A=0){if(!m&&A>=l&&(m=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),b<=h||A>=l)return r(y+b),v.offset=y,v.count=b,v;let S=ghe(v.boundingData,x,o,y,b,u);if(S.axis===-1)return r(y+b),v.offset=y,v.count=b,v;let _=phe(a,o,y,b,S);if(_===y||_===y+b)r(y+b),v.offset=y,v.count=b;else{v.splitAxis=S.axis;let w=new ym,M=y,C=_-y;v.left=w,w.boundingData=new Float32Array(6),R1(o,M,C,w.boundingData,s),i(w,M,C,s,A+1);let E=new ym,$=_,P=b-C;v.right=E,E.boundingData=new Float32Array(6),R1(o,$,P,E.boundingData,s),i(E,$,P,s,A+1)}return v}dhe(e,t);let n=new Float32Array(6),s=new Float32Array(6),o=yhe(e,n),a=e.index.array,l=t.maxDepth,c=t.verbose,h=t.maxLeafTris,u=t.strategy,d=t.onProgress,f=e.index.count/3,m=!1,p=[],g=hhe(e);if(g.length===1){let v=g[0],y=new ym;y.boundingData=n,fhe(o,v.offset,v.count,s),i(y,v.offset,v.count,s),p.push(y)}else for(let v of g){let y=new ym;y.boundingData=new Float32Array(6),R1(o,v.offset,v.count,y.boundingData,s),i(y,v.offset,v.count,s),p.push(y)}return p}function bhe(e,t){let r=xhe(e,t),i,n,s,o=[],a=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<r.length;h++){let u=r[h],d=l(u),f=new a(32*d);i=new Float32Array(f),n=new Uint32Array(f),s=new Uint16Array(f),c(0,u),o.push(f)}return o;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function c(h,u){let d=h/4,f=h/2,m=!!u.count,p=u.boundingData;for(let g=0;g<6;g++)i[d+g]=p[g];if(m){let g=u.offset,v=u.count;return n[d+6]=g,s[f+14]=v,s[f+15]=65535,h+32}else{let g=u.left,v=u.right,y=u.splitAxis,b;if(b=c(h+32,g),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[d+6]=b/4,b=c(b,v),n[d+7]=y,b}}}var zs=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let n=0,s=e.length;n<s;n++){let o=e[n][t];r=o<r?o:r,i=o>i?o:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let n=0,s=t.length;n<s;n++){let o=t[n],a=e.dot(o);r=a<r?a:r,i=a>i?a:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};zs.prototype.setFromBox=function(){let e=new T;return function(t,r){let i=r.min,n=r.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=i.x*a+n.x*(1-a),e.y=i.y*l+n.y*(1-l),e.z=i.z*c+n.z*(1-c);let h=t.dot(e);s=Math.min(h,s),o=Math.max(h,o)}this.min=s,this.max=o}}();(function(){let e=new zs;return function(t,r){let i=t.points,n=t.satAxes,s=t.satBounds,o=r.points,a=r.satAxes,l=r.satBounds;for(let c=0;c<3;c++){let h=s[c],u=n[c];if(e.setFromPoints(u,o),h.isSeparated(e))return!1}for(let c=0;c<3;c++){let h=l[c],u=a[c];if(e.setFromPoints(u,i),h.isSeparated(e))return!1}}})();var whe=function(){let e=new T,t=new T,r=new T;return function(i,n,s){let o=i.start,a=e,l=n.start,c=t;r.subVectors(o,l),e.subVectors(i.end,n.start),t.subVectors(n.end,n.start);let h=r.dot(c),u=c.dot(a),d=c.dot(c),f=r.dot(a),m=a.dot(a)*d-u*u,p,g;m!==0?p=(h*u-f*d)/m:p=0,g=(h+p*u)/d,s.x=p,s.y=g}}(),R2=function(){let e=new K,t=new T,r=new T;return function(i,n,s,o){whe(i,n,e);let a=e.x,l=e.y;if(a>=0&&a<=1&&l>=0&&l<=1){i.at(a,s),n.at(l,o);return}else if(a>=0&&a<=1){l<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,s);return}else if(l>=0&&l<=1){a<0?i.at(0,s):i.at(1,s),n.closestPointToPoint(s,!0,o);return}else{let c;a<0?c=i.start:c=i.end;let h;l<0?h=n.start:h=n.end;let u=t,d=r;if(i.closestPointToPoint(h,!0,t),n.closestPointToPoint(c,!0,r),u.distanceToSquared(h)<=d.distanceToSquared(c)){s.copy(u),o.copy(h);return}else{s.copy(c),o.copy(d);return}}}}(),She=function(){let e=new T,t=new T,r=new wn,i=new Pn;return function(n,s){let{radius:o,center:a}=n,{a:l,b:c,c:h}=s;if(i.start=l,i.end=c,i.closestPointToPoint(a,!0,e).distanceTo(a)<=o||(i.start=l,i.end=h,i.closestPointToPoint(a,!0,e).distanceTo(a)<=o)||(i.start=c,i.end=h,i.closestPointToPoint(a,!0,e).distanceTo(a)<=o))return!0;let u=s.getPlane(r);if(Math.abs(u.distanceToPoint(a))<=o){let d=u.projectPoint(a,t);if(s.containsPoint(d))return!0}return!1}}(),_he=1e-15;function Lc(e){return Math.abs(e)<_he}var Co=class extends An{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new T),this.satBounds=new Array(4).fill().map(()=>new zs),this.points=[this.a,this.b,this.c],this.sphere=new ts,this.plane=new wn,this.needsUpdate=!0}intersectsSphere(e){return She(e,this)}update(){let e=this.a,t=this.b,r=this.c,i=this.points,n=this.satAxes,s=this.satBounds,o=n[0],a=s[0];this.getNormal(o),a.setFromPoints(o,i);let l=n[1],c=s[1];l.subVectors(e,t),c.setFromPoints(l,i);let h=n[2],u=s[2];h.subVectors(t,r),u.setFromPoints(h,i);let d=n[3],f=s[3];d.subVectors(r,e),f.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}};Co.prototype.closestPointToSegment=function(){let e=new T,t=new T,r=new Pn;return function(i,n=null,s=null){let{start:o,end:a}=i,l=this.points,c,h=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;r.start.copy(l[u]),r.end.copy(l[d]),R2(r,i,e,t),c=e.distanceToSquared(t),c<h&&(h=c,n&&n.copy(e),s&&s.copy(t))}return this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<h&&(h=c,n&&n.copy(e),s&&s.copy(o)),this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<h&&(h=c,n&&n.copy(e),s&&s.copy(a)),Math.sqrt(h)}}();Co.prototype.intersectsTriangle=function(){let e=new Co,t=new Array(3),r=new Array(3),i=new zs,n=new zs,s=new T,o=new T,a=new T,l=new T,c=new Pn,h=new Pn,u=new Pn;return function(d,f=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let m=this.plane,p=d.plane;if(Math.abs(m.normal.dot(p.normal))>1-1e-10){let g=this.satBounds,v=this.satAxes;r[0]=d.a,r[1]=d.b,r[2]=d.c;for(let x=0;x<4;x++){let A=g[x],S=v[x];if(i.setFromPoints(S,r),A.isSeparated(i))return!1}let y=d.satBounds,b=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let x=0;x<4;x++){let A=y[x],S=b[x];if(i.setFromPoints(S,t),A.isSeparated(i))return!1}for(let x=0;x<4;x++){let A=v[x];for(let S=0;S<4;S++){let _=b[S];if(s.crossVectors(A,_),i.setFromPoints(s,t),n.setFromPoints(s,r),i.isSeparated(n))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,v=!1,y=0;for(let $=0;$<3;$++){let P=g[$],D=g[($+1)%3];c.start.copy(P),c.end.copy(D),c.delta(o);let W=v?h.start:h.end,V=Lc(p.distanceToPoint(P));if(Lc(p.normal.dot(o))&&V){h.copy(c),y=2;break}if((p.intersectLine(c,W)||V)&&!Lc(W.distanceTo(D))){if(y++,v)break;v=!0}}if(y===1&&this.containsPoint(h.start))return f&&(f.start.copy(h.start),f.end.copy(h.start)),!0;if(y!==2)return!1;let b=d.points,x=!1,A=0;for(let $=0;$<3;$++){let P=b[$],D=b[($+1)%3];c.start.copy(P),c.end.copy(D),c.delta(a);let W=x?u.start:u.end,V=Lc(m.distanceToPoint(P));if(Lc(m.normal.dot(a))&&V){u.copy(c),A=2;break}if((m.intersectLine(c,W)||V)&&!Lc(W.distanceTo(D))){if(A++,x)break;x=!0}}if(A===1&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(A!==2)return!1;if(h.delta(o),u.delta(a),o.dot(a)<0){let $=u.start;u.start=u.end,u.end=$}let S=h.start.dot(o),_=h.end.dot(o),w=u.start.dot(o),M=u.end.dot(o),C=_<w,E=S<M;return S!==M&&w!==_&&C===E?!1:(f&&(l.subVectors(h.start,u.start),l.dot(o)>0?f.start.copy(h.start):f.start.copy(u.start),l.subVectors(h.end,u.end),l.dot(o)<0?f.end.copy(h.end):f.end.copy(u.end)),!0)}}}();Co.prototype.distanceToPoint=function(){let e=new T;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Co.prototype.distanceToTriangle=function(){let e=new T,t=new T,r=["a","b","c"],i=new Pn,n=new Pn;return function(s,o=null,a=null){let l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let h=0;h<3;h++){let u,d=r[h],f=s[d];this.closestPointToPoint(f,e),u=f.distanceToSquared(e),u<c&&(c=u,o&&o.copy(e),a&&a.copy(f));let m=this[d];s.closestPointToPoint(m,e),u=m.distanceToSquared(e),u<c&&(c=u,o&&o.copy(m),a&&a.copy(e))}for(let h=0;h<3;h++){let u=r[h],d=r[(h+1)%3];i.set(this[u],this[d]);for(let f=0;f<3;f++){let m=r[f],p=r[(f+1)%3];n.set(s[m],s[p]),R2(i,n,e,t);let g=e.distanceToSquared(t);g<c&&(c=g,o&&o.copy(e),a&&a.copy(t))}}return Math.sqrt(c)}}();var Ns=class extends zr{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new We,this.invMatrix=new We,this.points=new Array(8).fill().map(()=>new T),this.satAxes=new Array(3).fill().map(()=>new T),this.satBounds=new Array(3).fill().map(()=>new zs),this.alignedSatBounds=new Array(3).fill().map(()=>new zs),this.needsUpdate=!1}set(e,t,r){super.set(e,t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Ns.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let h=0;h<=1;h++){let u=1*l|2*c|4*h,d=i[u];d.x=l?r.x:t.x,d.y=c?r.y:t.y,d.z=h?r.z:t.z,d.applyMatrix4(e)}let n=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){let c=s[l],h=n[l],u=1<<l,d=i[u];c.subVectors(o,d),h.setFromPoints(c,i)}let a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ns.prototype.intersectsBox=function(){let e=new zs;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,o[0].isSeparated(e)||(e.min=r.y,e.max=i.y,o[1].isSeparated(e))||(e.min=r.z,e.max=i.z,o[2].isSeparated(e)))return!1;for(let a=0;a<3;a++){let l=s[a],c=n[a];if(e.setFromBox(l,t),c.isSeparated(e))return!1}return!0}}();Ns.prototype.intersectsTriangle=function(){let e=new Co,t=new Array(3),r=new zs,i=new zs,n=new T;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let o=this.satBounds,a=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let u=0;u<3;u++){let d=o[u],f=a[u];if(r.setFromPoints(f,t),d.isSeparated(r))return!1}let l=s.satBounds,c=s.satAxes,h=this.points;for(let u=0;u<3;u++){let d=l[u],f=c[u];if(r.setFromPoints(f,h),d.isSeparated(r))return!1}for(let u=0;u<3;u++){let d=a[u];for(let f=0;f<4;f++){let m=c[f];if(n.crossVectors(d,m),r.setFromPoints(n,t),i.setFromPoints(n,h),r.isSeparated(i))return!1}}return!0}}();Ns.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ns.prototype.distanceToPoint=function(){let e=new T;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Ns.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Pn),r=new Array(12).fill().map(()=>new Pn),i=new T,n=new T;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(n),this.closestPointToPoint(n,i),s.closestPointToPoint(i,n),a&&a.copy(i),l&&l.copy(n)),0;let c=o*o,h=s.min,u=s.max,d=this.points,f=1/0;for(let p=0;p<8;p++){let g=d[p];n.copy(g).clamp(h,u);let v=g.distanceToSquared(n);if(v<f&&(f=v,a&&a.copy(g),l&&l.copy(n),v<c))return Math.sqrt(v)}let m=0;for(let p=0;p<3;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(p+1)%3,b=(p+2)%3,x=g<<y|v<<b,A=1<<p|g<<y|v<<b,S=d[x],_=d[A];t[m].set(S,_);let w=e[p],M=e[y],C=e[b],E=r[m],$=E.start,P=E.end;$[w]=h[w],$[M]=g?h[M]:u[M],$[C]=v?h[C]:u[M],P[w]=u[w],P[M]=g?h[M]:u[M],P[C]=v?h[C]:u[M],m++}for(let p=0;p<=1;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){n.x=p?u.x:h.x,n.y=g?u.y:h.y,n.z=v?u.z:h.z,this.closestPointToPoint(n,i);let y=n.distanceToSquared(i);if(y<f&&(f=y,a&&a.copy(i),l&&l.copy(n),y<c))return Math.sqrt(y)}for(let p=0;p<12;p++){let g=t[p];for(let v=0;v<12;v++){let y=r[v];R2(g,y,i,n);let b=i.distanceToSquared(n);if(b<f&&(f=b,a&&a.copy(i),l&&l.copy(n),b<c))return Math.sqrt(b)}}return Math.sqrt(f)}}();var wm=new T,Sm=new T,_m=new T,PP=new K,DP=new K,LP=new K,$P=new T;function Ahe(e,t,r,i,n,s){let o;return s===Xr?o=e.intersectTriangle(i,r,t,!0,n):o=e.intersectTriangle(t,r,i,s!==_i,n),o===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function Mhe(e,t,r,i,n,s,o){wm.fromBufferAttribute(t,i),Sm.fromBufferAttribute(t,n),_m.fromBufferAttribute(t,s);let a=Ahe(e,wm,Sm,_m,$P,o);if(a){r&&(PP.fromBufferAttribute(r,i),DP.fromBufferAttribute(r,n),LP.fromBufferAttribute(r,s),a.uv=An.getUV($P,wm,Sm,_m,PP,DP,LP,new K));let l={a:i,b:n,c:s,normal:new T,materialIndex:0};An.getNormal(wm,Sm,_m,l.normal),a.face=l,a.faceIndex=i}return a}function iN(e,t,r,i,n){let s=i*3,o=e.index.getX(s),a=e.index.getX(s+1),l=e.index.getX(s+2),c=Mhe(r,e.attributes.position,e.attributes.uv,o,a,l,t);return c?(c.faceIndex=i,n&&n.push(c),c):null}function Ehe(e,t,r,i,n,s){for(let o=i,a=i+n;o<a;o++)iN(e,t,r,o,s)}function Che(e,t,r,i,n){let s=1/0,o=null;for(let a=i,l=i+n;a<l;a++){let c=iN(e,t,r,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function nN(e,t,r){return e===null||(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(r.ray.origin),e.object=t,e.distance<r.near||e.distance>r.far)?null:e}function vs(e,t,r,i){let n=e.a,s=e.b,o=e.c,a=t,l=t+1,c=t+2;r&&(a=r.getX(t),l=r.getX(t+1),c=r.getX(t+2)),n.x=i.getX(a),n.y=i.getY(a),n.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function IP(e,t,r,i,n,s,o){let a=r.index,l=r.attributes.position;for(let c=e,h=t+e;c<h;c++)if(vs(o,c*3,a,l),o.needsUpdate=!0,i(o,c,n,s))return!0;return!1}var sN=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function ia(e,t){return t[e+15]===65535}function $u(e,t){return t[e+6]}function vf(e,t){return t[e+14]}function yf(e){return e+8}function xf(e,t){return t[e+6]}function The(e,t){return t[e+7]}var pu=new zr,fv=new T,Phe=["x","y","z"];function Hw(e,t,r,i,n){let s=e*2,o=pd,a=Ma,l=Ea;if(ia(s,a)){let c=$u(e,l),h=vf(s,a);Ehe(t,r,i,c,h,n)}else{let c=yf(e);pv(c,o,i,fv)&&Hw(c,t,r,i,n);let h=xf(e,l);pv(h,o,i,fv)&&Hw(h,t,r,i,n)}}function Vw(e,t,r,i){let n=e*2,s=pd,o=Ma,a=Ea;if(ia(n,o)){let l=$u(e,a),c=vf(n,o);return Che(t,r,i,l,c)}else{let l=The(e,a),c=Phe[l],h=i.direction[c]>=0,u,d;h?(u=yf(e),d=xf(e,a)):(u=xf(e,a),d=yf(e));let f=pv(u,s,i,fv)?Vw(u,t,r,i):null;if(f){let p=f.point[c];if(h?p<=s[d+l]:p>=s[d+l+3])return f}let m=pv(d,s,i,fv)?Vw(d,t,r,i):null;return f&&m?f.distance<=m.distance?f:m:f||m||null}}var Dhe=function(){let e,t,r=[],i=new sN(()=>new zr);return function(...s){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let o=n(...s);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let a=r.length;return a>0&&(t=r[a-1],e=r[a-2]),o};function n(s,o,a,l,c=null,h=0,u=0){function d(y){let b=y*2,x=Ma,A=Ea;for(;!ia(b,x);)y=yf(y),b=y*2;return $u(y,A)}function f(y){let b=y*2,x=Ma,A=Ea;for(;!ia(b,x);)y=xf(y,A),b=y*2;return $u(y,A)+vf(b,x)}let m=s*2,p=pd,g=Ma,v=Ea;if(ia(m,g)){let y=$u(s,v),b=vf(m,g);return ws(s,p,e),l(y,b,!1,u,h+s,e)}else{let y=yf(s),b=xf(s,v),x=y,A=b,S,_,w,M;if(c&&(w=e,M=t,ws(x,p,w),ws(A,p,M),S=c(w),_=c(M),_<S)){x=b,A=y;let V=S;S=_,_=V,w=M}w||(w=e,ws(x,p,w));let C=ia(x*2,g),E=a(w,C,S,u+1,h+x),$;if(E===2){let V=d(x),H=f(x)-V;$=l(V,H,!0,u+1,h+x,w)}else $=E&&n(x,o,a,l,c,h,u+1);if($)return!0;M=t,ws(A,p,M);let P=ia(A*2,g),D=a(M,P,_,u+1,h+A),W;if(D===2){let V=d(A),H=f(A)-V;W=l(V,H,!0,u+1,h+A,M)}else W=D&&n(A,o,a,l,c,h,u+1);return!!W}}}(),Lhe=function(){let e=new Co,t=new Co,r=new We,i=new Ns,n=new Ns;return function s(o,a,l,c,h=null){let u=o*2,d=pd,f=Ma,m=Ea;if(h===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),h=i),ia(u,f)){let p=a,g=p.index,v=p.attributes.position,y=l.index,b=l.attributes.position,x=$u(o,m),A=vf(u,f);if(r.copy(c).invert(),l.boundsTree)return ws(o,d,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:S=>n.intersectsBox(S),intersectsTriangle:S=>{S.a.applyMatrix4(c),S.b.applyMatrix4(c),S.c.applyMatrix4(c),S.needsUpdate=!0;for(let _=x*3,w=(A+x)*3;_<w;_+=3)if(vs(t,_,g,v),t.needsUpdate=!0,S.intersectsTriangle(t))return!0;return!1}});for(let S=x*3,_=A+x*3;S<_;S+=3){vs(e,S,g,v),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let w=0,M=y.count;w<M;w+=3)if(vs(t,w,y,b),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let p=o+8,g=m[o+6];return ws(p,d,pu),!!(h.intersectsBox(pu)&&s(p,a,l,c,h)||(ws(g,d,pu),h.intersectsBox(pu)&&s(g,a,l,c,h)))}}}();function pv(e,t,r,i){return ws(e,t,pu),r.intersectBox(pu,i)}var Ww=[],ng,pd,Ma,Ea;function ch(e){ng&&Ww.push(ng),ng=e,pd=new Float32Array(e),Ma=new Uint16Array(e),Ea=new Uint32Array(e)}function Am(){ng=null,pd=null,Ma=null,Ea=null,Ww.length&&ch(Ww.pop())}var k1=Symbol("skip tree generation"),O1=new zr,B1=new zr,$c=new We,Qa=new Ns,Wd=new Ns,jd=new T,Mm=new T,$he=new T,Ihe=new T,Rhe=new T,RP=new zr,ds=new sN(()=>new Co),Zr=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Zr.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),s;return t.cloneBuffers?s={roots:i.map(o=>o.slice()),index:n.array.slice()}:s={roots:i,index:n.array},s}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Zr.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,s=new Zr(t,{...r,[k1]:!0});if(s._roots=n,r.setIndex){let o=t.getIndex();if(o===null){let a=new ft(e.index,1,!1);t.setIndex(a)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[k1]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[k1]||(this._roots=bhe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new zr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n=i.array,s=i.offset||0,o=3;i.isInterleavedBufferAttribute&&(o=i.data.stride);let a,l,c,h,u=0,d=this._roots;for(let m=0,p=d.length;m<p;m++)a=d[m],l=new Uint32Array(a),c=new Uint16Array(a),h=new Float32Array(a),f(0,u),u+=a.byteLength;function f(m,p,g=!1){let v=m*2;if(c[v+15]===65535){let y=l[m+6],b=c[v+14],x=1/0,A=1/0,S=1/0,_=-1/0,w=-1/0,M=-1/0;for(let C=3*y,E=3*(y+b);C<E;C++){let $=r[C]*o+s,P=n[$+0],D=n[$+1],W=n[$+2];P<x&&(x=P),P>_&&(_=P),D<A&&(A=D),D>w&&(w=D),W<S&&(S=W),W>M&&(M=W)}return h[m+0]!==x||h[m+1]!==A||h[m+2]!==S||h[m+3]!==_||h[m+4]!==w||h[m+5]!==M?(h[m+0]=x,h[m+1]=A,h[m+2]=S,h[m+3]=_,h[m+4]=w,h[m+5]=M,!0):!1}else{let y=m+8,b=l[m+6],x=y+p,A=b+p,S=g,_=!1,w=!1;e?S||(_=e.has(x),w=e.has(A),S=!_&&!w):(_=!0,w=!0);let M=S||_,C=S||w,E=!1;M&&(E=f(y,p,S));let $=!1;C&&($=f(b,p,S));let P=E||$;if(P)for(let D=0;D<3;D++){let W=y+D,V=b+D,H=h[W],L=h[W+3],O=h[V],k=h[V+3];h[m+D]=H<O?H:O,h[m+D+3]=L>k?L:k}return P}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);s(0);function s(o,a=0){let l=o*2,c=n[l+15]===65535;if(c){let h=i[o+6],u=n[l+14];e(a,c,new Float32Array(r,o*4,6),h,u)}else{let h=o+8,u=i[o+6],d=i[o+7];e(a,c,new Float32Array(r,o*4,6),d)||(s(h,a+1),s(u,a+1))}}}raycast(e,t=Ao){let r=this._roots,i=this.geometry,n=[],s=t.isMaterial,o=Array.isArray(t),a=i.groups,l=s?t.side:t;for(let c=0,h=r.length;c<h;c++){let u=o?t[a[c].materialIndex].side:l,d=n.length;if(ch(r[c]),Hw(0,i,u,e,n),Am(),o){let f=a[c].materialIndex;for(let m=d,p=n.length;m<p;m++)n[m].face.materialIndex=f}}return n}raycastFirst(e,t=Ao){let r=this._roots,i=this.geometry,n=t.isMaterial,s=Array.isArray(t),o=null,a=i.groups,l=n?t.side:t;for(let c=0,h=r.length;c<h;c++){let u=s?t[a[c].materialIndex].side:l;ch(r[c]);let d=Vw(0,i,u,e);Am(),d!=null&&(o==null||d.distance<o.distance)&&(o=d,s&&(d.face.materialIndex=a[c].materialIndex))}return o}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(ch(n),i=Lhe(0,r,e,t),Am(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let u=t;t=(d,f,m,p)=>{let g=f*3;return u(d,g,g+1,g+2,m,p)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=ds.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=e;if(a&&l){let u=a;a=(d,f,m,p,g)=>u(d,f,m,p,g)?!0:IP(d,f,i,l,m,p,n)}else a||(l?a=(u,d,f,m)=>IP(u,d,i,l,f,m,n):a=(u,d,f)=>f);let c=!1,h=0;for(let u of this._roots){if(ch(u),c=Dhe(0,i,o,a,s,h),Am(),c)break;h+=u.byteLength}return ds.releasePrimitive(n),c}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,s=this.geometry.index,o=this.geometry.attributes.position,a=e.geometry.index,l=e.geometry.attributes.position;$c.copy(t).invert();let c=ds.getPrimitive(),h=ds.getPrimitive();if(n){let d=function(f,m,p,g,v,y,b,x){for(let A=p,S=p+g;A<S;A++){vs(h,A*3,a,l),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let _=f,w=f+m;_<w;_++)if(vs(c,_*3,s,o),c.needsUpdate=!0,n(c,h,_,A,v,y,b,x))return!0}return!1};if(i){let f=i;i=function(m,p,g,v,y,b,x,A){return f(m,p,g,v,y,b,x,A)?!0:d(m,p,g,v,y,b,x,A)}}else i=d}e.getBoundingBox(B1),B1.applyMatrix4(t);let u=this.shapecast({intersectsBounds:d=>B1.intersectsBox(d),intersectsRange:(d,f,m,p,g,v)=>(O1.copy(v),O1.applyMatrix4($c),e.shapecast({intersectsBounds:y=>O1.intersectsBox(y),intersectsRange:(y,b,x,A,S)=>i(d,f,y,b,p,g,A,S)}))});return ds.releasePrimitive(c),ds.releasePrimitive(h),u}intersectsBox(e,t){return Qa.set(e.min,e.max,t),Qa.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Qa.intersectsBox(r),intersectsTriangle:r=>Qa.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,s=1/0){e.boundingBox||e.computeBoundingBox(),Qa.set(e.boundingBox.min,e.boundingBox.max,t),Qa.needsUpdate=!0;let o=this.geometry,a=o.attributes.position,l=o.index,c=e.attributes.position,h=e.index,u=ds.getPrimitive(),d=ds.getPrimitive(),f=Mm,m=$he,p=null,g=null;i&&(p=Ihe,g=Rhe);let v=1/0,y=null,b=null;return $c.copy(t).invert(),Wd.matrix.copy($c),this.shapecast({boundsTraverseOrder:x=>Qa.distanceToBox(x),intersectsBounds:(x,A,S)=>S<v&&S<s?(A&&(Wd.min.copy(x.min),Wd.max.copy(x.max),Wd.needsUpdate=!0),!0):!1,intersectsRange:(x,A)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:S=>Wd.distanceToBox(S),intersectsBounds:(S,_,w)=>w<v&&w<s,intersectsRange:(S,_)=>{for(let w=S*3,M=(S+_)*3;w<M;w+=3){vs(d,w,h,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let C=x*3,E=(x+A)*3;C<E;C+=3){vs(u,C,l,a),u.needsUpdate=!0;let $=u.distanceToTriangle(d,f,p);if($<v&&(m.copy(f),g&&g.copy(p),v=$,y=C/3,b=w/3),$<n)return!0}}}});{let S=h?h.count:c.count;for(let _=0,w=S;_<w;_+=3){vs(d,_,h,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=x*3,C=(x+A)*3;M<C;M+=3){vs(u,M,l,a),u.needsUpdate=!0;let E=u.distanceToTriangle(d,f,p);if(E<v&&(m.copy(f),g&&g.copy(p),v=E,y=M/3,b=_/3),E<n)return!0}}}}}),ds.releasePrimitive(u),ds.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=v,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4($c),m.applyMatrix4($c),i.distance=m.sub(i.point).length(),i.faceIndex=b),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,s=i*i,o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(jd.copy(e).clamp(c.min,c.max),jd.distanceToSquared(e)),intersectsBounds:(c,h,u)=>u<o&&u<s,intersectsTriangle:(c,h)=>{c.closestPointToPoint(e,jd);let u=e.distanceToSquared(jd);return u<o&&(Mm.copy(jd),o=u,a=h),u<n}}),o===1/0)return null;let l=Math.sqrt(o);return t.point?t.point.copy(Mm):t.point=Mm.clone(),t.distance=l,t.faceIndex=a,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{ws(0,new Float32Array(t),RP),e.union(RP)}),e}},kP=Zr.prototype.raycast;Zr.prototype.raycast=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[t,r,i,n]=e;return kP.call(this,i,t.material).forEach(s=>{s=nN(s,t,r),s&&n.push(s)}),n}else return kP.apply(this,e)};var OP=Zr.prototype.raycastFirst;Zr.prototype.raycastFirst=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[t,r,i]=e;return nN(OP.call(this,i,t.material),t,r)}else return OP.apply(this,e)};var BP=Zr.prototype.closestPointToPoint;Zr.prototype.closestPointToPoint=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),e.unshift();let t=e[1],r={};return e[1]=r,BP.apply(this,e),t&&t.copy(r.point),r.distance}else return BP.apply(this,e)};var zP=Zr.prototype.closestPointToGeometry;Zr.prototype.closestPointToGeometry=function(...e){let t=e[2],r=e[3];if(t&&t.isVector3||r&&r.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let i={},n={},s=e[1];return e[2]=i,e[3]=n,zP.apply(this,e),t&&t.copy(i.point),r&&r.copy(n.point).applyMatrix4(s),i.distance}else return zP.apply(this,e)};var NP=Zr.prototype.refit;Zr.prototype.refit=function(...e){let t=e[0],r=e[1];if(r&&(r instanceof Set||Array.isArray(r))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let i=new Set;r.forEach(n=>i.add(n)),t&&t.forEach(n=>i.add(n)),NP.call(this,i)}else NP.apply(this,e)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(e=>{let t=Zr.prototype[e];Zr.prototype[e]=function(...r){return(r[0]===null||r[0].isMesh)&&(r.shift(),console.warn(`MeshBVH: The function signature for "${e}" has changed and no longer takes Mesh. See docs for new signature.`)),t.apply(this,r)}});var khe=mO(vG()),jw;LB.then(e=>{jw=e});var oN=new We,Ohe=new We,Bhe=new We,Un=new zr,Yo=new T,zhe=new We,Nhe=new We,k2=class extends $i{constructor(e,t,r,i){super(r!=null?r:t,i),this.subdivPointer=e,this.originalGeometry=t,this.subdividedGeometry=r,this.objectType="SubdivObject",this.hiddenMatrixOld=new We,this.smoothShading=!0,this.phongAngle=35,this.matrixWorldRigid=new We,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(e,t,r){let{subdivPointer:i,originalGeometry:n,subdividedGeometry:s}=Yn.build(t.geometry,void 0,void 0,!t.flatShading),o=r.material(t.material),a=new k2(i,n,s||void 0,o);return t.geometry.phongAngle!==void 0&&(a.phongAngle=t.geometry.phongAngle),a.calcBoundingBox(),a.freeSubdivPointer(),a.uuid=e,a.fromState(t),a}buildFromStore(e,t){var s,o,a;let{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=Yn.build(e,t,this.subdivPointer,this.smoothShading,this.shearScale);e.phongAngle!==void 0&&(this.phongAngle=e.phongAngle),this.subdivPointer=n,r!==void 0&&((s=this.originalGeometry)==null||s.dispose(),this.originalGeometry=r),i!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=i!=null?i:void 0),this.geometry=(a=this.subdividedGeometry)!=null?a:this.originalGeometry,f0(this),p0(this),e.width&&(this.geometry.userData.parameters={width:e.width,height:e.height,depth:e.depth})}updateMesh(e=!1){Yn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e?this.shearScaleInv:void 0),this.subdividedGeometry&&Yn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=Yn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Yn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.geometry=(e=this.subdividedGeometry)!=null?e:this.originalGeometry}raycast(e,t){var r;this.geometry=this.originalGeometry,$i.prototype.raycast.call(this,e,t),this.geometry=(r=this.subdividedGeometry)!=null?r:this.originalGeometry}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:r,v:i,q:n}=(0,khe.SVD)(t),s=oN.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=Ohe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=Bhe.copy(o).transpose();this.shearScale=zhe.makeScale(n[0],n[1],n[2]).multiply(a).premultiply(o),this.shearScaleInv=Nhe.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,a),n.every(l=>Math.abs(n[0]-l)<.01)&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){this.shearScale!==void 0&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){this.shearScale!==void 0&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ts);let t=e.attributes.position,r=e.boundingSphere.center;Un.setFromBufferAttribute(t),Un.getCenter(r),e.boundingSphere.radius=r.distanceTo(Un.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Un.getSize(Yo);let i={width:Yo.x,height:Yo.y,depth:Yo.z};return this.geometry.userData.parameters=i,i}updateBoundingBox(e){let t=this.originalGeometry;Un.min.set(e[0],e[2],e[4]),Un.max.set(e[1],e[3],e[5]),this.shearScaleInv&&(Un.min.applyMatrix4(this.shearScaleInv),Un.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new ts);let r=t.boundingSphere.center;Un.getCenter(r),t.boundingSphere.radius=r.distanceTo(Un.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Un.getSize(Yo);let i={width:Yo.x,height:Yo.y,depth:Yo.z};return this.geometry.userData.parameters=i,i}freeSubdivPointer(){this.subdivPointer&&(jw.free_bvh(this.subdivPointer),jw.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(e){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=this.geometry.userData.parameters.width===0?1:e.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=this.geometry.userData.parameters.height===0?1:e.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=this.geometry.userData.parameters.depth===0?1:e.parameters.depth/this.geometry.userData.parameters.depth,FP(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(FP(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters={...e.parameters}}};function FP(e,t,r,i){let n=e.position.array,s=e.normal.array,o=oN.makeScale(t,r,i).invert().elements,a,l,c;for(var h=0,u=n.length;h<u;h+=3)n[h]*=t,n[h+1]*=r,n[h+2]*=i,a=s[h],l=s[h+1],c=s[h+2],s[h]=o[0]*a+o[4]*l+o[8]*c,s[h+1]=o[1]*a+o[5]*l+o[9]*c,s[h+2]=o[2]*a+o[6]*l+o[10]*c}function UP(e,t){t.flatShading!==void 0&&(e.flatShading=t.flatShading,e.needsUpdate=!0),t.wireframe!==void 0&&(e.wireframe=t.wireframe),t.side!==void 0&&(t.side===0?e.side=Ao:t.side===1?e.side=Xr:e.side=_i)}function Fhe(e,t){if(Array.isArray(e.material))for(let r of e.material)UP(r,t);else{let r=e.material;UP(r,t)}e.objectType==="SubdivObject"&&t.flatShading!==void 0&&(e.material.flatShading=!1,e.smoothShading=!t.flatShading,e.updateMesh())}function Uhe(e,t,r){let i;if(t.geometry.type==="SubdivGeometry")i=k2.createFromState(e,t,r);else{let n=t.geometry.type==="BooleanGeometry"?new at:gz(t.geometry),s="materials"in t?t.materials.map(o=>r.material(o)):r.material(t.material);mw.is2DParametricMesh(n.userData.type)?i=new Lue(n,s):(n==null?void 0:n.userData.type)==="VectorGeometry"?i=new mz(n,s):t.geometry.type==="NonParametricGeometry"?i=new $ue(n,s):t.geometry.type==="BooleanGeometry"?(i=new Tue(void 0,s),i.booleanOp=t.geometry.operation,t.geometry.phongAngle!==void 0&&(i.phongAngle=t.geometry.phongAngle)):i=new Dz(n,s),i.uuid=e,i.fromState(t,r)}return Fhe(i,t),i}function Hhe(e,t,r){return t.type==="Mesh"?Uhe(e,t,r):t.type==="TextFrame"?tg.createFromState(e,t,r):t.type==="Empty"?$w.createFromState(e,t):t.type==="PointLight"?Cz.createFromState(e,t,r):t.type==="SpotLight"?Tz.createFromState(e,t,r):t.type==="DirectionalLight"?Ez.createFromState(e,t,r):Wu.is(t.type)?jl.createFromState(e,t):(console.error(t),new $w)}function HP(e,t){let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),r=!0,p0(e),f0(e)),i.length===0&&n.length===0&&e.layers.set(0),r}function VP(e,t){if(!t.layers)return!1;let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return i.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),r=!0),i.length===0&&n.length===0&&e.layers.set(0),r}function Vhe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof fi&&r.objectType!=="TextFrame")if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)HP(r,r.material[i])&&(t=!0);else HP(r,r.material)&&(t=!0)}),t}function Whe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof fi)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)VP(r,r.material[i])&&(t=!0);else VP(r,r.material)&&(t=!0)}),t}function jhe(e){"material"in e&&Ghe(e.material),"geometry"in e&&e.geometry.dispose()}function Ghe(e){oae(e).forEach(t=>{t instanceof Rw||t.dispose()})}var Yhe=new QO,Khe=new We,Xhe=new zf;function qhe(e,t,r){let i=e.cloner;if(i)for(let n of i.children){let s=Khe.copy(n.matrixWorld).invert(),o=Xhe.copy(t.ray).applyMatrix4(s),a=e.matrixWorld;o.applyMatrix4(a);let l=Yhe;l.set(o.origin,o.direction),l.near=t.near,l.far=t.far,l.intersectObject(e,!1).length>0&&r.push({object:e})}}var WP=new T,aN=class extends kB(Ml){constructor(e,t){super(),this.objectType="Scene",this.backupFog=new BO(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.bgColor=new Jn(1,1,1,1),this.entityByUuid={},this.ambientLight=new Fb(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,t)}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=Whe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=Vhe(this),this.needsNormalDirty=!1),this._needsNormal}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(Ai(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let r=this.find(e.publish.playCamera);r instanceof jl&&this.switchActiveCamera(r)}this.traverse(r=>{Er(r)&&r.recomputeBoolean()})}clearScene(){this.traverseEntity(e=>{jhe(e)});for(let e of this.children)so(e)&&e.removeFromParent()}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=jl.createFromState(aN.PERSONAL_CAMERA_ID,{...gw.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,delete e.isEntity,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],r=i=>{for(let n of i.children)so(n)&&!n.raycastLock&&n.visible&&((Ir(n)||IB(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),qhe(n,e,t)),r(n))};return r(this),t}traverseEntity(e){for(let t of this.children)so(t)&&t.traverseEntity(e)}traverseVisibleEntity(e){for(let t of this.children)so(t)&&t.visible&&t.traverseVisibleEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Ai(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,t){bce(this.ambientLight,e,t),e.groundColor!==void 0&&(this.ambientLight.groundColor=Ai(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}createChildrenObjects(e,t,r){for(let i of e)this.createChildObject(i.id,i.data,i.children,t,r)}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createChildObject(e,t,r,i,n){let s=Hhe(e,t,n);return s&&(this.entityByUuid[e]=s,i.add(s),Er(i)&&Ir(s)&&(s.prevBooleanObjectParent=i),this.createChildrenObjects(r,s,n)),s}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:s,recursive:o}=e[i],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;t.push(...l.vertices)}let r=new zr;return r.setFromPoints(t),r.getCenter(WP),WP}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof $i)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof Gu&&e(t.material[r]);else t.material instanceof Gu&&e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let r,i;e>=t?(r=t/e,i=1):(r=1,i=e/t),this.traverseMaterial(n=>{n.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=r,s.uniforms[`f${s.id}_aspectRatio`].value.y=i})})}},O2=aN;O2.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var Qhe=class extends O2{constructor(e,t){super(e,t)}dispose(){super.dispose()}},sg=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},Zhe=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return efe(Math.atan2(i,r))},Jhe=(e,t,r)=>{let i={x:0,y:0};return r=Gw(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},Gw=e=>e*(Math.PI/180),efe=e=>e*(180/Math.PI),tfe=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,z1=new Map,jP=e=>{z1.has(e)&&clearTimeout(z1.get(e)),z1.set(e,setTimeout(e,100))},mv=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let s=0;s<i.length;s+=1)n=i[s],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},GP=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let s=0;s<i.length;s+=1)n=i[s],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},lN=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),YP=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},Yw=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},B2=(e,t,r)=>{let i=cN(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let s="";for(let o=0,a=t.length;o<a;o+=1)s+=t[o]+" "+r+", ";i[n]=s.slice(0,-2)}return i},rfe=(e,t)=>{let r=cN(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},cN=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},N1=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},ife=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},Kw=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},nfe=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(uN="ontouchstart"in window,dN=!!window.PointerEvent,hN=!!window.MSPointerEvent);var uN,dN,hN,Gd={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},mu,bf={};dN?mu=Gd.pointer:hN?mu=Gd.MSPointer:uN?(mu=Gd.touch,bf=Gd.mouse):mu=Gd.mouse;function Jl(){}Jl.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var s=0;s<i.length;s+=1)n=i[s],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};Jl.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};Jl.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var s=0;s<i.length;s+=1)n=i[s],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(o){o.call(r,{type:n,target:r},t)})};Jl.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=ife(t.options,e))};Jl.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},mv(e,mu[t],r._domHandlers_[t]),bf[t]&&mv(e,bf[t],r._domHandlers_[t]),r};Jl.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},GP(e,mu[t],r._domHandlers_[t]),bf[t]&&GP(e,bf[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var z2=Jl;function Or(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Or.id,Or.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Or.prototype=new z2;Or.constructor=Or;Or.id=0;Or.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Or.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=rfe("borderRadius","50%"),r=B2("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},N1(i.el,r),this.options.shape==="circle"&&N1(i.back,t),N1(i.front,t),this.applyStyles(i),this};Or.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};Or.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Or.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Or.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Or.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Or.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};Or.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=B2("transition",["top","left"],i);var s={front:{}};s.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(s),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};Or.prototype.restCallback=function(){var e=this,t={};t.front=B2("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Or.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Or.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,s,o;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?s="left":s="right"),e.lockX||(t>0?o="up":o="down"),e.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:s,y:o,angle:n},e.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+s,e),c.y||this.trigger("plain:"+o,e),c.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var sfe=Or;function wr(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=wr.id,wr.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}wr.prototype=new z2;wr.constructor=wr;wr.id=0;wr.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};wr.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};wr.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};wr.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},s=r.options,o={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-o.x,y:e.y-o.y};else if(e.top||e.right||e.bottom||e.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=e.top,a.style.right=e.right,a.style.bottom=e.bottom,a.style.left=e.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),n=e,e={x:l.left+i.x,y:l.top+i.y}}var c=new sfe(r,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(Yw(c.ui.el,n),Yw(c.ui.front,c.frontPosition)),r.nipples.push(c),r.trigger("added "+c.identifier+":added",c),r.manager.trigger("added "+c.identifier+":added",c),r.bindNipple(c),c};wr.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};wr.prototype.bindNipple=function(e){var t=this,r,i=function(n,s){r=n.type+" "+s.id+":"+n.type,t.trigger(r,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};wr.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval(function(){var s=e.force||e.pressure||e.webkitForce||0;s!==n&&(t.trigger("pressure",s),i.trigger("pressure "+t.identifier+":pressure",s),n=s)}.bind(i),100)};wr.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=lN(e),t.updateBox();var n=function(s){t.actives.length<r.maxNumberOfNipples?t.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var a=[e[0]];a.identifier=o,t.processOnEnd(a)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(s))};return Kw(e,n),t.manager.bindDocument(),!1};wr.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},a=t.getOrCreate(n,o);a.identifier!==n&&t.manager.removeIdentifier(a.identifier),a.identifier=n;var l=function(h){h.trigger("start",h),t.trigger("start "+h.id+":start",h),h.show(),s>0&&t.pressureFn(e,h,h.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(a))>=0&&t.idles.splice(i,1),t.actives.push(a),t.ids.push(a.identifier),r.mode!=="semi")l(a);else{var c=sg(o,a.position);if(c<=r.catchDistance)l(a);else{a.destroy(),t.processOnStart(e);return}}return a};wr.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};wr.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),s=t.manager.scroll;if(!tfe(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var o=n.el.getBoundingClientRect();n.position={x:s.x+o.left,y:s.y+o.top}}n.identifier=i;var a=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var c=sg(l,n.position),h=Zhe(l,n.position),u=Gw(h),d=c/a,f={distance:c,position:l},m,p;if(n.options.shape==="circle"?(m=Math.min(c,a),p=Jhe(n.position,m,h)):(p=nfe(l,n.position,a),m=sg(p,n.position)),r.follow){if(c>a){let b=l.x-p.x,x=l.y-p.y;n.position.x+=b,n.position.y+=x,n.el.style.top=n.position.y-(t.box.top+s.y)+"px",n.el.style.left=n.position.x-(t.box.left+s.x)+"px",c=sg(l,n.position)}}else l=p,c=m;var g=l.x-n.position.x,v=l.y-n.position.y;n.frontPosition={x:g,y:v},r.dataOnly||Yw(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:u,degree:h},vector:{x:g/a,y:-v/a},raw:f,instance:n,lockX:r.lockX,lockY:r.lockY};y=n.computeDirection(y),y.angle={radian:Gw(180-h),degree:180-h},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};wr.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),s=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[s.id]=s.identifier))};wr.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};wr.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var ofe=wr;function Gr(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=YP(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(s){s.forEach(function(o){n=o.el.getBoundingClientRect(),o.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;mv(window,"resize",function(){jP(r)});var i=function(){t.scroll=YP()};return mv(window,"scroll",function(){jP(i)}),t.collections}Gr.prototype=new z2;Gr.constructor=Gr;Gr.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};Gr.prototype.create=function(e){return this.createCollection(e)};Gr.prototype.createCollection=function(e){var t=this,r=new ofe(t,e);return t.bindCollection(r),t.collections.push(r),r};Gr.prototype.bindCollection=function(e){var t=this,r,i=function(n,s){r=n.type+" "+s.id+":"+n.type,t.trigger(r,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Gr.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Gr.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Gr.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Gr.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Gr.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Gr.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Gr.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Gr.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=lN(t);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[n](a),a._found_=!0)},o=function(a){i=r.getIdentifier(a),Kw(r.collections,s.bind(null,a,i)),a._found_||r.removeIdentifier(i)};return Kw(t,o),!1};Gr.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Gr.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var afe=Gr,KP=new afe,lfe={create:function(e){return KP.create(e)},factory:KP};function F1(e,t){let r=e.clone();for(let i in r.attributes)i!=="position"&&r.deleteAttribute(i);if(r.index===null){let{positions:i,triIndices:n}=S2(r.getAttribute("position"));r.setAttribute("position",new $e(i,3)),r.setIndex(n)}return t&&r.applyMatrix4(t),r}var U1=new We,cfe=new T(1,1,1),XP=new T,qP=new Yt,Em=new T,ufe=class{constructor(e,t,r,i,n=!1){var v;this.scene=t,this.isExport=n,this.gameControls=[],this.joysticks=[],this.joystickToGameControls=[],this.bvh={dynamic:[]},this.initializationCounter=-1,this.domElement=r.domElement;let s;e.scene.publish.playCamera===null?s=O2.PERSONAL_CAMERA_ID:s=e.scene.publish.playCamera;let o=this.scene.find(s),a=!1,l=!1,c,h=5,u=8,d=9,f="drag";(v=e.scene.objects.data(e.scene.publish.gameControlObject))==null||v.events.forEach(y=>{y.data.type===13&&(c=y.data.keyAssignments,h=y.data.joystickPosLoc,u=y.data.joystickRotLoc,d=y.data.jumpTouchButtonLoc,f=y.data.rotByTouch)}),e.scene.objects.traverse((y,b)=>{b.events.forEach(x=>{if(x.data.type===13){x.data.collisionEnabled&&(a=!0);let A=this.scene.find(y);l=l||x.data.camera===o.uuid;let S=new pB({...x.data,keyAssignments:c},A,r.domElement,this.bvh,x.data.camera===o.uuid,o);S.addEventListener("change",i),S.addEventListener("end",i),S.addEventListener("start",i),this.gameControls.push(S),Wr&&x.data.touchControl&&(this.joystickToGameControls[h]!==void 0?this.joystickToGameControls[h].push([S,"pos"]):this.joystickToGameControls[h]=[[S,"pos"]],x.data.moveMode==="walk"&&(this.joystickToGameControls[d]!==void 0?this.joystickToGameControls[d].push([S,"jmp"]):this.joystickToGameControls[d]=[[S,"jmp"]]),f==="joystick"&&(this.joystickToGameControls[u]!==void 0?this.joystickToGameControls[u].push([S,"rot"]):this.joystickToGameControls[u]=[[S,"rot"]]))}})});let m=!1;if(e.scene.objects.traverse((y,b)=>{b.events.forEach(x=>{x.data.type===13&&Wu.is(b.type)&&(m=!0)})}),l===!1){let{enableRotate:y,enablePan:b,enableZoom:x,autoRotate:A,hoverRotatePanMode:S}=e.scene.publish.orbitControls;m===!1&&(y||b||x||A||S!==0)&&(o.interaction===void 0||o.interaction.states.length<=1)&&(this.orbitControls=new fB(o,r.domElement,this.isExport),this.orbitControls.addEventListener("change",i),this.orbitControls.addEventListener("end",i),this.orbitControls.addEventListener("start",i),this.orbitControls.fromJSON(e.scene.publish.orbitControls),this.orbitControls.useKeyEvents=!1)}let p=r.domElement.width/r.getPixelRatio(),g=r.domElement.height/r.getPixelRatio();this.joystickToGameControls.forEach((y,b)=>{var D;let x=document.body.appendChild(document.createElement("div")),[A,S,_]=((D=e.scene.publish.joystickSizeAndXYOffset)!=null?D:cv.defaultData.joystickSizeAndXYOffset)[b],w=(p-5*A)/4+A,M={},C=y.some(W=>W[1]==="jmp"),E=C?0:A;b<10?(b<5?M.top=E/2:M.bottom=E/2,M.left=E/2+b%5*w):b===10?(M.left=E/2,M.top=g/2):(M.right=E/2,M.top=g/2),M.top?M.top-=S[1]:M.bottom+=S[1],M.left?M.left+=S[0]:M.right-=S[0];for(let W in M)M[W]+="px";if(C){let W=x.appendChild(document.createElement("div"));Object.assign(W.style,M,{position:"absolute",width:A+"px",height:A+"px",backgroundColor:`rgba(255,255,255,${_==="show"?.4:0})`,zIndex:"9999",borderRadius:A+"px",border:"solid 2px rgba(0, 0, 0, .1)",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let V=A/16*16*.4;W.innerHTML=`
					<svg width="${V}" height="${A*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				`,W.addEventListener("pointerdown",()=>{y.forEach(H=>{H[0].actionStates.jump=1}),i()}),W.addEventListener("touchend",H=>H.preventDefault()),this.joysticks[b]=[void 0,x];return}let $={zone:x,mode:"static",position:M,size:A};_==="hide"&&($.restOpacity=0);let P=lfe.create($);P.on("move",(W,V)=>{y.forEach(H=>{let L=H[0];H[1]==="pos"?V.force<.2?L.moveForce=0:(L.actionStates.movePosZ=Math.sin(-V.angle.radian),L.actionStates.movePosX=Math.cos(-V.angle.radian),V.force<.3?L.moveForce=(V.force-.2)/.1:L.moveForce=1):V.force<.2?L.rotForce=0:(L.actionStates.rotPosX=V.vector.y,L.actionStates.rotPosY=-V.vector.x,V.force<.3?L.rotForce=(V.force-.2)/.1:L.rotForce=1)}),i()}),P.on("end",(W,V)=>{y.forEach(H=>{let L=H[0];H[1]==="pos"?(L.actionStates.movePosZ=0,L.actionStates.movePosX=0,L.moveForce=1):(L.actionStates.rotPosX=0,L.actionStates.rotPosY=0,L.rotForce=1)})}),this.joysticks[b]=[P,x]}),a&&this.initBVH(),this.initializationCounter++}initBVH(){let e=[];this.scene.updateMatrixWorld(!0);let t=new Set;if(this.scene.traverse(r=>{var i;if(Oa(r))if(!r.visible||t.has(r))r.children.forEach(n=>Oa(n)&&t.add(n));else if(r.interaction&&r.interaction.states.length>1||((i=r.interaction)==null?void 0:i.events.gameControl)!==void 0){let n=[];r.matrixWorld.decompose(XP,qP,Em);let s=new We().compose(XP,qP,cfe);Ir(r)&&n.push(F1(r.geometry,U1.makeScale(Em.x,Em.y,Em.z))),r.updateMatrixWorld();let o=s.clone().invert();if(r.traverse(a=>{!Ir(a)||(a.updateMatrixWorld(),U1.multiplyMatrices(o,a.matrixWorld),n.push(F1(a.geometry,U1)))}),n.length>0){let a=bw(n,!1);r.boundsTree=new Zr(a),this.bvh.dynamic.push(r)}}else Ir(r)&&!this.bvh.dynamic.some(n=>r.isDescendantOf(n))&&e.push(F1(r.geometry,r.matrixWorld))}),e.length>0){let r=bw(e,!1);this.bvh.static=new Zr(r)}}dispose(){var e;this.bvh.static=void 0,this.bvh.dynamic=[],this.gameControls.forEach(t=>{t.reset(),t.dispose()}),this.gameControls=[],this.joysticks.forEach(([t,r])=>{t==null||t.destroy(),r.remove()}),this.joystickToGameControls=[],this.joysticks=[],(e=this.orbitControls)==null||e.dispose(),this.orbitControls=void 0}update(e){let t=!0;return this.orbitControls!==void 0&&(t=!this.orbitControls.update(e)),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,t=!1):this.initializationCounter===2&&this.gameControls.forEach(r=>{t=!r.update(e)&&t}),t}},fN={RED:0,GREEN:1,BLUE:2,ALPHA:3},Yf="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",dfe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,Cm=class extends kr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new He(null),kernel16:new He(null),inputBuffer:new He(null),cocBuffer:new He(null),texelSize:new He(new K),scale:new He(1)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:dfe,vertexShader:Yf}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let a=0;a<80;++a){let l=a*e,c=Math.sqrt(a)/Math.sqrt(80),h=c*Math.cos(l),u=c*Math.sin(l);a%5===0?(r[n++]=h,r[n++]=u):(t[i++]=h,t[i++]=u)}let s=[],o=[];for(let a=0;a<128;)s.push(new ct(t[a++],t[a++],t[a++],t[a++]));for(let a=0;a<32;)o.push(new ct(r[a++],r[a++],r[a++],r[a++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function QP(e,t,r){return e*(t-r)-t}function Xw(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var hfe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,ffe=class extends kr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new He(null),focusDistance:new He(0),focusRange:new He(0),cameraNear:new He(.3),cameraFar:new He(1e3)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:hfe,vertexShader:Yf}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=$o){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-QP(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=Xw(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-QP(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=Xw(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},pfe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,mfe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ZP=class extends kr{constructor(e=new K){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new He(null),texelSize:new He(new K),halfTexelSize:new He(new K),kernel:new He(0),scale:new He(1)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:pfe,vertexShader:mfe}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},gfe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,vfe=class extends kr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new He(null),opacity:new He(1)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:gfe,vertexShader:Yf}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},yfe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,xfe=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,N2={DEPTH:0,LUMA:1,COLOR:2},pN={DISABLED:0,DEPTH:1,CUSTOM:2},bfe=class extends kr{constructor(e=new K,t=N2.COLOR){super({name:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new He(null),depthBuffer:new He(null),predicationBuffer:new He(null),texelSize:new He(e)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:yfe,vertexShader:xfe}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=$o){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},wfe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Sfe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Hn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},qw=class extends kr{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:kf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new He(null),depthBuffer:new He(null),resolution:new He(new K),texelSize:new He(new K),cameraNear:new He(.3),cameraFar:new He(1e3),aspect:new He(1),time:new He(0)},blending:Qr,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=$o){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=wfe.replace(Hn.FRAGMENT_HEAD,e.get(Hn.FRAGMENT_HEAD)).replace(Hn.FRAGMENT_MAIN_UV,e.get(Hn.FRAGMENT_MAIN_UV)).replace(Hn.FRAGMENT_MAIN_IMAGE,e.get(Hn.FRAGMENT_MAIN_IMAGE)),this.vertexShader=Sfe.replace(Hn.VERTEX_HEAD,e.get(Hn.VERTEX_HEAD)).replace(Hn.VERTEX_MAIN_SUPPORT,e.get(Hn.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return Hn}},_fe=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Afe=class extends kr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",uniforms:{inputBuffer:new He(null),threshold:new He(0),smoothing:new He(1),range:new He(null)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:_fe,vertexShader:Yf}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Mfe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,mN={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},Efe=class extends kr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new He(e),inputBuffer:new He(null),strength:new He(1)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:Mfe,vertexShader:Yf}),this.toneMapped=!1,this.setColorChannel(fN.RED),this.setMaskFunction(mN.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==gi&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},Cfe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,Tfe="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",Pfe=class extends kr{constructor(e=new K,t=new K){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new He(null),searchTexture:new He(null),areaTexture:new He(null),resolution:new He(t),texelSize:new He(e)},blending:Qr,depthWrite:!1,depthTest:!1,fragmentShader:Cfe,vertexShader:Tfe}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},Dfe=new id,Ko=null;function Lfe(){if(Ko===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Ko=new at,Ko.setAttribute!==void 0?(Ko.setAttribute("position",new ft(e,3)),Ko.setAttribute("uv",new ft(t,2))):(Ko.addAttribute("position",new ft(e,3)),Ko.addAttribute("uv",new ft(t,2)))}return Ko}var In=class{constructor(e="Pass",t=new Ml,r=Dfe){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new fi(Lfe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Ml),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=$o){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Ml||t===this.renderer)continue;this[e].dispose()}}}},gv=class extends In{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new vfe,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new br(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==gi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===ht&&(this.renderTarget.texture.encoding=ht))}},$fe=class extends In{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},H1=new st,x0=class extends In{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){let s=this.overrideClearColor,o=this.overrideClearAlpha,a=e.getClearAlpha(),l=s!==null,c=o>=0;l?(H1.copy(e.getClearColor(H1)),e.setClearColor(s,c?o:a)):c&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(H1,a):c&&e.setClearAlpha(a)}},Xo=-1,Hi=class extends ki{constructor(e,t=Xo,r=Xo,i=1){super(),this.resizable=e,this.base=new K(1,1),this.preferred=new K(t,r),this.target=this.preferred,this.s=i}get width(){let{base:e,preferred:t,scale:r}=this,i;return t.width!==Xo?i=t.width:t.height!==Xo?i=Math.round(t.height*(e.width/Math.max(e.height,1))):i=Math.round(e.width*r),i}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,i;return t.height!==Xo?i=t.height:t.width!==Xo?i=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i=Math.round(e.height*r),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Xo),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Xo}},V1=!1,JP=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case _i:r=this.materialsFlatShadedDoubleSide;break;case Xr:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case _i:r=this.materialsDoubleSide;break;case Xr:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Ao;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Xr,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=_i,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Xr,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=_i,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,V1){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return V1}static set workaroundEnabled(e){V1=e}},Ife=class extends In{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new x0,this.overrideMaterialManager=r===null?null:new JP(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new JP(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,h=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,o):e.render(s,o),o.layers.mask=l,s.background=c,e.shadowMap.autoUpdate=h}},eD=class extends In{constructor(e,t,{resolutionScale:r=1,width:i=Hi.AUTO_SIZE,height:n=Hi.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Ife(e,t,new kO({depthPacking:SO}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let a=o.getClearPass();a.overrideClearColor=new st(16777215),a.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new br(1,1,{minFilter:ur,magFilter:ur,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Hi(this,i,n,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},At={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Rfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",kfe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Ofe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Bfe="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",zfe="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Nfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Ffe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Ufe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Hfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Vfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Wfe="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",jfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Gfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Yfe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Kfe="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Xfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",qfe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Qfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Zfe=new Map([[At.SKIP,null],[At.ADD,Rfe],[At.ALPHA,kfe],[At.AVERAGE,Ofe],[At.COLOR_BURN,Bfe],[At.COLOR_DODGE,zfe],[At.DARKEN,Nfe],[At.DIFFERENCE,Ffe],[At.EXCLUSION,Ufe],[At.LIGHTEN,Hfe],[At.MULTIPLY,Vfe],[At.DIVIDE,Wfe],[At.NEGATION,jfe],[At.NORMAL,Gfe],[At.OVERLAY,Yfe],[At.REFLECT,Kfe],[At.SCREEN,Xfe],[At.SOFT_LIGHT,qfe],[At.SUBTRACT,Qfe]]),Jfe=class extends ki{constructor(e,t=1){super(),this.f=e,this.opacity=new He(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Zfe.get(this.blendFunction)}},Rs={NONE:0,DEPTH:1,CONVOLUTION:2},Vs=class extends ki{constructor(e,t,{attributes:r=Rs.NONE,blendFunction:i=At.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=a,this.defines=n,this.uniforms=s,this.extensions=o,this.blendMode=new Jfe(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=$o){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Ml||t===this.renderer)continue;this[e].dispose()}}}};function tD(e,t,r){for(let i of t){let n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of r.entries())o[1]!==null&&r.set(o[0],o[1].replace(s,n))}}function epe(e,t,r,i,n,s,o){let a=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=a.get("fragment")!==void 0&&/mainImage/.test(a.get("fragment")),c=a.get("fragment")!==void 0&&/mainUv/.test(a.get("fragment")),h=[],u=[],d=!1,f=!1;if(a.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(c&&(o&Rs.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let m=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,p=qw.Section;if(c){let v=`	${e}MainUv(UV);
`;r.set(p.FRAGMENT_MAIN_UV,r.get(p.FRAGMENT_MAIN_UV)+v),d=!0}if(a.get("vertex")!==null&&/mainSupport/.test(a.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?`vUv);
`:`);
`,r.set(p.VERTEX_MAIN_SUPPORT,r.get(p.VERTEX_MAIN_SUPPORT)+v),h=h.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(h).concat([...a.get("vertex").matchAll(m)].map(y=>y[1]))}u=u.concat([...a.get("fragment").matchAll(m)].map(v=>v[1])),u=u.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,y)=>s.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),t.defines.forEach((v,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),tD(e,u,n),tD(e,u,a);let g=t.blendMode;if(i.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;(o&Rs.DEPTH)!==0&&v.test(a.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let b=e+"BlendOpacity";s.set(b,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${b});

	`,r.set(p.FRAGMENT_MAIN_IMAGE,r.get(p.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${b};

`,r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+y)}r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+a.get("fragment")+`
`),a.get("vertex")!==null&&r.set(p.VERTEX_HEAD,r.get(p.VERTEX_HEAD)+a.get("vertex")+`
`)}return{varyings:h,transformedUv:d,readDepth:f}}var W1=class extends In{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new qw(null,null,null,e),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=qw.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,s=new Set,o=0,a=0,l=0,c=!1,h=!1;for(let d of this.effects)if(d.blendMode.blendFunction===At.SKIP)l|=d.getAttributes()&Rs.DEPTH;else if((l&d.getAttributes()&Rs.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let f="e"+o++,m=epe(f,d,t,r,i,n,l);if(a+=m.varyings.length,c=c||m.transformedUv,h=h||m.readDepth,d.extensions!==null)for(let p of d.extensions)s.add(p)}let u=/\bblend\b/g;for(let d of r.values()){let f=d.getShaderCode().replace(u,`blend${d.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}if((l&Rs.DEPTH)!==0){if(h){let d=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,d+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(c){let d=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,d+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");t.forEach((d,f,m)=>m.set(f,d.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=a,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(n).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=$o){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(let s of this.effects)s.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=i,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==gi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},tpe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],gN=class extends In{constructor({resolutionScale:e=.5,width:t=Hi.AUTO_SIZE,height:r=Hi.AUTO_SIZE,kernelSize:i=F2.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new br(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new Hi(this,t,r,e);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new ZP,this.ditheredBlurMaterial=new ZP,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=tpe[this.kernelSize],h=this.blurMaterial,u=t,d,f;for(this.fullscreenMaterial=h,d=0,f=c.length-1;d<f;++d){let m=(d&1)===0?a:l;h.kernel=c[d],h.inputBuffer=u.texture,e.setRenderTarget(m),e.render(s,o),u=m}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=c[d],h.inputBuffer=u.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(s,o)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(i,n),this.ditheredBlurMaterial.setSize(i,n)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==gi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===ht&&(this.renderTargetA.texture.encoding=ht,this.renderTargetB.texture.encoding=ht))}static get AUTO_SIZE(){return Hi.AUTO_SIZE}},rpe=class extends In{constructor({width:e=Hi.AUTO_SIZE,height:t=Hi.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new Afe(n,i),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new br(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new Hi(this,e,t);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==gi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},ipe=class extends In{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new x0(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){let s=e.getContext(),o=e.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,h=this.inverted?0:1,u=1-h;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,h,4294967295),o.stencil.setClear(u),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,l)):(e.setRenderTarget(t),e.render(a,l),e.setRenderTarget(r),e.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Jo=class extends In{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,i,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==gi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},j1=1/1e3,npe=1e3,spe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*j1}getFixedDelta(){return this.fixedDelta*j1}setFixedDelta(e){return this.fixedDelta=e*npe,this}getElapsed(){return this.elapsed*j1}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},ope=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,n,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new gv,this.depthTexture=null,this.passes=[],this.timer=new spe,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){let t=e.getSize(new K),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===gi&&e.outputEncoding===ht&&(this.inputBuffer.texture.encoding=ht,this.outputBuffer.texture.encoding=ht,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(let n of this.passes)n.initialize(e,r,i)}}replaceRenderer(e,t=!0){let r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new B_;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Ul,e.type=Sl):e.type=la,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){let n=this.renderer,s=n===null?new K:n.getDrawingBufferSize(new K),o={minFilter:Bt,magFilter:Bt,stencilBuffer:t,depthBuffer:e,type:r},a;return i>0?(a=Number(kf.replace(/\D+/g,""))<138?new gJ(s.width,s.height,o):new br(s.width,s.height,o),a.ignoreDepthForMultisampleCopy=!1,a.samples=i):a=new br(s.width,s.height,o),r===gi&&n!==null&&n.outputEncoding===ht&&(a.texture.encoding=ht),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}addPass(e,t){let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new K),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,s,o),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let a=this.createDepthTexture();for(e of r)e.setDepthTexture(a)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,s)=>n||s.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,s=!1,o,a,l;e===void 0&&(e=this.timer.update().getDelta());for(let c of this.passes)c.enabled&&(c.render(t,i,n,e,s),c.needsSwap&&(s&&(r.renderToScreen=c.renderToScreen,o=t.getContext(),a=t.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),r.render(t,i,n,e,s),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=n,n=l),c instanceof ipe?s=!0:c instanceof $fe&&(s=!1))}setSize(e,t,r){let i=this.renderer;if(e===void 0||t===void 0){let s=i.getSize(new K);e=s.width,t=s.height}i.setSize(e,t,r);let n=i.getDrawingBufferSize(new K);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},F2={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},ape=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,lpe=class extends Vs{constructor({blendFunction:e=At.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:s=Hi.AUTO_SIZE,height:o=Hi.AUTO_SIZE,kernelSize:a=F2.LARGE}={}){super("BloomEffect",ape,{blendFunction:e,uniforms:new Map([["map",new He(null)],["intensity",new He(n)]])}),this.renderTarget=new br(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new rpe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new gN({resolutionScale:i,width:s,height:o,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===ht&&(this.renderTarget.texture.encoding=ht))}},cpe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",upe=class extends Vs{constructor({blendFunction:e=At.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",cpe,{blendFunction:e,uniforms:new Map([["brightness",new He(t)],["contrast",new He(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},dpe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",hpe=class extends Vs{constructor(e=At.NORMAL){super("ColorAverageEffect",dpe,{blendFunction:e})}},fpe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",ppe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",mpe=class extends Vs{constructor({blendFunction:e=At.NORMAL,offset:t=new K(.001,5e-4)}={}){super("ChromaticAberrationEffect",fpe,{vertexShader:ppe,blendFunction:e,attributes:Rs.CONVOLUTION,uniforms:new Map([["offset",new He(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},gpe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,vpe=class extends Vs{constructor(e,{blendFunction:t=At.NORMAL,worldFocusDistance:r,worldFocusRange:i,focusDistance:n=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,width:l=Hi.AUTO_SIZE,height:c=Hi.AUTO_SIZE}={}){super("DepthOfFieldEffect",gpe,{blendFunction:t,attributes:Rs.DEPTH,uniforms:new Map([["nearColorBuffer",new He(null)],["farColorBuffer",new He(null)],["nearCoCBuffer",new He(null)],["scale",new He(1)]])}),this.camera=e,this.renderTarget=new br(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Jo(new ffe(e));let h=this.cocMaterial;h.focusDistance=n,h.focusRange=o,r!==void 0&&(h.worldFocusDistance=r),i!==void 0&&(h.worldFocusRange=i),this.blurPass=new gN({kernelSize:F2.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",f=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new Jo(new Efe(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=mN.MULTIPLY,d.colorChannel=fN.GREEN,this.bokehNearBasePass=new Jo(new Cm(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Jo(new Cm(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Jo(new Cm(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Jo(new Cm(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return Xw(-r,t.near,t.far)}setDepthTexture(e,t=$o){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(o=>o.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(o=>o.setSize(i,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,n))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,gi),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===ht&&(this.renderTarget.texture.encoding=ht,this.renderTargetNear.texture.encoding=ht,this.renderTargetFar.texture.encoding=ht,this.renderTargetMasked.texture.encoding=ht))}};new T;new We;var ype="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",xpe=class extends Vs{constructor({blendFunction:e=At.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",ype,{blendFunction:e,uniforms:new Map([["hue",new He(new T)],["saturation",new He(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new st;var bpe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,wpe=class extends Vs{constructor({blendFunction:e=At.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",bpe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},Spe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",_pe=class extends Vs{constructor(e=30){super("PixelationEffect",Spe,{uniforms:new Map([["active",new He(!1)],["d",new He(new K)]])}),this.resolution=new K,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new T;new T;var rD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",iD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Ape="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Mpe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Wc={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Epe=class extends Vs{constructor({preset:e=Wc.MEDIUM,edgeDetectionMode:t=N2.COLOR,predicationMode:r=pN.DISABLED}={}){super("SMAAEffect",Ape,{vertexShader:Mpe,blendFunction:At.NORMAL,attributes:Rs.CONVOLUTION|Rs.DEPTH,uniforms:new Map([["weightMap",new He(null)]])});let i,n;arguments.length>1&&(i=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new br(1,1,{minFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new x0(!0,!1,!1),this.clearPass.overrideClearColor=new st(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Jo(new bfe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Jo(new Pfe);let s=new KO;s.onLoad=()=>{let o=new Ti(i);o.name="SMAA.Search",o.magFilter=ur,o.minFilter=ur,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let a=new Ti(n);a.name="SMAA.Area",a.magFilter=Bt,a.minFilter=Bt,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),i!==void 0&&n!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,n=new Image,i.addEventListener("load",()=>s.itemEnd("search")),n.addEventListener("load",()=>s.itemEnd("area")),i.src=rD,n.src=iD),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case Wc.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Wc.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Wc.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case Wc.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=$o){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return rD}static get areaImageDataURL(){return iD}},Cpe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Tm={DEFAULT:0,ESKIL:1},Tpe=class extends Vs{constructor({blendFunction:e=At.NORMAL,technique:t=Tm.DEFAULT,eskil:r=!1,offset:i=.5,darkness:n=.5}={}){super("VignetteEffect",Cpe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new He(i)],["darkness",new He(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Tm.ESKIL}set eskil(e){this.technique=e?Tm.ESKIL:Tm.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Io=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=At.NORMAL}},Ppe=class extends Io{constructor(){super(lpe),this.blendFunction=At.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},Dpe=class extends Io{constructor(){super(upe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},Lpe=class extends Io{constructor(){super(mpe),this.effect.offset=new K(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},$pe=class extends Io{constructor(){super(hpe)}},Ipe=class extends Io{constructor(){super(xpe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},Rpe=class extends Io{constructor(){super(wpe),this.blendFunction=At.OVERLAY}},kpe=class extends Io{constructor(){super(Tpe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Ope=class extends Io{constructor(e){super(vpe,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},Bpe=class extends Io{constructor(){super(_pe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},zpe=class extends In{constructor(e,t,r){super("TransmissionPass",e,t),this.copyPass=new gv(r.transmissionRenderTarget),this.depthPass=new eD(e,t,{renderTarget:r.transmissionDepthTarget}),this.needsSwap=!1}updatePasses(e){this.copyPass=new gv(e.transmissionRenderTarget),this.depthPass=new eD(this.scene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.scene=e}render(e,t,r){let i=this.camera.layers.mask;this.copyPass.render(e,t,r),this.camera.layers.disable(3),this.depthPass.render(e,t,r),e.shadowMap.needsUpdate=!1,e.shadowMap.autoUpdate=!1;let n=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(n),e.render(this.scene,this.camera),this.camera.layers.mask=i}},nD=new Ml,Npe=new kr({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        void main() {
            gl_FragColor = vec4(0.0);
        }
    `}),G1=class extends In{constructor(e,t){super("OpaquePass",e!=null?e:nD,t),this.hasTransmissionPass=!1,this.clear=!0,this.needsSwap=!1,this.originalMaterials=new Map}setCamera(e){this.camera=e}setScene(e){this.scene=e!=null?e:nD}getScene(){return this.scene}render(e,t){this.originalMaterials.clear(),this.camera.layers.enable(3),this.hasTransmissionPass&&this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof $i&&(this.originalMaterials.set(i.id,i.material),i.material=Npe)}),this.camera.layers.enable(8),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0;let r=this.renderToScreen?null:t;e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),this.hasTransmissionPass&&this.originalMaterials.forEach((i,n)=>{let s=this.scene.getObjectById(n);s&&(s.material=i)})}};function sD(e,t){return t&&t.enabled&&e.push(t.effect),e}var Fpe=class extends ki{constructor(e){super(),this.postprocessingState=lw.defaultData,this._scene=new Ml,this._camera=new jl,this.effects=new Map,this._renderToScreen=!0,this.clock=new lJ,this.renderer=e,this.debug=!1,this.effects.set("bloom",new Ppe),this.effects.set("chromaticAberration",new Lpe),this.effects.set("vignette",new kpe),this.effects.set("noise",new Rpe),this.effects.set("colorAverage",new $pe),this.effects.set("hueSaturation",new Ipe),this.effects.set("brightnessContrast",new Dpe),this.effects.set("depthOfField",new Ope),this.effects.set("pixelation",new Bpe),this.effectComposer=new ope(this.renderer),this.opaquePass=new G1(this.scene,this.camera),this.transmissionPass=new zpe(this.scene,this.camera,this.renderer),this.helperPass=new G1(void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperClearPass=new x0(!1,!0,!1),this.helperPassOnTop=new G1(void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this._initCopyPass(),this._initSmaa(),this._initPasses()}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}disableHelpers(){this.helperPass.enabled=!1,this.helperClearPass.enabled=!1,this.helperPassOnTop.enabled=!1}enableHelpers(){this.helperPass.enabled=!0,this.helperClearPass.enabled=!0,this.helperPassOnTop.enabled=!0}_initSmaa(){let e=new Epe({preset:Wc.ULTRA,edgeDetectionMode:N2.COLOR}),t=()=>{e.removeEventListener("load",t),this.dispatchEvent({type:"smaaloaded"})};e.addEventListener("load",t),e.edgeDetectionMaterial.predicationMode=pN.DEPTH,e.edgeDetectionMaterial.edgeDetectionThreshold=.05,e.edgeDetectionMaterial.predicationThreshold=.002,e.edgeDetectionMaterial.predicationScale=1,this.smaaPass=new W1(this.camera,e)}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(sD,[]);r.length>0&&(this.uvEffectPass=new W1(this.camera,...r),this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(sD,[]);i.length>0&&(this.effectPass=new W1(this.camera,...i),this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.helperClearPass),this.effectComposer.addPass(this.helperPassOnTop),this.effectComposer.addPass(this.smaaPass)}_initCopyPass(){if(this._savePass)return;let e=new K;this.renderer.getDrawingBufferSize(e),this._rt=new br(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:nf,wrapT:nf}),this._rt.samples=0,this._savePass=new gv(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?(t.removePass(this._savePass),t.passes[t.passes.length-1].renderToScreen=!0,t.autoRenderToScreen=!0):(t.autoRenderToScreen=!1,t.passes[t.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.postprocessingState.enabled||(this._savePass.needsDepthTexture=!0),t.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let n of Object.entries(r)){let s=n[1],o=this.effects.get(n[0]);if(o){o.enabled!==s.enabled&&(i=!0),o.enabled=s.enabled;for(let[a,l]of Object.entries(s))o[a]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,i){e instanceof ct?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,i){e instanceof ct?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},oD=new Ti,Upe=class extends OO{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new K,this.pipeline=new Fpe(this),this.overrideTransmission=e==null?void 0:e.overrideTransmission,this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.setPixelRatio=i=>{this._pixelRatio=i,t(i)},this.setSize=(i,n,s=!0)=>{var o,a,l;(this.viewportWidth!==i||this.viewportHeight!==n)&&(this.viewportWidth=i,this.viewportHeight=n,r(i,n,s),(o=this.normalRenderTarget)==null||o.setSize(i*this._pixelRatio,n*this._pixelRatio),(a=this.transmissionRenderTarget)==null||a.setSize(i*this._pixelRatio/2,n*this._pixelRatio/2),(l=this.transmissionDepthTarget)==null||l.setSize(i*this._pixelRatio/2,n*this._pixelRatio/2),this.pipeline.resize(i,n,s))}}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new br(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{generateMipmaps:!0,minFilter:Bf,magFilter:Bt,wrapS:Zi,wrapT:Zi,depthBuffer:!1}),this.transmissionDepthTarget=new br(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:ur,magFilter:ur,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new br(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:ur,magFilter:ur,type:ca,depthTexture:new B_(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t){this.normalRenderTarget&&(this.setClearColor(0),t.layers.enable(8),t.layers.disable(0),t.layers.disable(3),this.setRenderTarget(this.normalRenderTarget),this.clear(),t instanceof jl?A1.uniforms.depthContrast.value=(t.far-t.near)/1e4:A1.uniforms.depthContrast.value=1,e.overrideMaterial=A1,this.render(e,t),this.setClearColor(e.bgColor,e.bgColor.a),this.setRenderTarget(null),e.overrideMaterial=null,t.layers.enable(0),t.layers.enable(3))}renderSplineScene(e,t,r,i,n){this.setClearColor(e.bgColor,e.bgColor.a),r.penumbraSize.forEach((o,a)=>{Jt.penumbraSize.value[a]=o}),Jt.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Jt.resolution.value.set(this.resolution.x,this.resolution.y):Jt.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),this.overrideNormal!==void 0?(Jt.normalRenderTarget.value=this.overrideNormal,Jt.normalRenderTargetDepth.value=oD):e.needsNormal()&&(this.createNormalRenderTarget(),Jt.normalRenderTarget.value=this.normalRenderTarget.texture,Jt.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(e,t));let s=!1;if(this.overrideTransmission!==void 0)Jt.transmissionRenderTarget.value=this.overrideTransmission,Jt.transmissionRenderTargetDepth.value=oD,this.pipeline.setTransmissionPassEnabled(!1);else{let o=e.needsTransmission();o&&(this.transmissionRenderTarget===void 0&&(s=!0),this.createTransmissionRenderTarget(),Jt.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Jt.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(o)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=n,this.pipeline.scene=e,this.pipeline.camera=t,s&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==e.postprocessing&&this.pipeline.updatePostprocessing(e.postprocessing),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),this.pipeline.render()}dispose(){var e,t,r,i,n;super.dispose(),this.pipeline.dispose(),(e=this.transmissionRenderTarget)==null||e.dispose(),(t=this.transmissionDepthTarget)==null||t.dispose(),(r=this.normalRenderTarget)==null||r.dispose(),(n=(i=this.normalRenderTarget)==null?void 0:i.depthTexture)==null||n.dispose()}},Hpe=class{constructor(e,t={}){this.sharedAssets=new $z(e.shared,t),this.scene=new Qhe(e.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.dispose()}},Vpe=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function Wpe(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function Y1(e){return e==="SubdivObject"||e==="NonParametric"?e:"Mesh"}function jpe(e,t){let r={};return e.traverseEntity(i=>{var l;if(i.type!=="Mesh"||!("material"in i)||!i.visible||!(i instanceof $i)||Array.isArray(i.material)||i&&i.interaction&&i.interaction.states.length>0)return;let n=i.parent;for(;n;){if(n instanceof $i&&n.interaction&&n.interaction.states.length>1)return;n=n.parent}let s=i.material.uuid,o=t.shared.materials[s];if(o){if(!Is.isMergable(o))return}else{let c=(l=t.scene.objects.get(i.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!Is.isMergable(c.material))return;s=Is.getHash(c.material)}}r[s]||(r[s]={});let a=r[s][Y1(i.objectType)];if(a){if(a.push(i),i.cloner)for(let c of i.cloner.children)a.push(c)}else if(r[s][Y1(i.objectType)]=[i],i.cloner)for(let c of i.cloner.children)r[s][Y1(i.objectType)].push(c)}),r}function Gpe(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(i=>{let n=i.length;n>t&&(t=n)})}),t}function Ype(e,t){let r=jpe(t,e),i=Gpe(r),n=new Array(i),s=0,o=new Array(i),a=0,l=new Array(i),c=0,h=new Array(i),u=0;for(let d of Object.values(r))for(let f of Object.values(d)){if(a=0,c=0,f.forEach(p=>{p instanceof $i&&(o[a++]=p.geometry.clone(),l[c++]=p)}),c<2)continue;for(let p=0;p<c;p++)l[p].updateWorldMatrix(!0,!1),o[p].applyMatrix4(l[p].matrixWorld),l[p].matrixWorld.determinant()<0&&Wpe(o[p]);let m=bw(o.slice(0,a),!1);if(m){let p;switch(f[0].objectType){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),p=new fi(m,l[0].material);break}default:{p=new fi(m,l[0].material);break}}p.castShadow=l[0].castShadow,p.receiveShadow=l[0].receiveShadow,t.add(p);let g=v=>{u=0;for(let y of v)y.children&&g(y.children),y instanceof $i&&(Array.isArray(y.material)||r[y.material.uuid]&&r[y.material.uuid][y.objectType]&&r[y.material.uuid][y.objectType].length>1||(h[u++]=y));for(let y=0;y<u;y++)t.attach(h[y])};for(let v=0;v<c;v++){let y=l[v];g(y.children),n[s++]=y}}}for(let d=0;d<s;d++)n[d].removeFromParent()}var Kpe=new K;function Xpe(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}function qpe(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var Qpe=class{constructor(e,{renderOnDemand:t=!0}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this._skipRender=!1,this.renderOnDemand=!0,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=r=>{var i,n,s,o;!this._renderer||(this._rafId=requestAnimationFrame(this.render),this.time=r,this.dt=this.time-this._lastTime,this._lastTime=this.time,(i=this._perfs)==null||i.start(),!(this.renderOnDemand&&this._skipRender)&&(this._skipRender=(s=(n=this._controls)==null?void 0:n.update(this.dt))!=null?s:!0,this._playmode&&!this._playmode.isEnable&&this._playmode.activate(),this._scene&&this._camera&&this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager),(o=this._perfs)==null||o.end()))},this._resize=z4(()=>{var r,i,n;!this._renderer||(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=Kpe.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._viewportMode!==1&&((r=this._frameView)==null||r.updateViewport()),this._camera&&((i=this._frameView)==null||i.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&this._viewportMode===1&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),(n=this._playmode)==null||n.resize(),this.requestRender())},10),this.canvas=e,this.renderOnDemand=t,window.location.search.includes("perfs")&&(this._perfs=new Vpe({x:10,y:10})),aae(e)}async load(e,t){Xpe(e);let r=await(await fetch(e,t)).arrayBuffer();await this.start(r)}async start(e,{interactive:t=!0}={}){var n;if(this.disposed)return;let r=await Vue(e);aP(r)&&await wue(),qpe(r)&&await gce(),this._playmode&&this._playmode.deactivate(),this._controls&&this._controls.dispose(),(n=this._scene)==null||n.dispose();let i=new Hpe(r);if(this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let s=performance.now();Ype(r,i.scene);let o=performance.now();console.log("Merged geometries in ",o-s," ms")}if(aP(r)&&this._scene.traverse(s=>{Er(s)&&s.recomputeBoolean()}),this._sharedAssetsManager.setOnImageLoad(()=>{this.requestRender()}),she(r.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new Upe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this.requestRender),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=r.scene.environment.ambientLight.softShadows?D_:gO,fue(r.scene.environment.ambientLight.softShadowQuality)),this._frameView)this._frameView.setCamera(this._camera);else{let s=Object.values(r.frames)[0];if(s.preset==="fullscreen"){this._viewportMode=1;let{width:o,height:a}=window.getComputedStyle(this.canvas);this.canvas.parentElement&&(o==="300px"||o==="auto")?(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"):this._viewportWidth=this.canvas.clientWidth,this.canvas.parentElement&&(a==="150px"||a==="auto")?(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%"):this._viewportHeight=this.canvas.clientHeight}else this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`;this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new lhe(this._renderer,this._camera,new K(this._viewportWidth,this._viewportHeight),new K(window.innerWidth,window.innerHeight))}if(t&&(this._scene.updateMatrixWorld(!0),this._controls=new ufe(r,this._scene,this._renderer,this.requestRender,!0),this._playmode=new ahe(this._renderer,this._scene,this._camera,r.scene.publish.stopRaycast,r.scene.publish.preventScroll,this)),this._resize(),!this._resizeObserver&&this.canvas.parentElement){let s=!0;this._resizeObserver=new ResizeObserver(()=>{if(s){s=!1;return}this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._resize()}),this._resizeObserver.observe(this.canvas.parentElement)}this._rafId===void 0?this.render(performance.now()):this.requestRender()}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getSplineEvents(){var e;return(e=this._playmode)==null?void 0:e.splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){var r;(r=this._renderer)==null||r.domElement.addEventListener(e,t)}removeEventListener(e,t){var r;(r=this._renderer)==null||r.domElement.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof fB&&((r=this._controls)==null||r.orbitControls.zoomOut(e))}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}dispose(){var e,t,r,i,n,s;this.disposed=!0,(e=this._playmode)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(o=>{xT.unsubscribe(o)}),(i=this._renderer)==null||i.dispose(),(n=this._sharedAssetsManager)==null||n.dispose(),this._resizeObserver&&this._resizeObserver.disconnect(),this.canvas.style.width="",this.canvas.style.height="",(s=this._controls)==null||s.dispose(),lae(this.canvas)}_createProxyObject(e){if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(i){var n;(n=e.interaction)==null||n.emitEvent(i)},emitEventReverse(i){var n;(n=e.interaction)==null||n.emitEventReverse(i)}},r=xT(t,(i,n)=>{var s;typeof e[i]!="object"&&((s=Object.getOwnPropertyDescriptor(e,i))==null?void 0:s.writable)&&(e[i]=n),this.requestRender(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,r),r}},Zpe=Object.defineProperty,vv=Object.getOwnPropertySymbols,vN=Object.prototype.hasOwnProperty,yN=Object.prototype.propertyIsEnumerable,aD=(e,t,r)=>t in e?Zpe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lD=(e,t)=>{for(var r in t||(t={}))vN.call(t,r)&&aD(e,r,t[r]);if(vv)for(var r of vv(t))yN.call(t,r)&&aD(e,r,t[r]);return e},Jpe=(e,t)=>{var r={};for(var i in e)vN.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&vv)for(var i of vv(e))t.indexOf(i)<0&&yN.call(e,i)&&(r[i]=e[i]);return r};function eme(e){return function(t){e.forEach(function(r){typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var xN={exports:{}},b0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tme=me,rme=Symbol.for("react.element"),ime=Symbol.for("react.fragment"),nme=Object.prototype.hasOwnProperty,sme=tme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ome={key:!0,ref:!0,__self:!0,__source:!0};function bN(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)nme.call(t,i)&&!ome.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:rme,type:e,key:s,ref:o,props:n,_owner:sme.current}}b0.Fragment=ime;b0.jsx=bN;b0.jsxs=bN;xN.exports=b0;const ame=xN.exports.jsx,lme=I.exports.forwardRef((e,t)=>{var r=e,{scene:i,style:n,onMouseDown:s,onMouseUp:o,onMouseHover:a,onKeyDown:l,onKeyUp:c,onStart:h,onLookAt:u,onFollow:d,onWheel:f,onLoad:m,renderOnDemand:p=!0}=r,g=Jpe(r,["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","renderOnDemand"]);const v=I.exports.useRef(null),[y,b]=I.exports.useState(!0);return I.exports.useEffect(()=>{b(!0);let x;const A=[{name:"mouseDown",cb:s},{name:"mouseUp",cb:o},{name:"mouseHover",cb:a},{name:"keyDown",cb:l},{name:"keyUp",cb:c},{name:"start",cb:h},{name:"lookAt",cb:u},{name:"follow",cb:d},{name:"scroll",cb:f}];if(v.current){x=new Qpe(v.current,{renderOnDemand:p});async function S(){await x.load(i);for(let _ of A)_.cb&&x.addEventListener(_.name,_.cb);b(!1),m==null||m(x)}S()}return()=>{for(let S of A)S.cb&&x.removeEventListener(S.name,S.cb);x.dispose()}},[i]),ame("canvas",lD({ref:eme([t,v]),style:lD({display:y?"none":"block"},n)},g))}),cme=()=>z("header",{className:"flex w-full justify-center items-center",children:Ne("div",{className:"flex flex-col sm:flex-row w-11/12",children:[Ne("div",{className:"flex flex-col justify-center content-center gap-y-7 w-full sm:w-3/5",children:[z("p",{className:"text-6xl sm:text-7xl italic font-bold",children:"You, Your Cattle & The System"}),z("p",{className:"text-xl sm:text-3xl",children:"Automated cattle certification via NFT"})]}),z("div",{className:"w-full sm:w-2/5 h-96",children:z(lme,{scene:"https://prod.spline.design/3RcuLnlMwt6kZbmt/scene.splinecode"})})]})}),ume=()=>Ne("svg",{className:"",fill:"none",height:"36",viewBox:"0 0 32 32",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[z("rect",{fill:"var(--secondary)",height:"100%",rx:"16",width:"100%"}),z("path",{clipRule:"evenodd",d:"M17.6482 10.1305L15.8785 7.02583L7.02979 22.5499H10.5278L17.6482 10.1305ZM19.8798 14.0457L18.11 17.1983L19.394 19.4511H16.8453L15.1056 22.5499H24.7272L19.8798 14.0457Z",fill:"currentColor",fillRule:"evenodd"})]}),dme=Le("div",{boxSizing:"border-box"}),hme=({children:e})=>z(dme,{css:{maxW:"100%"},children:e}),fme=()=>Ne(gr.Brand,{css:{"@xs":{w:"12%"}},children:[z(ume,{}),z(Kt,{b:!0,color:"inherit",hideIn:"xs",children:"NFarm"})]}),pme=()=>{const e=["Home","About","Team","Pricing","Sign in","Log in"];return z(gr.Collapse,{children:e.map((t,r)=>z(gr.CollapseItem,{activeColor:"success",css:{color:r===e.length-1?"$success":""},children:z(Df,{color:"inherit",css:{minWidth:"100%"},href:"#",children:t})},t))})},mme=()=>Ne(gr.Content,{activeColor:"success",hideIn:"xs",variant:"underline-rounded",children:[z(gr.Link,{href:"#",children:"Home"}),z(gr.Link,{href:"#about",children:"About"}),z(gr.Link,{href:"#team",children:"Team"}),z(gr.Link,{href:"#pricing",children:"Pricing"})]}),gme=()=>Ne($n,{children:[z(gr.Link,{color:"inherit",href:"#",children:"Login"}),z(gr.Item,{children:Ne(Ua,{auto:!0,flat:!0,as:Df,href:"#",color:"success",children:[" ","Sign Up"]})})]}),vme=()=>Ne(li.Menu,{"aria-label":"User menu actions",color:"secondary",onAction:e=>console.log({actionKey:e}),children:[Ne(li.Item,{css:{height:"$18"},children:[z(Kt,{b:!0,color:"inherit",css:{d:"flex"},children:"Signed in as"}),z(Kt,{b:!0,color:"inherit",css:{d:"flex"},children:"zoey@example.com"})]},"profile"),z(li.Item,{withDivider:!0,children:"My Settings"},"settings"),z(li.Item,{children:"Team Settings"},"team_settings"),z(li.Item,{withDivider:!0,children:"Analytics"},"analytics"),z(li.Item,{children:"System"},"system"),z(li.Item,{children:"Configurations"},"configurations"),z(li.Item,{withDivider:!0,children:"Help & Feedback"},"help_and_feedback"),z(li.Item,{withDivider:!0,color:"error",children:"Log Out"},"logout")]}),yme=()=>Ne(li,{placement:"bottom-right",children:[z(gr.Item,{children:z(li.Trigger,{children:z(o_,{bordered:!0,as:"button",color:"secondary",size:"md",src:"https://i.pravatar.cc/150?u=a042581f4e29026704d"})})}),z(vme,{})]}),xme=({isLog:e=!1})=>e?z(yme,{}):z(gme,{}),bme=()=>z(hme,{children:Ne(gr,{isBordered:!0,variant:"floating",css:{mb:25},children:[z(gr.Toggle,{showIn:"xs"}),z(fme,{}),z(mme,{}),z(gr.Content,{css:{"@xs":{w:"12%",jc:"flex-end"}},hideIn:"xs",children:z(xme,{isLog:!1})}),z(pme,{})]})}),wme=()=>Ne(yr,{css:{maxWidth:"18rem",alignItems:"center",border:"none"},children:[z(yr.Header,{css:{justifyContent:"center",bg:"#147452"},children:z(Kt,{h4:!0,b:!0,children:"Document authentification"})}),z(yr.Divider,{}),Ne(yr.Body,{css:{py:"$10"},children:[Ne(bl,{justify:"center",css:{alignItems:"center"},children:[z(Kt,{h2:!0,css:{color:"#147452"},children:"$ 1"}),z(Sn,{x:.5}),z(Kt,{h4:!0,children:"/Document"})]}),z(Sn,{y:.8}),z(Kt,{h5:!0,children:"Document certification"}),z(Sn,{y:.5}),z(Kt,{h5:!0,children:"Ease of document upload"}),z(Sn,{y:.5}),z(Kt,{h5:!0,children:"Automated process"}),z(Sn,{y:.5}),z(Kt,{h5:!0,children:"Not third parties"})]}),z(yr.Divider,{}),z(yr.Footer,{children:z(bl,{justify:"center",children:z(Ua,{size:"md",css:{bg:"#147452"},children:"Get Started"})})})]}),Sme=()=>Ne(yr,{css:{mw:"18rem",alignItems:"center",border:"none"},children:[z(yr.Header,{css:{justifyContent:"center"},children:z(Kt,{h4:!0,b:!0,children:"Authentified cow NFTzation"})}),z(yr.Divider,{}),Ne(yr.Body,{css:{py:"$10"},children:[Ne(bl,{justify:"center",css:{alignItems:"center"},children:[z(Kt,{h2:!0,children:"$ 10"}),z(Sn,{x:.5}),z(Kt,{h4:!0,children:"/Cow"})]}),z(Sn,{y:.8}),z(Kt,{h5:!0,children:"NFT Certification system"}),z(Sn,{y:.5}),z(Kt,{h5:!0,children:"Importation of quality meat"}),z(Sn,{y:.5}),z(Kt,{h5:!0,children:"Traceability via Blockchain"}),z(Sn,{y:.5}),z(Kt,{h5:!0,children:"Not third parties"})]}),z(yr.Divider,{}),z(yr.Footer,{children:z(bl,{justify:"center",children:z(Ua,{size:"md",css:{bg:"#147452"},children:"Get Started"})})})]}),_me=()=>z($n,{children:z("section",{className:"flex w-full justify-center content-center mt-10 sm:mt-20",children:Ne("div",{className:"flex flex-col w-11/12 justify-center content-center",children:[Ne("div",{className:"flex flex-col justify-center items-center",children:[z("p",{className:"line text-xl sm:text-2xl font-semibold",children:"Pricing"}),z("p",{className:"text-3xl text-center sm:text-5xl font-bold",children:"Our Business Model"})]}),Ne("div",{className:"flex flex-col justify-center items-center gap-5 mt-5 sm:flex-row sm:gap-x-10",children:[z(Sme,{}),z(wme,{})]})]})})}),Ame=({name:e,role:t,social:r,img:i})=>Ne(yr,{css:{w:"100%",h:"250px",maxWidth:"16rem",border:"none"},children:[z(yr.Body,{css:{p:0},children:z(yr.Image,{src:i,objectFit:"cover",width:"100%",height:"100%",alt:"Relaxing app background"})}),z(yr.Footer,{isBlurred:!0,css:{position:"absolute",bgBlur:"#0f111466",borderTop:"$borderWeights$light solid $gray800",bottom:0,zIndex:1},children:Ne(bl,{children:[z(oy,{children:z(bl,{children:Ne(oy,{children:[z(Kt,{color:"#d1d1d1",size:15,css:{fontWeight:"bold"},children:e}),z(Kt,{color:"#d1d1d1",size:13,children:t})]})})}),z(oy,{children:z(bl,{justify:"flex-end",children:z(Ua,{flat:!0,auto:!0,rounded:!0,css:{color:"#fff",bg:"#115F43"},href:"#",size:"sm",children:z(gR.Link,{color:"inherit",href:r,css:{fontWeight:"bold"},children:"LINKEDIN"})})})})]})})]}),Mme=()=>z($n,{children:z("section",{className:"flex w-full justify-center content-center mt-10 sm:mt-20",children:Ne("div",{className:"flex flex-col w-11/12 justify-center content-center",children:[Ne("div",{className:"flex flex-col justify-center items-center",children:[z("p",{className:"line text-xl sm:text-2xl font-semibold",children:"TEAM"}),z("p",{className:"text-3xl text-center sm:text-5xl font-bold",children:"Our great team"})]}),z("div",{className:"flex flex-wrap justify-center items-center gap-5 mt-5",children:rW.map(({id:e,name:t,role:r,social:i,img:n})=>z(Ame,{name:t,role:r,social:i,img:n},e))})]})})}),Eme=()=>Ne($n,{children:[z(bme,{}),z(cme,{}),z(sW,{}),z(_me,{}),z(Mme,{}),z(aW,{}),z(oG,{})]}),Cme=()=>z($n,{children:z(Eme,{})});K1.createRoot(document.getElementById("root")).render(z(RH,{theme:eW,children:z(Cme,{})}))});export default Tme();
